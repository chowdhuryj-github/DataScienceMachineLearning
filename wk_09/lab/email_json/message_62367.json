{"category": "ham", "to_address": "Mark Glines <mark@glines.org>", "from_address": "bob@fourtheye.org", "subject": "Re: [perl #43481] t/examples/shootout.t (shootout_16.pir) fails on gentoo/x86", "body": "On Tue, Jul 03, 2007 at 01:28:30PM -0700, Mark Glines wrote:\n> On Tue, 3 Jul 2007 10:18:59 -0700\n> Mark Glines  wrote:\n> > So, while I agree that the \"crashing on NULL rep\" bug needs to be\n> > fixed, I've been mostly focusing on staring at regexdna.pir, hoping\n> > to find a fix for the \"passing a NULL rep in the first place\" bug.\n> \n> The behavior of this testcase changed last Thursday, in svn r19441.\n> Patrick's patch to compilers/pge/PGE/Exp.pir seems to be the cause.\n> \n> ------------------------------------------------------------------------\n> r19441 | pmichaud | 2007-06-28 19:14:11 -0700 (Thu, 28 Jun 2007) | 3 lines\n> \n> [pge]:\n> * Remove find_type from PGE/Exp.pir (w/test).\n> \n> \n> The test case is:\n> \n> $ ./parrot examples/shootout/regexdna.pir  \n> \n> Output before the patch (r19440):\n> \n> agggtaaa|tttaccct 0\n> [cgt]gggtaaa|tttaccc[acg] 3\n> a[act]ggtaaa|tttacc[agt]t 9\n> ag[act]gtaaa|tttac[agt]ct 8\n> agg[act]taaa|ttta[agt]cct 10\n> aggg[acg]aaa|ttt[cgt]ccct 3\n> agggt[cgt]aa|tt[acg]accct 4\n> agggta[cgt]a|t[acg]taccct 3\n> agggtaa[cgt]|[acg]ttaccct 5\n> \n> 101745\n> 100000\n> 133640\n> \n> \n> Output after the patch:\n> \n> agggtaaa|tttaccct 0\n> [cgt]gggtaaa|tttaccc[acg] 3\n> a[act]ggtaaa|tttacc[agt]t 9\n> ag[act]gtaaa|tttac[agt]ct 8\n> agg[act]taaa|ttta[agt]cct 10\n> aggg[acg]aaa|ttt[cgt]ccct 3\n> agggt[cgt]aa|tt[acg]accct 4\n> agggta[cgt]a|t[acg]taccct 3\n> agggtaa[cgt]|[acg]ttaccct 5\n> Segmentation fault\n> \n> This is on gentoo linux x86.  I ran Configure.pl with no arguments.\n> Apparently this test passes on chromatic's linux box, and on particle's\n> win32 box, but fails on my gentoo box and particle's ubuntu box.  So its\n> a bit sporadic.\n> \n> I'll post another followup to this ticket if I can find a fix.\n> \n> Mark\n\nI just tried this test case with a fresh parrot from svn on a sparc machine\nrunning gentoo and got the first set of output. \n\nI don't know if this helps or confuses.\n\nBob\n\n"}