{"category": "ham", "to_address": "\"Stefan (metze) Metzmacher\" <metze@samba.org>", "from_address": "Frank Gruman <fgatwork@verizon.net>", "subject": "EPOLL_CTL_ADD failed (Bad file descriptor) in TP5", "body": "Metze,\n\nThanks for the feedback...\n\nOn Tue, 2007-06-12 at 13:51 +0200, Stefan (metze) Metzmacher wrote:\n\n\n> > The second scenario is where I am stuck - Samba 4 PDC with Win2k3 BDC.\n> > I currently receive the following error when I try to create the server\n> > as a BDC:\n> > \n> >         Failed to modify SPNs on\n> >         cn=brokenbox,cn=computers,dc=myhome,dc=int: kludge_acl_change:\n> >         attempted database modify not permitted. User MYHOME\\BROKENBOX$\n> >         is not SYSTEM or an administrator\n> \n> As stated in the release notes we have only very primitive access\n> checking...And that doesn't use ntSecurityDescriptor's yet...\n\nThanks.  I didn't catch that out of the README other than for swat and\nregistry.\n\n\n> \n> >         EPOLL_CTL_ADD failed (Bad file descriptor) - falling back to\n> >         select()\n> >         EPOLL_CTL_ADD failed (Bad file descriptor) - falling back to\n> >         select()\n> >         EPOLL_CTL_ADD failed (Bad file descriptor) - falling back to\n> >         select()\n> \n> I wonder why this happens, does this also happen with other network\n> operations?\n\nYes - this happens with just about every network operation (login,\nfolder access, file access, etc).  \n\n\n        toybox:~ # smbd -i\n        smbd version 4.0.0tp5-SVN-build-23403 started.\n        Copyright Andrew Tridgell and the Samba Team 1992-2007\n        smbd: using 'standard' process model\n        EPOLL_CTL_ADD failed (Bad file descriptor) - falling back to\n        select()\n        EPOLL_CTL_ADD failed (Bad file descriptor) - falling back to\n        select()\n        EPOLL_CTL_ADD failed (Bad file descriptor) - falling back to\n        select()\n        EPOLL_CTL_ADD failed (Bad file descriptor) - falling back to\n        select()\n        EPOLL_CTL_ADD failed (Bad file descriptor) - falling back to\n        select()\n        EPOLL_CTL_ADD failed (Bad file descriptor) - falling back to\n        select()\n        EPOLL_CTL_ADD failed (Bad file descriptor) - falling back to\n        select()\n        EPOLL_CTL_ADD failed (Bad file descriptor) - falling back to\n        select()\n        make_connection: couldn't find service SYSVOL\n        EPOLL_CTL_ADD failed (Bad file descriptor) - falling back to\n        select()\n        EPOLL_CTL_ADD failed (Bad file descriptor) - falling back to\n        select()\n        \n        \n\nStrange thing today - the system can't find SYSVOL.  The only thing I've\ndone is power down and restart the box since yesterday.  I've even\nbounced the SMBD processes.  I may blow out and rebuild again.\n\n\n> \n> > The Windows server name is brokenbox and begins this process as a\n> > non-domain server.  My Samba4 PDC is running on openSUSE 10.3 Alpha 4+.\n> > I am logging in with the domain administrator account.  After the\n> > installation has failed the server then belongs to the domain, but not\n> > as a BDC.  If I start the wizard again, it performs the same steps and\n> > fails with the same error.\n> \n> Samba4 doesn't support replicating *to* windows servers yet,\n> it only has a very limited support for replication *from* windows servers...\n> \n> If you would solve the above problem with the changing of the SPN\n> you would come to the next problem very fast. There's a lot more missing\n> until a windows DC would run in a domain that was created using samba4.\n\nI'd love to try to help get Samba 4 up and out the door.  I am an open\nsource evangelist at work and, other than that, a relatively strong\n\"anything but MS\" advocate  I'm a bit of a hack at coding (I'm the\nsystem administrator of my lab at work, but do SQL database work\nprimarily).  I can test and even understand most of the code when I read\nit.  But unfortunately I am not much of a writer.  If you point me in a\ngeneral direction in the code I will go and figure out what it is doing\nand make sense of it there to resolve my problems and possibly shine\nsome light on solutions.\n\nRegards,\nFrank\n\n"}