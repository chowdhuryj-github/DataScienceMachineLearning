{"category": "ham", "to_address": "samba-technical@lists.samba.org", "from_address": "\"Stefan (metze) Metzmacher\" <metze@samba.org>", "subject": "Re: svn commit: samba r22422 - in branches/SAMBA_4_0/source/lib/tdb:\n .\tcommon include tools", "body": "-----BEGIN PGP SIGNED MESSAGE-----\nHash: SHA1\n\ntridge@samba.org schrieb:\n> Author: tridge\n> Date: 2007-04-21 07:25:40 +0000 (Sat, 21 Apr 2007)\n> New Revision: 22422\n> \n> WebSVN: http://websvn.samba.org/cgi-bin/viewcvs.cgi?view=rev&root=samba&rev=22422\n> \n> Log:\n> \n> merged tdb changes from ctdb\n> \n> Modified:\n>    branches/SAMBA_4_0/source/lib/tdb/autogen.sh\n>    branches/SAMBA_4_0/source/lib/tdb/common/lock.c\n>    branches/SAMBA_4_0/source/lib/tdb/common/tdb_private.h\n>    branches/SAMBA_4_0/source/lib/tdb/include/tdb.h\n>    branches/SAMBA_4_0/source/lib/tdb/tools/tdbtest.c\n> \n> \n> Changeset:\n> Modified: branches/SAMBA_4_0/source/lib/tdb/autogen.sh\n> ===================================================================\n> --- branches/SAMBA_4_0/source/lib/tdb/autogen.sh\t2007-04-21 07:23:42 UTC (rev 22421)\n> +++ branches/SAMBA_4_0/source/lib/tdb/autogen.sh\t2007-04-21 07:25:40 UTC (rev 22422)\n> @@ -3,7 +3,7 @@\n>  rm -rf autom4te.cache\n>  rm -f configure config.h.in\n>  \n> -IPATHS=\"-I libreplace -I lib/replace -I ../libreplace -I ../replace\"\n> +IPATHS=\"-I libreplace -I lib/replace -I ../libreplace -I ../replace -I ../lib/replace\"\n\nIs that really needed? I just removed that from samba3.\n\n> Modified: branches/SAMBA_4_0/source/lib/tdb/common/tdb_private.h\n> ===================================================================\n> --- branches/SAMBA_4_0/source/lib/tdb/common/tdb_private.h\t2007-04-21 07:23:42 UTC (rev 22421)\n> +++ branches/SAMBA_4_0/source/lib/tdb/common/tdb_private.h\t2007-04-21 07:25:40 UTC (rev 22422)\n> @@ -206,7 +206,7 @@\n>  \t\t\t   struct list_struct *rec);\n>  void tdb_io_init(struct tdb_context *tdb);\n>  int tdb_expand(struct tdb_context *tdb, tdb_off_t size);\n> -int tdb_rec_free_read(struct tdb_context *tdb, tdb_off_t off,\n> -\t\t      struct list_struct *rec);\n> +int rec_free_read(struct tdb_context *tdb, tdb_off_t off,\n> +\t\t  struct list_struct *rec);\n\nthis seems wrong, you need to sync the samba4 changes to ctdb !\nI just renamed the function in samba 3 and 4\n\nplease also sync to samba3 when you have fixed the above problems,\nthanks!\n\nmetze\n-----BEGIN PGP SIGNATURE-----\nVersion: GnuPG v1.4.5 (GNU/Linux)\nComment: Using GnuPG with SUSE - http://enigmail.mozdev.org\n\niD8DBQFGKcBYm70gjA5TCD8RAswuAJ9G3CI9PWHohz7gIiLMDwNsYpNPBgCg0G5P\n1o/q51Llbwz37aMizKnp9Vk=\n=0m3Y\n-----END PGP SIGNATURE-----\n\n"}