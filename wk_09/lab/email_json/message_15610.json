{"category": "ham", "to_address": "r-help@stat.math.ethz.ch", "from_address": "clayton.springer@novartis.com", "subject": "Re: [R] NA and NaN randomForest", "body": "Hi Andy,\n\nIt worked for classification, but not regression. For example:\n\n> iris1 <- iris[-(1:5),]\n> iris2 <- iris[(1:5),]\n> iris2[1,3] <- NA\n> iris2[3,1] <- NA\n> iris_sum <- sum (iris$Sepal.Length + iris$Sepa.Width + iris$Petal.Length \n+ iris$Petal.Width)\n> iris_sum1 <-  iris_sum[-(1:5)]\n> iris_sum2 <-  iris_sum[(1:5)]\n> iris_sum.rf <- randomForest (iris_sum1 ~ ., iris1[,c(1:4)])\n>   predict (iris_sum.rf, iris2[-5])\n>   predict (iris_sum.rf, iris2[-5])\n[1]  9.556591  9.589573 10.104155\n\n# Just to be clear I was hoping for behavior like the linear model has:\n\n> iris_sum.lm <- lm (iris_sum1 ~ ., iris1[,c(1:4)])\n>  predict (iris_sum.lm, iris2[-5])\n   1    2    3    4    5 \n  NA  9.5   NA  9.4 10.2 \n\nIn the event that this is not available in the regression part of \nrandomForest, is a work around possible?\n\n\n\nthanks,\n\nClayton\n\n\n\n\n\"Liaw, Andy\"  \n04/25/2007 09:59 AM\n\nTo\nclayton.springer@novartis.com, r-help@stat.math.ethz.ch\ncc\n\nSubject\nRE: [R] NA and NaN randomForest\n\n\n\n\n\n\nHi Clayton,\n\nIf you use the formula interface, then it should do what you want:\n\nR> library(randomForest)\nrandomForest 4.5-18 \nType rfNews() to see new features/changes/bug fixes.\nR> iris1 <- iris[-(1:5),]\nR> iris2 <- iris[1:5,]\nR> iris2[1, 3] <- NA\nR> iris2[3, 1] <- NA\nR> iris.rf <- randomForest(Species ~ ., iris1)\nR> predict(iris.rf, iris2[-5])\n[1]    setosa    setosa setosa\nLevels: setosa versicolor virginica\n\nThe problem, of course, is that the formula interface is not suitable\nfor data with large number of variables.  I'll look into doing the same\nthing in the default method.\n\nAndy\n\n\nFrom: clayton.springer@novartis.com\n> \n> Dear R-help,\n> \n> This is about randomForest's handling of NA and NaNs in test set data.\n> Currently, if the test set data contains an NA or NaN then \n> predict.randomForest will skip that row in the output.\n> \n> I would like to change that behavior to outputting an NA.\n> \n> Can this be done with flags to randomForest?\n> If not can some sort of wrapper be built to put the NAs back in?\n> \n> thanks,\n> \n> Clayton\n> _________________________\n> \n> CONFIDENTIALITY NOTICE\\ \\ The information contained in this \n> ...{{dropped}}\n> \n> ______________________________________________\n> R-help@stat.math.ethz.ch mailing list\n> https://stat.ethz.ch/mailman/listinfo/r-help\n> PLEASE do read the posting guide \n> http://www.R-project.org/posting-guide.html\n> and provide commented, minimal, self-contained, reproducible code.\n> \n> \n> \n\n\n------------------------------------------------------------------------------\nNotice:  This e-mail message, together with any attachments,...{{dropped}}\n\n______________________________________________\nR-help@stat.math.ethz.ch mailing list\nhttps://stat.ethz.ch/mailman/listinfo/r-help\nPLEASE do read the posting guide http://www.R-project.org/posting-guide.html\nand provide commented, minimal, self-contained, reproducible code.\n\n"}