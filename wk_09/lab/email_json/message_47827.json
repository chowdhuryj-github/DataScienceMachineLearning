{"category": "ham", "to_address": "Prof Brian Ripley <ripley@stats.ox.ac.uk>", "from_address": "\"Rainer M. Krug\" <Rainer@krugs.de>", "subject": "Re: [R] make sample() faster", "body": "Thanks for the info - so the solution would (likely) be to draw several \nsamples and use these whenever I need a new one.\n\ntHANKS, i'LL TRY IT OUT,\n\nrAINER\n\nP.S: somebody said once that the caps-lock key is the most useless key \non the keyboard and he is right...\n\n\nProf Brian Ripley wrote:\n> I think the problem is not sample (which is written in C), but that you \n> are calling it with size=1.  Taking one sample with probabilities from a \n> large discrete distribution is necessarily slow, but you can take a large \n> sample for little more cost.\n> \n> On Thu, 14 Jun 2007, Rainer M. Krug wrote:\n> \n>> Hi\n>>\n>> I have a simulation which is relatively slow. I used Rprofile() and\n>> identified the calls to sample() as the culprit is sample():\n>>\n>>> summaryRprof(\"Documents/PostDoc/Aloe_Pillansii/R/create.out\")\n>> $by.self\n>>                   self.time self.pct total.time total.pct\n>> \"sample\"               1.30     44.2       1.52      51.7\n>> \"ifelse\"               0.46     15.6       2.44      83.0\n>> .\n>> .\n>> .\n>>\n>> I am using sample() as follow:\n>> result <- sample(\n>>                  x=d.growth.seedling$growth,\n>>                  size=1,\n>>                  prob=d.growth.seedling$p,\n>>                  replace\n>>                  )\n>>\n>> d.growth.seedling$p and d.growth.seedling$growth have a length of 1024\n>> and are calculated initially by using density().\n>>\n>> My question: is there any way to make this faster, i.e. replace sample()\n>> as I use it with another faster algorithm (if necessary implemented in C)?\n>>\n>> Thanks in advance,\n>>\n>> Rainer\n>>\n>>\n> \n\n\n-- \nNEW EMAIL ADDRESS AND ADDRESS:\n\nRainer.Krug@uct.ac.za\n\nRKrug@sun.ac.za WILL BE DISCONTINUED END OF MARCH\n\nRainer M. Krug, Dipl. Phys. (Germany), MSc Conservation\nBiology (UCT)\n\nLeslie Hill Institute for Plant Conservation\nUniversity of Cape Town\nRondebosch 7701\nSouth Africa\n\nFax:\t\t+27 - (0)86 516 2782\nFax:\t\t+27 - (0)21 650 2440 (w)\nCell:\t\t+27 - (0)83 9479 042\n\nSkype:\t\tRMkrug\n\nemail:\tRainer.Krug@uct.ac.za\n       \tRainer@krugs.de\n\n______________________________________________\nR-help@stat.math.ethz.ch mailing list\nhttps://stat.ethz.ch/mailman/listinfo/r-help\nPLEASE do read the posting guide http://www.R-project.org/posting-guide.html\nand provide commented, minimal, self-contained, reproducible code.\n\n"}