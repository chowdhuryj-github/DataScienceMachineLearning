{"category": "ham", "to_address": "parrot-porters@perl.org", "from_address": "chromatic <chromatic@wgz.org>", "subject": "Re: [svn:parrot] r19551 - trunk/src/pmc", "body": "On Tuesday 03 July 2007 04:46:49 jonathan@cvs.perl.org wrote:\n\n> Fix clone v-table method of NCI PMC so that flags are retained.\n>\n> Modified: trunk/src/pmc/nci.pmc\n> ===========================================================================\n>=== --- trunk/src/pmc/nci.pmc\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0(original)\n> +++ trunk/src/pmc/nci.pmc\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0Tue Jul \u00a03 04:46:48 2007\n> @@ -120,7 +120,7 @@\n> \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 * ManagedStruct or Buffer?\n> \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 */\n> \u00a0 \u00a0 \u00a0 \u00a0 \u00a0PMC_data(ret) = PMC_data(SELF);\n> - \u00a0 \u00a0 \u00a0 \u00a0PObj_get_FLAGS(ret) |= (PObj_get_FLAGS(SELF) & 0x3);\n> + \u00a0 \u00a0 \u00a0 \u00a0PObj_get_FLAGS(ret) |= (PObj_get_FLAGS(SELF) & 0x7);\n> \u00a0 \u00a0 \u00a0 \u00a0 \u00a0return ret;\n> \u00a0 \u00a0 \u00a0}\n\n0x7 is nice and short, but SOME_FLAG | ANOTHER_FLAG | YET_MORE_FLAG is \nprobably easier to maintain.\n\n-- c\n\n"}