{"category": "ham", "to_address": "R R-help <r-help@stat.math.ethz.ch>", "from_address": "John Kane <jrkrideau@yahoo.ca>", "subject": "[R] Fwd: RE: Character coerced to factor and I cannot get it back", "body": "\n--- John Kane  wrote:\n\n> Date: Thu, 19 Apr 2007 15:50:36 -0400 (EDT)\n> From: John Kane \n> Subject: RE: [R] Character coerced to factor and I\n> cannot get it back\n> To: Jorge Cornejo-Donoso \n> \n> \n> --- Jorge Cornejo-Donoso \n> wrote:\n> \n> > Maybe you could made something like:\n> > Id <- floor(number/10000)\n> > \n> > On this way you would  get out the last 4 numbers\n> of\n> > the \"number\"\n> \n> Very nice.  You made me realise that dd$cc %/% 10000\n> will do the same thing too and both work without all\n> the character handling. \n> \n> I still wish I knew why as.character still gives me\n> a\n> factor. \n> \n> Thanks\n> \n> \n> \n> > \n> > -----Mensaje original-----\n> > De: r-help-bounces@stat.math.ethz.ch\n> > [mailto:r-help-bounces@stat.math.ethz.ch] En\n> nombre\n> > de John Kane\n> > Enviado el: Jueves, 19 de Abril de 2007 11:39\n> > Para: R R-help\n> > Asunto: [R] Character coerced to factor and I\n> cannot\n> > get it back\n> > \n> > Something probably obivous but I don't see it.  I\n> > needed to find the first 1\n> > or two digits of some 5 and\n> > 6 digit numbers since they identified research\n> sites\n> > while the rest of the\n> > number was the plot id.  \n> > \n> > I converted the numbers to characters, got the\n> first\n> > 1 or  2 characters as\n> > appropriate and went to add the new vector to the\n> > data.frame.  For some\n> > reason R is insisting on turning the character\n> > variables into factors.  This\n> > is alright since they really are factors anyway\n> but\n> > I took me a while to\n> > realise what was happening.  \n> > \n> > For convenience, because of the way I had defined\n> > some other variables it\n> > tried to coerce the variable back into character\n> and\n> > I cannot.  \n> > \n> > Can anyone explain what I am doing wrong or where\n> I\n> > am misunderstanding what\n> > R is doing and why?\n> > \n> > Thanks\n> > \n> > EXAMPLE\n> > \n> > mylist  <- list(dd  <- data.frame(aa <- 1:4, bb <-\n> > letters[1:4],\n> >          cc <- c(12345, 123456, 45678, 456789)),\n> >           vec  <-  letters[1:10]  )\n> > \n> > #Get data frame from list\n> > dd <-  mylist[[1]]\n> > attach(dd)\n> > \n> > # Convert numeric id to character id\n> > id  <-  as.character(dd[,3]) ; id\n> > # get site designators (first one or two\n> characters\n> > of id\n> > \n> > st  <- substring(id, 1,nchar(id)-4 ) ; st typeof\n> > (st)  ; class(st)\n> > \n> > dd1  <-  cbind(dd, st)\n> >     names(dd1)  <- c(\"aa\",\"bb\",\"cc\",\"st\")\n> >     dd1\n> >     typeof(dd1$st); class(dd1$st)\n> >     \n> > dd2  <-  cbind(dd, as.character(st))\n> >     names(dd2)  <- c(\"aa\",\"bb\",\"cc\",\"st\")\n> >     dd2\n> >     typeof(dd2$st) ;   class(dd2$st)\n> > \n> > ______________________________________________\n> > R-help@stat.math.ethz.ch mailing list\n> > https://stat.ethz.ch/mailman/listinfo/r-help\n> > PLEASE do read the posting guide\n> > http://www.R-project.org/posting-guide.html\n> > and provide commented, minimal, self-contained,\n> > reproducible code.\n> > \n> > __________ Informacisn de NOD32, revisisn 2205\n> > (20070419) __________\n> > \n> > Este mensaje ha sido analizado con  NOD32\n> antivirus\n> > system\n> > http://www.nod32.com\n> > \n> > \n> > \n> \n> \n> \n>       Ask a question on any topic and get answers\n> from real people. Go to Yahoo! Answers and share\n\n>\n\n______________________________________________\nR-help@stat.math.ethz.ch mailing list\nhttps://stat.ethz.ch/mailman/listinfo/r-help\nPLEASE do read the posting guide http://www.R-project.org/posting-guide.html\nand provide commented, minimal, self-contained, reproducible code.\n\n"}