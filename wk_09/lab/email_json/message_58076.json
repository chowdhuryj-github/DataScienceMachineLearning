{"category": "ham", "to_address": "samba-cvs@samba.org", "from_address": "gd@samba.org", "subject": "svn commit: samba r23647 - in branches: SAMBA_3_0/source/libads\n\tSAMBA_3_0_26/source/libads", "body": "Author: gd\nDate: 2007-06-29 08:58:03 +0000 (Fri, 29 Jun 2007)\nNew Revision: 23647\n\nWebSVN: http://websvn.samba.org/cgi-bin/viewcvs.cgi?view=rev&root=samba&rev=23647\n\nLog:\nUse smb_krb5_open_keytab() in smbd as well.\n\nGuenther\n\nModified:\n   branches/SAMBA_3_0/source/libads/kerberos_verify.c\n   branches/SAMBA_3_0_26/source/libads/kerberos_verify.c\n\n\nChangeset:\nModified: branches/SAMBA_3_0/source/libads/kerberos_verify.c\n===================================================================\n--- branches/SAMBA_3_0/source/libads/kerberos_verify.c\t2007-06-29 08:56:35 UTC (rev 23646)\n+++ branches/SAMBA_3_0/source/libads/kerberos_verify.c\t2007-06-29 08:58:03 UTC (rev 23647)\n@@ -81,9 +81,9 @@\n \tZERO_STRUCT(kt_entry);\n \tZERO_STRUCT(kt_cursor);\n \n-\tret = krb5_kt_default(context, &keytab);\n+\tret = smb_krb5_open_keytab(context, NULL, False, &keytab);\n \tif (ret) {\n-\t\tDEBUG(1, (\"ads_keytab_verify_ticket: krb5_kt_default failed (%s)\\n\", error_message(ret)));\n+\t\tDEBUG(1, (\"ads_keytab_verify_ticket: smb_krb5_open_keytab failed (%s)\\n\", error_message(ret)));\n \t\tgoto out;\n \t}\n \n\nModified: branches/SAMBA_3_0_26/source/libads/kerberos_verify.c\n===================================================================\n--- branches/SAMBA_3_0_26/source/libads/kerberos_verify.c\t2007-06-29 08:56:35 UTC (rev 23646)\n+++ branches/SAMBA_3_0_26/source/libads/kerberos_verify.c\t2007-06-29 08:58:03 UTC (rev 23647)\n@@ -81,9 +81,9 @@\n \tZERO_STRUCT(kt_entry);\n \tZERO_STRUCT(kt_cursor);\n \n-\tret = krb5_kt_default(context, &keytab);\n+\tret = smb_krb5_open_keytab(context, NULL, False, &keytab);\n \tif (ret) {\n-\t\tDEBUG(1, (\"ads_keytab_verify_ticket: krb5_kt_default failed (%s)\\n\", error_message(ret)));\n+\t\tDEBUG(1, (\"ads_keytab_verify_ticket: smb_krb5_open_keytab failed (%s)\\n\", error_message(ret)));\n \t\tgoto out;\n \t}\n \n\n"}