{"category": "ham", "to_address": "Jason Barnhart <jasoncbarnhart@msn.com>,\n   R R-help <r-help@stat.math.ethz.ch>", "from_address": "John Kane <jrkrideau@yahoo.ca>", "subject": "Re: [R] character to time problem", "body": "\n--- Jason Barnhart  wrote:\n\n> Hi John,\n> \n> a) The NA appears because '30/02/1995' is not a\n> valid date.\n> \n>     > strptime('30/02/1995' , \"%d/%m/%Y\")\n>     [1] NA\n>\n\nI knew we should never have moved to the Gregorian\nCalender!  \n\nThanks.  I accidently made up the date but this means\nthat I have some invalid dates in the file. Not a\nproblem now I know what's happening. And our contract\nsays someone else gets to fix them :)\n\n> b) dates which has the following classes uses\n> sort.POSIXlt which in \n> turns sets na.last to NA.  ?order details how NA's\n> are handled in \n> ordering data via na.last.\n> \n>     > class(dates)\n>     [1] \"POSIXt\"  \"POSIXlt\"\n> \n>     > methods(sort)\n>     [1] sort.default sort.POSIXlt\n> \n>     > sort.POSIXlt\n>     function (x, decreasing = FALSE, na.last = NA,\n> ...)\n>     x[order(as.POSIXct(x), na.last = na.last,\n> decreasing = \n> decreasing)]\n>     \n> \n> After resetting the Feb. date the code works.\n> \n> HTH,\n> -jason\n> \n\nSo it does.  \n\nI had not thought to look at the sort.POSIXlt\nfunction.  I don't quite understand what na.last is\ndoing and don't seem to see the documentation.  Is it\nsorting the NA's to the last place(s) in the vector\nand then dropping them? \n\nThanks again\n\n> ----- Original Message ----- \n> From: \"John Kane\" \n> To: \"R R-help\" \n> Sent: Thursday, June 07, 2007 2:17 PM\n> Subject: [R] character to time problem\n> \n> \n> >I am trying to clean up some dates and I am clearly\n> > doing something wrong.  I have laid out an example\n> > that seems to show what is happening with the\n> \"real\"\n> > data.  The  coding is lousy but it looks like it\n> > should have worked.\n> >\n> > Can anyone suggest a) why I am getting that NA\n> > appearing after the strptime() command and b) why\n> the\n> > NA is disappearing in the sort()? It happens with\n> > na.rm=TRUE  and na.rm=FALSE\n> > -------------------------------------------------\n> > aa  <- data.frame( c(\"12/05/2001\", \" \",\n> \"30/02/1995\",\n> > NA, \"14/02/2007\", \"M\" ) )\n> > names(aa)  <- \"times\"\n> > aa[is.na(aa)] <- \"M\"\n> > aa[aa==\" \"]  <- \"M\"\n> > bb <- unlist(subset(aa, aa[,1] !=\"M\"))\n> > dates <- strptime(bb, \"%d/%m/%Y\")\n> > dates\n> > sort(dates)\n> > --------------------------------------------------\n> >\n> > Session Info\n> > R version 2.4.1 (2006-12-18)\n> > i386-pc-mingw32\n> >\n> > locale:\n> > LC_COLLATE=English_Canada.1252;\n> > LC_CTYPE=English_Canada.1252;\n> > LC_MONETARY=English_Canada.1252;\n> > LC_NUMERIC=C;LC_TIME=English_Canada.1252\n> >\n> > attached base packages:\n> > [1] \"stats\"     \"graphics\"  \"grDevices\" \"utils\"\n> > \"datasets\"  \"methods\"   \"base\"\n> >\n> > other attached packages:\n> >  gdata   Hmisc\n> > \"2.3.1\" \"3.3-2\"\n> >\n> > (Yes I know I'm out of date but I don't like\n> > upgrading just as I am finishing a project)\n> >\n> > Thanks\n> >\n> > ______________________________________________\n> > R-help@stat.math.ethz.ch mailing list\n> > https://stat.ethz.ch/mailman/listinfo/r-help\n> > PLEASE do read the posting guide \n> > http://www.R-project.org/posting-guide.html\n> > and provide commented, minimal, self-contained,\n> reproducible code.\n> > \n> \n>\n\n______________________________________________\nR-help@stat.math.ethz.ch mailing list\nhttps://stat.ethz.ch/mailman/listinfo/r-help\nPLEASE do read the posting guide http://www.R-project.org/posting-guide.html\nand provide commented, minimal, self-contained, reproducible code.\n\n"}