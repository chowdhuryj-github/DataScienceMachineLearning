{"category": "ham", "to_address": "samba-technical@lists.samba.org", "from_address": "Jeff Coffler <jeff-list-sambatech@taltos.com>", "subject": "Problems with dfs and Samba 3.0.24-5/3.0.25-7 - please help", "body": "Hi,\n\nI'm running Fedora Core 6, and I'm having a heck of a problem with \nSamba.  I'm pretty sure it's related to the dfs code.  I noticed this \ncode change from Jeremy:\n\n    http://lists.samba.org/archive/samba-cvs/2007-March/075343.html\n\nIt seemed like this was related based on my level 3 logs.  But I \nverified that 3.0.25-7 has that fix, and yet my problem continues.\n\nMy server is just a simple standalone server with user authentication.  \nWhen I connect from Windows XP, I get:\n\n    % net use x: \\\\miffy\\jeff\n    System error 3 has occurred.\n\n    The system cannot find the path specified.\n\nSamba 3.0.24-1 (downloaded as part of FC6) works perfectly.  The above \nworks without an issue.\nSamba 3.0.24-5 (downloaded as an update of FC6) is broken.\nIf I download 3.0.25-7 from Samba.org for FC6, it's broken.\n\nIn the logs for the broken cases (log level 3), the point where I \n*think* things go sour is here:\n\n[2007/05/16 14:27:29, 3] smbd/msdfs.c:get_referred_path(624)\n  get_referred_path: |jeff| in dfs path \\miffy\\jeff is not a dfs root.\n[2007/05/16 14:27:29, 3] smbd/error.c:error_packet_set(106)\n  error packet at smbd/trans2.c(6184) cmd=50 (SMBtrans2) NT_STATUS_NOT_FOUND\n\nIt goes downhill from there.  But I'm not certain, as I don't have a lot \nof experience looking at Samba logs.\n\nI have log level 3's of the working case (3.0.24-1) and the broken cases:\n\nThe working case:\n    https://webdav.taltos.com/jcoffler-lap.log.good\n\nThe broken case (3.0.24-5):\n    https://webdav.taltos.com/jcoffler-lap.log.bad.24-5\n\nAnd the broken case (3.0.25-7):\n    https://webdav.taltos.com/jcoffler-lap.log.bad\n\nI'm at a loss of where to go from here.  Can anyone offer any advice?  \nIt seems like there was some sort of code change here that broke things, \nbut my usage case seems so simple, I just don't get it.\n\nIs there something I need to add to my configuration in later Samba \nversions?  I did take one of the new smb.conf files and reapplied my \nchanges; this didn't seem to help.\n\nAny help would be tremendously appreciated ... thanks!  If I can provide \nfurther details to help pin this down (log level 10's or whatever), \nplease let me know.  I'd be happy to provide whatever you guys need.\n\n    -- Jeff\n\n"}