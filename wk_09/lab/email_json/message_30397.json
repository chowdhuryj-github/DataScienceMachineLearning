{"category": "ham", "to_address": "marc_schwartz@comcast.net", "from_address": "\"Deepayan Sarkar\" <deepayan.sarkar@gmail.com>", "subject": "Re: [R] stacked barplot with positive and negatvie values", "body": "On 5/15/07, Marc Schwartz  wrote:\n> On Tue, 2007-05-15 at 17:54 +0200, Paul Magdon wrote:\n> > Hello I'm trying to create a barplot with a couple of stacked positive\n> > values and with one negative value for each group.\n> >\n> > example:\n> >\n> > trees<-c(20,30,10)\n> > shrubs<-c(12,23,9)\n> > veg<-c(2,3,4)\n> > soil<-c(-100,-123,-89)\n> > example1<-t(cbind(trees,shrubs,veg))\n> >\n> > barplot(example1)\n> >\n> > #this works so far\n> >\n> > #but now:\n> >\n> > example2<-t(cbind(trees,shrubs,veg,soil))\n> > barplot(example2)\n> >\n> > This shows no more stacked bars. But I want to keep the bars like\n> > example1 and just add the negative values which have another scale\n> > downwards.\n> > So I tried:\n> >\n> > barplot(example1,axes=F)\n> > barplot(example2[\"soil\",],add=T,axes=F)\n> > axis(side=2,at=c(-150,-100,-50,0,10,20,30))\n> >\n> > But I still does not work for the axis??\n> >\n> > I would appriciate any kind of hint\n> > Greetings\n> > Paul Magdon\n>\n>\n> How about this:\n>\n>   # Set up a 2 x 1 plot\n>   # See ?par\n>   par(mfrow = c(2, 1))\n>\n>   #adjust the axis side 1 margin to 0\n>   # See ?par\n>   par(mar = c(0, 4, 4, 2))\n>\n>   # Do the plot of the positive values\n>   # define the y limits and set the y axis type to 'i'\n>   # See ?par for 'xaxs' and 'yaxs'\n>   barplot(example2[-4, ], yaxs = \"i\", ylim = c(0, 60), las = 2)\n>\n>   # Set the axis side 4 margin to 0\n>   # so that there is no gap\n>   par(mar = c(5, 4, 0, 2))\n>\n>   # Now do the negative values, using the same logic\n>   barplot(example2[4, ], yaxs = \"i\", ylim = c(-125, 0), las = 2)\n\nAnd another alternative is to use the lattice package, e.g.\n\nbarchart(Freq ~ Var2,\n         data = as.data.frame.table(example2),\n         groups = Var1, stack = TRUE, auto.key = TRUE)\n\n-Deepayan\n\n______________________________________________\nR-help@stat.math.ethz.ch mailing list\nhttps://stat.ethz.ch/mailman/listinfo/r-help\nPLEASE do read the posting guide http://www.R-project.org/posting-guide.html\nand provide commented, minimal, self-contained, reproducible code.\n\n"}