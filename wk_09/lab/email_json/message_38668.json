{"category": "ham", "to_address": "samba-cvs@samba.org", "from_address": "tridge@samba.org", "subject": "Rev 398: - nice messages while waiting for tcp services to come up\n\tin http://samba.org/~tridge/ctdb", "body": "------------------------------------------------------------\nrevno: 398\nrevision-id: tridge@samba.org-20070530023703-lziyfdmz2n34w03i\nparent: tridge@samba.org-20070530022758-26c4o6952lel86gt\ncommitter: Andrew Tridgell \nbranch nick: tridge\ntimestamp: Wed 2007-05-30 12:37:03 +1000\nmessage:\n  - nice messages while waiting for tcp services to come up\n  - added more comments to sysconfig file\nmodified:\n  packaging/RHEL/setup/ctdb.sysconfig ctdb.sysconfig-20070527204758-biuh7znabuwan3zn-7\n  tools/events                   events-20070529030121-04fjh63cxfh8v1pj-1\n=== modified file 'packaging/RHEL/setup/ctdb.sysconfig'\n--- a/packaging/RHEL/setup/ctdb.sysconfig\t2007-05-29 06:02:02 +0000\n+++ b/packaging/RHEL/setup/ctdb.sysconfig\t2007-05-30 02:37:03 +0000\n@@ -1,15 +1,52 @@\n-# Options to ctdbd\n-\n+# Options to ctdbd. This is read by /etc/init.d/ctdb\n+\n+# the NODES file must be specified or ctdb won't start\n+# it should contain a list of IPs that ctdb will use\n+# it must be exactly the same on all cluster nodes\n+# defaults to /etc/ctdb/nodes\n+# NODES=/etc/ctdb/nodes\n+\n+# the directory to put the local ctdb database files in\n+# defaults to /var/ctdb\n # DBDIR=/var/ctdb\n-# NODES=/etc/ctdb/nodes\n+\n+# the script to run when ctdb needs to ask the OS for help,\n+# such as when a IP address needs to be taken or released\n+# defaults to /etc/ctdb/events\n # EVENT_SCRIPT=/etc/ctdb/events\n+\n+# the location of the local ctdb socket\n+# defaults to /tmp/ctdb.socket\n # CTDB_SOCKET=/tmp/ctdb.socket\n+\n+# what transport to use. Only tcp is currently supported\n+# defaults to tcp\n # TRANSPORT=\"tcp\"\n+\n+# should ctdb do IP takeover? If it should, then specify a file\n+# containing the list of public IP addresses that ctdb will manage\n+# Note that these IPs must be different from those in $NODES above\n+# there is no default\n # PUBLIC_ADDRESSES=/etc/ctdb/public_addresses\n+\n+# when doing IP takeover you also must specify what network interface\n+# to use for the public addresses\n+# there is no default\n # PUBLIC_INTERFACE=eth0\n+\n+# where to log messages\n+# the default is /var/log/log.ctdb\n # LOGFILE=/var/log/log.ctdb\n+\n+# what debug level to run at. Higher means more verbose\n+# the default is 0\n # DEBUGLEVEL=0\n \n-# any other options\n+# use this to specify any local tcp ports to wait on before starting\n+# ctdb. Use 445 and 139 for Samba\n+# the default is not to wait for any local services\n+# CTDB_WAIT_TCP_PORTS=\"445 139\"\n+\n+# any other options you might want. Run ctdbd --help for a list\n # CTDB_OPTIONS=\n \n\n=== modified file 'tools/events'\n--- a/tools/events\t2007-05-30 02:27:58 +0000\n+++ b/tools/events\t2007-05-30 02:37:03 +0000\n@@ -11,6 +11,7 @@\n \t# wait for local services to come up\n \t[ -z \"$CTDB_WAIT_TCP_PORTS\" ] || {\n \t  all_ok=0\n+\t  echo \"Waiting for tcp services on $CTDB_WAIT_TCP_PORTS to come up\"\n \t  while [ $all_ok -eq 0 ]; do\n \t  \t  all_ok=1\n \t  \t  for p in $CTDB_WAIT_TCP_PORTS; do\n@@ -18,7 +19,7 @@\n \t\t  done\n \t\t  [ $all_ok -eq 1 ] || sleep 1\n           done\n-\t  echo \"Local services on $CTDB_WAIT_TCP_PORTS are up\"\n+\t  echo \"Local tcp services on $CTDB_WAIT_TCP_PORTS are up\"\n \t}\n \texit 0;\t\n \t;;\n\n"}