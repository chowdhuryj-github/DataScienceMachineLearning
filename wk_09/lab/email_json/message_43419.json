{"category": "ham", "to_address": "samba-cvs@samba.org", "from_address": "vlendec@samba.org", "subject": "svn commit: samba r23362 - in branches: SAMBA_3_0/source/lib\n\tSAMBA_3_0_26/source/lib", "body": "Author: vlendec\nDate: 2007-06-06 07:46:38 +0000 (Wed, 06 Jun 2007)\nNew Revision: 23362\n\nWebSVN: http://websvn.samba.org/cgi-bin/viewcvs.cgi?view=rev&root=samba&rev=23362\n\nLog:\nRespect \"use mmap\" in tdb_wrap_open(). Tridge, you might want to merge\nthis in your tree.\n\nModified:\n   branches/SAMBA_3_0/source/lib/util_tdb.c\n   branches/SAMBA_3_0_26/source/lib/util_tdb.c\n\n\nChangeset:\nModified: branches/SAMBA_3_0/source/lib/util_tdb.c\n===================================================================\n--- branches/SAMBA_3_0/source/lib/util_tdb.c\t2007-06-06 01:36:15 UTC (rev 23361)\n+++ branches/SAMBA_3_0/source/lib/util_tdb.c\t2007-06-06 07:46:38 UTC (rev 23362)\n@@ -906,6 +906,9 @@\n \tstruct tdb_logging_context log_ctx;\n \tlog_ctx.log_fn = tdb_wrap_log;\n \n+\tif (!lp_use_mmap())\n+\t\ttdb_flags |= TDB_NOMMAP;\n+\n \tfor (w=tdb_list;w;w=w->next) {\n \t\tif (strcmp(name, w->name) == 0) {\n \t\t\t/*\n\nModified: branches/SAMBA_3_0_26/source/lib/util_tdb.c\n===================================================================\n--- branches/SAMBA_3_0_26/source/lib/util_tdb.c\t2007-06-06 01:36:15 UTC (rev 23361)\n+++ branches/SAMBA_3_0_26/source/lib/util_tdb.c\t2007-06-06 07:46:38 UTC (rev 23362)\n@@ -906,6 +906,9 @@\n \tstruct tdb_logging_context log_ctx;\n \tlog_ctx.log_fn = tdb_wrap_log;\n \n+\tif (!lp_use_mmap())\n+\t\ttdb_flags |= TDB_NOMMAP;\n+\n \tfor (w=tdb_list;w;w=w->next) {\n \t\tif (strcmp(name, w->name) == 0) {\n \t\t\t/*\n\n"}