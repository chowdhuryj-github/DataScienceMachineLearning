{"category": "ham", "to_address": "\"kyle.halberstam@gmail.com\" <kyle.halberstam@gmail.com>", "from_address": "\"Chas Owens\" <chas.owens@gmail.com>", "subject": "Re: Check if file is being modified by another process", "body": "On 7/4/07, kyle.halberstam@gmail.com  wrote:\nsnip\n> What's the most efficient way of checking this? - one way is perhaps\n> inifinite loop checking mmtime until it is stable for a certain amount\n> of time?? I am not sure.\nsnip\n\nYep, that is about it.  I usually use size rather than mtime (mtime\nchecking can be broken by someone monkeying with the system time, it\nhappens).  Something like\n\nmy @same;\nuntil (@same == $seconds_the_same) {\n    my $size = (stat file)[7];\n    if ($same[0] == $size) {\n        push @same, $size;\n    } else {\n        @same = ($size);\n    }\n    sleep 1;\n}\n\nor\n\nmy $old;\nmy $same = 0;\nuntil ($same == $seconds_the_same) {\n    my $size = (stat file)[7];\n    if ($old == $size) {\n        $same++;\n    } else {\n        ($old, $same) = ($size, 0);\n    }\n    sleep 1;\n}\n\n-- \nTo unsubscribe, e-mail: beginners-unsubscribe@perl.org\nFor additional commands, e-mail: beginners-help@perl.org\nhttp://learn.perl.org/\n\n\n"}