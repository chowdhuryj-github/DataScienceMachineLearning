{"category": "ham", "to_address": "r-help@stat.math.ethz.ch", "from_address": "\"Economics Guy\" <economics.guy@gmail.com>", "subject": "[R] generating a new variable based on results of a by command", "body": "I have a matrix with a set of variables one of which is a factor. Using by()\nI have calculated something about each group (say the sum). Now I want to\ncreate a new variable in the original matrix that contains the results of\nthe by() for each observation that is in the corresponding group.\n\nFor example I have:\n\n---------\n\na <-c(1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16)\n\nb <-c(7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22)\n\ne <-c(\"A\",\"B\",\"C\",\"D\",\"E\",\"F\",\"A\",\"B\",\"C\",\"D\",\"E\",\"F\",\"D\",\"E\",\"F\",\"A\")\n\nf <-data.frame(e,a,b)\n\n# Calculate sum by group\n\nsums <- by(f, e, function(x) sum(x$b))\n\n-----------\n\nNow I would like to assign each observation in f a new variable based on the\nresults of the by(). I converted sums into a matrix and then tried using\nmatch() and ifthen() but could not get it to work.\n\nThanks,\n\nEG\n\n\t[[alternative HTML version deleted]]\n\n______________________________________________\nR-help@stat.math.ethz.ch mailing list\nhttps://stat.ethz.ch/mailman/listinfo/r-help\nPLEASE do read the posting guide http://www.R-project.org/posting-guide.html\nand provide commented, minimal, self-contained, reproducible code.\n\n"}