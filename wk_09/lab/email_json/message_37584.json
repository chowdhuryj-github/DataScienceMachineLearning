{"category": "ham", "to_address": "beginners@perl.org, perl-beginners@moderators.isc.org", "from_address": "Paul Lalli <mritty@gmail.com>", "subject": "Re: accesing a hash of an array of hashes", "body": "On May 27, 4:37 pm, pdcoo...@blueyonder.co.uk (Pauld) wrote:\n> thanks for the help - im looking up hash slices -\n\nperldoc perldata\n\n     Entire arrays (and slices of arrays and hashes) are denoted\n     by '@', which works much like the word \"these\" or \"those\"\n     does in English, in that it indicates multiple values are\n     expected.\n\n         @days               # ($days[0], $days[1],... $days[n])\n         @days[3,4,5]        # same as ($days[3],$days[4],$days[5])\n         @days{'a','c'}      # same as ($days{'a'},$days{'c'})\n\n> but id like to get\n> something that works and then i can add new ideas etc so im going to\n> leave it as it for the time being.\n>\n> Data::Dumper has helped sort out where  an error is coming\n>\n> #!/usr/bin/perl -w\n> use strict;\n> use warnings;\n> open O, \"<$file\" or die \"could not open $file - $!\";\n> undef $/;\n> my $whole_file = ;\n> close O;\n\n\n> $whole_file=~s/\\x0D\\x0A1/\\x0D\\x0AABC1/g;my @rows=split(/\\x0D\\x0AABC/,\n> $whole_file);\n> ######splits in the correct place after looking at the CSV file with a\n> hex editor - ugly but it seems to work ATM######\n\nabsolutely no idea what's making you think any of this is necessary.\n\n> my %hash;\n> my  @headings=split(/,/,$rows[0])\n>  for (my $j=1;$j<=2;$j++)\n> {\n> my @columns = $csv->fields ();\n>\n> for (my $i=0;$i<=$#columns;$i++)  {$hash{$headings[$i]}=$columns[$i];}\n>\n> print Dumper(%hash);\n> push (@{$Hofdates{$hash{OPDATE}}},\\%hash);\n> print Dumper (%Hofdates);\n>\n> }\n>\n\n\n\n> so its  pushing the second hash onto the array  and overwriting the\n> 1st\n\nNo kidding.  Did  you read my reply?  That's exactly what I said would\nhappen.  Declare your hash in the smallest scope possible - inside the\n(first) for loop.  That way, when each iteration of the for loop\nstarts, you get a brand new hash rather than reusing the same one.\n\nIf you don't understand what that means - move the 'my %hash;' line\nfrom where it is to just before the 'my @columns = $csv->fields ();'\nline.\n\nPaul Lalli\n\n\n-- \nTo unsubscribe, e-mail: beginners-unsubscribe@perl.org\nFor additional commands, e-mail: beginners-help@perl.org\nhttp://learn.perl.org/\n\n\n"}