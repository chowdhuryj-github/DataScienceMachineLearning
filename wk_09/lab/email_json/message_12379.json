{"category": "ham", "to_address": "samba-cvs@samba.org", "from_address": "jerry@samba.org", "subject": "svn commit: samba r22448 - in branches/SAMBA_3_0_RELEASE: .\n\tsource/nsswitch", "body": "Author: jerry\nDate: 2007-04-22 10:10:29 +0000 (Sun, 22 Apr 2007)\nNew Revision: 22448\n\nWebSVN: http://websvn.samba.org/cgi-bin/viewcvs.cgi?view=rev&root=samba&rev=22448\n\nLog:\ngrab idmap compat patch from 3.0.25 (will recur 3.0.25rc2 for this)\nModified:\n   branches/SAMBA_3_0_RELEASE/WHATSNEW.txt\n   branches/SAMBA_3_0_RELEASE/source/nsswitch/idmap.c\n\n\nChangeset:\nModified: branches/SAMBA_3_0_RELEASE/WHATSNEW.txt\n===================================================================\n--- branches/SAMBA_3_0_RELEASE/WHATSNEW.txt\t2007-04-22 10:09:41 UTC (rev 22447)\n+++ branches/SAMBA_3_0_RELEASE/WHATSNEW.txt\t2007-04-22 10:10:29 UTC (rev 22448)\n@@ -163,6 +163,11 @@\n     * Allow profiling level to be set on startup.\n \n \n+o   Ying Li \n+    * Use the default tdb idmap plugin when neither idmap domains\n+      nor idmap backend have been defined.\n+\n+\n o   Jason Mader \n     * Various compile warning fixes. \n     * Initial patch set for strptime() in libreplace.\n\nModified: branches/SAMBA_3_0_RELEASE/source/nsswitch/idmap.c\n===================================================================\n--- branches/SAMBA_3_0_RELEASE/source/nsswitch/idmap.c\t2007-04-22 10:09:41 UTC (rev 22447)\n+++ branches/SAMBA_3_0_RELEASE/source/nsswitch/idmap.c\t2007-04-22 10:10:29 UTC (rev 22448)\n@@ -322,8 +322,16 @@\n \t\t\t*p = '\\0';\t\t\t\n \t\t\tcompat_params = p + 1;\n \t\t}\n+\t} else {\n+\t\t/* Back compatible: without idmap domains and explicit\n+\t\t   idmap backend.  Taking default idmap backend: tdb */\n+\t\t\n+\t\tcompat = 1;\n+\t\tcompat_backend = talloc_strdup( idmap_ctx, \"tdb\");\n+\t\tcompat_params = compat_backend;\n \t}\n \n+\n \tif ( ! dom_list) {\n \t\tdom_list = idmap_default_domain;\n \t}\n\n"}