{"category": "ham", "to_address": "samba-cvs@samba.org", "from_address": "idra@samba.org", "subject": "svn commit: samba r22771 - in branches: SAMBA_3_0/source/nsswitch\n\tSAMBA_3_0_25/source/nsswitch SAMBA_3_0_26/source/nsswitch", "body": "Author: idra\nDate: 2007-05-09 21:38:41 +0000 (Wed, 09 May 2007)\nNew Revision: 22771\n\nWebSVN: http://websvn.samba.org/cgi-bin/viewcvs.cgi?view=rev&root=samba&rev=22771\n\nLog:\n\nOne liner fix for idmap_ldap\nFixes the strange behavior we were seeing about idmap_ldap creating\na new connection for each query.\n\nJerry we need this in for 3.0.25\n\n\nModified:\n   branches/SAMBA_3_0/source/nsswitch/idmap_ldap.c\n   branches/SAMBA_3_0_25/source/nsswitch/idmap_ldap.c\n   branches/SAMBA_3_0_26/source/nsswitch/idmap_ldap.c\n\n\nChangeset:\nModified: branches/SAMBA_3_0/source/nsswitch/idmap_ldap.c\n===================================================================\n--- branches/SAMBA_3_0/source/nsswitch/idmap_ldap.c\t2007-05-09 16:26:43 UTC (rev 22770)\n+++ branches/SAMBA_3_0/source/nsswitch/idmap_ldap.c\t2007-05-09 21:38:41 UTC (rev 22771)\n@@ -821,6 +821,7 @@\n \ttalloc_set_destructor(ctx, idmap_ldap_close_destructor);\n \n \tdom->private_data = ctx;\n+\tdom->initialized = True;\n \n \ttalloc_free(config_option);\n \treturn NT_STATUS_OK;\n\nModified: branches/SAMBA_3_0_25/source/nsswitch/idmap_ldap.c\n===================================================================\n--- branches/SAMBA_3_0_25/source/nsswitch/idmap_ldap.c\t2007-05-09 16:26:43 UTC (rev 22770)\n+++ branches/SAMBA_3_0_25/source/nsswitch/idmap_ldap.c\t2007-05-09 21:38:41 UTC (rev 22771)\n@@ -818,6 +818,7 @@\n \ttalloc_set_destructor(ctx, idmap_ldap_close_destructor);\n \n \tdom->private_data = ctx;\n+\tdom->initialized = True;\n \n \ttalloc_free(config_option);\n \treturn NT_STATUS_OK;\n\nModified: branches/SAMBA_3_0_26/source/nsswitch/idmap_ldap.c\n===================================================================\n--- branches/SAMBA_3_0_26/source/nsswitch/idmap_ldap.c\t2007-05-09 16:26:43 UTC (rev 22770)\n+++ branches/SAMBA_3_0_26/source/nsswitch/idmap_ldap.c\t2007-05-09 21:38:41 UTC (rev 22771)\n@@ -818,6 +818,7 @@\n \ttalloc_set_destructor(ctx, idmap_ldap_close_destructor);\n \n \tdom->private_data = ctx;\n+\tdom->initialized = True;\n \n \ttalloc_free(config_option);\n \treturn NT_STATUS_OK;\n\n"}