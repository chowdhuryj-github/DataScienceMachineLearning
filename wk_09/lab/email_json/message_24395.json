{"category": "ham", "to_address": "debian-laptop@lists.debian.org", "from_address": "bob@proulx.com (Bob Proulx)", "subject": "Re: Swap encryption (via LUKS) and Hibernation (disk suspend)", "body": "q9u3x4c02@sneakemail.com wrote:\n> All this was done via the Debian installer, correct?\n\nYes.\n\n> Also, you opted to have just one real partition, where everything is\n> encrypted even /boot? So I take it you use a USB dongle to boot your\n> system initially?\n\nFor both lvm and for encrypted filesystems /boot needs to be a normal\nfilesystem.  The initrd will load all of the needed modules and so\nneeds to be accessible without those modules.  Make it ext2.  I made\nmine just a little bit bigger than really required so that I could use\nit as a \"drop box\" for things like the ipw2200 firmware blobs without\nneeding to mount the encrypted partition.\n\nAlso, if the installer tries to load lilo instead of grub then you\nhave tripped into a case where \"something is wrong\" (IMNHO, since I am\na convert to grub and no longer desire lilo).  Start again and check\neverything.  When things are right the d-i will install grub.\n\n> Or did you mean having /boot as normal and / as encrypted via LUKS then LVM2 \n> on top of /, with logical partitions within the LVM2. To put it visually:\n> /boot (normal)\n> /root (LUKS) -> LVM2 -> multiple parition\n\nI should walk through the install procedure once on a test machine and\ncapture the process.  But I am sure someone will have already done\nthat.  Once you have been through it then it all makes sense.  But the\nfirst time through can be a little confusing.\n\n  hda1 /boot primary partition (ext2)\n  hda5_crypt encrypted partition (logical is my preference, but no matter)\n    vg0 lvm2 volume group\n      vg0-root logical partition, root of filesystem (\u0001ext3 in my case)\n      vg0-swap logical partition, swap\n\nBob\n\n\n"}