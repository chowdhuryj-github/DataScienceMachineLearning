{"category": "ham", "to_address": "samba-cvs@samba.org", "from_address": "jra@samba.org", "subject": "svn commit: samba r22350 - in branches/SAMBA_3_0/source/smbd: .", "body": "Author: jra\nDate: 2007-04-19 00:35:18 +0000 (Thu, 19 Apr 2007)\nNew Revision: 22350\n\nWebSVN: http://websvn.samba.org/cgi-bin/viewcvs.cgi?view=rev&root=samba&rev=22350\n\nLog:\nAdd some helpful debug messages.\nJeremy.\n\nModified:\n   branches/SAMBA_3_0/source/smbd/seal.c\n\n\nChangeset:\nModified: branches/SAMBA_3_0/source/smbd/seal.c\n===================================================================\n--- branches/SAMBA_3_0/source/smbd/seal.c\t2007-04-18 22:34:23 UTC (rev 22349)\n+++ branches/SAMBA_3_0/source/smbd/seal.c\t2007-04-19 00:35:18 UTC (rev 22350)\n@@ -119,13 +119,16 @@\n \t\t\t\t&nt_hostbased_service,\n \t\t\t\t&srv_name);\n \n+\tDEBUG(10,(\"get_srv_gss_creds: imported name %s\\n\",\n+\t\thost_princ_s ));\n+\n \tif (ret != GSS_S_COMPLETE) {\n \t\tSAFE_FREE(host_princ_s);\n \t\treturn map_nt_error_from_gss(ret, min);\n \t}\n \n \tret = gss_acquire_cred(&min,\n-\t\t\t\t&srv_name,\n+\t\t\t\tsrv_name,\n \t\t\t\tGSS_C_INDEFINITE,\n \t\t\t\tGSS_C_NULL_OID_SET,\n \t\t\t\tcred_type,\n@@ -134,6 +137,9 @@\n \t\t\t\tNULL);\n \n \tif (ret != GSS_S_COMPLETE) {\n+\t\tADS_STATUS adss = ADS_ERROR_GSS(ret, min);\n+\t\tDEBUG(10,(\"get_srv_gss_creds: gss_acquire_cred failed with %s\\n\",\n+\t\t\tads_errstr(adss)));\n \t\tstatus = map_nt_error_from_gss(ret, min);\n \t}\n \n\n"}