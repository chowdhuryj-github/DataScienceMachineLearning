{"category": "ham", "to_address": "samba-cvs@samba.org", "from_address": "vlendec@samba.org", "subject": "svn commit: samba r22691 - in branches: SAMBA_3_0/source/smbd\n\tSAMBA_3_0_26/source/smbd", "body": "Author: vlendec\nDate: 2007-05-05 21:13:40 +0000 (Sat, 05 May 2007)\nNew Revision: 22691\n\nWebSVN: http://websvn.samba.org/cgi-bin/viewcvs.cgi?view=rev&root=samba&rev=22691\n\nLog:\nFix a 64-bit warning and a const const discard warning\n\nModified:\n   branches/SAMBA_3_0/source/smbd/dmapi.c\n   branches/SAMBA_3_0/source/smbd/process.c\n   branches/SAMBA_3_0_26/source/smbd/dmapi.c\n   branches/SAMBA_3_0_26/source/smbd/process.c\n\n\nChangeset:\nModified: branches/SAMBA_3_0/source/smbd/dmapi.c\n===================================================================\n--- branches/SAMBA_3_0/source/smbd/dmapi.c\t2007-05-05 20:51:58 UTC (rev 22690)\n+++ branches/SAMBA_3_0/source/smbd/dmapi.c\t2007-05-05 21:13:40 UTC (rev 22691)\n@@ -152,7 +152,8 @@\n \n \t/* No session already defined. */\n \tif (dmapi_session == DM_NO_SESSION) {\n-\t\terr = dm_create_session(DM_NO_SESSION, DMAPI_SESSION_NAME,\n+\t\terr = dm_create_session(DM_NO_SESSION,\n+\t\t\t\t\tCONST_DISCARD(DMAPI_SESSION_NAME),\n \t\t\t\t\t&dmapi_session);\n \t\tif (err < 0) {\n \t\t\tDEBUGADD(DMAPI_TRACE,\n\nModified: branches/SAMBA_3_0/source/smbd/process.c\n===================================================================\n--- branches/SAMBA_3_0/source/smbd/process.c\t2007-05-05 20:51:58 UTC (rev 22690)\n+++ branches/SAMBA_3_0/source/smbd/process.c\t2007-05-05 21:13:40 UTC (rev 22691)\n@@ -1211,10 +1211,9 @@\n \t/* work out the new size for the in buffer. */\n \tnew_size = size - (inbuf2 - inbuf);\n \tif (new_size < 0) {\n-\t\tDEBUG(0,(\"chain_reply: chain packet size incorrect (orig size = %d, \"\n-\t\t\t\"offset = %d)\\n\",\n-\t\t\tsize,\n-\t\t\t(inbuf2 - inbuf) ));\n+\t\tDEBUG(0,(\"chain_reply: chain packet size incorrect \"\n+\t\t\t \"(orig size = %d, offset = %d)\\n\",\n+\t\t\t size, (int)(inbuf2 - inbuf) ));\n \t\texit_server_cleanly(\"Bad chained packet\");\n \t\treturn(-1);\n \t}\n\nModified: branches/SAMBA_3_0_26/source/smbd/dmapi.c\n===================================================================\n--- branches/SAMBA_3_0_26/source/smbd/dmapi.c\t2007-05-05 20:51:58 UTC (rev 22690)\n+++ branches/SAMBA_3_0_26/source/smbd/dmapi.c\t2007-05-05 21:13:40 UTC (rev 22691)\n@@ -152,7 +152,8 @@\n \n \t/* No session already defined. */\n \tif (dmapi_session == DM_NO_SESSION) {\n-\t\terr = dm_create_session(DM_NO_SESSION, DMAPI_SESSION_NAME,\n+\t\terr = dm_create_session(DM_NO_SESSION,\n+\t\t\t\t\tCONST_DISCARD(DMAPI_SESSION_NAME),\n \t\t\t\t\t&dmapi_session);\n \t\tif (err < 0) {\n \t\t\tDEBUGADD(DMAPI_TRACE,\n\nModified: branches/SAMBA_3_0_26/source/smbd/process.c\n===================================================================\n--- branches/SAMBA_3_0_26/source/smbd/process.c\t2007-05-05 20:51:58 UTC (rev 22690)\n+++ branches/SAMBA_3_0_26/source/smbd/process.c\t2007-05-05 21:13:40 UTC (rev 22691)\n@@ -1202,10 +1202,9 @@\n \t/* work out the new size for the in buffer. */\n \tnew_size = size - (inbuf2 - inbuf);\n \tif (new_size < 0) {\n-\t\tDEBUG(0,(\"chain_reply: chain packet size incorrect (orig size = %d, \"\n-\t\t\t\"offset = %d)\\n\",\n-\t\t\tsize,\n-\t\t\t(inbuf2 - inbuf) ));\n+\t\tDEBUG(0,(\"chain_reply: chain packet size incorrect \"\n+\t\t\t \"(orig size = %d, offset = %d)\\n\",\n+\t\t\t size, (int)(inbuf2 - inbuf) ));\n \t\texit_server_cleanly(\"Bad chained packet\");\n \t\treturn(-1);\n \t}\n\n"}