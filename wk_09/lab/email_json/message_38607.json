{"category": "ham", "to_address": "\"jessica.gervais@tudor.lu\" <jessica.gervais@tudor.lu>", "from_address": "\"jim holtman\" <jholtman@gmail.com>", "subject": "Re: [R] aggregation of a zoo object", "body": "Here is one way of doing it:\n\n> time<-c(\"2000-10-03 14:00:00\",\"2000-10-03 14:10:00\",\"2000-10-03 14:20:00\",\n+ \"2000-10-03 15:30:00\",\"2000-10-03 16:40:00\",\"2000-10-03 16:50:00\",\n+ \"2000-10-03 17:00:00\",\"2000-10-03 17:10:00\",\"2000-10-03 17:20:00\",\n+ \"2000-10-03 18:30:00\",\"2000-10-04 14:00:00\",\"2000-10-04 14:10:00\",\n+ \"2000-10-04 14:20:00\",\"2000-10-04 15:30:00\",\"2000-10-04  16:40:00\",\n+ \"2000-10-04 16:50:00\",\"2000-10-04 17:00:00\",\"2000-10-04 18:30:00\",\n+ \"2000-10-04 18:30:00\",\"2000-10-04 18:30:00\")\n> # remark the last date is occuring 3 times\n>\n> precipitation<-c(NA,0.1,0,0,NA,0,0.2,0.3,0.5,6,7,8,9,1,0,0,NA,0,1,0)\n>\n> my.df <- data.frame(time=as.POSIXct(time), precip=precipitation)\n> # get only good data\n> my.df <- my.df[complete.cases(my.df),]\n> tapply(my.df$precip, as.POSIXct(trunc(my.df$time, 'day')), sum)\n2000-10-03 2000-10-04\n       7.1       26.0\n>\n\n\n\nOn 5/29/07, jessica.gervais@tudor.lu  wrote:\n>\n> Dear all,\n>\n> I am trying to execute the following example:\n>\n> time<-c(\"2000-10-03 14:00:00\",\"2000-10-03 14:10:00\",\"2000-10-03\n> 14:20:00\",\"2000-10-03 15:30:00\",\"2000-10-03 16:40:00\",\"2000-10-03\n> 16:50:00\",\"2000-10-03 17:00:00\",\"2000-10-03 17:10:00\",\"2000-10-03\n> 17:20:00\",\"2000-10-03 18:30:00\",\"2000-10-04 14:00:00\",\"2000-10-04\n> 14:10:00\",\"2000-10-04 14:20:00\",\"2000-10-04 15:30:00\",\"2000-10-04\n> 16:40:00\",\"2000-10-04 16:50:00\",\"2000-10-04 17:00:00\",\"2000-10-04\n> 18:30:00\",\"2000-10-04 18:30:00\",\"2000-10-04 18:30:00\")\n> # remark the last date is occuring 3 times\n>\n> precipitation<-c(NA,0.1,0,0,NA,0,0.2,0.3,0.5,6,7,8,9,1,0,0,NA,0,1,0)\n>\n> library(zoo)\n>\n> z <- zoo(precipitation, as.POSIXct(time, tz = \"GMT\"))\n> Warning message:\n> some methods for \"zoo\" objects do not work if the index entries in\n> 'order.by' are not unique in: zoo(precipitation, as.POSIXct(time, tz =\n> \"GMT\"))\n>\n> # then I want to do the sum per hour\n>\n> z_sum_per_hour <- aggregate(na.omit(z), function(x) as.POSIXct(trunc(x,\n> \"hour\")),sum)\n> Warning message:\n> some methods for \"zoo\" objects do not work if the index entries in\n> 'order.by' are not unique in: zoo(rval[i], x.index[i])\n>\n>\n>\n> Do anyone has an idea how to avoid that ?\n>\n>\n>\n> Thanks in advance\n>\n>\n> Jessica\n>\n> ______________________________________________\n> R-help@stat.math.ethz.ch mailing list\n> https://stat.ethz.ch/mailman/listinfo/r-help\n> PLEASE do read the posting guide\n> http://www.R-project.org/posting-guide.html\n> and provide commented, minimal, self-contained, reproducible code.\n>\n\n\n\n-- \nJim Holtman\nCincinnati, OH\n+1 513 646 9390\n\nWhat is the problem you are trying to solve?\n\n\t[[alternative HTML version deleted]]\n\n______________________________________________\nR-help@stat.math.ethz.ch mailing list\nhttps://stat.ethz.ch/mailman/listinfo/r-help\nPLEASE do read the posting guide http://www.R-project.org/posting-guide.html\nand provide commented, minimal, self-contained, reproducible code.\n\n"}