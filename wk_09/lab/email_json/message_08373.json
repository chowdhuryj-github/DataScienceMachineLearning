{"category": "ham", "to_address": "samba-cvs@samba.org", "from_address": "tridge@samba.org", "subject": "Rev 144: - merge volkers debug changes in\n\thttp://samba.org/~tridge/ctdb", "body": "------------------------------------------------------------\nrevno: 144\nrevision-id: tridge@samba.org-20070418012024-b2374733a1050bb6\nparent: tridge@samba.org-20070417123923-99d9e4b5174f992d\nparent: vl@samba.org-20070417214033-0ppjm03j5z7ivyno\ncommitter: Andrew Tridgell \nbranch nick: tridge\ntimestamp: Wed 2007-04-18 11:20:24 +1000\nmessage:\n  - merge volkers debug changes\n  \n  - fixed memory leaks in the 3 packet receive routines. The problem was\n    that the ctdb_call logic would occasionally complete and free a\n    incoming packet, which would then be freed again in the packet\n    receive routine. The solution is to make the packet a child of a\n    temporary context in the receive routine then free that temporary\n    context. That allows other routines to keep or free the packet if\n    they want to, while allowing us to safely free it (via a free of the\n    temporary context) in the receive function\nadded:\n  lib/util/debug.c               debug.c-20070417155854-2i3crb0irl716qft-1\n  lib/util/debug.h               debug.h-20070417155854-2i3crb0irl716qft-2\nmodified:\n  Makefile.in                    makefile.in-20061117234101-o3qt14umlg9en8z0-1\n  common/ctdb.c                  ctdb.c-20061127094323-t50f58d65iaao5of-2\n  common/ctdb_call.c             ctdb_call.c-20061128065342-to93h6eejj5kon81-1\n  common/ctdb_client.c           ctdb_client.c-20070411010216-3kd8v37k61steeya-1\n  common/ctdb_daemon.c           ctdb_daemon.c-20070409200331-3el1kqgdb9m4ib0g-1\n  common/ctdb_ltdb.c             ctdb_ltdb.c-20061128065342-to93h6eejj5kon81-2\n  include/ctdb_private.h         ctdb_private.h-20061117234101-o3qt14umlg9en8z0-13\n  include/includes.h             includes.h-20061117234101-o3qt14umlg9en8z0-17\n  lib/talloc/talloc.c            talloc.c-20070125040949-7t3f5zdl1q4z9hyv-51\n  lib/talloc/talloc.h            talloc.h-20070125040949-7t3f5zdl1q4z9hyv-52\n  tests/ctdb_fetch.c             ctdb_fetch.c-20070405031748-f7gslozfj3rwh5ie-1\n  tests/fetch.sh                 fetch.sh-20070405031756-lomzqpjyqg3xd1kv-1\n    ------------------------------------------------------------\n    merged: vl@samba.org-20070417214033-0ppjm03j5z7ivyno\n    parent: vl@samba.org-20070417210610-cniquu72dkzi02bz\n    committer: Volker Lendecke \n    branch nick: vl-ctdb\n    timestamp: Tue 2007-04-17 23:40:33 +0200\n    message:\n      Clean up the call_states correctly\n    ------------------------------------------------------------\n    merged: vl@samba.org-20070417210610-cniquu72dkzi02bz\n    parent: vl@samba.org-20070417210330-yyjwl440m39rhh0y\n    committer: Volker Lendecke \n    branch nick: vl-ctdb\n    timestamp: Tue 2007-04-17 23:06:10 +0200\n    message:\n      Be less verbose\n    ------------------------------------------------------------\n    merged: vl@samba.org-20070417210330-yyjwl440m39rhh0y\n    parent: vl@samba.org-20070417192322-b6pxth53nyla1qhr\n    committer: Volker Lendecke \n    branch nick: vl-ctdb\n    timestamp: Tue 2007-04-17 23:03:30 +0200\n    message:\n      Some more debug and two memleak fixes\n    ------------------------------------------------------------\n    merged: vl@samba.org-20070417192322-b6pxth53nyla1qhr\n    parent: vl@samba.org-20070417155939-tbvpngrh5m95qrdk\n    committer: Volker Lendecke \n    branch nick: vl-ctdb\n    timestamp: Tue 2007-04-17 21:23:22 +0200\n    message:\n      typo\n    ------------------------------------------------------------\n    merged: vl@samba.org-20070417155939-tbvpngrh5m95qrdk\n    parent: tridge@samba.org-20070417123923-99d9e4b5174f992d\n    committer: Volker Lendecke \n    branch nick: vl-ctdb\n    timestamp: Tue 2007-04-17 17:59:39 +0200\n    message:\n      Add timestamps to debug output.\n\nDiff too large for email (566, the limit is 200).\n\n"}