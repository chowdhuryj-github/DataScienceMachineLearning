{"category": "ham", "to_address": "Dong-hyun Oh <r.arecibo@gmail.com>", "from_address": "Charilaos Skiadas <skiadas@hanover.edu>", "subject": "Re: [R] Simplify simple code", "body": "On Apr 16, 2007, at 1:37 AM, Dong-hyun Oh wrote:\n> Dear expeRts,\n>\n> I would simplify following code.\n> ---------------------------------------------\n> youtput <- function(x1, x2){\n>    n <- length(x1)\n>    y <- vector(mode=\"numeric\", length=n)\n>    for(i in 1:n){\n>      if(x1[i] >=5 & x1[i] <= 10 & x2[i] >=5 & x2[i] <=10)\n>        y[i] <- 0.631 * x1[i]^0.55 * x2[i]^0.65\n>      if(x1[i] >=10 & x1[i] <= 15 & x2[i] >=5 & x2[i] <=10)\n>        y[i] <- 0.794 * x1[i]^0.45 * x2[i]^0.65\n>      if(x1[i] >=5 & x1[i] <= 10 & x2[i] >=10 & x2[i] <=15)\n>        y[i] <- 1.259 * x1[i]^0.55 * x2[i]^0.35\n>      if(x1[i] >=10 & x1[i] <= 15 & x2[i] >=10 & x2[i] <=15)\n>        y[i] <- 1.585 * x1[i]^0.45 * x2[i]^0.35\n>    }\n>    y\n> }\n> ----------------------------------------------\n> Anyone can help me?\n>\nI hope someone comes up with something better, but here is one way:\n\nyoutput <- function(x1, x2) {\n\tco1 <- matrix(c(0.631,0.794,1.259,1.585), c(2,2))\n\tco2 <- c(0.55,0.45)\n\tco3 <- c(0.65,0.35)\n\tp1 <- findInterval(x1,c(5,10,15))\n\tp2 <- findInterval(x2,c(5,10,15))\n\treturn( diag(co1[p1,p2]) * x1^co2[p1] * x2^co3[p2] )\n}\n\nIt is not clear at all what you wanted to happen when x1 and/or x2 is  \nnot between 5 and 15, so I did not deal with those case. The above  \ncommand will choke in that case, and should be modified accordingly  \ndepending on what you want.\n\n> Sincerely,\n>\n> ===========================================\n> Dong H. Oh\n>\n> Ph. D Candidate\n> Techno-Economics and Policy Program\n> College of Engineering, Seoul National University,\n> Seoul, 151-050, Republic of Korea\n>\n> E-mail:doriaba2@snu.ac.kr\n> Mobile: +82-10-6877-2109\n> Office : +82-2-880-9142\n> Fax: +82-2-880-8389\n\nHaris Skiadas\nDepartment of Mathematics and Computer Science\nHanover College\n\n______________________________________________\nR-help@stat.math.ethz.ch mailing list\nhttps://stat.ethz.ch/mailman/listinfo/r-help\nPLEASE do read the posting guide http://www.R-project.org/posting-guide.html\nand provide commented, minimal, self-contained, reproducible code.\n\n"}