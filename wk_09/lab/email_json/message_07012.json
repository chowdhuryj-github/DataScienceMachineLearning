{"category": "ham", "to_address": "samba-cvs@samba.org", "from_address": "metze@samba.org", "subject": "svn commit: samba r22267 - in branches/SAMBA_4_0/source/lib/talloc:\n\t.", "body": "Author: metze\nDate: 2007-04-16 19:14:55 +0000 (Mon, 16 Apr 2007)\nNew Revision: 22267\n\nWebSVN: http://websvn.samba.org/cgi-bin/viewcvs.cgi?view=rev&root=samba&rev=22267\n\nLog:\nprotect #define __location__ with an #ifndef\n\nmetze\nModified:\n   branches/SAMBA_4_0/source/lib/talloc/talloc.h\n\n\nChangeset:\nModified: branches/SAMBA_4_0/source/lib/talloc/talloc.h\n===================================================================\n--- branches/SAMBA_4_0/source/lib/talloc/talloc.h\t2007-04-16 19:10:16 UTC (rev 22266)\n+++ branches/SAMBA_4_0/source/lib/talloc/talloc.h\t2007-04-16 19:14:55 UTC (rev 22267)\n@@ -36,10 +36,12 @@\n /*\n   this uses a little trick to allow __LINE__ to be stringified\n */\n-#define _STRING_LINE_(s)    #s\n-#define _STRING_LINE2_(s)   _STRING_LINE_(s)\n-#define __LINESTR__       _STRING_LINE2_(__LINE__)\n-#define __location__ __FILE__ \":\" __LINESTR__\n+#ifndef __location__\n+#define __TALLOC_STRING_LINE1__(s)    #s\n+#define __TALLOC_STRING_LINE2__(s)   __TALLOC_STRING_LINE1__(s)\n+#define __TALLOC_STRING_LINE3__  __TALLOC_STRING_LINE2__(__LINE__)\n+#define __location__ __FILE__ \":\" __TALLOC_STRING_LINE3__\n+#endif\n \n #ifndef TALLOC_DEPRECATED\n #define TALLOC_DEPRECATED 0\n\n"}