{"category": "ham", "to_address": "\"Vladimir Lemberg\" <lemba@sbcglobal.net>", "from_address": "\"Tom Phoenix\" <tom@stonehenge.com>", "subject": "Re: Capturing an external program return code", "body": "On 5/1/07, Vladimir Lemberg  wrote:\n\n> My script is executing external program, which returns code i.e 0, -1, -2, -3 etc\n\n> if ($? == -3) {\n\n> This is not working. Nothing is printing to the log file when I'm simulating\n> -3 code. If I print $?, it shown 65280.\n\nThe value in $? is derived from the exit code, but it includes more\ninformation when a program fails. The full story is in the perlvar\nmanpage, but you can recover the exit code something like this:\n\n    my $exit_code = $? >> 8;\n    $exit_code -= 256 if $exit_code > 127;  # fix sign\n\nThe value 65280 shows an exit code of -1 by this method.\n\nOne other detail can be very important: If your command invokes a\nshell to run another program, the exit code will be that of the shell,\ninstead of the other program. To get the external program's exit code,\nPerl has to run the exernal program directly.\n\nHope this helps!\n\n--Tom Phoenix\nStonehenge Perl Training\n\n-- \nTo unsubscribe, e-mail: beginners-unsubscribe@perl.org\nFor additional commands, e-mail: beginners-help@perl.org\nhttp://learn.perl.org/\n\n\n"}