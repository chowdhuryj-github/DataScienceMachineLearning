{"category": "ham", "to_address": "beginners@perl.org", "from_address": "\"Jenda Krynicky\" <Jenda@Krynicky.cz>", "subject": "Re: query about code", "body": "From: \"Amichai Teumim\" \n\n> Can someone explain to me what this script really does? I mean I see that it\n> lists dir within dir. But what is the code doing? For example all the blue\n> highlighted stuff, what is it doing?\n\nThere is no highlighting in a plain text email!\n \n> #!/usr/bin/perl\n\nmissing\n\n\tuse strict;\n\tuse warnings;\n\n> $startdir = \"/lib\";\n> $level = 0;\n\nShould be\n\n \tmy $startdir = \"/lib\";\n\tmy $level = 0;\n\n> list_dirs($startdir,$level);\n> \n> sub list_dirs(){\n>   my $dir  = shift (@_);\n>   my $lev = shift (@_);\n\nWould be better written  \n\n   my ( $dir, $lev) = @_;\n \n>   opendir(TOP,$dir);\n>   my @files = readdir(TOP);\n>   closedir(TOP);\n> \n>   shift(@files);\n>   shift(@files);\n\nHere it removes the '.' and '..' \"directories\" from the list.\n\n>   foreach $file (@files){\n\n    foreach my $file (@files){\n\nWithout the \"my\", you are reusing the global variable $file, that all \nthe instances of the list_dirs() subroutine that you call recursively \nto traverse the filesystem share the same variable. In this case it \ndoesn't cause a visible error since the recursive call is the last \nthing you do in the loop, but still you should be careful with this! \nUnless you really really need to use a global you should declare all \nyour variables with \"my\". Especially within recursive subroutines.\n\n>     if(-d \"$dir/$file\"){\n\n\"if $dir/$file is a directory\"\n\n>         spaces($lev);\n\nprints the $lev spaces. Could be written as\n\n\tprint ' ' x $lev;\n\n>         print \"$file\\n\";\n>         list_dirs(\"$dir/$file\",$lev+1);\n>     }\n>   }\n> \n> }\n\nThe script traverses the filesystem, starting in /lib and prints all \ndirectories and subdirectories and subsubdirectories etc.\n\nJenda\n===== Jenda@Krynicky.cz === http://Jenda.Krynicky.cz =====\nWhen it comes to wine, women and song, wizards are allowed \nto get drunk and croon as much as they like.\n\t-- Terry Pratchett in Sourcery\n\n\n-- \nTo unsubscribe, e-mail: beginners-unsubscribe@perl.org\nFor additional commands, e-mail: beginners-help@perl.org\nhttp://learn.perl.org/\n\n\n"}