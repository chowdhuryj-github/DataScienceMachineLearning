{"category": "ham", "to_address": "beginners@perl.org, perl-beginners@moderators.isc.org", "from_address": "\"eishbut@googlemail.com\" <eishbut@googlemail.com>", "subject": "Re: PDF File", "body": "On May 24, 5:59 pm, \"nobul...@gmail.com\"  wrote:\n> On May 24, 2:22 pm, Alma  wrote:\n>\n> > Hi All,\n>\n> > I need to store the files\n>\n> What files? Where are the before you \"store\" them?\n>\n> > in a directory  '/home/user/cgi-bin/{today's\n> > Date}\n> > I am able to creata a folder on daily bases .\n>\n> If that bit's not a problem why do you mention it?\n>\n> > I am struggling to create a subroutine that stores the uploaded pdf\n> > file into this today's date directory.\n>\n> Can you explain why you think this would be different for a PDF file\n> than for any other sort of file?\n>\n> Can you be more precise about the nature of the diffiulty you are\n> having? What have you tried? How did it fail?\n>\n> What do you mean \"uploaded\"? Is this perhaps a stealth CGI question?\n>\n> If this is a stealth CGI question have you looked at the examples in\n> the CGI docmentation? Is there somthing in there you think is unclear?\n> Remember as a beginner you are uniquely qualified to tell us when the\n> documentation is unclear.\n>\n> Actually looking a the documentation it's poor!\n>\n> It mentions binmode() too late and uses the 2-arg open without\n> checking for errors.\n>\n> I would actually use File::Copy.\n>\n> copy(upload('uploaded_file'),\"/wherever/$date/$filename\") or die $!;\n>\n> You will, of course, have to do something to make sure $filename is\n> unique.\n>\n> > & if i need to read the pdf file\n>\n> What do you mean by \"read the pdf file\"? Do you mean you actually want\n> to parse it and extract info? Look on CPAN for modules with PDF in\n> their name.\n>\n> > should i be using open file or infile command?\n>\n> What is \"infile command\"?\n\nTry this out, there are some changes to the other post.\n\n#!/usr/bin/perl -w\n\nuse strict;\nuse File::Copy;\nuse Time::Local;\n\nmy $destination_folder = \"cgi-bin\\\\\"; # path to destination folder\nmy $source_folder = \"C:\\\\Programming\\\\test_bed_perl\\\\\"; #path to\nsource folder\n\n# add extensions to select those files for copying eg. *.pl would\nselect file with .pl only. Can select\n# multiple extensions (\"*.*, *.pls)\nmy $file_extensions = \"*.pdf\";\n\nmy($day, $mon, $yr) = (localtime)[3, 4, 5];\nmy $daily_folder = $day . \"_\" . ($mon + 1) . \"_\" . ($yr + 1900) .\"\\\\\";\n# check epoch if you are going to use date as dir name (UNIX $yr + 30\ni think)\nmy $start = timelocal(0, 0, 0, $day, $mon, $yr);\t# 00:00 this morning\nmy $stop = $start + (24 * 60 * 60 ) - 1; # 23:59:59\n\nchdir $destination_folder or die \"cannot change dir\";\nmkdir \"$daily_folder\";\nprint \"directory created: ${destination_folder}${daily_folder}\\n\";\n\ngrep {\n\tif ($_ ne $0){\n\t\tcopy(\"${source_folder}$_\", \"${destination_folder}${daily_folder}$_\")\nor die \"Could not copy source file: $!\\n\";\n\t\tprint \"copying ${source_folder}$_ -> ${destination_folder}$\n{daily_folder}$_\\n\";\n\t\tunlink(\"${source_folder}$_\") or die \"Could not delele source files:\n$!\\n\";\n\t\tprint \"deleting ${source_folder}$_\\n\\n\";\n\t}\n} @{&find_files};\n\nsub find_files{\n\tmy @files;\n\n\tchdir $source_folder;\n\tgrep{\n\t\tmy $timestamp = (stat $_)[9];\n\t\tpush @files, $_ if  $timestamp >= $start && $timestamp <= $stop;\n\t} glob $file_extensions;\n\n\treturn \\@files;\n}\n\nedit the $destination_folder and $source_folder to the directories you\nwant the files moved to and the original location of the uploads. you\ncan also edit $file_extensions if you want to filter for a specific\nextension eg. \".pdf\".\n\nCan you give me an indication of what you want to do with the opened\npdf?\n\n\n-- \nTo unsubscribe, e-mail: beginners-unsubscribe@perl.org\nFor additional commands, e-mail: beginners-help@perl.org\nhttp://learn.perl.org/\n\n\n"}