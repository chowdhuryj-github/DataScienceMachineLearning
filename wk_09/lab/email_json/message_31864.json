{"category": "ham", "to_address": "jra@samba.org", "from_address": "James Peach <jpeach@samba.org>", "subject": "should get_nt_acl_no_snum really avoid VFS modules?", "body": "Hi Jeremy,\n\nI just bumped into the get_nt_acl_no_snum() function, and it seems  \nthat this always calls the POSIX ACL implementation.\n\nSince there's no guarantee that the file it is checking access to is  \non a POSIX filesystem or that the platform even supports POSIX ACLs,  \nshouldn't this call SMB_VFS_GET_NT_ACL instead of get_nt_acl()?\n\nAnd shouldn't it use the dirname of the path it is checking for the  \nfake connectpath, rather than '/', since they could be different  \nfilesystem types? And even that is a bit wonky, because it probably  \nassumes that the global ACLs module is appropriate for this path,  \nwhich might not be true.\n\nIf you give me a hint, I'll code up a patch :)\n\n--\nJames Peach | jpeach@samba.org\n\n"}