{"category": "ham", "to_address": "\"Patnaik, Tirthankar \" <tirthankar.patnaik@citi.com>", "from_address": "gyadav@ccilindia.co.in", "subject": "Re: [R] Getting the last day of the month.", "body": "\nhttp://finzi.psych.upenn.edu/R/library/fCalendar/html/3D-TimeDateSpecDates.html\n\ntry this also RSiteSearch(\"last day of the month\") to get more pointers\n\n\n-  Regards,\n\n          \\\\\\|||||///\n       \\\\   -    -   //\n        (  o   o  )\noOOo-(_)-oOOo--------\n|\n| Gaurav Yadav\n| Assistant Manager, CCIL, Mumbai (India)\n| Mob: +919821286118 Email: emailtogauravyadav@gmail.com\n| Man is made by his belief, as He believes, so He is.\n|                                           --- Bhagavad Gita \n|_______Oooo________\n         oooO(      )\n         (      )   )   /\n          \\   (    (_/\n            \\_ )\n\n\n\n\n\"Patnaik, Tirthankar \"  \nSent by: r-help-bounces@stat.math.ethz.ch\n05/10/2007 07:12 PM\n\nTo\n\ncc\n\nSubject\n[R] Getting the last day of the month.\n\n\n\n\n\n\nHi,\n                 Given a date, how do I get the last date of that month? I \nhave\ndata in the form YYYYMM, that I've read as a date using\n\n> x$Date <-\nas.Date(ISOdate(substr(x$YearEnd,1,4),substr(x$YearEnd,5,6),1))\n\nBut this gives the first day of the month. To get the last day of the\nmonth, I tried \n\n> as.Date(as.yearmon(x$Date,frac=0))\n\nBut I don't get the last day of the month here. (Tried frac=1 too.)\n\nI then add a month to the date, substract one day from the resultant\ndate. But this wouldn't work for December.\n\n> x$YearEnd\n [1] 200203 200303 200403 200503 200603 200603 200312 200503 200603\n200203 200303\n[12] 200403 200503 200512 200612 200203 200303 200403 200503 200603\n> \n> x$Date <- as.Date(ISOdate(substr(x$YearEnd,1,4),\n+ as.integer(substr(x$YearEnd,5,6))+1,\n+ 1))-1\n> x$Date\n [1] \"2002-03-31\" \"2003-03-31\" \"2004-03-31\" \"2005-03-31\" \"2006-03-31\"\n\"2006-03-31\"\n [7] NA           \"2005-03-31\" \"2006-03-31\" \"2002-03-31\" \"2003-03-31\"\n\"2004-03-31\"\n[13] \"2005-03-31\" NA           NA           \"2002-03-31\" \"2003-03-31\"\n\"2004-03-31\"\n[19] \"2005-03-31\" \"2006-03-31\"\n\nSo I add a year, and set the month to 1 in a quick function.\n\n> GetEOM <- function(yyyymm=200406){\n                 year <- as.integer(substr(yyyymm,1,4))\n                 month <- as.integer(substr(yyyymm,5,6))\n                 if (month==12){\n                                 date <- as.Date(ISOdate(year+1,1,1))-1\n                 }else{\n                                 date <- \nas.Date(ISOdate(year,month+1,1))-1\n                 }\n                 print(date)\n}\n\nx$Date <- as.vector(sapply(x$YearEnd,GetEOM))\n\nstr(x$Date)\n\n\nIs there a simpler way to do this please?\n\n\nTIA and best,\n-Tir\n\nTirthankar Patnaik\nIndia Strategy\nCitigroup Investment Research\n+91-22-6631 9887\n\n______________________________________________\nR-help@stat.math.ethz.ch mailing list\nhttps://stat.ethz.ch/mailman/listinfo/r-help\nPLEASE do read the posting guide \nhttp://www.R-project.org/posting-guide.html\nand provide commented, minimal, self-contained, reproducible code.\n\n\n\n============================================================================================\nDISCLAIMER AND CONFIDENTIALITY CAUTION:\\ \\ This message and ...{{dropped}}\n\n______________________________________________\nR-help@stat.math.ethz.ch mailing list\nhttps://stat.ethz.ch/mailman/listinfo/r-help\nPLEASE do read the posting guide http://www.R-project.org/posting-guide.html\nand provide commented, minimal, self-contained, reproducible code.\n\n"}