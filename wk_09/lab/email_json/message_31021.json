{"category": "ham", "to_address": "samba-cvs@samba.org", "from_address": "obnox@samba.org", "subject": "svn commit: samba r22949 - in\n\tbranches/SAMBA_3_0_26/source/nsswitch: .", "body": "Author: obnox\nDate: 2007-05-16 15:48:22 +0000 (Wed, 16 May 2007)\nNew Revision: 22949\n\nWebSVN: http://websvn.samba.org/cgi-bin/viewcvs.cgi?view=rev&root=samba&rev=22949\n\nLog:\nMerge modified and extended winbindd cache validation code \nfrom 3_0. (Essentially r22845 and r22847). \n\nOriginal log: (r22845)\n\nModified and extended the winbindd cache validation code:                             \n                                                                                      \n* Replaced signal catching/longjmp magic by a fork:                                   \n  Let the child do the actual validation of the entries.                              \n  Exit code and signals are intercepted by waitpid.                                   \n* Fix logic so that also encounter of an unknown key in the                           \n  tdb leads to an error.                                                              \n* Extended status of validation is kept in a (as yet simple)\n  stuct and communicated over a pipe from child to parent.\n* Added two validation_ functions for two new keys.\n\nThe call of winbindd_validate_cache is still commented out\nin the winbindd main loop. But I am currently testing it\nand so far it seems to work fine.\n\nThe next step in my plan is to generalize the validation\nmechanism to a tdb_open_log_validate function in lib/util_tdb.c.\nThere ist nothing very special about the cache tdb here,\nand this might be useful elsewhere...\n\nMichael\n\n\nModified:\n   branches/SAMBA_3_0_26/source/nsswitch/winbindd_cache.c\n\n\nChangeset:\nSorry, the patch is too large (986 lines) to include; please use WebSVN to see it!\nWebSVN: http://websvn.samba.org/cgi-bin/viewcvs.cgi?view=rev&root=samba&rev=22949\n\n"}