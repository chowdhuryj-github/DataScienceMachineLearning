{"category": "ham", "to_address": "myklass@gmail.com, beginners@perl.org", "from_address": "Andrew Curry <andrew.curry@pa-sport.com>", "subject": "RE: the Database is not updated", "body": "Do you check for the number of rows updated?\nAn update will not throw an error even if no rows are updated, have you\ntried your values by hand?  \n\n-----Original Message-----\nFrom: Aruna Goke [mailto:myklass@gmail.com] \nSent: 20 June 2007 19:33\nTo: beginners@perl.org\nSubject: the Database is not updated\n\nhi all,\n\nCan someone put me thru this?\n\nwhen I run the script..it bring no error.. however, the table radacct is not\nupdated.\n\nwhat have i done wrong.\n\nGoksie\n\n#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse DBI;\n\nmy ($fn, @x);\n\n#define the file\n$fn = 'lost.csv';\n$/ = \"\\n\";\n\n#prepare a database connection source;\nmy ($data_source, $user, $pass, $ret, $sql, $dbh, $sth, $row, $port,\n$hostname, $database); $data_source='dbi:mysql:radonet:localhost';\n$user='root';\n$pass='junkh1a';\n$database='radius';\n$hostname='localhost';\n$port='3306';\n$dbh = DBI->connect($data_source, $user, $pass); $sql = \"UPDATE radacct SET\nAcctSessionTime = ?, TrunkIdOut = ?, TrunkIdIn = ? where AcctUniqueId = ?\";\n$sth = $dbh->prepare($sql);\n\n#Open the file\nopen FH, '<', $fn or die \"The File $fn Could not be opened: $! \\n\";\nwhile()\n{\n#split the file into variables\n   @x =(split/,/)[0,1,2,3,4,5,6];\n  $sth->execute($x[2], $x[5], $x[4], $x[6]); }\n\n# extract from the lost.csv file\n\n19736873001,\" \"\"\"\"\",1,4/18/2007 22:59, 192.168.44.38, 10.0.11.79,\n1a88e00c34cb30fa\n2.34803E+12,2087316954,0,4/18/2007 23:00, 10.0.11.76, 0.0.0.0,\n1ebd35b17bd867f9\n2.34803E+12,2087316954,0,4/18/2007 23:00, 10.0.11.76, 0.0.0.0,\nab3b78424358b27d 12024227659,\" \"\"\"\"\",0,4/18/2007 23:00, 192.168.44.38,\n10.0.11.76,\n5a31b839bfc95cd5\n4.47904E+11,\" \"\"\"\"\",21,4/18/2007 23:00, 192.168.44.38, 10.0.11.79,\n9e95a7a7b6937ff8\n12024227659,\" \"\"\"\"\",0,4/18/2007 23:00, 192.168.44.38, 10.0.11.76,\n0ef7c2048870a6ef 14506708893,\" \"\"\"\"\",211,4/18/2007 22:57, 192.168.44.38,\n10.0.11.79,\n6a0056401dcb56a7\n12024227659,\" \"\"\"\"\",0,4/18/2007 23:01, 192.168.44.38, 10.0.11.76,\nd6b154140636378b 19736873001,\" \"\"\"\"\",30,4/18/2007 23:00, 192.168.44.38,\n10.0.11.79, b744ff188ed3c7fc 16304971578,\" \"\"\"\"\",0,4/18/2007 23:01,\n192.168.44.38, 10.0.11.76,\nd5d103f66de65ad7\n71508831681,\" \"\"\"\"\",0,4/18/2007 23:02, 192.168.44.38, 10.0.11.76,\na7b2a292af151634\n18137318836,\" \"\"\"\"\",0,4/18/2007 23:02, 192.168.44.38, 10.0.11.76,\ne166c3a40a08df26\n16304971578,\" \"\"\"\"\",0,4/18/2007 23:02, 192.168.44.38, 10.0.11.76,\nb889cae3a64c3a68\n4.47904E+11,\" \"\"\"\"\",81,4/18/2007 23:01, 192.168.44.38, 10.0.11.79,\n2f9d50e741fe5f65\n\n\n\n\n--\nTo unsubscribe, e-mail: beginners-unsubscribe@perl.org For additional\ncommands, e-mail: beginners-help@perl.org http://learn.perl.org/\n\n\n\nThis e-mail is from the PA Group.  For more information, see\nwww.thepagroup.com.\n\nThis e-mail may contain confidential information.  Only the addressee is\npermitted to read, copy, distribute or otherwise use this email or any\nattachments.  If you have received it in error, please contact the sender\nimmediately.  Any opinion expressed in this e-mail is personal to the sender\nand may not reflect the opinion of the PA Group.\n\nAny e-mail reply to this address may be subject to interception or\nmonitoring for operational reasons or for lawful business practices.\n\n\n\n\n\n-- \nTo unsubscribe, e-mail: beginners-unsubscribe@perl.org\nFor additional commands, e-mail: beginners-help@perl.org\nhttp://learn.perl.org/\n\n\n"}