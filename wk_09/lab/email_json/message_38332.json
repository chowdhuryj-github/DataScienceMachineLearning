{"category": "ham", "to_address": "samba-technical@lists.samba.org", "from_address": "Pat Riehecky <prieheck@iwu.edu>", "subject": "STATUS_INVALID_HANDLE? (sent here on advice from samba@lists.org)", "body": "Forgive me for the duplicate submission, but I was told that this was a\nbetter topic for this list than the general questions list.\n\nI have a user who gets some random disconnects (well not exactly, it is\nmore like her box goes insane randomly...explained better below).  I was\nable to run a wireshark dump on her box and when the trigger action is\nperformed (running a report) I get a STATUS_INVALID_HANDLE.  \n\nShe is in MS Access an runs a report to trigger it (then she gets about\na thousand \"disk or network error\" dialog boxes).  The action is 100%\nrepeatable and was not present on the NT4 PDC.\n\nRelevant bits of the dump are available to the interested (but left out\nto avoid spamming people).\n\nAny help would be most appreciated!\nPat\n\nSamba 3.0.22 / Linux 2.6.17 / (Ubuntu 6.10)\n\nOutput from testparm (removed the add user/box because you don't care)\n\n[global]\n        display charset = UTF8\n        workgroup = IWU_LEARN\n        server string = %h server (Samba, Ubuntu)\n        obey pam restrictions = Yes\n        passdb backend = tdbsam\n        algorithmic rid base = 10000\n        passwd program = /usr/bin/passwd %u\n        username map = /etc/samba/users.map\n        restrict anonymous = 2\n        lanman auth = No\n        client NTLMv2 auth = Yes\n        client lanman auth = No\n        client plaintext auth = No\n        log level = 1\n        syslog = 0\n        log file = /var/log/samba/log.%m\n        max log size = 1000\n        min protocol = NT1\n        announce version = 2.0\n        announce as = win95\n        max mux = 100\n        max xmit = 65535\n        change notify timeout = 300\n        deadtime = 900\n        max disk size = 5240\n        socket options = TCP_NODELAY SO_RCVBUF=8192 SO_SNDBUF=8192\nSO_KEEPALIVE IPTOS_LOWDELAY\n        load printers = No\n        domain logons = Yes\n        os level = 1\n        lm announce = No\n        preferred master = No\n        domain master = No\n        wins server = 192.168.132.25\n        lock spin count = 30\n        lock spin time = 15\n        panic action = /usr/share/samba/panic-action %d\n        hosts allow = 192.168.132., 10., 172.16.1., 127.0.0.1\n        ea support = Yes\n        map acl inherit = Yes\n\n[homes]\n        comment = Home Directories\n        valid users = %S\n        browseable = No\n\n[netlogon]\n        comment = Network Logon Service\n        path = /home/samba/netlogon\n        guest ok = Yes\n        share modes = No\n\n[HR]\n        comment = Human Resources Share\n        path = /home/hr\n        valid users = @it, @hr\n        force group = hr\n        read only = No\n        create mask = 0775\n        directory mask = 0775\n        strict allocate = Yes\n        use sendfile = Yes\n        preserve case = No\n        hide special files = Yes\n        hide unreadable = Yes\n        hide unwriteable files = Yes\n        browseable = No\n        fstype = FAT\n        wide links = No\n\n"}