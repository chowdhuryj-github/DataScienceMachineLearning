{"category": "ham", "to_address": "Michael Adam <ma@sernet.de>", "from_address": "\"Gerald (Jerry) Carter\" <jerry@samba.org>", "subject": "Re: [PATCH] fix RPC_ANONYMOUS_AUTH_TYPE in 3_0_26", "body": "-----BEGIN PGP SIGNED MESSAGE-----\nHash: SHA1\n\nMichael Adam wrote:\n> Hi list, Jerry,\n> \n> this one gave me some headaches: I could not set\n> rights with \"net rpc rights grant ...\".  Got\n> NT_STATUS_ACCESS_DENIED. I found that in \n> the pipe_user.ut.uid was -1 in _lsa_add_acct_rights.\n> \n> This lead me up to rpc_server/srv_pipe.c\n> where I found that the copy_current_user call was\n> missing (compared to 3_0) under RPC_ANONYMOUS_AUTH_TYPE\n> in api_pipe_bind_req.\n> \n> The attached patch fixes my issue. \n> \n> Volker asked me to present the patch to the list first,\n> because this is critical code. \n\nVery nice catch.  I missed this in the merge from SAMBA_3_0\nwhen dealing with the current_user changes in lsa and spoolss.\nThanks for spotting it.  Please commit to SAMBA_3_0_26.\n\n\n\n\ncheers, jerry\n-----BEGIN PGP SIGNATURE-----\nVersion: GnuPG v1.4.6 (GNU/Linux)\nComment: Using GnuPG with Mozilla - http://enigmail.mozdev.org\n\niD8DBQFGaD4hIR7qMdg1EfYRAiciAJ9HOS6+nwrgTTe78Uah34bzkQODYgCfQWYY\nSrPTYSTxoaoghMdsq8My1/M=\n=mlZd\n-----END PGP SIGNATURE-----\n\n"}