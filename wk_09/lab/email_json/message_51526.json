{"category": "ham", "to_address": "beginners@perl.org", "from_address": "Aruna Goke <myklass@gmail.com>", "subject": "the Database is not updated", "body": "hi all,\n\nCan someone put me thru this?\n\nwhen I run the script..it bring no error.. however, the table radacct is\nnot updated.\n\nwhat have i done wrong.\n\nGoksie\n\n#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse DBI;\n\nmy ($fn, @x);\n\n#define the file\n$fn = 'lost.csv';\n$/ = \"\\n\";\n\n#prepare a database connection source;\nmy ($data_source, $user, $pass, $ret, $sql, $dbh, $sth, $row, $port,\n$hostname, $database);\n$data_source='dbi:mysql:radonet:localhost';\n$user='root';\n$pass='junkh1a';\n$database='radius';\n$hostname='localhost';\n$port='3306';\n$dbh = DBI->connect($data_source, $user, $pass);\n$sql = \"UPDATE radacct SET AcctSessionTime = ?, TrunkIdOut = ?,\nTrunkIdIn = ? where AcctUniqueId = ?\";\n$sth = $dbh->prepare($sql);\n\n#Open the file\nopen FH, '<', $fn or die \"The File $fn Could not be opened: $! \\n\";\nwhile()\n{\n#split the file into variables\n   @x =(split/,/)[0,1,2,3,4,5,6];\n  $sth->execute($x[2], $x[5], $x[4], $x[6]);\n}\n\n# extract from the lost.csv file\n\n19736873001,\" \"\"\"\"\",1,4/18/2007 22:59, 192.168.44.38, 10.0.11.79,\n1a88e00c34cb30fa\n2.34803E+12,2087316954,0,4/18/2007 23:00, 10.0.11.76, 0.0.0.0,\n1ebd35b17bd867f9\n2.34803E+12,2087316954,0,4/18/2007 23:00, 10.0.11.76, 0.0.0.0,\nab3b78424358b27d\n12024227659,\" \"\"\"\"\",0,4/18/2007 23:00, 192.168.44.38, 10.0.11.76,\n5a31b839bfc95cd5\n4.47904E+11,\" \"\"\"\"\",21,4/18/2007 23:00, 192.168.44.38, 10.0.11.79,\n9e95a7a7b6937ff8\n12024227659,\" \"\"\"\"\",0,4/18/2007 23:00, 192.168.44.38, 10.0.11.76,\n0ef7c2048870a6ef\n14506708893,\" \"\"\"\"\",211,4/18/2007 22:57, 192.168.44.38, 10.0.11.79,\n6a0056401dcb56a7\n12024227659,\" \"\"\"\"\",0,4/18/2007 23:01, 192.168.44.38, 10.0.11.76,\nd6b154140636378b\n19736873001,\" \"\"\"\"\",30,4/18/2007 23:00, 192.168.44.38, 10.0.11.79,\nb744ff188ed3c7fc\n16304971578,\" \"\"\"\"\",0,4/18/2007 23:01, 192.168.44.38, 10.0.11.76,\nd5d103f66de65ad7\n71508831681,\" \"\"\"\"\",0,4/18/2007 23:02, 192.168.44.38, 10.0.11.76,\na7b2a292af151634\n18137318836,\" \"\"\"\"\",0,4/18/2007 23:02, 192.168.44.38, 10.0.11.76,\ne166c3a40a08df26\n16304971578,\" \"\"\"\"\",0,4/18/2007 23:02, 192.168.44.38, 10.0.11.76,\nb889cae3a64c3a68\n4.47904E+11,\" \"\"\"\"\",81,4/18/2007 23:01, 192.168.44.38, 10.0.11.79,\n2f9d50e741fe5f65\n\n\n\n\n-- \nTo unsubscribe, e-mail: beginners-unsubscribe@perl.org\nFor additional commands, e-mail: beginners-help@perl.org\nhttp://learn.perl.org/\n\n\n"}