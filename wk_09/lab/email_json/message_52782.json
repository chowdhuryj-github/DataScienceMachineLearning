{"category": "ham", "to_address": "beginners@perl.org", "from_address": "Brad Baxter <baxter.brad@gmail.com>", "subject": "Re: Command line usage [solved]", "body": "On Jun 18, 5:54 pm, jeehan...@yahoo.com (John Degen) wrote:\n> >----- Original Message ----\n> >From: Paul Lalli \n> >To: beginn...@perl.org\n> >Sent: Monday, June 18, 2007 6:47:05 PM\n> >Subject: Re: Command line usage\n>\n> >On Jun 18, 10:50 am, jeehan...@yahoo.com (John Degen) wrote:\n>\n> >> I think I'm out of luck with this OS;) Your suggestion for creating a backup\n> >> file gave the same result: no error, no change in the files. The output of\n> >> 'perl -le\"print for @ARGV\" *'  is * and the other is *.*. Funny though that\n> >> sed *does* work.\n>\n> >Ah.  Well there's your problem.  The command line interpreter you're\n> >running doesn't expand wildcards.  That's why Perl wasn't giving you\n> >any errors - it had nothing to do because there was no file named \"*\"\n> >that it could find...   You'll have to expand the wildcard from within\n> >Perl.\n>\n> >perl -pi.bkp -e\"BEGIN { @ARGV = glob($ARGV[0]); }  s/old/new/;\" *\n>\n> >Hope this helps,\n> >Paul Lalli\n>\n> Thank you all for your responses. Paul's suggestion above is the winner. The command works, creates a neat backup file and does what it's told. I'll be checking the docs to see *why* it works:)\n\nNormally your command line interpreter would expand \"*\" into a list of\nfiles, and perl would store them in @ARGV, e.g.,\n\n$ARGV[0] = \"a.txt\";\n$ARGV[1] = \"b.txt\";\n$ARGV[2] = \"c.txt\";\n\nInstead, yours is not expanding, but simply passing \"*\" unchanged, but\nperl still stores it in @ARGV, which looks like\n\n$ARGV[0] = \"*\";\n\nSo in the BEGIN block (which executes before the -p flag starts\nreading files), Paul's code passes $ARGV[0] to the glob() function,\nwhich is perl's way of expanding \"*\" into a list of files.  Assigning\nthat output to @ARGV (overwriting $ARGV[0] in the process) yields,\ne.g.,\n\n$ARGV[0] = \"a.txt\";\n$ARGV[1] = \"b.txt\";\n$ARGV[2] = \"c.txt\";\n\nQ.E.F.\n\n--\nBrad\n\n\n-- \nTo unsubscribe, e-mail: beginners-unsubscribe@perl.org\nFor additional commands, e-mail: beginners-help@perl.org\nhttp://learn.perl.org/\n\n\n"}