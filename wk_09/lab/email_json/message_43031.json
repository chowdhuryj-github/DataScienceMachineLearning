{"category": "ham", "to_address": "\"Andy Spieherty\" <spiehera@lafayette.edu>,\n   \"James Keenan via RT\" <parrotbug-followup@parrotcode.org>,\n   \"Perl6 Internals\" <perl6-internals@perl.org>", "from_address": "\"Mark J. Reed\" <markjreed@mail.com>", "subject": "Re: [perl #41168] graceful \"no compiler\" error message?", "body": "It's not a good assumption that the default result of a C compilation\nis named \"a.out\".  On Cygwin, e.g., it's a.exe.  Some compilers\ndefault to filename.exe or bare filename (when compiling filename.c).\nI think you may have to assume that it accepts the -o option and give\nthe tested-for executable an explicit name.\n\n\nOn 6/5/07, Andy Spieherty  wrote:\n> On Mon, 4 Jun 2007, James Keenan via RT wrote:\n>\n> > On Fri Jun 01 09:29:18 2007, chromatic  at wgz.org wrote:\n> > > This patch is very close.  Instead of handling compilation manually, I\n> > > recommend instead using cc_gen() and cc_build() from\n> > > Parrot::Configure::Step.\n> > > See config/auto/sizes.pm for an example.\n>\n> > Can you explain why using these functions would be the better course?  In\n> particular, how\n> > would this approach square with the criticism Andy Spieherty made earlier\n> in this thread on\n> > March 21:\n> >\n> > > + unless ( eval { cc_build(); 1 } ) {\n> > > + warn \"Compilation failed with '$cc'\\n\";\n> > > + exit 1;\n> > > + }\n> >\n> > > This has two problems. First, it ignores the return value of cc_build().\n> > > That's understandable at the moment since cc_build doesn't seem to have\n> a\n> > > documented return value. It should, of course.\n>\n> I agree with chromatic -- I'd simply add that the cc_build() function\n> should be improved to have a meaningful return value, not that it should\n> be avoided.\n>\n> --\n>     Andy Spieherty\t\tspiehera@lafayette.edu\n>\n\n\n-- \nMark J. Reed \n"}