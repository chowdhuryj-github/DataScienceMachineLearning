{"category": "ham", "to_address": "samba-cvs@samba.org", "from_address": "mimir@samba.org", "subject": "svn commit: samba r22136 - in\n\tbranches/SAMBA_4_0/webapps/swat/source/class/swat/module/ldbbrowse:\n\t.", "body": "Author: mimir\nDate: 2007-04-09 12:06:42 +0000 (Mon, 09 Apr 2007)\nNew Revision: 22136\n\nWebSVN: http://websvn.samba.org/cgi-bin/viewcvs.cgi?view=rev&root=samba&rev=22136\n\nLog:\nFix incorrect event handling.\nSubmitted by John Jorgensen \n\n\nrafal\n\n\nModified:\n   branches/SAMBA_4_0/webapps/swat/source/class/swat/module/ldbbrowse/Fsm.js\n   branches/SAMBA_4_0/webapps/swat/source/class/swat/module/ldbbrowse/Gui.js\n\n\nChangeset:\nModified: branches/SAMBA_4_0/webapps/swat/source/class/swat/module/ldbbrowse/Fsm.js\n===================================================================\n--- branches/SAMBA_4_0/webapps/swat/source/class/swat/module/ldbbrowse/Fsm.js\t2007-04-09 10:38:55 UTC (rev 22135)\n+++ branches/SAMBA_4_0/webapps/swat/source/class/swat/module/ldbbrowse/Fsm.js\t2007-04-09 12:06:42 UTC (rev 22136)\n@@ -61,7 +61,7 @@\n             {\n               // Yup.  Re-open the database\n               var dbName = fsm.getObject(\"dbName\");\n-              dbName.dispatchEvent(new qx.event.type.Event(\"changeSelection\"),\n+              dbName.dispatchEvent(new qx.event.type.Event(\"changeSelected\"),\n                                    true);\n             }\n             else\n@@ -104,8 +104,14 @@\n           \"changeSelection\":\n           {\n             \"tree\" :\n-              \"Transition_Idle_to_AwaitRpcResult_via_tree_selection_changed\",\n+              \"Transition_Idle_to_AwaitRpcResult_via_tree_selection_changed\"\n \n+          },\n+\n+\t  // If another database is selected, try to open it and refresh\n+          // the tree\n+          \"changeSelected\":\n+          {\n             \"dbName\":\n               \"Transition_Idle_to_AwaitRpcResult_via_db_changed\"\n           }\n\nModified: branches/SAMBA_4_0/webapps/swat/source/class/swat/module/ldbbrowse/Gui.js\n===================================================================\n--- branches/SAMBA_4_0/webapps/swat/source/class/swat/module/ldbbrowse/Gui.js\t2007-04-09 10:38:55 UTC (rev 22135)\n+++ branches/SAMBA_4_0/webapps/swat/source/class/swat/module/ldbbrowse/Gui.js\t2007-04-09 12:06:42 UTC (rev 22136)\n@@ -52,9 +52,9 @@\n   // Add our global database name (the only option, for now)\n   var item = new qx.ui.form.ListItem(module.dbFile);\n   o.add(item);\n-  \n+\n   // We want to be notified if the selection changes\n-  o.addEventListener(\"changeSelection\", fsm.eventListener, fsm);\n+  o.addEventListener(\"changeSelected\", fsm.eventListener, fsm);\n \n   // Save the database name object so we can react to changes\n   fsm.addObject(\"dbName\", o);\n\n"}