{"category": "ham", "to_address": "simo <idra@samba.org>", "from_address": "\"Gerald (Jerry) Carter\" <jerry@samba.org>", "subject": "Re: [PATCH] LOOKUP_NAME_EXPLICIT to avoid lockups between winbindd\n and nscd", "body": "-----BEGIN PGP SIGNED MESSAGE-----\nHash: SHA1\n\nsimo wrote:\n\n>>   without the patch a simple \"getent group\n>> foo\" will hang when runing nscd and you can easily trace it\n>> for yourself.\n> \n> Yeah I didn't think about nscd. But if the protection \n> does not work with nscd then nscd+winbindd is broken\n> in many other cases as well I guess.\n\nMainly I've found getpwnam() and getgrnam() to be the main\noffenders due to the fact that the first thing we do to service\nthe request is to try to convert the name to a SID.\n\nThe code path for getpwnam() converts the name to a SID\nand then call winbindd_getpwsid().  The winbindd_getpwuid()\nconverts the uid to a SID and then calls winbindd_getpwsid()\nas well so there is only one code path to debug.\n\n\n\n\njerry\n\n\n-----BEGIN PGP SIGNATURE-----\nVersion: GnuPG v1.4.6 (GNU/Linux)\nComment: Using GnuPG with Mozilla - http://enigmail.mozdev.org\n\niD8DBQFGVzEuIR7qMdg1EfYRAgKJAKDP4NC/Ug/nosYJB5e5K8DEI+YbeQCePhE4\nEppJjhgPrVDW2mZ980PLnD0=\n=ITl2\n-----END PGP SIGNATURE-----\n\n"}