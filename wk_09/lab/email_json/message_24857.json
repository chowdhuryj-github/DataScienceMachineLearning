{"category": "ham", "to_address": "beginners@perl.org", "from_address": "Robert Hicks <sigzero@gmail.com>", "subject": "looping through a file", "body": "I have one file that contains a log. I do a substr to get the \ninformation out of that and push it into an array.\n\nI have a second file that contain another log. I need to loop through \nthe items in the array and find them in this log. Once I find the line \nthat the id is on, I need the next line /^AMP-commit/ captured.\n\nI am getting:\n\n\"Use of uninitialized value in pattern match (m//) at ./amp_parse.pl \nline 39, <$AFILE> line 213622.\"\n\nThis is what I have so far:\n\nuse strict;\nuse warnings;\n\nmy $IDFILE = 'H_E';\nmy $AMPFILE = 'a.log';\nmy $OUTFILE = 'report.lst';\n\nmy @id_hits;\n\n\n# loop through the id file to get the prime id from each line and\n# push it onto the @hits array\n#\nopen my $IFILE, '<', $IDFILE || die \"Could not open $IDFILE: $!\";\n\nwhile ( my $ifile_line = <$IFILE> ) {\n     my $hits = substr($ifile_line, 0, 6);\n     push @id_hits, $hits;\n}\nclose $IFILE;\n\n# test: it prints out all the ids I thought it should\n#print \"@id_hits\";\n\n# loop through the a.log find the line matches for the hits in\n# this @id_hits array. Get the next line for reporting.\n#\nopen my $AFILE, '<', $AMPFILE || die \"Could not open $AMPFILE: $!\";\n\nmy ( $line, $next_line );\n\nmy @log = <$AFILE>;\nwhile ( @log ) {\n\n     # use the @id_hits to search the log file for the line that\n     # contains the id and get the next line as the message to print\n     # to the OUTFILE.\n     foreach my $prime_id ( @id_hits ) {\n         $line = shift @log until $line =~ /$prime_id/;\n         undef $line;\n         $next_line = shift @log until $next_line =~ /^AMP-commit/;\n         my $amp_msg = $next_line;\n         undef $next_line;\n         open my $OFILE, '>', $OUTFILE || die \"Cannot create: $!\";\n         print $OFILE \"$prime_id:\\t$amp_msg\\n\" || die \"Cannot print: $!\";\n         close $OFILE;\n     }\n}\n\nclose $AFILE;\n\nThanks for any help you can give...\n\nRobert\n\n-- \nTo unsubscribe, e-mail: beginners-unsubscribe@perl.org\nFor additional commands, e-mail: beginners-help@perl.org\nhttp://learn.perl.org/\n\n\n"}