{"category": "ham", "to_address": "\"Muenchen, Robert A (Bob)\" <muenchen@utk.edu>", "from_address": "\"Gabor Grothendieck\" <ggrothendieck@gmail.com>", "subject": "Re: [R] do.call vs. lapply for lists", "body": "Consider this.  If L is a list with n components then\n\n- do.call(f, L) calls f once\n- lapply(L, f) calls f n times\n\n\nOn 4/9/07, Muenchen, Robert A (Bob)  wrote:\n> Hi All,\n>\n> I'm trying to understand the difference between do.call and lapply for\n> applying a function to a list. Below is one of the variations of\n> programs (by Marc Schwartz) discussed here recently to select the first\n> and last n observations per group.\n>\n> I've looked in several books, the R FAQ and searched the archives, but I\n> can't find enough to figure out why lapply doesn't do what do.call does\n> in this case. The help files & newsletter descriptions of do.call sound\n> like it would do the same thing, but I'm sure that's due to my lack of\n> understanding about their specific terminology. I would appreciate it if\n> you could take a moment to enlighten me.\n>\n> Thanks,\n> Bob\n>\n> mydata <- data.frame(\n>  id      = c('001','001','001','002','003','003'),\n>  math    = c(80,75,70,65,65,70),\n>  reading = c(65,70,88,NA,90,NA)\n> )\n> mydata\n>\n> mylast <- lapply( split(mydata,mydata$id), tail, n=1)\n> mylast\n> class(mylast) #It's a list, so lapply will so *something* with it.\n>\n> #This gets the desired result:\n> do.call(\"rbind\", mylast)\n>\n> #This doesn't do the same thing, which confuses me:\n> lapply(mylast,rbind)\n>\n> #...and data.frame won't fix it as I've seen it do in other\n> circumstances:\n> data.frame( lapply(mylast,rbind) )\n>\n> =========================================================\n>  Bob Muenchen (pronounced Min'-chen), Manager\n>  Statistical Consulting Center\n>  U of TN Office of Information Technology\n>  200 Stokely Management Center, Knoxville, TN 37996-0520\n>  Voice: (865) 974-5230\n>  FAX:   (865) 974-4810\n>  Email: muenchen@utk.edu\n>  Web:   http://oit.utk.edu/scc,\n>  News:  http://listserv.utk.edu/archives/statnews.html\n>\n> ______________________________________________\n> R-help@stat.math.ethz.ch mailing list\n> https://stat.ethz.ch/mailman/listinfo/r-help\n> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html\n> and provide commented, minimal, self-contained, reproducible code.\n>\n\n______________________________________________\nR-help@stat.math.ethz.ch mailing list\nhttps://stat.ethz.ch/mailman/listinfo/r-help\nPLEASE do read the posting guide http://www.R-project.org/posting-guide.html\nand provide commented, minimal, self-contained, reproducible code.\n\n"}