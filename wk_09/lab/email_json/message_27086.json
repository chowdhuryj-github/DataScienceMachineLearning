{"category": "ham", "to_address": "samba-cvs@samba.org", "from_address": "sfrench@samba.org", "subject": "svn commit: samba r22778 - in branches/SAMBA_3_0_25/source/client: .", "body": "Author: sfrench\nDate: 2007-05-10 19:12:32 +0000 (Thu, 10 May 2007)\nNew Revision: 22778\n\nWebSVN: http://websvn.samba.org/cgi-bin/viewcvs.cgi?view=rev&root=samba&rev=22778\n\nLog:\nPatch for not prompting for password on cifs mounts when \"sec=none\"\nspecified\n\nModified:\n   branches/SAMBA_3_0_25/source/client/mount.cifs.c\n\n\nChangeset:\nModified: branches/SAMBA_3_0_25/source/client/mount.cifs.c\n===================================================================\n--- branches/SAMBA_3_0_25/source/client/mount.cifs.c\t2007-05-10 13:31:15 UTC (rev 22777)\n+++ branches/SAMBA_3_0_25/source/client/mount.cifs.c\t2007-05-10 19:12:32 UTC (rev 22778)\n@@ -419,6 +419,11 @@\n \t\t\t\tprintf(\"password too long\\n\");\n \t\t\t\treturn 1;\n \t\t\t}\n+\t\t} else if (strncmp(data, \"sec\", 3) == 0) {\n+\t\t\tif (value) {\n+\t\t\t\tif (!strcmp(value, \"none\"))\n+\t\t\t\t\tgot_password = 1;\n+\t\t\t}\n \t\t} else if (strncmp(data, \"ip\", 2) == 0) {\n \t\t\tif (!value || !*value) {\n \t\t\t\tprintf(\"target ip address argument missing\");\n@@ -567,8 +572,6 @@\n \t\t\t*filesys_flags &= ~MS_NOEXEC;\n \t\t} else if (strncmp(data, \"guest\", 5) == 0) {\n \t\t\tgot_password=1;\n-                        /* remove the parm since it would otherwise be logged by kern */\n-\t\t\tgoto nocopy;\n \t\t} else if (strncmp(data, \"ro\", 2) == 0) {\n \t\t\t*filesys_flags |= MS_RDONLY;\n \t\t} else if (strncmp(data, \"rw\", 2) == 0) {\n\n"}