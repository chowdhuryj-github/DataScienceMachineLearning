{"category": "ham", "to_address": "samba-cvs@samba.org", "from_address": "gd@samba.org", "subject": "svn commit: samba r23569 - in branches: SAMBA_3_0/source/lib\n\tSAMBA_3_0_26/source/lib", "body": "Author: gd\nDate: 2007-06-21 15:12:51 +0000 (Thu, 21 Jun 2007)\nNew Revision: 23569\n\nWebSVN: http://websvn.samba.org/cgi-bin/viewcvs.cgi?view=rev&root=samba&rev=23569\n\nLog:\nAlso dump fd_event in dump_event_list().\n\nGuenther\n\nModified:\n   branches/SAMBA_3_0/source/lib/events.c\n   branches/SAMBA_3_0_26/source/lib/events.c\n\n\nChangeset:\nModified: branches/SAMBA_3_0/source/lib/events.c\n===================================================================\n--- branches/SAMBA_3_0/source/lib/events.c\t2007-06-21 14:32:09 UTC (rev 23568)\n+++ branches/SAMBA_3_0/source/lib/events.c\t2007-06-21 15:12:51 UTC (rev 23569)\n@@ -395,6 +395,7 @@\n void dump_event_list(struct event_context *event_ctx)\n {\n \tstruct timed_event *te;\n+\tstruct fd_event *fe;\n \tstruct timeval evt, now;\n \n \tif (!event_ctx) {\n@@ -409,9 +410,17 @@\n \n \t\tevt = timeval_until(&now, &te->when);\n \n-\t\tDEBUGADD(10,(\"Event \\\"%s\\\" %lx handled in %d seconds\\n\",\n+\t\tDEBUGADD(10,(\"Timed Event \\\"%s\\\" %lx handled in %d seconds\\n\",\n \t\t\t   te->event_name,\n \t\t\t   (unsigned long)te,\n \t\t\t   (int)evt.tv_sec));\n \t}\n+\n+\tfor (fe = event_ctx->fd_events; fe; fe = fe->next) {\n+\n+\t\tDEBUGADD(10,(\"FD Event %d %lx, flags: 0x%04x\\n\",\n+\t\t\t   fe->fd,\n+\t\t\t   (unsigned long)fe,\n+\t\t\t   fe->flags));\n+\t}\n }\n\nModified: branches/SAMBA_3_0_26/source/lib/events.c\n===================================================================\n--- branches/SAMBA_3_0_26/source/lib/events.c\t2007-06-21 14:32:09 UTC (rev 23568)\n+++ branches/SAMBA_3_0_26/source/lib/events.c\t2007-06-21 15:12:51 UTC (rev 23569)\n@@ -395,6 +395,7 @@\n void dump_event_list(struct event_context *event_ctx)\n {\n \tstruct timed_event *te;\n+\tstruct fd_event *fe;\n \tstruct timeval evt, now;\n \n \tif (!event_ctx) {\n@@ -409,9 +410,17 @@\n \n \t\tevt = timeval_until(&now, &te->when);\n \n-\t\tDEBUGADD(10,(\"Event \\\"%s\\\" %lx handled in %d seconds\\n\",\n+\t\tDEBUGADD(10,(\"Timed Event \\\"%s\\\" %lx handled in %d seconds\\n\",\n \t\t\t   te->event_name,\n \t\t\t   (unsigned long)te,\n \t\t\t   (int)evt.tv_sec));\n \t}\n+\n+\tfor (fe = event_ctx->fd_events; fe; fe = fe->next) {\n+\n+\t\tDEBUGADD(10,(\"FD Event %d %lx, flags: 0x%04x\\n\",\n+\t\t\t   fe->fd,\n+\t\t\t   (unsigned long)fe,\n+\t\t\t   fe->flags));\n+\t}\n }\n\n"}