{"category": "ham", "to_address": "Herb Lewis <hlewis@panasas.com>", "from_address": "simo <idra@samba.org>", "subject": "Re: TALLOC_ABORT", "body": "Herb,\n\nOn Tue, 2007-05-08 at 13:08 -0700, Herb Lewis wrote:\n> not quite true. It gets called from async_reply_recv in winbindd_dual.c.\n> I was testing some possible changes in winbindd and I hit this code\n> because of an error that hit the double free case but I got no messages\n> and had to go to looking at the core file to find out where it errored.\n\nI guess the this is actually a bug in both samba3 and samba4.\n\nIn samba4 I found this in include/includes.h:\n\n#if 0\n/* darn, we can't do this now that we don't link the ldb tools to all\nthe smb libs */\n#define TALLOC_ABORT(reason) smb_panic(reason)\n#endif\n\n\nI guess this code was disabled at some point by mistake, we should have\nredefined TALLOC_ABORT() in the ldb tools if this was relevant.\n\nI also guess that when we re-merged talloc in samba3 and samba4 this\ncode was omitted by mistake.\n\nNot sure how should we fix it.\n\nSimo.\n\n-- \nSimo Sorce\nSamba Team GPL Compliance Officer\nemail: idra@samba.org\nhttp://samba.org\n\n"}