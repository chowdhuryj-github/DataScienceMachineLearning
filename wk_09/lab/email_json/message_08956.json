{"category": "ham", "to_address": "samba-cvs@samba.org", "from_address": "Michael Adam <ma@sernet.de>", "subject": "Rev 5369: Fix some build targets: the missing libs only showed up\n\tin an in http://samba.sernet.de/ma/bzr/SAMBA_3_0-registry.bzr/", "body": "At http://samba.sernet.de/ma/bzr/SAMBA_3_0-registry.bzr/\n\n------------------------------------------------------------\nrevno: 5369\nrevision-id: ma@sernet.de-20070418154532-98d4c46a56a85970\nparent: ma@sernet.de-20070418113812-9c0c3214f32524be\ncommitter: Michael Adam \nbranch nick: SAMBA_3_0-registry.bzr\ntimestamp: Wed 2007-04-18 17:45:32 +0200\nmessage:\n  Fix some build targets: the missing libs only showed up in an\n  environment where nscd_flush_cache() is available.\n  (SLES10 in my case.)\nmodified:\n  source/Makefile.in             Makefile.in-20060530022626-b16dac2328ebe703\n=== modified file 'source/Makefile.in'\n--- a/source/Makefile.in\t2007-04-18 11:38:12 +0000\n+++ b/source/Makefile.in\t2007-04-18 15:45:32 +0000\n@@ -720,7 +720,8 @@\n \t  $(REG_API_ADD_OBJ)\n \n MOUNT_OBJ = client/smbmount.o \\\n-             $(PARAM_OBJ) $(LIBSMB_OBJ) $(KRBCLIENT_OBJ) $(LIB_NONSMBD_OBJ) $(SECRETS_OBJ)\n+             $(PARAM_OBJ) $(LIBSMB_OBJ) $(KRBCLIENT_OBJ) $(LIB_NONSMBD_OBJ) $(SECRETS_OBJ) \\\n+\t     $(REG_API_ADD_OBJ)\n \n MNT_OBJ = client/smbmnt.o $(VERSION_OBJ) $(LIBREPLACE_OBJ) $(SOCKET_WRAPPER_OBJ)\n \n@@ -1148,7 +1149,7 @@\n \n bin/nmbd@EXEEXT@: proto_exists $(NMBD_OBJ) @BUILD_POPT@ bin/.dummy\n \t@echo Linking $@\n-\t@$(CC) $(FLAGS) -o $@ $(NMBD_OBJ) $(LDFLAGS) $(DYNEXP) $(LIBS) @POPTLIBS@ $(KRB5LIBS) $(LDAP_LIBS)\n+\t@$(CC) $(FLAGS) -o $@ $(NMBD_OBJ) $(LDFLAGS) $(DYNEXP) $(LIBS) @POPTLIBS@ $(KRB5LIBS) $(LDAP_LIBS) $(NSCD_LIBS)\n \n bin/swat@EXEEXT@: proto_exists $(SWAT_OBJ) @BUILD_POPT@ bin/.dummy\n \t@echo Linking $@\n@@ -1175,15 +1176,15 @@\n \n bin/profiles@EXEEXT@: proto_exists $(PROFILES_OBJ) @BUILD_POPT@ bin/.dummy\n \t@echo Linking $@\n-\t@$(CC) $(FLAGS) -o $@ $(PROFILES_OBJ) $(DYNEXP) $(LDFLAGS) $(LIBS) $(LDAP_LIBS) @POPTLIBS@\n+\t@$(CC) $(FLAGS) -o $@ $(PROFILES_OBJ) $(DYNEXP) $(LDFLAGS) $(LIBS) $(LDAP_LIBS) @POPTLIBS@ $(NSCD_LIBS)\n \n bin/smbspool@EXEEXT@: proto_exists $(CUPS_OBJ) bin/.dummy\n \t@echo Linking $@\n-\t@$(CC) $(FLAGS) -o $@ $(CUPS_OBJ) $(DYNEXP) $(LDFLAGS) $(LIBS) $(KRB5LIBS) $(LDAP_LIBS)\n+\t@$(CC) $(FLAGS) -o $@ $(CUPS_OBJ) $(DYNEXP) $(LDFLAGS) $(LIBS) $(KRB5LIBS) $(LDAP_LIBS) $(NSCD_LIBS)\n \n bin/smbmount@EXEEXT@: proto_exists $(MOUNT_OBJ) bin/.dummy\n \t@echo Linking $@\n-\t@$(CC) $(FLAGS) -o $@ $(MOUNT_OBJ) $(DYNEXP) $(LDFLAGS) $(LIBS) $(KRB5LIBS) $(LDAP_LIBS)\n+\t@$(CC) $(FLAGS) -o $@ $(MOUNT_OBJ) $(DYNEXP) $(LDFLAGS) $(LIBS) $(KRB5LIBS) $(LDAP_LIBS) $(NSCD_LIBS)\n \n bin/smbmnt@EXEEXT@: proto_exists $(MNT_OBJ) bin/.dummy\n \t@echo Linking $@\n@@ -1203,18 +1204,18 @@\n \n bin/testparm@EXEEXT@: proto_exists $(TESTPARM_OBJ) @BUILD_POPT@ bin/.dummy\n \t@echo Linking $@\n-\t@$(CC) $(FLAGS) -o $@ $(TESTPARM_OBJ) $(LDFLAGS) $(DYNEXP) $(LIBS) $(LDAP_LIBS) @POPTLIBS@\n+\t@$(CC) $(FLAGS) -o $@ $(TESTPARM_OBJ) $(LDFLAGS) $(DYNEXP) $(LIBS) $(LDAP_LIBS) @POPTLIBS@ $(NSCD_LIBS)\n \n bin/smbstatus@EXEEXT@: proto_exists $(STATUS_OBJ) @BUILD_POPT@ bin/.dummy\n \t@echo Linking $@\n \t@$(CC) $(FLAGS) -o $@ $(STATUS_OBJ) $(LDFLAGS) $(DYNEXP) $(LIBS) $(LDAP_LIBS) \\\n-\t@POPTLIBS@\n+\t@POPTLIBS@ $(NSCD_LIBS)\n \n bin/smbcontrol@EXEEXT@: proto_exists $(SMBCONTROL_OBJ) @BUILD_POPT@ bin/.dummy\n \t@echo Linking $@\n \t@$(CC) -DUSING_SMBCONTROL $(FLAGS) -o $@ \\\n \t$(SMBCONTROL_OBJ) $(DYNEXP) $(LDFLAGS) \\\n-\t$(LIBS) $(LDAP_LIBS) @LIBUNWIND_PTRACE@ @POPTLIBS@\n+\t$(LIBS) $(LDAP_LIBS) @LIBUNWIND_PTRACE@ @POPTLIBS@ $(NSCD_LIBS)\n \n bin/smbtree@EXEEXT@: proto_exists $(SMBTREE_OBJ) @BUILD_POPT@ bin/.dummy\n \t@echo Linking $@\n@@ -1239,7 +1240,7 @@\n \n bin/nmblookup@EXEEXT@: proto_exists $(NMBLOOKUP_OBJ) @BUILD_POPT@ bin/.dummy\n \t@echo Linking $@\n-\t@$(CC) $(FLAGS) -o $@ $(NMBLOOKUP_OBJ) $(LDFLAGS) $(DYNEXP) $(LIBS) @POPTLIBS@ $(LDAP_LIBS)\n+\t@$(CC) $(FLAGS) -o $@ $(NMBLOOKUP_OBJ) $(LDFLAGS) $(DYNEXP) $(LIBS) @POPTLIBS@ $(LDAP_LIBS) $(NSCD_LIBS)\n \n bin/smbtorture@EXEEXT@: proto_exists $(SMBTORTURE_OBJ) bin/.dummy\n \t@echo Linking $@\n@@ -1275,7 +1276,7 @@\n \n bin/eventlogadm@EXEEXT@: proto_exists $(EVTLOGADM_OBJ) @BUILD_POPT@ bin/.dummy\n \t@echo Linking $@\n-\t@$(CC) $(FLAGS) -o $@ $(EVTLOGADM_OBJ) $(DYNEXP) $(LDFLAGS) $(LIBS) $(LDAP_LIBS) @POPTLIBS@\n+\t@$(CC) $(FLAGS) -o $@ $(EVTLOGADM_OBJ) $(DYNEXP) $(LDFLAGS) $(LIBS) $(LDAP_LIBS) @POPTLIBS@ $(NSCD_LIBS)\n \n bin/sharesec@EXEEXT@: proto_exists $(SHARESEC_OBJ) @BUILD_POPT@ bin/.dummy\n \t@echo Linking $@\n@@ -1725,7 +1726,7 @@\n \n bin/wbinfo@EXEEXT@: proto_exists $(WBINFO_OBJ) @BUILD_POPT@ bin/.dummy\n \t@echo Linking $@\n-\t@$(CC) $(FLAGS) -o $@ $(LDFLAGS) $(WBINFO_OBJ) $(DYNEXP) $(LIBS) $(LDAP_LIBS) @POPTLIBS@\n+\t@$(CC) $(FLAGS) -o $@ $(LDFLAGS) $(WBINFO_OBJ) $(DYNEXP) $(LIBS) $(LDAP_LIBS) @POPTLIBS@ $(NSCD_LIBS)\n \n bin/ntlm_auth@EXEEXT@: proto_exists $(NTLM_AUTH_OBJ) $(LIB_NONSMBD_OBJ) \\\n \t\t@BUILD_POPT@ bin/.dummy\n\n"}