{"category": "ham", "to_address": "\"Chris Stubben\" <stubben@lanl.gov>", "from_address": "Waverley <waverley.paloalto@gmail.com>", "subject": "Re: [R] RMySQL question, sql with R vector or list", "body": "Thanks Chris.\n\nI think this should work.  I have one more question regarding this.  Is that\npossible to write some PL/SQL scripts integrated inside R, it is the same\ntoken like I have asked in my previous question.  In this way, native R data\nstructures can be passed to the MYSQL data base directly to interrogate\ndynamically, rather than statically like using paste.  One concern using\npaste to construct the SQL command is this: what about if the ID list in\nyour sample becomes very large, is this a problem to construct this way?\n\nI will try to follow your advice but I hope someone on the mailing list can\nteach me how to integrate R data structure with MYSQL like PL/SQL.\n\nThanks much.\n\nBruce\n\n\nOn 6/5/07, Chris Stubben  wrote:\n>\n>\n> > I am trying to write a RMySQL sql script inside R such that part of the\n> SQL\n> > would be R list or vector.  For example, I want to select * from Atable\n> > where ID would equal to a members of R list or vector of \"1, 2,\n> 3\".  Here\n> > the ID list was generated inside R and then try to feed to mysql to call\n> to\n> > get additional data sets.\n> >\n>\n>\n> You could pass a comma-separated list of IDs to the sql IN operator\n>\n>\n> ## in MySQL\n>\n> CREATE table tmp (id int, name char(1));\n> insert into tmp values (1, \"A\"), (2, \"B\"), (3, \"C\"), (4, \"D\"), (5, \"E\");\n>\n>\n>\n> ### in R\n>\n>\n> library(RMySQL)\n>\n> con <- dbConnect(\"MySQL\",  dbname=\"test\" )\n>\n>\n> id.in<-function(ids)\n> {\n> dbGetQuery(con,   paste(\"select * from tmp\n> where id IN (\", paste(ids,collapse=\",\"), \")\")  )\n> }\n>\n>\n>\n> id.in(2:4)\n> id name\n> 1  2    B\n> 2  3    C\n> 3  4    D\n>\n>\n> ## simple lists also work\n>\n> id.in(list(1,4,5))\n> id name\n> 1  1    A\n> 2  4    D\n> 3  5    E\n>\n>\n> Chris\n>\n> ______________________________________________\n> R-help@stat.math.ethz.ch mailing list\n> https://stat.ethz.ch/mailman/listinfo/r-help\n> PLEASE do read the posting guide\n> http://www.R-project.org/posting-guide.html\n> and provide commented, minimal, self-contained, reproducible code.\n>\n\n\n\n-- \nWaverley @ Palo Alto\n\n\t[[alternative HTML version deleted]]\n\n______________________________________________\nR-help@stat.math.ethz.ch mailing list\nhttps://stat.ethz.ch/mailman/listinfo/r-help\nPLEASE do read the posting guide http://www.R-project.org/posting-guide.html\nand provide commented, minimal, self-contained, reproducible code.\n\n"}