{"category": "ham", "to_address": "\"'Sugar List'\" <sugar@laptop.org>, John Gilmore <gnu@toad.com>,\n   Don Hopkins <dhopkins@DonHopkins.com>", "from_address": "Don Hopkins <dhopkins@DonHopkins.com>", "subject": "[sugar] Bug in pygtk RadioAction", "body": "(I've filed the following bugs against gtk/pygtk):\n\nhttp://bugzilla.gnome.org/show_bug.cgi?id=436796\n\nApparently a RadioAction does not create the documented classes \nRadioMenuItem when you call create_menu_item(), and RadioToolButton when \nyou call create_tool_item(). Instead of a RadioMenuItem it creates a \nRadioToggleItem, and instead of RadioToolItem it creates a CheckMenuItem.\n\nI discovered this issue when I tried to create my own subclass of \nRadioAction called SugarRadioAction and went \nSugarRadioAction.set_tool_item_type(SugarRadioToolButton) so it would \nmake my own subclass of gtk.RadioToolButton. Unfortunately it did not \nwork when my SugarRadioToolButton was a subclass of gtk.RadioToolButton \n-- it selected all the buttons at once and never let me deselect them, \ninstead of only having one selected at once like a good radio button \nset. But I noticed that normal RadioActions were actually creating \ngtk.ToggleToolButton's instead of gtk.RadioToolButton's, so I changed \nSugarRadioButton to subclass gtk.ToggleToolButton instead of \ngtk.RadioToolButton, and suddenly it started working correctly!\n\nHere is the documentation for pygtk's Radio Actions, which incorrectly \nstates the corresponding proxy widgets are RadioMenuItem and \nRadioToolButton. The gtk+ documentation itself is more vague, just \nmuttering something about how RadioAction is similar to RadioMenuItem, \nbut not specifying which proxy classes RadioAction actually makes.\n\nhttp://www.pygtk.org/pygtk2tutorial/ch-NewInPyGTK2.4.html\n\n    16.1.1.7. Radio Actions\n\n    A RadioAction is a subclass of ToggleAction that can be grouped so \nthat only one RadioAction is active at a time. The corresponding proxy \nwidgets are the RadioMenuItem and RadioToolButton.\n\nhttp://www.pygtk.org/docs/pygtk/class-gtkradioaction.html\n\n    A gtk.RadioAction is a subclass of gtk.ToggleAction and similar to \ngtk.RadioMenuItem. A number of radio actions can be linked together so \nthat only one may be active at any one time.\n\nHere is a minimal test program that demonstrates the problem, followed \nby its output.\n\n    -Don\n\n########################################################################\n# gtk_action_bug.py\n# Don Hopkins (dhopkins@DonHopkins.com)\n\n\nimport gtk\n\n# Test ToggleAction, which works as documented.\n\ntoggle_action = gtk.ToggleAction('a', 'label', None, None)\nprint \"Made toggle_action\", toggle_action\n\ntoggle_tool_item = toggle_action.create_tool_item()\nprint \"toggle_action.create_tool_item() RETURNED\", toggle_tool_item, \"SHOULD BE\", gtk.ToggleToolButton, \"AND IT IS!\"\n\ntoggle_menu_item = toggle_action.create_menu_item()\nprint \"toggle_action.create_menu_item RETURNED\", toggle_menu_item, \"SHOULD BE\", gtk.CheckMenuItem, \"AND IT IS!\"\n\n# Test RadioAction, which does not work as documented.\n\nradio_action = gtk.RadioAction('a', 'label', None, None, 1)\nprint \"Made radio_action\", radio_action\n\nradio_tool_item = radio_action.create_tool_item()\nprint \"radio_action.create_tool_item() RETURNED\", radio_tool_item, \"SHOULD BE\", gtk.RadioToolButton, \"BUT IT IS NOT!!!\"\n\nradio_menu_item = radio_action.create_menu_item()\nprint \"radio_action.create_menu_item() RETURNED\", radio_menu_item, \"SHOULD BE\", gtk.RadioMenuItem, \"BUT IT IS NOT!!!\"\n\n\n\n# Output:\n\"\"\"\nMade toggle_action \ntoggle_action.create_tool_item() RETURNED  SHOULD BE  AND IT IS!\ntoggle_action.create_menu_item RETURNED  SHOULD BE  AND IT IS!\nMade radio_action \nradio_action.create_tool_item() RETURNED  SHOULD BE  BUT IT IS NOT!!!\nradio_action.create_menu_item() RETURNED  SHOULD BE  BUT IT IS NOT!!!\n\n\n\"\"\"\n\n\n_______________________________________________\nSugar mailing list\nSugar@laptop.org\nhttp://mailman.laptop.org/mailman/listinfo/sugar\n\n"}