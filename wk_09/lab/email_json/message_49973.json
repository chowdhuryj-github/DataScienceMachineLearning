{"category": "ham", "to_address": "samba-cvs@samba.org", "from_address": "vlendec@samba.org", "subject": "svn commit: samba r23538 - in branches: SAMBA_3_0/source/smbd\n\tSAMBA_3_0_26/source/smbd", "body": "Author: vlendec\nDate: 2007-06-18 12:22:42 +0000 (Mon, 18 Jun 2007)\nNew Revision: 23538\n\nWebSVN: http://websvn.samba.org/cgi-bin/viewcvs.cgi?view=rev&root=samba&rev=23538\n\nLog:\nFix for wild-card rename: We can't return directly on error, we need to\nCloseDir.\n\nModified:\n   branches/SAMBA_3_0/source/smbd/reply.c\n   branches/SAMBA_3_0_26/source/smbd/reply.c\n\n\nChangeset:\nModified: branches/SAMBA_3_0/source/smbd/reply.c\n===================================================================\n--- branches/SAMBA_3_0/source/smbd/reply.c\t2007-06-18 09:25:31 UTC (rev 23537)\n+++ branches/SAMBA_3_0/source/smbd/reply.c\t2007-06-18 12:22:42 UTC (rev 23538)\n@@ -4689,7 +4689,7 @@\n \t\t\tDEBUG(3,(\"rename_internals: open_file_ntcreate \"\n \t\t\t\t \"returned %s rename %s -> %s\\n\",\n \t\t\t\t nt_errstr(status), directory, newname));\n-\t\t\treturn status;\n+\t\t\tbreak;\n \t\t}\n \n \t\tstatus = rename_internals_fsp(conn, fsp, destname, attrs,\n@@ -4701,7 +4701,7 @@\n \t\t\tDEBUG(3, (\"rename_internals_fsp returned %s for \"\n \t\t\t\t  \"rename %s -> %s\\n\", nt_errstr(status),\n \t\t\t\t  directory, newname));\n-\t\t\treturn status;\n+\t\t\tbreak;\n \t\t}\n \n \t\tcount++;\n\nModified: branches/SAMBA_3_0_26/source/smbd/reply.c\n===================================================================\n--- branches/SAMBA_3_0_26/source/smbd/reply.c\t2007-06-18 09:25:31 UTC (rev 23537)\n+++ branches/SAMBA_3_0_26/source/smbd/reply.c\t2007-06-18 12:22:42 UTC (rev 23538)\n@@ -4687,7 +4687,7 @@\n \t\t\tDEBUG(3,(\"rename_internals: open_file_ntcreate \"\n \t\t\t\t \"returned %s rename %s -> %s\\n\",\n \t\t\t\t nt_errstr(status), directory, newname));\n-\t\t\treturn status;\n+\t\t\tbreak;\n \t\t}\n \n \t\tstatus = rename_internals_fsp(conn, fsp, destname, attrs,\n@@ -4699,7 +4699,7 @@\n \t\t\tDEBUG(3, (\"rename_internals_fsp returned %s for \"\n \t\t\t\t  \"rename %s -> %s\\n\", nt_errstr(status),\n \t\t\t\t  directory, newname));\n-\t\t\treturn status;\n+\t\t\tbreak;\n \t\t}\n \n \t\tcount++;\n\n"}