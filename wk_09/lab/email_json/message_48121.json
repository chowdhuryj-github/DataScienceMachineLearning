{"category": "ham", "to_address": "asb@mail.nih.gov", "from_address": "\"Deepayan Sarkar\" <deepayan.sarkar@gmail.com>", "subject": "Re: [R] Annotating trellis graphics", "body": "On 6/13/07, Alan S Barnett  wrote:\n> I'm using xyplot to generate a trellis plot with each panel containing a\n> scatterplot and a best fit line.  Is it possible to write the slope of\n> the best fit line in each panel?\n\nSure. The only question is, where (inside the panel) do you want it written?\nHere are a couple of possibilities:\n\n## writes the slope at a location that happens to be empty in both\n## panels in this example\n\nxyplot(len ~ dose | supp, ToothGrowth,\n       panel = function(x, y, ...) {\n           panel.xyplot(x, y, ...)\n           fm <- lm(y ~ x)\n           panel.abline(reg = fm)\n           slope <- round(coef(fm)[2], 3)\n           panel.text(1.5, 5, lab = slope)\n       })\n\n\n## needs the user to click on a suitable position for each panel\n\nlibrary(grid)\n\nxyplot(len ~ dose | supp, ToothGrowth,\n       panel = function(x, y, ...) {\n           panel.xyplot(x, y, ...)\n           fm <- lm(y ~ x)\n           panel.abline(reg = fm)\n           slope <- round(coef(fm)[2], 3)\n           message(\"Click on desired location\")\n           panel.text(grid.locator(\"native\"), lab = slope)\n       })\n\n-Deepayan\n\n______________________________________________\nR-help@stat.math.ethz.ch mailing list\nhttps://stat.ethz.ch/mailman/listinfo/r-help\nPLEASE do read the posting guide http://www.R-project.org/posting-guide.html\nand provide commented, minimal, self-contained, reproducible code.\n\n"}