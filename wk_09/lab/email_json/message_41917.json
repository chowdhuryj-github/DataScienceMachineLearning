{"category": "ham", "to_address": "samba-cvs@samba.org", "from_address": "tridge@samba.org", "subject": "Rev 452: automatically bring up interfaces that we manage. This\n\tallows ctdb to work without requiring two IPs per public\n\tinterface in http://samba.org/~tridge/ctdb", "body": "------------------------------------------------------------\nrevno: 452\nrevision-id: tridge@samba.org-20070604041651-tcz0gjypen37ly9d\nparent: tridge@samba.org-20070604033427-lmkyet1lja4tn7oz\ncommitter: Andrew Tridgell \nbranch nick: tridge\ntimestamp: Mon 2007-06-04 14:16:51 +1000\nmessage:\n  automatically bring up interfaces that we manage. This allows ctdb to work without requiring two IPs per public interface\nmodified:\n  config/events                  events-20070529030121-04fjh63cxfh8v1pj-1\n=== modified file 'config/events'\n--- a/config/events\t2007-06-03 12:07:07 +0000\n+++ b/config/events\t2007-06-04 04:16:51 +0000\n@@ -28,6 +28,10 @@\n \tip=$2\n \tmaskbits=$3\n \n+\t/sbin/ip link set $iface up || {\n+\t\t echo \"`/bin/date` Failed to bringup interface $iface\"\n+\t\t exit 1\n+\t}\n \t/sbin/ip addr add $ip/$maskbits dev $iface || {\n \t\t echo \"`/bin/date` Failed to add $ip/$maskbits on dev $iface\"\n \t\t exit 1\n\n"}