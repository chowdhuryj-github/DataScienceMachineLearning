{"category": "ham", "to_address": "r-help@stat.math.ethz.ch", "from_address": "Scott Hyde <hydes@byuh.edu>", "subject": "[R] Reshape a sparse matrix", "body": "\nI wrote a function to reshape a sparse matrix of type dgTmatrix\n\nIt is as follows:\n\n\nreshape.matrix <- function(A,r,c) {\n  ## Reshape a matrix from the Matrix package\n  ## of type dgTmatrix\n  ##\n  r_old <- A@Dim[1]\n  c_old <- A@Dim[2]\n\n  if(as.numeric(r_old*c_old) != as.numeric(r*c))\n    stop(\"Invalid dimension.  There must be \",r_old*c_old,\" elements in the new matrix\")\n  \n  k <- r_old*A@j + A@i\n  i <- k %% r\n  j <- (k-i)/r\n\n  ## redo spMatrix so I don't have to add one to i and j\n  dim <- c(as.integer(r), as.integer(c))\n  new(\"dgTMatrix\", x = A@x, Dim = dim,\n      i = as.integer(i),\n      j = as.integer(j))\n\n}\n\nAny suggestions on improvements of checks that I am missing?\n\n-Scott\n\n______________________________________________\nR-help@stat.math.ethz.ch mailing list\nhttps://stat.ethz.ch/mailman/listinfo/r-help\nPLEASE do read the posting guide http://www.R-project.org/posting-guide.html\nand provide commented, minimal, self-contained, reproducible code.\n\n"}