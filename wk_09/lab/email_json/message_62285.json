{"category": "ham", "to_address": "ocelma@iua.upf.edu", "from_address": "Dirk Eddelbuettel <edd@debian.org>", "subject": "Re: [R] Long-tail model in R ... anyone?", "body": "\nI think you simply had your nls() syntax wrong.  Works here:\n\n\n## first a neat trick to read the data from embedded text\n> fmdata <- read.csv(textConnection(\"\n+ rank,cum_value\n10,     17396510\n32,     31194809\n96,     53447300\n420,    100379331\n1187,   152238166\n24234,  432238757\n91242,  581332371\n294180, 650880870\n1242185,665227287\"))\n> \n\n\n## then compute cumulative share\n> fmdata[,\"cumshare\"] <- fmdata[,\"cum_value\"] / fmdata[nrow(fmdata),\"cum_value\"]\n> \n\n\n## then check the data, just in case\n> summary(fmdata)\n      rank           cum_value            cumshare      \n Min.   :     10   Min.   : 17396510   Min.   :0.02615  \n 1st Qu.:     96   1st Qu.: 53447300   1st Qu.:0.08034  \n Median :   1187   Median :152238166   Median :0.22885  \n Mean   : 183732   Mean   :298259489   Mean   :0.44836  \n 3rd Qu.:  91242   3rd Qu.:581332371   3rd Qu.:0.87389  \n Max.   :1242185   Max.   :665227287   Max.   :1.00000  \n> \n\n## finally estimate the model, using only the first seven rows of data\n## using the parametric form from the paper and some wild guesses as\n## starting values:\n> fit <- nls(cumshare ~ Beta / ((N50 / rank)^Alpha + 1), data=fmdata[1:7,], start=list(Alpha=1, Beta=1, N50=1e4))\n> summary(fit)\n\nFormula: cumshare ~ Beta/((N50/rank)^Alpha + 1)\n\nParameters:\n       Estimate Std. Error t value Pr(>|t|)    \nAlpha 4.829e-01  5.374e-03   89.86 9.20e-08 ***\nBeta  1.429e+00  2.745e-02   52.07 8.14e-07 ***\nN50   3.560e+04  3.045e+03   11.69 0.000306 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1 \n\nResidual standard error: 0.002193 on 4 degrees of freedom\n\nNumber of iterations to convergence: 8 \nAchieved convergence tolerance: 1.297e-06 \n\n> \n\nwhich is reasonably close to the quoted \n\tN50 = 30714, \u001b$B&A\u001b(B = 0.49, and \u001b$B&B\u001b(B = 1.38.\n\nYou can probably play a little with the nls options to see what effect this\nhas. \n\nThat said, seven observations for three parameters in non-linear model may be\na little hazardous.  One indication is that the estimated parameters values\nare not too stable once you add the eights and nineth row of data.\n\nDirk\n\n-- \nHell, there are no rules here - we're trying to accomplish something. \n                                                  -- Thomas A. Edison\n\n______________________________________________\nR-help@stat.math.ethz.ch mailing list\nhttps://stat.ethz.ch/mailman/listinfo/r-help\nPLEASE do read the posting guide http://www.R-project.org/posting-guide.html\nand provide commented, minimal, self-contained, reproducible code.\n\n"}