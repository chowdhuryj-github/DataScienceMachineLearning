{"category": "ham", "to_address": "samba-cvs@samba.org", "from_address": "tridge@samba.org", "subject": "Rev 465: use the right IP from the passed structure in\n\ttakeip/releaseip calls in http://samba.org/~tridge/ctdb", "body": "------------------------------------------------------------\nrevno: 465\nrevision-id: tridge@samba.org-20070604135456-kgsjednglc6u2pqi\nparent: tridge@samba.org-20070604135446-vk2w3jilvbo4nlnk\ncommitter: Andrew Tridgell \nbranch nick: tridge\ntimestamp: Mon 2007-06-04 23:54:56 +1000\nmessage:\n  use the right IP from the passed structure in takeip/releaseip calls\nmodified:\n  takeover/ctdb_takeover.c       ctdb_takeover.c-20070525071636-a5n1ihghjtppy08r-2\n=== modified file 'takeover/ctdb_takeover.c'\n--- a/takeover/ctdb_takeover.c\t2007-06-04 12:28:52 +0000\n+++ b/takeover/ctdb_takeover.c\t2007-06-04 13:54:56 +0000\n@@ -180,7 +180,7 @@\n \tstate->c = talloc_steal(ctdb, c);\n \tstate->sin = talloc(ctdb, struct sockaddr_in);       \n \tCTDB_NO_MEMORY(ctdb, state->sin);\n-\t*state->sin = *(struct sockaddr_in *)indata.dptr;\t\n+\t*state->sin = pip->sin;\n \n \tDEBUG(0,(\"Takover of IP %s/%u on interface %s\\n\", \n \t\t ip, ctdb->nodes[ctdb->vnn]->public_netmask_bits, \n@@ -284,7 +284,7 @@\n \tstate->c = talloc_steal(state, c);\n \tstate->sin = talloc(state, struct sockaddr_in);       \n \tCTDB_NO_MEMORY(ctdb, state->sin);\n-\t*state->sin = *(struct sockaddr_in *)indata.dptr;\t\n+\t*state->sin = pip->sin;\n \n \tret = ctdb_event_script_callback(ctdb, state, release_ip_callback, state,\n \t\t\t\t\t \"releaseip %s %s %u\",\n\n"}