{"category": "ham", "to_address": "bugs-bitbucket@netlabs.develooper.com", "from_address": "Allison Randal (via RT) <parrotbug-followup@parrotcode.org>", "subject": "[perl #42938] [BUG] allocation failures in res_lea.c ", "body": "# New Ticket Created by  Allison Randal \n# Please include the string:  [perl #42938]\n# in the subject line of all future correspondence about this issue. \n# \n\n\nExtracted from RT #42774, Andy Spieherty wrote:\n > I'm getting various panics and\n > crashes that usually (but not always) appear to be related to string\n > stuff.  I suspect I might not have Parrot_allocate_string() quite right,\n > or there may be other spots elsewhere that assume something about the\n > overall memory layout that I'm violating here.\n\nWhen running under Configure.pl --gc=libc, the file src/gc/res_lea.c \nreplaces src/gc/resources.c.\n\nOn x86 Linux (Ubuntu), this configuration fails 2 tests:\n\nt/library/string_utils.t    0   134    29    4  13.79%  28-29\nt/op/stringu.t              2   512    25    2   8.00%  1 19\n\nBoth tests are failing with the error:\n\nparrot: src/encodings/utf8.c:271: utf8_encode_and_advance: Assertion \n`i->bytepos <= (s)->obj.u._b._buflen' failed.\n\nAllison\n\n"}