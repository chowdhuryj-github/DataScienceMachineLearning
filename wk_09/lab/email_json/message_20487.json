{"category": "ham", "to_address": "samba-cvs@samba.org", "from_address": "jpeach@samba.org", "subject": "svn commit: samba r22614 - in branches/SAMBA_3_0/source: .", "body": "Author: jpeach\nDate: 2007-04-30 18:59:34 +0000 (Mon, 30 Apr 2007)\nNew Revision: 22614\n\nWebSVN: http://websvn.samba.org/cgi-bin/viewcvs.cgi?view=rev&root=samba&rev=22614\n\nLog:\nOnly enable GNU-isms in the Makefile if we can be sure that the GNU\nmake we found is what will be run when the user invokes \"make\".\n\nModified:\n   branches/SAMBA_3_0/source/configure.in\n\n\nChangeset:\nModified: branches/SAMBA_3_0/source/configure.in\n===================================================================\n--- branches/SAMBA_3_0/source/configure.in\t2007-04-30 17:19:49 UTC (rev 22613)\n+++ branches/SAMBA_3_0/source/configure.in\t2007-04-30 18:59:34 UTC (rev 22614)\n@@ -602,10 +602,16 @@\n m4_include(m4/depend.m4)\n \n # Using the dependency files requires GNU make until someone adds support\n-# for Makefile includes for other make implementations.\n+# for Makefile includes for other make implementations. Note that\n+# CHECK_GNU_MAKE() can find a non-default make.\n CHECK_GNU_MAKE()\n-if test \"x$_cv_gnu_make_command\" != \"x\" ; then\n+if test \"x$_cv_gnu_make_command\" != \"x\" -a \\\n+    x`which make` = x`which \"$_cv_gnu_make_command\"` ; then\n     AC_SUBST(MAKE, $_cv_gnu_make_command)\n+else\n+    # If GNU make is not the default, don't enable GNU-isms because we can't\n+    # guarantee that GNU make will actually be the make that is invoked.\n+    ifGNUmake='#'\n fi\n \n AM_DEP_TRACK()\n\n"}