{"category": "ham", "to_address": "Jacques Wagnor <jacques.wagnor@gmail.com>", "from_address": "Prof Brian Ripley <ripley@stats.ox.ac.uk>", "subject": "Re: [R] Alternatives to unlist()", "body": "First, your example works happily in a 1Gb Windows machine under R 2.5.0:\nyour R (2.2.1) is well overdue for an update.\n\nWhat you are generating is a random number of rexp(rate=10) random \nvariables.  So all you need is\n\nn <- 1000000\nN <- sum (rpois(n, 26))\nvv <- rexp(N, 10)\nmean(vv[vv < 0.1])\n\nwhich runs is ca 500Mb and 6 secs.\n\n\nOn Fri, 4 May 2007, Jacques Wagnor wrote:\n\n> Given the following, one of the things I am trying to see is what % of\n> draws are below a certain number:\n>\n> lambda <- 3\n> rate <- 5\n> n <- 5\n>\n> set.seed(123)\n> v <- replicate(n, rexp(rpois(1,lambda), rate))\n> vv <- unlist(v)\n> cat(\"% of draws below 0.1:\", round(length(subset(vv, vv <\n> 0.1))/length(vv)*100,0), \"%\\n\")\n>\n> In actuality, my lambda, rate, and n are 26, 10, 1000000,\n> respectively; which in effect makes the length of vv roughly equal\n> 26'000'000.\n> When I run cat(...), I get the following:\n>\n> Error: cannot allocate vector of size 101540 Kb\n> In addition: Warning messages:\n> 1: Reached total allocation of 1015Mb: see help(memory.size)\n> 2: Reached total allocation of 1015Mb: see help(memory.size)\n>\n> Rather than keep the code as is and resort to memory.limit(), I would\n> like to see how the code can be modified (i.e., alternatives to\n> unlist()) such that I could still see what % of draws are below a\n> certain number.\n>\n> I'd appreciate any suggestions.\n>\n> Regards,\n>\n> platform i386-pc-mingw32\n> arch     i386\n> os       mingw32\n> system   i386, mingw32\n> status\n> major    2\n> minor    2.1\n> year     2005\n> month    12\n> day      20\n> svn rev  36812\n> language R\n>\n> ______________________________________________\n> R-help@stat.math.ethz.ch mailing list\n> https://stat.ethz.ch/mailman/listinfo/r-help\n> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html\n> and provide commented, minimal, self-contained, reproducible code.\n>\n\n-- \nBrian D. Ripley,                  ripley@stats.ox.ac.uk\nProfessor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/\nUniversity of Oxford,             Tel:  +44 1865 272861 (self)\n1 South Parks Road,                     +44 1865 272866 (PA)\nOxford OX1 3TG, UK                Fax:  +44 1865 272595\n\n______________________________________________\nR-help@stat.math.ethz.ch mailing list\nhttps://stat.ethz.ch/mailman/listinfo/r-help\nPLEASE do read the posting guide http://www.R-project.org/posting-guide.html\nand provide commented, minimal, self-contained, reproducible code.\n\n"}