{"category": "ham", "to_address": "<r-help@stat.math.ethz.ch>", "from_address": "Sarah Hawley <sarah@canaryfoundation.org>", "subject": "[R] Multiple color schemes for barchart (lattice)", "body": "Hello R-help.\n\nI am trying to make a stacked barplot where the color of the sections of\neach bar depend on another variable.\n\n> myData[1:11,]\n   score   percent    marker     cellType Malignant\n1      0 100.00000 ESR1 (ER) Bladder.M(5) TRUE\n2      0  80.00000      PAX8 Bladder.M(5) TRUE\n3      1  20.00000      PAX8 Bladder.M(5) TRUE\n4      0 100.00000 ESR1 (ER)   Brain.N(3) FALSE\n5      0 100.00000      PAX8   Brain.N(3) FALSE\n6      3 100.00000 ESR1 (ER) Breast.M(11) TRUE\n7      0 100.00000      PAX8 Breast.M(11) TRUE\n8      0  36.36364 ESR1 (ER) Cervix.M(11) TRUE\n9      1   9.09091 ESR1 (ER) Cervix.M(11) TRUE\n10     2  18.18182 ESR1 (ER) Cervix.M(11) TRUE\n11     3  36.36364 ESR1 (ER) Cervix.M(11) TRUE\n\npalette <- palette(gray(seq(0, 1,len=4)))\ntrellis.par.set(list(par.xlab.text=list(cex=0.85)\n                   , superpose.polygon=list(col=palette())\n                   , axis.text=list(cex=0.8)))\n  \n \nbarchart(percent~cellType|marker\n        , groups=score\n        , data=myData\n        , stack=TRUE\n        , xlab='N=Normal/Benign, M=Malignant'\n        , ylab='Percentage of Cores Staining'\n        , color=palette()\n        , auto.key = list(points = FALSE, rectangles = TRUE, space = \"top\")\n        , scales=list(x=list(rot=70))\n        , layout=c(1,2))\n\nI would like to make the color scheme of the bar differ according to the\nvariable 'Malignant' and add a second color scheme to the key.\n \nAny help would be appreciated!\n--Sarah\n\n \nSarah Hawley\nData Coordinator/Analyst\nCanary Foundation\nsarah@canaryfoundation.org\n415.412.2533\n\nwww.canaryfoundation.org\nStopping cancer early...\nthe best possible investment!\n\n______________________________________________\nR-help@stat.math.ethz.ch mailing list\nhttps://stat.ethz.ch/mailman/listinfo/r-help\nPLEASE do read the posting guide http://www.R-project.org/posting-guide.html\nand provide commented, minimal, self-contained, reproducible code.\n\n"}