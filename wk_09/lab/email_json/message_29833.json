{"category": "ham", "to_address": "samba-cvs@samba.org", "from_address": "tridge@samba.org", "subject": "Rev 303: added a control to get the local vnn in\n\thttp://samba.org/~tridge/ctdb", "body": "------------------------------------------------------------\nrevno: 303\nrevision-id: tridge@samba.org-20070515001716-tndy0z6bafkvdc3v\nparent: tridge@samba.org-20070515001659-uwyvianttzhe05r8\ncommitter: Andrew Tridgell \nbranch nick: tridge\ntimestamp: Tue 2007-05-15 10:17:16 +1000\nmessage:\n  added a control to get the local vnn\nmodified:\n  common/ctdb_control.c          ctdb_control.c-20070426122724-j6gkpiofhbwdin63-1\n  include/ctdb_private.h         ctdb_private.h-20061117234101-o3qt14umlg9en8z0-13\n=== modified file 'common/ctdb_control.c'\n--- a/common/ctdb_control.c\t2007-05-14 03:48:14 +0000\n+++ b/common/ctdb_control.c\t2007-05-15 00:17:16 +0000\n@@ -132,13 +132,14 @@\n \t\treturn 0;\n \t}\n \n-\tcase CTDB_CONTROL_GET_RECMASTER: {\n+\tcase CTDB_CONTROL_GET_RECMASTER:\n \t\treturn ctdb->recovery_master;\n-\t}\n \n-\tcase CTDB_CONTROL_GET_PID: {\n+\tcase CTDB_CONTROL_GET_PID:\n \t\treturn getpid();\n-\t}\n+\n+\tcase CTDB_CONTROL_GET_VNN:\n+\t\treturn ctdb->vnn;\n \n \tcase CTDB_CONTROL_CONFIG: {\n \t\tCHECK_CONTROL_DATA_SIZE(0);\n\n=== modified file 'include/ctdb_private.h'\n--- a/include/ctdb_private.h\t2007-05-12 11:25:26 +0000\n+++ b/include/ctdb_private.h\t2007-05-15 00:17:16 +0000\n@@ -352,6 +352,7 @@\n \t\t    CTDB_CONTROL_SET_RECMASTER,\n \t\t    CTDB_CONTROL_FREEZE,\n \t\t    CTDB_CONTROL_THAW,\n+\t\t    CTDB_CONTROL_GET_VNN,\n };\n \n \n\n"}