{"category": "ham", "to_address": "simo <idra@samba.org>", "from_address": "\"Gerald (Jerry) Carter\" <jerry@samba.org>", "subject": "Re: svn commit: samba r22713 - in\n branches:\tSAMBA_3_0/source/nsswitch SAMBA_3_0_26/source/nsswitch", "body": "-----BEGIN PGP SIGNED MESSAGE-----\nHash: SHA1\n\nSimo,\n\n> You basically reverted some code you already committed \n> and I changed in 3_0_25. Right now each single backend\n> init function can cope with the offline mode. Each one\n> has a delayed initialization mode, so point (c)\n> should not be needed.\n\nbut it is and it now works completely.  Give me another\nday to finish testing the merge.\n\n> The query code should also be able to cope with \n> offline requests, that's the whole point of returning\n> ID_EXPIRED, so that in case we can't really\n> resolve we keep it, otherwise we get the correct return.\n\nNo.  The backend should never be hit at all when\nin offline mode.  That it the point of having the cache.\nThis way the local and remote backends work the\nsame way.  You don't want to allocate ids in offline mode\nas you are not always able to validate the SID.\n\n\n> Basically the problem of avoiding the query completely \n> is that you also avoid querying\n> idmap_tdb/idmap_rid/idmap_passdb/idmap_nss.\n> they all the mappings and can be consulted when offline\n> without problems.\n\ntrue.  I'll continue to revisit this.  But things were\nnot working an now they are.  I don't want to have different\nbackends working in different ways and require each backend\nto be debugged for offline mode individually.\n\nJust give me another day pleas and we can then discuss\nit more.  Thanks\n\n\n\n\ncheers, jerry\n-----BEGIN PGP SIGNATURE-----\nVersion: GnuPG v1.4.3 (GNU/Linux)\nComment: Using GnuPG with Mozilla - http://enigmail.mozdev.org\n\niD8DBQFGPoEOIR7qMdg1EfYRAn70AJsG1n5g4Jekq71Jceg0oLie1dyMPACeNHJC\noVCKDC7D7cqqPJZXj6/zVT4=\n=OK+q\n-----END PGP SIGNATURE-----\n\n"}