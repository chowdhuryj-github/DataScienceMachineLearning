{"category": "ham", "to_address": "samba-cvs@samba.org", "from_address": "tridge@samba.org", "subject": "Rev 389: fixed system() return handling in\n\thttp://samba.org/~tridge/ctdb", "body": "------------------------------------------------------------\nrevno: 389\nrevision-id: tridge@samba.org-20070529070008-jdte02ed9d9c8z4b\nparent: tridge@samba.org-20070529063450-63ene1tr08qffyf9\ncommitter: Andrew Tridgell \nbranch nick: tridge\ntimestamp: Tue 2007-05-29 17:00:08 +1000\nmessage:\n  fixed system() return handling\nmodified:\n  takeover/system.c              system.c-20070525071636-a5n1ihghjtppy08r-3\n=== modified file 'takeover/system.c'\n--- a/takeover/system.c\t2007-05-29 02:55:24 +0000\n+++ b/takeover/system.c\t2007-05-29 07:00:08 +0000\n@@ -275,6 +275,9 @@\n \tCTDB_NO_MEMORY(ctdb, cmdstr);\n \n \tret = system(cmdstr);\n+\tif (ret != -1) {\n+\t\tret = WEXITSTATUS(ret);\n+\t}\n \n \ttalloc_free(cmdstr);\n \ttalloc_free(options);\n\n"}