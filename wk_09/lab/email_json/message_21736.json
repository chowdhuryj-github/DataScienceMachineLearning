{"category": "ham", "to_address": "Gerald (Jerry) Carter <jerry@samba.org>", "from_address": "James Peach <jpeach@samba.org>", "subject": "Re: why is (gid_t)-1 treated as a group mapping failure?", "body": "On 01/05/2007, at 7:22 PM, Gerald (Jerry) Carter wrote:\n\n> -----BEGIN PGP SIGNED MESSAGE-----\n> Hash: SHA1\n>\n> James Peach wrote:\n>> Hi all,\n>>\n>> There's a bunch of code sprinkled throughout the\n>> passdb layer(s) that asserts that -1 cannot be a valid\n>> ID.\n>\n> It's a hack to allow the nss_info layer to return\n> a primary group id and override the Windows primary\n> group (e.g gidNumber attribute in posixAccount for RFC2307).\n\nSo the idea is that when you get an account with gid == -1, you  \nallocate a local gid for it using the idmap allocate backend?\n\n> - -1 seemed a better choice than 0.\n\nYeh, this makes sense, as chown(2) also regards -1 as an invalid GID.\n\n--\nJames Peach | jpeach@samba.org\n\n"}