{"category": "ham", "to_address": "r-help@stat.math.ethz.ch", "from_address": "Qiong Yang <qyang@bu.edu>", "subject": "[R] lmekin() function in kinship package", "body": "Hi,\n\nI had a problem with the lmekin() in kinship package: \nlmekin() can not be wrapped into another function\n\nlibrary(kinship)\n#creat an example dataset\nxx<-rnorm(100)\nyy<-rnorm(100)\nid<-1:100  \ntest.dat<-as.data.frame(cbind(xx,yy,id))\nrm(xx,yy,id)\na<-bdsmatrix(rep(10,10),rep(block,10),dimnames=list(c(1:100),c(1:100)))  \n#100x100 block (n=10) diagonal matrix to indicate the correlation between the 100 observations\n\n#this works, call lmekin directly\nlmekin(yy~xx,random=~1|id,data=test.dat,varlist=a,na.action=na.omit)\n\n#this doesn't work, wrap into another function\n\nfo<-function(x,y,z,data)lmekin(y~x,random=~1|z,data=test.dat,varlist=a,na.action=na.omit)\nfo(xx,yy,id)\n\nError in eval(expr, envir, enclos) : Object \"y\" not found\n\nI did line by line debug within lmekin(). I found the problem was from \nline #25\nm <- eval(m, sys.parent())\n\nHere is the print(m) result before this line\n[1] model.frame(data = data, na.action = na.omit, formula = y ~ x +z)\n\nI will appreciate anyone help me figure out why data cannot be passed \nto the arguments when lmekin() is wrapped into another function? And what can be done\nto fix it? \n\n\nThanks\n\nQiong\n\n______________________________________________\nR-help@stat.math.ethz.ch mailing list\nhttps://stat.ethz.ch/mailman/listinfo/r-help\nPLEASE do read the posting guide http://www.R-project.org/posting-guide.html\nand provide commented, minimal, self-contained, reproducible code.\n\n"}