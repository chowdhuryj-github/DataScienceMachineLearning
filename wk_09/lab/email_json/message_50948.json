{"category": "ham", "to_address": "Peter Sajosi <petersajosi@yahoo.com>", "from_address": "Thomas Lumley <tlumley@u.washington.edu>", "subject": "Re: [R] Error handling", "body": "\nThis is FAQ 7.32 How can I capture or ignore errors in a long simulation?\n\n \t-thomas\n\nOn Tue, 19 Jun 2007, Peter Sajosi wrote:\n\n> Hello,\n>\n>  I have a question about error handling. I run simulation studies and often the program stops with an error, for example during maximum likelihood. I would like the program not to stop but to continue and I would like to ask how the error handling can be set up for this (if it can). I tried to look through manuals etc but unfortunately did not get closer to the solution. Below is a small example with some numbers, where the nlm function gives an error. Is it possible to make R and the program ignore the error?\n>\n>  (there is a small for loop in the end of the example, which breaks - ideally the program would complete the for loop even though there are errors). Of course this is just an example, in the simulation study the error comes up quite rarely but still it is annoying to handle it manually each time.\n>  Many thanks\n> Peter\n>\n>  The example:\n>  ------------\n>\n> logfunc <- function (params) {\n>  vutil1 <- as.matrix(x2[,1:3]) %*% params\n> vutil2 <- as.matrix(x2[,4:6]) %*% params\n>  logl <- 0\n>  for (i in 1:6) {\n>  prob <- log((exp(vutil1[i])*achoices[i,1]+exp(vutil2[i])*achoices[i,2])/(exp(vutil1[i])+exp(vutil2[i])))\n>  logl <- logl + prob\n>  }\n>  return (-logl)\n>  }\n>\n> x2 <- array(c(0,4,1,3,5,3,3,2,1,4,1,2,0,2,2,1,1,4,1.2233310 ,0.0000000 ,0.8155540 ,0.9320617 ,1.4272195 ,1.8349965 , 0.6116655, 3.2622160, 0.8155540, 3.7282469,0.0000000 ,4.5874913 ,0.6116655,3.2622160 ,1.6311080 ,1.8641235, 4.2816586, 0.9174983),dim=c(6,6))\n> achoices <- array(c(1,0,1,0,1,0,0,1,0,1,0,1),dim=c(6,2))\n>  for (k in 1:5) {\n>  nlm(logfunc, c (1,1,1),print.level=2)\n>  }\n>  ---\n>  Thanks!!!\n>  -------\n>\n>\n>\n>\n> ---------------------------------\n> Moody friends. Drama queens. Your life? Nope! - their life, your story.\n>\n> \t[[alternative HTML version deleted]]\n>\n> ______________________________________________\n> R-help@stat.math.ethz.ch mailing list\n> https://stat.ethz.ch/mailman/listinfo/r-help\n> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html\n> and provide commented, minimal, self-contained, reproducible code.\n>\n\nThomas Lumley\t\t\tAssoc. Professor, Biostatistics\ntlumley@u.washington.edu\tUniversity of Washington, Seattle\n\n______________________________________________\nR-help@stat.math.ethz.ch mailing list\nhttps://stat.ethz.ch/mailman/listinfo/r-help\nPLEASE do read the posting guide http://www.R-project.org/posting-guide.html\nand provide commented, minimal, self-contained, reproducible code.\n\n"}