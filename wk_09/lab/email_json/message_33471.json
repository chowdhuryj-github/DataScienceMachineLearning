{"category": "ham", "to_address": "Beginners List <beginners@perl.org>", "from_address": "\"Mumia W.\" <mumia.w.18.spam+nospam@earthlink.net>", "subject": "Re: Regarding files", "body": "On 05/20/2007 11:37 PM, Dharshana Eswaran wrote:\n> Hi All,\n> \n> The below code helps in reading a file in reverse:\n> \n> use strict;\n> use warning;\n> \n> open( FILE, \"<$file_to_reverse\" )\n> \n>  or die( \"Can't open file file_to_reverse: $!\" );\n> \n> @lines = reverse ;\n> foreach $line (@lines) {\n>  # do something with $line\n> }\n> \n> But i am trying to grep for a string in the file and once i get the string,\n> \n> I need to read few lines which occurs before the string. For eg:\n> \n> typedef union\n> {\n>    TYPE_T type;\n>   MODE_T mode;\n> } CHANNEL_INFO_T;\n> \n> Here, I grep for CHANNEL_INFO_T, once i get that, i need to read the\n> elements defined in the union or structure.\n> \n> \n> I have written a code but i am unable to achieve what i wanted.\n> \n> Can anyone guide me in this?\n> \n> Thanks and Regards,\n> Dharshana\n> \n\nYou could use Tie::File to treat the file's lines as an array:\n\n     use strict;\n     use warnings;\n     use Fcntl 'O_RDONLY';\n     require 'Tie/File.pm';\n\n     tie my @file, 'Tie::File', 'anyfile.txt', mode => O_RDONLY\n         or die(\"Tie::File failed: $!\");\n\n     for my $n (0 .. $#file) {\n         local $\\ = \"\\n\";\n         $_ = $file[$n];\n         if (/CHANNEL_INFO_T/) {\n             print $file[$n-2];\n             print $file[$n-1];\n             print;\n         }\n     }\n\n     untie @file;\n\n\n\n\n\n\n\n-- \nTo unsubscribe, e-mail: beginners-unsubscribe@perl.org\nFor additional commands, e-mail: beginners-help@perl.org\nhttp://learn.perl.org/\n\n\n"}