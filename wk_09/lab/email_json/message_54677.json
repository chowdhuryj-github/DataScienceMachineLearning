{"category": "ham", "to_address": "r-help@stat.math.ethz.ch", "from_address": "Mike Meredith <mmeredith@wcs.org>", "subject": "Re: [R] warning in a loop", "body": "\n\nYou can investigate what's gone wrong after the loop has failed by looking\nat the values of i, k, p, and t. Although d[(d[,(i+1)]%in%1),1] produces a\nvector, k has only one element. Same with p. Should then be obvious why the\nt.test produces an error.\n\nThe problem is with the [i] index for k and p; take those away and it works.\nIf you want to keep the values generated in the loop, make k and p lists and\nindex with k[[i]] and p[[i]].\n\n\nA better way to do this would be to use 'sample' to randomize the measured\nvalues in d[,1] and then use d[,2] to group them for testing. You can then\nuse hundreds of iterations:\n\nt <- rep(NA, 999) \nfor(i in 1:999) {\n   samp <- sample(d[,1])\n   t <- t.test(samp[d[,2]==1], samp[d[,2]==2])$p.value\n}\nsum(t < 0.05)  # How many were 'significant'?\n\nNote that I prefer to use t <- rep(NA,...) to allocate space, rather than\n1:999, so that NA appears as the result if there's a problem.\n\nWhy not just do a randomization test?\n\nt <- rep(NA, 1000)\nt[1] <- mean(d[d[,2]==1,1]) - mean(d[d[,2]==2,1]) # This is the observed\ndifference in means\nfor(i in 2:1000) {\n   samp <- sample(d[,1])\n   t[i] <- mean(samp[d[,2]==1]) - mean(samp[d[,2]==2])\n}\nt <- abs(t)   # Skip this line if you want a 1-sided test\nsum(t >= t[1])/1000  # This is the 'p-value'\n\nHTH, Mike.\n\n\nTavpritesh Sethi wrote:\n> \n> hi all,\n> I have a matrix with first column having some measurable values, these are\n> indexed by the numerals 1,2 and 3 in the other columns of the data and may\n> be interpreted as values for categories 1,2 and 3.\n> I have written the following loop\n> t<-1:10\n>  for(i in 1:10)\n> + {\n> + k[i]<-d[(d[,(i+1)]%in%1),1]\n> + p[i]<-d[(d[,(i+1)]%in%2),1]\n> + t[i]<-t.test(k[i],p[i])$p.value\n> + }\n> Error in t.test.default(k[i], p[i]) : not enough 'x' observations\n> In addition: Warning messages:\n> 1: number of items to replace is not a multiple of replacement length\n> 2: number of items to replace is not a multiple of replacement length\n> \n> As you might have understood, I want to test for difference between the\n> two\n> cagories: \"k\" and \"v\". the second column of the data is the original\n> categorization and the rest columns(3:10) are a matrix of randomized\n> values\n> between 1 to 3. (I have three categories)\n> My purpose of doing so is to check whether significant difference comes up\n> in the randomized data also. This is to check the effect of the small\n> sample\n> size of my data.\n> Please suggest a way or an alternative to the above approach.\n> \n> \t[[alternative HTML version deleted]]\n> \n> ______________________________________________\n> R-help@stat.math.ethz.ch mailing list\n> https://stat.ethz.ch/mailman/listinfo/r-help\n> PLEASE do read the posting guide\n> http://www.R-project.org/posting-guide.html\n> and provide commented, minimal, self-contained, reproducible code.\n> \n> \n\n-- \nView this message in context: http://www.nabble.com/warning-in-a-loop-tf3969850.html#a11273379\nSent from the R help mailing list archive at Nabble.com.\n\n______________________________________________\nR-help@stat.math.ethz.ch mailing list\nhttps://stat.ethz.ch/mailman/listinfo/r-help\nPLEASE do read the posting guide http://www.R-project.org/posting-guide.html\nand provide commented, minimal, self-contained, reproducible code.\n\n"}