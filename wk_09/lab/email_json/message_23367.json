{"category": "ham", "to_address": "Roger.Bivand@nhh.no", "from_address": "Alberto Vieira Ferreira Monteiro <albmont@centroin.com.br>", "subject": "Re: [R] Help with map", "body": "[for those that worry about these things, this _is_ a homework\nassignment. However, it's not an R homework, it's a Geography\nand History homework... and I want to use R to create a pretty\nmap]\n\nRoger Bivand wrote:\n>\n>> Is there any way to associate one color to each country?\n>\n> Try:\n>\n> map_poly_obj <- map(\"worldHires\", c(\"Argentina\", \"Brazil\"), plot=FALSE,\n>   fill=TRUE)\n> str(map_poly_obj)\n>\n> and you'll see that the component of interest is the named polygons, of\n> which there are 28, namely\n>\nOk, I guess I can see what you mean. It worked, but I don't think\nthis is a practical way to draw things.\n\nFor example, suppose [this would help homework mentioned above] I\nwant to draw a series of maps showing the evolution of Communism\nin the XX century. I would like to start with a 1917 map, showing most\ncountries as in...\n\nmap(\"worldHires\")\n\n... but with the Soviet Union in red. I don't see how I could mix the two \nmaps (BTW, there's no Russia in worldHires, but there is a USSR...)\n\nmap(\"worldHires\"); map(\"worldHires\", \"USSR\", col=\"red\", fill=T)\n\n>\n> map_poly_obj$names\n>\n> So you can build a matching colours vector, or:\n>\n> library(sp)\n> library(maptools)\n> IDs <- sapply(strsplit(map_poly_obj$names, \":\"), function(x) x[1])\n> SP_AB <- map2SpatialPolygons(map_poly_obj, IDs=IDs,\n>   proj4string=CRS(\"+proj=longlat +datum=wgs84\"))\n>\n> but\n>\n> plot(SP_AB, col=c(\"cyan\", \"green\"))\n>\n> still misses, because some polygons have their rings of coordinates in\n> counter-clockwise order, so:\n>\n> pl_new <- lapply(slot(SP_AB, \"polygons\"), checkPolygonsHoles)\n> slot(SP_AB, \"polygons\") <- pl_new\n> # please forget the assignment to the slot and do not do it unless you can\n> # replace what was there before\n>\n> plot(SP_AB, col=c(\"cyan\", \"green\"), axes=TRUE)\n>\n> now works. Moreover, SP_AB is a SpatialPolygons object, which can be\n> promoted to a SpatialPolygonsDataFrame object, for a data slot holding a\n> data.frame with row names matching the Polygons ID values:\n>\n> sapply(slot(SP_AB, \"polygons\"), function(x) slot(x, \"ID\"))\n>\n> So adding a suitable data frame gets you to the lattice graphics method\n>\n> spplot(SP_AB, \"my_var\")\n>\n> Hope this helps,\n>\nSo, in the above mentioned case, I could do something like:\n\nlibrary(mapdata)\ncommies <- c(\"USSR\", \"Mongolia\") \n# Mongolia was the 2nd communist country, in 1925\nmap_poly_obj <- map(\"worldHires\", plot=FALSE)\nmap_poly_commies <- map(\"worldHires\", commies,\n  plot=FALSE, fill=TRUE)\nplot(map_poly_obj, type=\"l\")\npolygon(map_poly_commies, col=\"red\", border=\"black\")\n\nI guess I can keep going, unless there is a simpler solution.\n\nAlberto Monteiro\n\n______________________________________________\nR-help@stat.math.ethz.ch mailing list\nhttps://stat.ethz.ch/mailman/listinfo/r-help\nPLEASE do read the posting guide http://www.R-project.org/posting-guide.html\nand provide commented, minimal, self-contained, reproducible code.\n\n"}