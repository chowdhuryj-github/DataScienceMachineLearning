{"category": "ham", "to_address": "samba-technical@lists.samba.org", "from_address": "James Peach <jpeach@samba.org>", "subject": "[PATCH 2/4] Add configure test for Darwin initgroups system call. ", "body": "Add configure test for Darwin initgroups system call.\n\n---\nsource/configure.in |   15 +++++++++++++++\n1 files changed, 15 insertions(+), 0 deletions(-)\n\ndiff --git a/source/configure.in b/source/configure.in\nindex 4106551..cbbf689 100644\n--- a/source/configure.in\n+++ b/source/configure.in\n@@ -3100,6 +3100,21 @@ if test x\"$samba_cv_USE_SETUIDX\" = x\"yes\"; then\nfi\nfi\n+AC_CACHE_CHECK([for the Darwin initgroups system call],\n+\tsamba_cv_DARWIN_INITGROUPS,\n+\tAC_TRY_LINK([\n+#include \n+#include \n+\t],\n+\t[ syscall(SYS_initgroups, 16, NULL, NULL, 0); ],\n+\tsamba_cv_DARWIN_INITGROUPS=yes,\n+\tsamba_cv_DARWIN_INITGROUPS=no)\n+)\n+\n+if test x\"$samba_cv_DARWIN_INITGROUPS\" = x\"yes\" ; then\n+    AC_DEFINE(HAVE_DARWIN_INITGROUPS, 1,\n+\t[Whether to use the Darwin-specific initgroups system call])\n+fi\nAC_CACHE_CHECK([for working mmap],samba_cv_HAVE_MMAP,[\nAC_TRY_RUN([#include \"${srcdir-.}/tests/shared_mmap.c\"],\n--\n1.5.2.1\n\n\n--\nJames Peach | jpeach@samba.org\n\n\n"}