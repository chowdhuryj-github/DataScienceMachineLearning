{"category": "ham", "to_address": "samba-cvs@samba.org", "from_address": "mimir@samba.org", "subject": "svn commit: samba r22809 - in branches/SAMBA_4_0/source/libnet: .", "body": "Author: mimir\nDate: 2007-05-11 21:45:03 +0000 (Fri, 11 May 2007)\nNew Revision: 22809\n\nWebSVN: http://websvn.samba.org/cgi-bin/viewcvs.cgi?view=rev&root=samba&rev=22809\n\nLog:\nuse buffer size specified in libnet context.\n\n\nrafal\n\n\nModified:\n   branches/SAMBA_4_0/source/libnet/libnet_domain.c\n   branches/SAMBA_4_0/source/libnet/libnet_domain.h\n\n\nChangeset:\nModified: branches/SAMBA_4_0/source/libnet/libnet_domain.c\n===================================================================\n--- branches/SAMBA_4_0/source/libnet/libnet_domain.c\t2007-05-11 21:44:18 UTC (rev 22808)\n+++ branches/SAMBA_4_0/source/libnet/libnet_domain.c\t2007-05-11 21:45:03 UTC (rev 22809)\n@@ -956,7 +956,7 @@\n \t\t/* prepare next round of enumeration */\n \t\ts->enumdom.in.connect_handle = &s->connect_handle;\n \t\ts->enumdom.in.resume_handle  = &s->resume_handle;\n-\t\ts->enumdom.in.buf_size       = s->buf_size;\n+\t\ts->enumdom.in.buf_size       = s->ctx->samr.buf_size;\n \t\ts->enumdom.out.resume_handle = &s->resume_handle;\n \n \t\t/* send the request */\n@@ -1073,9 +1073,6 @@\n \ts->hostname = talloc_strdup(c, io->in.hostname);\n \tif (composite_nomem(s->hostname, c)) return c;\n \n-\t/* set the default buffer size if not stated explicitly */\n-\ts->buf_size = (io->in.buf_size == 0) ? 512 : io->in.buf_size;\n-\n \t/* check whether samr pipe has already been opened */\n \tif (ctx->samr.pipe == NULL) {\n \t\t/* prepare rpc connect call */\n\nModified: branches/SAMBA_4_0/source/libnet/libnet_domain.h\n===================================================================\n--- branches/SAMBA_4_0/source/libnet/libnet_domain.h\t2007-05-11 21:44:18 UTC (rev 22808)\n+++ branches/SAMBA_4_0/source/libnet/libnet_domain.h\t2007-05-11 21:45:03 UTC (rev 22809)\n@@ -52,7 +52,6 @@\n struct libnet_DomainList {\n \tstruct {\n \t\tconst char *hostname;\n-\t\tconst int buf_size;\n \t} in;\n \tstruct {\n \t\tint count;\n\n"}