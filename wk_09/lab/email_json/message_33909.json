{"category": "ham", "to_address": "r-help@stat.math.ethz.ch", "from_address": "\"Earl F. Glynn\" <efg@stowers-institute.org>", "subject": "[R] Need 64-bit integers on 32-bit platform", "body": "I'm using the latest R on Windows XP:\n\n> R.version\n               _\nplatform       i386-pc-mingw32\narch           i386\nos             mingw32\nsystem         i386, mingw32\nstatus\nmajor          2\nminor          5.0\nyear           2007\nmonth          04\nday            23\nsvn rev        41293\nlanguage       R\nversion.string R version 2.5.0 (2007-04-23)\n\nI understand this:\n\n> .Machine$integer.max\n[1] 2147483647\n\n> .Machine$sizeof.longlong\n[1] 8\n\nSo how can I get a \"longlong\" (i.e., 64-bit = 8-byte integers) in my \nenvironment?  Where is there no storage.mode of \"longlong\" or \"int64\"?\n\nI'm reading electrophysiology data with a time stamp that's in a 64-bit \ninteger (it's a microsecond clock count) but I'm getting negative values \nreturned in R:\n\n# Why no warning if this call doesn't return an 8-byte integer?\nTimeStamp   <- readBin(connection, integer(), size=8,  1)\n[1] -311761023\n[1] -311756172\n\nI can get the hex values of these numbers like this:\n\nTimeStamp   <- readBin(connection, raw(),       8)\n[1] 81 e7 6a ed 01 00 00 00\n[1] 74 fa 6a ed 01 00 00 00\n\nI can see what these number should be by converting to decimal in Excel:\n=HEX2DEC(\"01ed6ae781\")\n8278173569\n\n=HEX2DEC(\"01ed6afa74\")\n8278178420\n\nHow can I get these 8-byte integers in R so I don't have to use this ugly \nkludge?\n\n# KLUDGE\nTimeStamp   <- readBin(connection, integer(), size=4,  2)\n\n> TimeStamp\n[1] -311761023          1\n\n# Convert integers to doubles since a double has larger range for integers \nthan 32-bit integers:\n>storage.mode(TimeStamp) <- \"double\"\n\n# This seems to work, but is too ugly:\n> TimeStamp[2]*2^32 + (2^32 + TimeStamp[1])\n[1] 8278173569\n\nCan anyone suggest a better way?\n\nThanks for any suggestions.\n\nefg\n\nEarl F. Glynn\nStowers Institute for Medical Research\n\n______________________________________________\nR-help@stat.math.ethz.ch mailing list\nhttps://stat.ethz.ch/mailman/listinfo/r-help\nPLEASE do read the posting guide http://www.R-project.org/posting-guide.html\nand provide commented, minimal, self-contained, reproducible code.\n\n"}