{"category": "ham", "to_address": "samba-cvs@samba.org", "from_address": "obnox@samba.org", "subject": "svn commit: samba r23711 - in\n\tbranches/SAMBA_3_0/examples/scripts/users_and_groups: .", "body": "Author: obnox\nDate: 2007-07-04 23:21:51 +0000 (Wed, 04 Jul 2007)\nNew Revision: 23711\n\nWebSVN: http://websvn.samba.org/cgi-bin/viewcvs.cgi?view=rev&root=samba&rev=23711\n\nLog:\nRefactor the actual creation of object into its own small function.\n\nMichael\n\n\nModified:\n   branches/SAMBA_3_0/examples/scripts/users_and_groups/createdomobj.pl\n\n\nChangeset:\nModified: branches/SAMBA_3_0/examples/scripts/users_and_groups/createdomobj.pl\n===================================================================\n--- branches/SAMBA_3_0/examples/scripts/users_and_groups/createdomobj.pl\t2007-07-04 22:30:25 UTC (rev 23710)\n+++ branches/SAMBA_3_0/examples/scripts/users_and_groups/createdomobj.pl\t2007-07-04 23:21:51 UTC (rev 23711)\n@@ -116,7 +116,7 @@\n \texit 1;\n }\n \n-# rpc open/close functions:\n+# utility functions:\n \n sub open_rpc_pipe {\n \tprint \"opening rpc pipe\\n\";\n@@ -129,20 +129,22 @@\n \tclose(IPC);\n }\n \n+sub do_create {\n+\tmy $target_name = shift;\n+\tprint \"creating $target_type $target_name\\n\";\n+\tprint IPC \"$rpc_cmd $target_name\\n\";\n+}\n+\n # main:\n \n open_rpc_pipe();\n \n if (\"x$startnum\" eq \"x\") {\n-\tmy $target_name = $prefix;\n-\tprint \"creating $target_type $target_name\\n\";\n-\tprint IPC \"$rpc_cmd $target_name\\n\";\n+\tdo_create($prefix);\n }\n else {\n \tfor (my $num = 1; $num <= $num_targets; ++$num) {\n-\t\tmy $target_name = sprintf \"%s%.05d\", $prefix, $startnum + $num - 1;\n-\t\tprint \"creating $target_type $target_name\\n\";\n-\t\tprint IPC \"$rpc_cmd $target_name\\n\";\n+\t\tdo_create(sprintf \"%s%.05d\", $prefix, $startnum + $num - 1);\n \t\tif (($num) % 500 == 0) {\n \t\t\tprintf(\"500 \".$target_type.\"s created\\n\");\n \t\t\tclose_rpc_pipe();\n@@ -151,5 +153,6 @@\n \t\t}\n \t}\n }\n+\n close_rpc_pipe();\n \n\n"}