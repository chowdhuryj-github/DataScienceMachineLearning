{"category": "ham", "to_address": "\"Julien Barnier\" <julien@no-log.org>, r-help@stat.math.ethz.ch", "from_address": "\"Greg Snow\" <Greg.Snow@intermountainmail.org>", "subject": "Re: [R] Two basic data manipulation questions (counting and\n aggregating)", "body": "For the 1st question, if every record with the same id is together in a\nblock, then \n\n> mydf$counter <- unlist( tapply( mydf$type, mydf$id, rank, tie='first'\n) ) \n\nShould give you your counter column\n\nIf the id's are not in blocks then try:\n> mydf$counter <- ave(tmp$type, factor(tmp$id), FUN=function(x) rank(x,\ntie='first'))\n\nFor the second question, look at the collapse argument to paste.  Using\npaste with collapse='' should give you the scalar that you can use with\naggregate.\n\nHope this helps,\n\n-- \nGregory (Greg) L. Snow Ph.D.\nStatistical Data Center\nIntermountain Healthcare\ngreg.snow@intermountainmail.org\n(801) 408-8111\n \n \n\n> -----Original Message-----\n> From: r-help-bounces@stat.math.ethz.ch \n> [mailto:r-help-bounces@stat.math.ethz.ch] On Behalf Of Julien Barnier\n> Sent: Friday, April 13, 2007 5:08 AM\n> To: r-help@stat.math.ethz.ch\n> Subject: [R] Two basic data manipulation questions (counting \n> and aggregating)\n> \n> Dear R users,\n> \n> I hav two basic data manipulations questions that I can't resolve.\n> \n> My data is a data frame which look like the following :\n> \n> id     type\n> 10002  \"7\"\n> 10061  \"1\"\n> 10061  \"1\"\n> 10061  \"4\"\n> 10065  \"7\"\n> 10114  \"1\"\n> 10114  \"1\"\n> 10114  \"4\"\n> 10136  \"7\"\n> 10136  \"2\"\n> 10136  \"2\"\n> \n> \n> First, I would like to create a \"counter\" variable which will \n> count the rank of each row inside each \"id\" level, ie something like :\n> \n> id     type   counter\n> 10002  \"7\"      1 \n> 10061  \"1\"      1\n> 10061  \"1\"      2\n> 10061  \"4\"      3\n> 10065  \"7\"      1\n> 10114  \"1\"      1 \n> 10114  \"1\"      2\n> 10114  \"4\"      3\n> 10136  \"7\"      1\n> 10136  \"2\"      2\n> 10136  \"2\"      3\n> \n> Is there a straightforward way to do that, without using \n> several \"for\" loops ?\n> \n> The second thing I would like to do is to aggregate the first \n> data.frame by concatenating the 'type' values for each 'id', \n> ie I'd like to obtain something like :\n> \n> id     value\n> 10002  7\n> 10061  114\n> 10065  7\n> 10114  114\n> 10136  722\n> \n> I have tried the \"aggregate\" function, but it doesn't work \n> because the \"paste\" function doesn't return a scalar value. \n> Using tapply seems to work, but is not straightforward, and I \n> wanted to know if there is a simple way to do this.\n> \n> Thanks in advance for any help.\n> \n> --\n> Julien\n> \n> ______________________________________________\n> R-help@stat.math.ethz.ch mailing list\n> https://stat.ethz.ch/mailman/listinfo/r-help\n> PLEASE do read the posting guide \n> http://www.R-project.org/posting-guide.html\n> and provide commented, minimal, self-contained, reproducible code.\n>\n\n______________________________________________\nR-help@stat.math.ethz.ch mailing list\nhttps://stat.ethz.ch/mailman/listinfo/r-help\nPLEASE do read the posting guide http://www.R-project.org/posting-guide.html\nand provide commented, minimal, self-contained, reproducible code.\n\n"}