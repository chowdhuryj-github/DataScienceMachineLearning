{"category": "ham", "to_address": "bugs-bitbucket@netlabs.develooper.com", "from_address": "Mark Glines (via RT) <parrotbug-followup@parrotcode.org>", "subject": "[perl #42563] Makefile.PL dies in an ugly way when compiler not found ", "body": "# New Ticket Created by  Mark Glines \n# Please include the string:  [perl #42563]\n# in the subject line of all future correspondence about this issue. \n# \n\n\nI ran Makefile.PL on a random windows box which hasn't had its compiler\ninstalled correctly yet.  Rather than emitting an error message about\nhow it couldn't find my compiler, it apparently passed the test, and\nthen crashed multiple times later on:\n\n\nC:\\Documents and Settings\\mark.glines.AIRTEGRITY.000\\Desktop\\parrot>perl Makefil\ne.PL\nParrot Version 0.4.10 Configure 2.0\nCopyright (C) 2001-2007, The Perl Foundation.\n\nHello, I'm Configure. My job is to poke and prod your system to figure out\nhow to build Parrot. The process is completely automated, unless you passed in\nthe `--ask' flag on the command line, in which case it'll prompt you for a few\npieces of info.\n\nSince you're running this program, you obviously have Perl 5--I'll be pulling\nsome defaults from its configuration.\n\nChecking MANIFEST.....................................................done.\nSetting up Configure's default values.................................done.\nSetting up installation paths.........................................done.\nTweaking settings for miniparrot...................................skipped.\nLoading platform and local hints files................................done.\nDetermining nongenerated header files.................................done.\nDetermining what C compiler and linker to use.........................done.\nDetermining whether make is installed..................................yes.\nDetermining whether lex is installed...............................skipped.\nDetermining whether yacc is installed..............................skipped.\nDetermining if your C compiler is actually gcc...\nstep auto::gcc died during execution: C compiler failed (see test.cco) at lib/Pa\nrrot/Configure/Step.pm line 504\n        Parrot::Configure::Step::cc_build() called at config/auto/gcc.pm line 37\n\n        auto::gcc::runstep('auto::gcc=HASH(0x1e1db18)', 'Parrot::Configure=HASH(\n0x1a52550)') called at lib/Parrot/Configure.pm line 267\n        eval {...} called at lib/Parrot/Configure.pm line 261\n        Parrot::Configure::_runstep('Parrot::Configure=HASH(0x1a52550)', 'Parrot\n::Configure::Task=HASH(0x1a52ab4)', 'undef', 'undef', 'undef', 11) called at lib\n/Parrot/Configure.pm line 192\n        Parrot::Configure::runsteps('Parrot::Configure=HASH(0x1a52550)') called\nat Configure.pl line 324\n\n at Configure.pl line 324\n\nDetermining if your C compiler is actually Visual C++...\nstep auto::msvc died during execution: C compiler failed (see test.cco) at lib/P\narrot/Configure/Step.pm line 504\n        Parrot::Configure::Step::cc_build() called at config/auto/msvc.pm line 3\n4\n        auto::msvc::runstep('auto::msvc=HASH(0x1d9e81c)', 'Parrot::Configure=HAS\nH(0x1a52550)') called at lib/Parrot/Configure.pm line 267\n        eval {...} called at lib/Parrot/Configure.pm line 261\n        Parrot::Configure::_runstep('Parrot::Configure=HASH(0x1a52550)', 'Parrot\n::Configure::Task=HASH(0x1a52af0)', 'undef', 'undef', 'undef', 12) called at lib\n/Parrot/Configure.pm line 192\n        Parrot::Configure::runsteps('Parrot::Configure=HASH(0x1a52550)') called\nat Configure.pl line 324\n\n at Configure.pl line 324\n\nEnabling optimization...................................................no.\nDetermining flags for building shared libraries.......................done.\nDetermine if parrot should be linked against a shared library..........yes.\nDetermining what charset files should be compiled in..................done.\nDetermining what encoding files should be compiled in.................done.\nDetermining what types Parrot should use..............................done.\nDetermining what opcode files should be compiled in...................done.\nDetermining what pmc files should be compiled in......................done.\nDetermining your minimum pointer alignment...\nstep auto::alignptrs died during execution: C compiler failed (see test.cco) at\nlib/Parrot/Configure/Step.pm line 504\n        Parrot::Configure::Step::cc_build() called at config/auto/alignptrs.pm l\nine 54\n        auto::alignptrs::runstep('auto::alignptrs=HASH(0x1e1666c)', 'Parrot::Con\nfigure=HASH(0x1a52550)') called at lib/Parrot/Configure.pm line 267\n        eval {...} called at lib/Parrot/Configure.pm line 261\n        Parrot::Configure::_runstep('Parrot::Configure=HASH(0x1a52550)', 'Parrot\n::Configure::Task=HASH(0x1a52d0c)', 'undef', 'undef', 'undef', 21) called at lib\n/Parrot/Configure.pm line 192\n        Parrot::Configure::runsteps('Parrot::Configure=HASH(0x1a52550)') called\nat Configure.pl line 324\n\n at Configure.pl line 324\n\nProbing for C headers.................................................done.\nDetermining some sizes...\nstep auto::sizes died during execution: C compiler failed (see test.cco) at lib/\nParrot/Configure/Step.pm line 504\n        Parrot::Configure::Step::cc_build() called at config/auto/sizes.pm line\n57\n        auto::sizes::runstep('auto::sizes=HASH(0x1db397c)', 'Parrot::Configure=H\nASH(0x1a52550)') called at lib/Parrot/Configure.pm line 267\n        eval {...} called at lib/Parrot/Configure.pm line 261\n        Parrot::Configure::_runstep('Parrot::Configure=HASH(0x1a52550)', 'Parrot\n::Configure::Task=HASH(0x1a52d84)', 'undef', 'undef', 'undef', 23) called at lib\n/Parrot/Configure.pm line 192\n        Parrot::Configure::runsteps('Parrot::Configure=HASH(0x1a52550)') called\nat Configure.pl line 324\n\n at Configure.pl line 324\n\nComputing native byteorder for Parrot's wordsize...\nstep auto::byteorder died during execution: C compiler failed (see test.cco) at\nlib/Parrot/Configure/Step.pm line 504\n        Parrot::Configure::Step::cc_build() called at config/auto/byteorder.pm l\nine 31\n        auto::byteorder::runstep('auto::byteorder=HASH(0x1db10fc)', 'Parrot::Con\nfigure=HASH(0x1a52550)') called at lib/Parrot/Configure.pm line 267\n        eval {...} called at lib/Parrot/Configure.pm line 261\n        Parrot::Configure::_runstep('Parrot::Configure=HASH(0x1a52550)', 'Parrot\n::Configure::Task=HASH(0x1a52dc0)', 'undef', 'undef', 'undef', 24) called at lib\n/Parrot/Configure.pm line 192\n        Parrot::Configure::runsteps('Parrot::Configure=HASH(0x1a52550)') called\nat Configure.pl line 324\n\n at Configure.pl line 324\n\nTest the type of va_ptr (this test is likely to segfault)...\nstep auto::va_ptr died during execution: Unknown va_ptr type at config/auto/va_p\ntr.pm line 38.\n\n at Configure.pl line 324\n\nFiguring out how to pack() Parrot's types...Use of uninitialized value in numeri\nc eq (==) at config/auto/pack.pm line 45.\nUse of uninitialized value in numeric eq (==) at config/auto/pack.pm line 45.\nUse of uninitialized value in numeric eq (==) at config/auto/pack.pm line 45.\nUse of uninitialized value in numeric eq (==) at config/auto/pack.pm line 45.\nUse of uninitialized value in numeric eq (==) at config/auto/pack.pm line 45.\nUse of uninitialized value in string eq at config/auto/pack.pm line 45.\nConfigure.pl:  Unable to find a suitable packtype for intvalsize.\nUse of uninitialized value in pack at config/auto/pack.pm line 59.\nUse of uninitialized value in numeric eq (==) at config/auto/pack.pm line 45.\nUse of uninitialized value in numeric eq (==) at config/auto/pack.pm line 45.\nUse of uninitialized value in numeric eq (==) at config/auto/pack.pm line 45.\nUse of uninitialized value in numeric eq (==) at config/auto/pack.pm line 45.\nUse of uninitialized value in numeric eq (==) at config/auto/pack.pm line 45.\nUse of uninitialized value in string eq at config/auto/pack.pm line 45.\nConfigure.pl:  Unable to find a suitable packtype for opcode_t_size.\nUse of uninitialized value in pack at config/auto/pack.pm line 59.\nUse of uninitialized value in numeric eq (==) at config/auto/pack.pm line 82.\nUse of uninitialized value in numeric eq (==) at config/auto/pack.pm line 91.\nUse of uninitialized value in numeric eq (==) at config/auto/pack.pm line 91.\n..........................done.\nFiguring out what formats should be used for sprintf..................done.\nDetermining if your C library has a working S_ISREG.....................no.\nDetermining architecture, OS and JIT capability.......................done.\nGenerating CPU specific stuff...\nstep gen::cpu died during execution: C compiler failed (see test.cco) at lib/Par\nrot/Configure/Step.pm line 504\n        Parrot::Configure::Step::cc_build('-DPARROT_CONFIG_TEST') called at conf\nig/gen/cpu/i386/auto.pm line 35\n        gen::cpu::i386::auto::runstep('gen::cpu::i386::auto', 'Parrot::Configure\n=HASH(0x1a52550)', 'gen::cpu=HASH(0x1db8ad8)', 'Parrot::Configure=HASH(0x1a52550\n)') called at config/gen/cpu.pm line 44\n        gen::cpu::runstep('gen::cpu=HASH(0x1db8ad8)', 'Parrot::Configure=HASH(0x\n1a52550)') called at lib/Parrot/Configure.pm line 267\n        eval {...} called at lib/Parrot/Configure.pm line 261\n        Parrot::Configure::_runstep('Parrot::Configure=HASH(0x1a52550)', 'Parrot\n::Configure::Task=HASH(0x1a52f28)', 'undef', 'undef', 'undef', 30) called at lib\n/Parrot/Configure.pm line 192\n        Parrot::Configure::runsteps('Parrot::Configure=HASH(0x1a52550)') called\nat Configure.pl line 324\n\n at Configure.pl line 324\n\nVerifying that the compiler supports function pointer casts...Although it is not\n required by the ANSI C standard,\nParrot requires the ability to cast from void pointers to function\npointers for its JIT support.\n\nYour compiler does not appear to support this behavior with the\nflags you have specified.  You must adjust your settings in order\nto use the JIT code.\n\nIf you wish to continue without JIT support, please re-run this script\nWith the '--jitcapable=0' argument.\n\nC:\\Documents and Settings\\mark.glines.AIRTEGRITY.000\\Desktop\\parrot>\n\n"}