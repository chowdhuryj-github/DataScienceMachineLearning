{"category": "ham", "to_address": "samba-cvs@samba.org", "from_address": "metze@samba.org", "subject": "svn commit: samba r22601 - in branches/SAMBA_4_0/source/selftest: .", "body": "Author: metze\nDate: 2007-04-30 11:16:50 +0000 (Mon, 30 Apr 2007)\nNew Revision: 22601\n\nWebSVN: http://websvn.samba.org/cgi-bin/viewcvs.cgi?view=rev&root=samba&rev=22601\n\nLog:\nrun net join with the correct socket_wrapper and krb5 configuration\n\nmetze\nModified:\n   branches/SAMBA_4_0/source/selftest/Samba4.pm\n\n\nChangeset:\nModified: branches/SAMBA_4_0/source/selftest/Samba4.pm\n===================================================================\n--- branches/SAMBA_4_0/source/selftest/Samba4.pm\t2007-04-30 10:49:42 UTC (rev 22600)\n+++ branches/SAMBA_4_0/source/selftest/Samba4.pm\t2007-04-30 11:16:50 UTC (rev 22601)\n@@ -670,8 +670,14 @@\n \n \t$ret or die(\"Unable to provision\");\n \n-\tsystem(\"$self->{bindir}/net join $ret->{CONFIGURATION} $dcvars->{DOMAIN} member -U$dcvars->{USERNAME}\\%$dcvars->{PASSWORD}\") == 0 or die(\"Join failed\");\n+\tmy $cmd = \"\";\n+\t$cmd .= \"SOCKET_WRAPPER_DEFAULT_IFACE=\\\"$ret->{SOCKET_WRAPPER_DEFAULT_IFACE}\\\" \";\n+\t$cmd .= \"KRB5_CONFIG=\\\"$ret->{KRB5_CONFIG}\\\" \";\n+\t$cmd .= \"$self->{bindir}/net join $ret->{CONFIGURATION} $dcvars->{DOMAIN} member\";\n+\t$cmd .= \" -U$dcvars->{USERNAME}\\%$dcvars->{PASSWORD}\";\n \n+\tsystem($cmd) == 0 or die(\"Join failed\\n$cmd\");\n+\n \t$ret->{SMBD_TEST_FIFO} = \"$prefix/smbd_test.fifo\";\n \t$ret->{SMBD_TEST_LOG} = \"$prefix/smbd_test.log\";\n \t$ret->{SMBD_TEST_LOG_POS} = 0;\n\n"}