{"category": "ham", "to_address": "r-help@stat.math.ethz.ch", "from_address": "Vladimir Eremeev <wl2776@gmail.com>", "subject": "Re: [R] determining a parent function name", "body": "\nDoes\n  tail(capture.output(traceback()),n=1)\ndo what you want?\n\nthat is \n\nerror <- function(...) {\n   msg <- paste(..., sep = \"\")\n   if(!length(msg)) msg <- \"\"\n   if(require(tcltk, quiet = TRUE)) {\n     tt <- tktoplevel()\n     tkwm.title(tt, \"Error\")\n     tkmsg <- tktext(tt, bg = \"white\")\n\n     parent<-tail(capture.output(traceback()),n=1)\n     parent<-gsub(\"[0-9]: \",\"\",parent) # deleting 1: from the captured\nstring\n\n     tkinsert(tkmsg, \"end\", sprintf(\"Error in %s: %s\", parent , msg))\n     tkconfigure(tkmsg, state = \"disabled\", font = \"Tahoma 12\",\n                 width = 50, height = 3)\n     tkpack(tkmsg, side = \"bottom\", fill = \"y\")\n   }\n   stop(msg)\n}\n\n\nSundar Dorai-Raj wrote:\n> \n> Hi, All,\n> \n> I'm writing a wrapper for stop that produces a popup window using tcltk. \n> Something like:\n> \n> error <- function(...) {\n>    msg <- paste(..., sep = \"\")\n>    if(!length(msg)) msg <- \"\"\n>    if(require(tcltk, quiet = TRUE)) {\n>      tt <- tktoplevel()\n>      tkwm.title(tt, \"Error\")\n>      tkmsg <- tktext(tt, bg = \"white\")\n>      tkinsert(tkmsg, \"end\", sprintf(\"Error in %s: %s\", \"???\", msg))\n>      tkconfigure(tkmsg, state = \"disabled\", font = \"Tahoma 12\",\n>                  width = 50, height = 3)\n>      tkpack(tkmsg, side = \"bottom\", fill = \"y\")\n>    }\n>    stop(msg)\n> }\n> \n> But, I would like to know from which function error() is called. For \n> example, if I have\n> \n> foo <- function() stop()\n> bar <- function() error()\n>  > foo()\n> Error in foo() :\n>  > bar()\n> Error in error() :\n> \n> and in the tk window I get\n> \n> Error in ???:\n> \n> I need the output of bar (in the tk window only) to be\n> \n> Error in bar():\n> \n> then it's clear where error is called. I'm not worried about the output \n> bar() produces on the console.\n> \n> Hope this makes sense.\n> \n> Thanks,\n> \n> \n\n-- \nView this message in context: http://www.nabble.com/determining-a-parent-function-name-tf3843262.html#a10892459\nSent from the R help mailing list archive at Nabble.com.\n\n______________________________________________\nR-help@stat.math.ethz.ch mailing list\nhttps://stat.ethz.ch/mailman/listinfo/r-help\nPLEASE do read the posting guide http://www.R-project.org/posting-guide.html\nand provide commented, minimal, self-contained, reproducible code.\n\n"}