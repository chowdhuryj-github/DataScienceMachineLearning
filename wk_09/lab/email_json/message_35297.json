{"category": "ham", "to_address": "\"Waichler, Scott R\" <Scott.Waichler@pnl.gov>", "from_address": "Joerg van den Hoff <j.van_den_hoff@fzd.de>", "subject": "Re: [R] Reducing the size of pdf graphics files produced with R", "body": "On Wed, May 23, 2007 at 10:13:22AM -0700, Waichler, Scott R wrote:\n> \n> \n> Scott\n> \n> Scott Waichler, Senior Research Scientist\n> Pacific Northwest National Laboratory\n> MSIN K9-36\n> P.O. Box 999\n> Richland, WA   99352    USA\n> 509-372-4423 (voice)\n> 509-372-6089 (fax)\n> scott.waichler@pnl.gov\n> http://hydrology.pnl.gov\n> ------------------------------------------------------------------------\n> ---------------\n>  \n> \n> > -----Original Message-----\n> > From: Joerg van den Hoff [mailto:j.van_den_hoff@fzd.de] \n> > Sent: Wednesday, May 23, 2007 9:25 AM\n> > To: Waichler, Scott R\n> > Cc: r-help@stat.math.ethz.ch; j.van_den_hoff@fzd.de\n> > Subject: Re: [R] Reducing the size of pdf graphics files \n> > produced with R\n> > \n> > On Wed, May 23, 2007 at 07:24:04AM -0700, Waichler, Scott R wrote:\n> > > > as you are using MacOS X, you'll have ghostscript \n> > installed anyway. \n> > > > so try in R `dev2bitmap' with `type =pdfwrite'. I believe `gs' \n> > > > _does_ include compression. a quick test showed at least \n> > a reduction \n> > > > by about a factor of 2 relative to `pdf()'. probably one \n> > can fiddle \n> > > > with the ghostscript settings (cf. e.g. `Ps2pdf.htm' in the \n> > > > ghostscipt\n> > > > docs: you\n> > > > can adjust the resolution for images in the pdf file) to improve \n> > > > this, so as a last resort you could indeed export the graphics as \n> > > > postscript and do the conversion to `pdf' by adjusting \n> > the `ps2pdf'\n> > > > switches. but even with the default settings the pdf produced via \n> > > > dev2bitmap/ghostscript is the better solution. apart from \n> > file size \n> > > > I by and then ran into problems when converting `pdf()' output to \n> > > > postscript later on, for instance.\n> > > \n> > > Can you give an example of dev2bitmap usage?  I tried using it in \n> > `dev2bitmap(file = \"rf.pdf\", type = \"pdfwrite\")' copies the \n> > current device to the pdf-file `rf.pdf', i.e. you should have \n> > plotted something on the screen prior to using this (the \n> > manpage tells you so much...). no `dev.off' is necessary in this case.\n> > \n> > in order to \"plot directly\" into the pdffile, you can use \n> > `bitmap' instead of `dev2bitmap', i.e.\n> > \n> > use either:\n> > \n> > plot(1:10)\n> > dev2bitmap(file = \"rf1.pdf\", type = \"pdfwrite\")\n> > \n> > or:\n> > \n> > bitmap(file = \"rf2.pdf\", type = \"pdfwrite\")\n> > plot(1:10)\n> > dev.off()\n> > \n> > both should produce the desired output file (at least after \n> > including the correct `width' and `height' settings).\n> \n> I tried the second method, using width=8.5, height=11, but the margins\n> in the output were bad, as if it assumed a4 paper or something.  I tried\n> inserting paper=\"special\" and paper=\"letter\" in the bitmap call, but\n> both caused errors.  Also, the plot was in grayscale instead of color.  \n> \n> Scott Waichler\n\nif you look at the source code of `bitmap' you'll see that it essentially\nconstructs a `gs' command (the string `cmd') which is fed by the output of the\nR `postscript' device via a pipe (the manpage of `bitmap' tells the same).\nso I presume if you don't get colour or seem to have wrong page size this has\nnothing to do with R, but you need to check your ghostscript installation.\nonly guessing, though. \n\njoerg\n\n______________________________________________\nR-help@stat.math.ethz.ch mailing list\nhttps://stat.ethz.ch/mailman/listinfo/r-help\nPLEASE do read the posting guide http://www.R-project.org/posting-guide.html\nand provide commented, minimal, self-contained, reproducible code.\n\n"}