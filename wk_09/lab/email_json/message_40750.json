{"category": "ham", "to_address": "bugs-bitbucket@netlabs.develooper.com", "from_address": "James Keenan (via RT) <parrotbug-followup@parrotcode.org>", "subject": "[perl #43107] t/tools/pmc2cutils/05-gen_c:  Warnings being thrown in testing of Parrot::Pmc2c::Pmc2cMain ", "body": "# New Ticket Created by  James Keenan \n# Please include the string:  [perl #43107]\n# in the subject line of all future correspondence about this issue. \n# \n\n\n---\nosname= linux\nosvers= 2.6.15\narch=   i386-linux-thread-multi\ncc=     cc\n---\nFlags:\n    category=core\n    severity=medium\n    ack=no\n---\nTonight, on both Linux and Darwin, I configured with the '--test' option to\nConfigure.pl that runs, among other things, the build tools tests once\nConfigure.pl itself has completed.  These tests generally always pass -- and\nthey did so tonight -- but tonight one test ran with warnings not previously\nseen.  Here is the output of 'prove -v t/tools/pmc2cutils/05-gen_c.t on Linux:\n\n\n11-226:parrot] 507 $ prove -v t/tools/pmc2cutils/05-gen_c.t\nt/tools/pmc2cutils/05-gen_c....\nOK:  Parrot top directory located\n1..68\nok 1 - use Parrot::Pmc2c::Pmc2cMain;\nok 2 - use Cwd;\nok 3 - use File::Temp;\nok 4 - changed to temp directory for testing\nok 5 - created src/ under tempdir\nok 6 - created src/pmc/ under tempdir\nok 7 - all src/pmc/*.pmc files copied to tempdir\nok 8 - The object isa Parrot::Pmc2c::Pmc2cMain\nok 9 - dump_vtable created vtable.dump\nok 10 - dump_pmc succeeded\nok 11 - default.dump created as expected\nCannot generate /tmp/cv7C2swFcy/src/pmc/default.c code for unknown method 'get_bool_keyed_int'.\nCannot generate /tmp/cv7C2swFcy/src/pmc/default.c code for unknown method 'elements_keyed_int'.\nCannot generate /tmp/cv7C2swFcy/src/pmc/default.c code for unknown method 'set_bool_keyed_int'.\nCannot generate /tmp/cv7C2swFcy/src/pmc/default.c code for unknown method 'is_equal_str'.\nok 12 - gen_c completed successfully; args:  default.pmc\nok 13 - changed back to original directory\nok 14 - changed to temp directory for testing\nok 15 - created src/ under tempdir\nok 16 - created src/pmc/ under tempdir\nok 17 - all src/pmc/*.pmc files copied to tempdir\nok 18 - The object isa Parrot::Pmc2c::Pmc2cMain\nok 19 - dump_vtable created vtable.dump\nok 20 - dump_pmc succeeded\nok 21 - default.dump created as expected\nok 22 - array.dump created as expected\nCannot generate /tmp/u7Ly25yooR/src/pmc/default.c code for unknown method 'get_bool_keyed_int'.\nCannot generate /tmp/u7Ly25yooR/src/pmc/default.c code for unknown method 'elements_keyed_int'.\nCannot generate /tmp/u7Ly25yooR/src/pmc/default.c code for unknown method 'set_bool_keyed_int'.\nCannot generate /tmp/u7Ly25yooR/src/pmc/default.c code for unknown method 'is_equal_str'.\nok 23 - gen_c completed successfully; args:  default.pmc and array.pmc\nok 24 - changed back to original directory\nok 25 - changed to temp directory for testing\nok 26 - created src/ under tempdir\nok 27 - created src/pmc/ under tempdir\nok 28 - all src/pmc/*.pmc files copied to tempdir\nok 29 - The object isa Parrot::Pmc2c::Pmc2cMain\nok 30 - dump_vtable created vtable.dump\nok 31 - dump_pmc succeeded\nok 32 - default.dump created as expected\nCannot generate /tmp/51xFgg6kSM/src/pmc/default.c code for unknown method 'get_bool_keyed_int'.\nCannot generate /tmp/51xFgg6kSM/src/pmc/default.c code for unknown method 'elements_keyed_int'.\nCannot generate /tmp/51xFgg6kSM/src/pmc/default.c code for unknown method 'set_bool_keyed_int'.\nCannot generate /tmp/51xFgg6kSM/src/pmc/default.c code for unknown method 'is_equal_str'.\nok 33 - gen_c completed successfully; args:  default.pmc\nok 34 - debug option worked\nok 35 - changed back to original directory\nok 36 - changed to temp directory for testing\nok 37 - created src/ under tempdir\nok 38 - created src/pmc/ under tempdir\nok 39 - all src/pmc/*.pmc files copied to tempdir\nok 40 - The object isa Parrot::Pmc2c::Pmc2cMain\nok 41 - dump_vtable created vtable.dump\nok 42 - verbose option worked\nok 43 - dump_pmc succeeded\nok 44 - default.dump created as expected\nok 45 - verbose option worked\nCannot generate /tmp/8LfDhf4liZ/src/pmc/default.c code for unknown method 'get_bool_keyed_int'.\nCannot generate /tmp/8LfDhf4liZ/src/pmc/default.c code for unknown method 'elements_keyed_int'.\nCannot generate /tmp/8LfDhf4liZ/src/pmc/default.c code for unknown method 'set_bool_keyed_int'.\nCannot generate /tmp/8LfDhf4liZ/src/pmc/default.c code for unknown method 'is_equal_str'.\nok 46 - gen_c completed successfully; args:  default.pmc\nok 47 - debug option worked\nok 48 - changed back to original directory\nok 49 - changed to temp directory for testing\nok 50 - created src/ under tempdir\nok 51 - created src/pmc/ under tempdir\nok 52 - src/pmc/*.pmc files copied to tempdir\nok 53 - The object isa Parrot::Pmc2c::Pmc2cMain\nok 54 - dump_vtable created vtable.dump\nok 55 - gen_c() predictably failed because dump_pmc() was not called first\nok 56 - changed back to original directory\nok 57 - changed to temp directory for testing\nok 58 - created src/ under tempdir\nok 59 - created src/pmc/ under tempdir\nok 60 - all src/pmc/*.pmc files copied to tempdir\nok 61 - The object isa Parrot::Pmc2c::Pmc2cMain\nok 62 - dump_vtable created vtable.dump\nok 63 - dump_pmc succeeded\nok 64 - default.dump created as expected\nok 65 - class.dump created as expected\nCannot generate /tmp/Z9PJ5aJKBK/src/pmc/default.c code for unknown method 'get_bool_keyed_int'.\nCannot generate /tmp/Z9PJ5aJKBK/src/pmc/default.c code for unknown method 'elements_keyed_int'.\nCannot generate /tmp/Z9PJ5aJKBK/src/pmc/default.c code for unknown method 'set_bool_keyed_int'.\nCannot generate /tmp/Z9PJ5aJKBK/src/pmc/default.c code for unknown method 'is_equal_str'.\nok 66 - gen_c completed successfully; args:  default.pmc and class.pmc\nok 67 - changed back to original directory\nok 68 - Completed all tests in t/tools/pmc2cutils/05-gen_c.t\nok\nAll tests successful.\nFiles=1, Tests=68,  1 wallclock secs ( 0.79 cusr +  0.04 csys =  0.83 CPU)\n\n##### END of 'prove' output\n\nI suspect the problem is to be found either in lib/Parrot/Pmc2c/Pmc2cMain.pm\nor in src/pmc/default.c.  Could whoever has been working on these files in the\npast few days please take a look at this?  The warnings are of very recent\norigin.\n\nThank you very much.\nkid51\n\n\n---\nSummary of my parrot 0.4.12 (r18737) configuration:\n  configdate='Fri Jun  1 23:29:03 2007 GMT'\n  Platform:\n    osname=linux, archname=i686-linux\n    jitcapable=1, jitarchname=i386-linux,\n    jitosname=LINUX, jitcpuarch=i386\n    execcapable=1\n    perl=/usr/local/bin/perl\n  Compiler:\n    cc='cc', ccflags=' -pipe -I/usr/local/include -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -D_GNU_SOURCE',\n  Linker and Libraries:\n    ld='cc', ldflags=' -L/usr/local/lib',\n    cc_ldflags='',\n    libs='-lnsl -ldl -lm -lcrypt -lutil -lpthread -lrt'\n  Dynamic Linking:\n    share_ext='.so', ld_share_flags='-shared -L/usr/local/lib -fPIC',\n    load_ext='.so', ld_load_flags='-shared -L/usr/local/lib -fPIC'\n  Types:\n    iv=long, intvalsize=4, intsize=4, opcode_t=long, opcode_t_size=4,\n    ptrsize=4, ptr_alignment=1 byteorder=1234, \n    nv=double, numvalsize=8, doublesize=8\n\n---\nEnvironment:\n    HOME =/home/jimk\n    LANG  (unset)\n    LANGUAGE  (unset)\n    LD_LIBRARY_PATH  (unset)\n    LOGDIR  (unset)\n    PATH =/usr/local/bin:/usr/local/bin:/bin:/usr/bin:/usr/X11R6/bin:/usr/local/mysql/bin:/home/jimk/bin:/home/jimk/bin/perl\n    SHELL =/bin/bash\n\n"}