{"category": "ham", "to_address": "sugar@laptop.org", "from_address": "Simon McVittie <simon.mcvittie@collabora.co.uk>", "subject": "[sugar] [PATCH] services/presence/buddy.py: Don't allow the Owner\n\tto disappear, even if they have no handles left", "body": "-----BEGIN PGP SIGNED MESSAGE-----\nHash: SHA1\n\n- ---\n services/presence/buddy.py |    3 ++-\n 1 files changed, 2 insertions(+), 1 deletions(-)\n\ndiff --git a/services/presence/buddy.py b/services/presence/buddy.py\nindex eb072a1..90b000e 100644\n- --- a/services/presence/buddy.py\n+++ b/services/presence/buddy.py\n@@ -266,7 +266,8 @@ class Buddy(ExportedGObject):\n             del self.handles[tp_client]\n             self.TelepathyHandleRemoved(conn.service_name, conn.object_path,\n                                         handle)\n- -            if not self.handles:\n+            # the Owner can't disappear - that would be silly\n+            if not self.handles and not self._owner:\n                 self.emit('disappeared')\n         else:\n             _logger.debug('Telepathy handle %u supposedly removed, but '\n- -- \n1.5.2-rc3.GIT\n\n-----BEGIN PGP SIGNATURE-----\nVersion: GnuPG v1.4.6 (GNU/Linux)\nComment: OpenPGP key: http://www.pseudorandom.co.uk/2003/contact/ or pgp.net\n\niD8DBQFGUxDLWSc8zVUw7HYRAuM5AJkBGWkTob1/MQ18vNiOJEtIhQObnACdFdYa\n/3VmpW9LN5TVQ97590YDkLM=\n=GORN\n-----END PGP SIGNATURE-----\n_______________________________________________\nSugar mailing list\nSugar@laptop.org\nhttp://mailman.laptop.org/mailman/listinfo/sugar\n\n"}