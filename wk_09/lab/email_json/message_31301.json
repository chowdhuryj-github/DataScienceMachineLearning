{"category": "ham", "to_address": "beginners@perl.org", "from_address": "\"R (Chandra) Chandrasekhar\" <chandra@ee.uwa.edu.au>", "subject": "Inconsistent results from file test (-X) operators", "body": "Dear Folks,\n\nI have encountered inconsistent behaviour with the file test (-X) operators. I \nam using perl, v5.8.8 built for i486-linux-gnu-thread-multi on a Kubuntu Feisty \nsystem.\n\nI show below my minimal test file:\n\n----------- Minimal Test File -----------\n#!/usr/bin/perl -w\nuse diagnostics;\n\n# Minimal example for problem with file test, or -X, operators\n\n$testdir = \"/usr\";\n\nopendir(DH, $testdir) or die \"Could not open $testdir: $!\\n\";\n\nwhile (defined($file = readdir(DH)))\n     {\n     if (-d $file)\n         {\n         print \"$file is a directory\\n\";\n         }\n     elsif (-f $file)\n         {\n         print \"$file is a regular file\\n\";\n         }\n     else\n         {\n         print \"$file is neither a directory nor a regular file\\n\";\n         }\n    }\n\nclosedir(DH);\n-----------------------------------------\n\nThe results I get are:\n\n-----------------------------------------\ninclude is a directory\nsrc is a directory\nlib is a directory\nsbin is neither a directory nor a regular file\nbin is a directory\nlocal is neither a directory nor a regular file\nlib32 is neither a directory nor a regular file\ngames is neither a directory nor a regular file\nshare is neither a directory nor a regular file\n. is a directory\n.. is a directory\nlib64 is neither a directory nor a regular file\nX11R6 is neither a directory nor a regular file\n-----------------------------------------\n\nand\n\nls -al /usr\n\ngives:\n\n-----------------------------------------\ndrwxr-xr-x  13 root root  4096 2007-05-15 16:18 .\ndrwxr-xr-x  23 root root  4096 2007-05-15 00:55 ..\ndrwxr-xr-x   2 root root 69632 2007-05-17 00:12 bin\ndrwxr-xr-x   2 root root  4096 2007-05-15 08:45 games\ndrwxr-xr-x  35 root root  4096 2007-05-15 16:10 include\ndrwxr-xr-x 149 root root 69632 2007-05-16 14:33 lib\ndrwxr-xr-x   3 root root  4096 2007-05-15 01:33 lib32\ndrwxr-xr-x   3 root root  4096 2007-05-15 16:18 lib64\ndrwxr-xr-x  10 root root  4096 2007-04-17 13:19 local\ndrwxr-xr-x   2 root root 12288 2007-05-17 00:12 sbin\ndrwxr-xr-x 244 root root 12288 2007-05-16 13:55 share\ndrwxrwsr-x   4 root src   4096 2007-04-17 13:23 src\ndrwxr-xr-x   3 root root  4096 2007-04-17 13:21 X11R6\n-----------------------------------------\n\nCan anyone please tell me why I get this inconsistent behaviour and how to \novercome it?\n\nI have read of the possibility of a race condition with these operators but I am \nunsure whether it applies here.\n\nThank you.\n\nChandra\n17 May 07\n\n-- \nTo unsubscribe, e-mail: beginners-unsubscribe@perl.org\nFor additional commands, e-mail: beginners-help@perl.org\nhttp://learn.perl.org/\n\n\n"}