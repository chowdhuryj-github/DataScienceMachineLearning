{"category": "ham", "to_address": "<chainsawtiney@gmail.com>, <r-help@stat.math.ethz.ch>", "from_address": "<Bill.Venables@csiro.au>", "subject": "Re: [R] Simple question about function with glm", "body": "There is a statistical problem and a code problem.\n\nThe statistical problem is that if your 'x' has a mean that depends\nnon-trivially on predictors, then you would not expect its distribution\nignoring predictors to be normal.  You would expect the residuals after\nmodelling to be normal.  Basically you cannot sensibly test normality of\nthe response before you fit the model.  It's a very common mistake, even\nif rather an obvious one.\n\nThe code problem is that, do you really know whether your models have\nbeen fitted or not?  The 'summary(xmodel)' part of your function below\nwill not print anything out, so if you were expecting something from\nthat you would be disappointed.\n\nYou might try replacing \n\tsummary(xmodel)\n\tconfint(xmodel)\n\nBy\n\tprint(summary(xmodel))\n\tprint(confint(xmodel))\n\nBut this is not really a very good paradigm in genera.\n\nFinally, I'm a bit puzzled why you use glm() when the simpler lm() would\nhave done the job.  You are fitting a linear model and do not need the\nextra paraphernaila that generalized linear models require.\n\nBill Venables. \n\n-----Original Message-----\nFrom: r-help-bounces@stat.math.ethz.ch\n[mailto:r-help-bounces@stat.math.ethz.ch] On Behalf Of Chung-hong Chan\nSent: Sunday, 6 May 2007 6:47 PM\nTo: r-help@stat.math.ethz.ch\nSubject: [R] Simple question about function with glm\n\nDear all,\n\nI coded a function called u.glm\n\nu.glm <- function (x,ahi,age,bmiz,gender) {\n\tlibrary(nortest)\n\tlil.rslt <- lillie.test(x)\n\tif (lil.rslt$p.value >0.05)\n\t\t{\n\t\t\tcat(\"Logtrans=0, lillie=\",lil.rslt$p.value,\"\\n\")\n\t\t\txmodel<-glm(x~ahi+age+bmiz+as.factor(gender))\n\t\t\tsummary(xmodel)\n\t\t\tconfint(xmodel)\n\n\t\t}\n\telse\n\t\t{\n\t\t\tcat(\"Logtrans=1, lillie=\",lil.rslt$p.value,\"\\n\")\n\t\t\txmodel<-glm(x~ahi+age+bmiz+as.factor(gender))\n\t\t\tsummary(xmodel)\n\t\t\tconfint(xmodel)\n\t\t}\n\n}\n\nBasically I just want to test the response variable for normality before\nmodeling.\nWhen I try to use this function, it can do the lillie's test but failed\nto do the glm.\nWhat's wrong with my code?\n\nRegards,\nCH\n\n\n--\n\"The scientists of today think deeply instead of clearly. One must be\nsane to think clearly, but one can think deeply and be quite insane.\"\nNikola Tesla\nhttp://www.macgrass.com\n\n______________________________________________\nR-help@stat.math.ethz.ch mailing list\nhttps://stat.ethz.ch/mailman/listinfo/r-help\nPLEASE do read the posting guide\nhttp://www.R-project.org/posting-guide.html\nand provide commented, minimal, self-contained, reproducible code.\n\n______________________________________________\nR-help@stat.math.ethz.ch mailing list\nhttps://stat.ethz.ch/mailman/listinfo/r-help\nPLEASE do read the posting guide http://www.R-project.org/posting-guide.html\nand provide commented, minimal, self-contained, reproducible code.\n\n"}