{"category": "ham", "to_address": "samba-cvs@samba.org", "from_address": "jra@samba.org", "subject": "svn commit: samba r22957 - in branches:\n\tSAMBA_3_0_25/source/rpc_parse SAMBA_3_0_26/source/rpc_parse", "body": "Author: jra\nDate: 2007-05-17 00:44:20 +0000 (Thu, 17 May 2007)\nNew Revision: 22957\n\nWebSVN: http://websvn.samba.org/cgi-bin/viewcvs.cgi?view=rev&root=samba&rev=22957\n\nLog:\nUse 1 for pointer, instead of casting to a 32-bit value\nfrom (potentially) a 64-bit pointer.\nJeremy.\n\nModified:\n   branches/SAMBA_3_0_25/source/rpc_parse/parse_srv.c\n   branches/SAMBA_3_0_26/source/rpc_parse/parse_srv.c\n\n\nChangeset:\nModified: branches/SAMBA_3_0_25/source/rpc_parse/parse_srv.c\n===================================================================\n--- branches/SAMBA_3_0_25/source/rpc_parse/parse_srv.c\t2007-05-16 22:52:17 UTC (rev 22956)\n+++ branches/SAMBA_3_0_25/source/rpc_parse/parse_srv.c\t2007-05-17 00:44:20 UTC (rev 22957)\n@@ -2404,7 +2404,7 @@\n \tif(!prs_uint32(\"num_locks    \", ps, depth, &fl3->num_locks))\n \t\treturn False;\n \n-\tuni_p = fl3->path ? (uint32)fl3->path : 0;\n+\tuni_p = fl3->path ? 1 : 0;\n \tif(!prs_uint32(\"ptr\", ps, depth, &uni_p))\n \t\treturn False;\n \tif (UNMARSHALLING(ps)) {\n@@ -2413,7 +2413,7 @@\n \t\t}\n \t}\n \n-\tuni_p = fl3->user ? (uint32)fl3->user : 0;\n+\tuni_p = fl3->user ? 1 : 0;\n \tif(!prs_uint32(\"ptr\", ps, depth, &uni_p))\n \t\treturn False;\n \tif (UNMARSHALLING(ps)) {\n\nModified: branches/SAMBA_3_0_26/source/rpc_parse/parse_srv.c\n===================================================================\n--- branches/SAMBA_3_0_26/source/rpc_parse/parse_srv.c\t2007-05-16 22:52:17 UTC (rev 22956)\n+++ branches/SAMBA_3_0_26/source/rpc_parse/parse_srv.c\t2007-05-17 00:44:20 UTC (rev 22957)\n@@ -2404,7 +2404,7 @@\n \tif(!prs_uint32(\"num_locks    \", ps, depth, &fl3->num_locks))\n \t\treturn False;\n \n-\tuni_p = fl3->path ? (uint32)fl3->path : 0;\n+\tuni_p = fl3->path ? 1 : 0;\n \tif(!prs_uint32(\"ptr\", ps, depth, &uni_p))\n \t\treturn False;\n \tif (UNMARSHALLING(ps)) {\n@@ -2413,7 +2413,7 @@\n \t\t}\n \t}\n \n-\tuni_p = fl3->user ? (uint32)fl3->user : 0;\n+\tuni_p = fl3->user ? 1 : 0;\n \tif(!prs_uint32(\"ptr\", ps, depth, &uni_p))\n \t\treturn False;\n \tif (UNMARSHALLING(ps)) {\n\n"}