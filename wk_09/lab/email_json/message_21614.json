{"category": "ham", "to_address": "samba-cvs@samba.org", "from_address": "psomogyi@gamax.hu", "subject": "Rev 92: merged tridge's branch in http://samba.org/~tridge/psomogyi/", "body": "------------------------------------------------------------\nrevno: 92\nrevision-id: psomogyi@gamax.hu-20070502151948-im6i33gzv36dnqyl\nparent: psomogyi@gamax.hu-20070429142835-4pd7m24sjko801ye\nparent: tridge@samba.org-20070502051111-kol2q81ec0oz8o1k\ncommitter: Peter Somogyi \nbranch nick: ctdb\ntimestamp: Wed 2007-05-02 17:19:48 +0200\nmessage:\n  merged tridge's branch\nadded:\n  lib/events/events_aio.c        events_aio.c-20070501213746-4fxluwiq4rcxib8p-1\n  lib/events/events_epoll.c      events_epoll.c-20070501213746-4fxluwiq4rcxib8p-2\n  lib/events/events_select.c     events_select.c-20070501213746-4fxluwiq4rcxib8p-3\n  lib/events/events_signal.c     events_signal.c-20070501213746-4fxluwiq4rcxib8p-4\n  lib/events/events_timed.c      events_timed.c-20070501213746-4fxluwiq4rcxib8p-5\n  lib/replace/strptime.c         strptime.c-20070501213746-4fxluwiq4rcxib8p-6\n  lib/replace/strptime.m4        strptime.m4-20070501213719-rb7s7slvbs4wljve-1\n  lib/util/strlist.c             strlist.c-20070501213746-4fxluwiq4rcxib8p-7\n  lib/util/util.c                util.c-20070501213746-4fxluwiq4rcxib8p-8\nrenamed:\n  direct/ctdbd.sh => tests/ctdbd.sh ctdbd.sh-20070411085038-phusiewluwzyqjpc-2\nmodified:\n  Makefile.in                    makefile.in-20061117234101-o3qt14umlg9en8z0-1\n  common/cmdline.c               cmdline.c-20070416041216-w1zvz91bkdsgjckw-1\n  common/ctdb.c                  ctdb.c-20061127094323-t50f58d65iaao5of-2\n  common/ctdb_call.c             ctdb_call.c-20061128065342-to93h6eejj5kon81-1\n  common/ctdb_client.c           ctdb_client.c-20070411010216-3kd8v37k61steeya-1\n  common/ctdb_control.c          ctdb_control.c-20070426122724-j6gkpiofhbwdin63-1\n  common/ctdb_daemon.c           ctdb_daemon.c-20070409200331-3el1kqgdb9m4ib0g-1\n  common/ctdb_ltdb.c             ctdb_ltdb.c-20061128065342-to93h6eejj5kon81-2\n  common/ctdb_message.c          ctdb_message.c-20070208224107-9dnio7x7z33prrmt-1\n  common/ctdb_util.c             ctdb_util.c-20061128065342-to93h6eejj5kon81-3\n  direct/ctdbd.c                 ctdbd.c-20070411085044-dqmhr6mfeexnyt4m-1\n  ib/ibwrapper.c                 ibwrapper.c-20061204130028-0125b4f5a72f4b11\n  include/ctdb.h                 ctdb.h-20061117234101-o3qt14umlg9en8z0-11\n  include/ctdb_private.h         ctdb_private.h-20061117234101-o3qt14umlg9en8z0-13\n  include/includes.h             includes.h-20061117234101-o3qt14umlg9en8z0-17\n  lib/events/config.m4           config.m4-20061117234101-o3qt14umlg9en8z0-24\n  lib/events/config.mk           config.mk-20061117234101-o3qt14umlg9en8z0-25\n  lib/events/events.c            events.c-20061117234101-o3qt14umlg9en8z0-26\n  lib/events/events.h            events.h-20061117234101-o3qt14umlg9en8z0-27\n  lib/events/events_internal.h   events_internal.h-20061117234101-o3qt14umlg9en8z0-28\n  lib/events/events_liboop.c     events_liboop.c-20061117234101-o3qt14umlg9en8z0-29\n  lib/events/events_standard.c   events_standard.c-20061117234101-o3qt14umlg9en8z0-30\n  lib/replace/Makefile.in        makefile.in-20070125040949-7t3f5zdl1q4z9hyv-5\n  lib/replace/README             readme-20070125040949-7t3f5zdl1q4z9hyv-6\n  lib/replace/libreplace.m4      libreplace.m4-20070125040949-7t3f5zdl1q4z9hyv-20\n  lib/replace/libreplace_macros.m4 libreplace_macros.m4-20070125040949-7t3f5zdl1q4z9hyv-22\n  lib/replace/replace.c          replace.c-20070125040949-7t3f5zdl1q4z9hyv-26\n  lib/replace/replace.h          replace.h-20070125040949-7t3f5zdl1q4z9hyv-27\n  lib/replace/samba.m4           samba.m4-20070125040949-7t3f5zdl1q4z9hyv-29\n  lib/replace/snprintf.c         snprintf.c-20070125040949-7t3f5zdl1q4z9hyv-30\n  lib/replace/system/config.m4   config.m4-20070125040949-7t3f5zdl1q4z9hyv-77\n  lib/replace/system/filesys.h   filesys.h-20070125040949-7t3f5zdl1q4z9hyv-79\n  lib/talloc/Makefile.in         makefile.in-20070125040949-7t3f5zdl1q4z9hyv-38\n  lib/talloc/config.h.in         config.h.in-20070125040949-7t3f5zdl1q4z9hyv-42\n  lib/talloc/configure.ac        configure.ac-20070125040949-7t3f5zdl1q4z9hyv-45\n  lib/talloc/libtalloc.m4        libtalloc.m4-20070125040949-7t3f5zdl1q4z9hyv-47\n  lib/talloc/talloc.3            talloc.3-20070125040949-7t3f5zdl1q4z9hyv-48\n  lib/talloc/talloc.3.html       talloc.3.html-20070125040949-7t3f5zdl1q4z9hyv-49\n  lib/talloc/talloc.c            talloc.c-20070125040949-7t3f5zdl1q4z9hyv-51\n  lib/talloc/talloc.h            talloc.h-20070125040949-7t3f5zdl1q4z9hyv-52\n  lib/talloc/talloc.pc           talloc.pc-20070125040949-7t3f5zdl1q4z9hyv-54\n  lib/talloc/talloc.pc.in        talloc.pc.in-20070125040949-7t3f5zdl1q4z9hyv-55\n  lib/talloc/talloc_guide.txt    talloc_guide.txt-20070125040949-7t3f5zdl1q4z9hyv-56\n  lib/talloc/testsuite.c         testsuite.c-20070125040949-7t3f5zdl1q4z9hyv-57\n  lib/tdb/Makefile.in            makefile.in-20070125040949-7t3f5zdl1q4z9hyv-59\n  lib/tdb/configure.ac           configure.ac-20070125040949-7t3f5zdl1q4z9hyv-65\n  lib/tdb/libtdb.m4              libtdb.m4-20070125040949-7t3f5zdl1q4z9hyv-69\n  lib/tdb/tdb.pc.in              tdb.pc.in-20070125040949-7t3f5zdl1q4z9hyv-72\n  tcp/tcp_connect.c              tcp_connect.c-20061128004937-x70q1cu5xzg5g2tm-1\n  tests/bench-ssh.sh             benchssh.sh-20070220022243-k2evfudau0j1bwmn-1\n  tests/bench.sh                 bench.sh-20070209014602-vdolpr6esqsa58s7-1\n  tests/ctdb_bench.c             ctdb_bench.c-20061219052637-2liagoglohxb6p7s-1\n  tests/ctdb_fetch.c             ctdb_fetch.c-20070405031748-f7gslozfj3rwh5ie-1\n  tests/ctdb_fetch1.c            ctdb_fetch1.c-20070412111848-xawz6wqk9r0v8jdk-1\n  tests/ctdb_messaging.c         ctdb_messaging.c-20070411034205-6d6vne56pbih2x1p-1\n  tests/ctdb_test.c              ctdb_test.c-20061117234101-o3qt14umlg9en8z0-16\n  tests/fetch.sh                 fetch.sh-20070405031756-lomzqpjyqg3xd1kv-1\n  tests/fetch1.sh                fetch1.sh-20070412111854-6s84l3myac9ncl79-1\n  tests/messaging.sh             messaging.sh-20070411034158-e1c175kqm9vzasb6-1\n  tests/run_tests.sh             run_tests.sh-20070428085745-ec2w6vybjf07vtvg-1\n  tests/test.sh                  test.sh-20061128065333-cla80zaxd9eb4o4a-2\n  tests/test1.sh                 test1.sh-20061130223403-jednzcvm60m0j75c-1\n  tools/ctdb_control.c           ctdb_control.c-20070426122705-9ehj1l5lu2gn9kuj-1\n  tests/ctdbd.sh                 ctdbd.sh-20070411085038-phusiewluwzyqjpc-2\n    ------------------------------------------------------------\n    revno: 44.1.190\n    merged: tridge@samba.org-20070502051111-kol2q81ec0oz8o1k\n    parent: tridge@samba.org-20070502033455-ouk4wh3sa9nmzdjv\n    committer: Andrew Tridgell \n    branch nick: tridge\n    timestamp: Wed 2007-05-02 15:11:11 +1000\n    message:\n      added a builtin fetch function to support samba3 unlocked fetch\n    ------------------------------------------------------------\n    revno: 44.1.189\n    merged: tridge@samba.org-20070502033455-ouk4wh3sa9nmzdjv\n    parent: tridge@samba.org-20070502032903-a3t17i17j9qsq4uq\n    committer: Andrew Tridgell \n    branch nick: tridge\n    timestamp: Wed 2007-05-02 13:34:55 +1000\n    message:\n      nicer command parsing in ctdb_control\n    ------------------------------------------------------------\n    revno: 44.1.188\n    merged: tridge@samba.org-20070502032903-a3t17i17j9qsq4uq\n    parent: tridge@samba.org-20070502032545-7lupwzfjd6ubmtu5\n    committer: Andrew Tridgell \n    branch nick: tridge\n    timestamp: Wed 2007-05-02 13:29:03 +1000\n    message:\n      nicer string handling in usage\n    ------------------------------------------------------------\n    revno: 44.1.187\n    merged: tridge@samba.org-20070502032545-7lupwzfjd6ubmtu5\n    parent: tridge@samba.org-20070501213758-rcydp2jih2keiapj\n    parent: sahlberg@ronnie-20070502010658-31ae7f10fe7e85b2\n    committer: Andrew Tridgell \n    branch nick: tridge\n    timestamp: Wed 2007-05-02 13:25:45 +1000\n    message:\n      merged from ronnie\n        ------------------------------------------------------------\n        revno: 44.1.153.1.29\n        merged: sahlberg@ronnie-20070502010658-31ae7f10fe7e85b2\n        parent: sahlberg@ronnie-20070502010204-4634c57f18d4c981\n        committer: Ronnie Sahlberg \n        branch nick: ctdb\n        timestamp: Wed 2007-05-02 11:06:58 +1000\n        message:\n          change the getnodemap control to a more consistent output for whether a \n          node is connected or not\n        ------------------------------------------------------------\n        revno: 44.1.153.1.28\n        merged: sahlberg@ronnie-20070502010204-4634c57f18d4c981\n        parent: sahlberg@ronnie-20070502005329-edb046ec999fb2dd\n        committer: Ronnie Sahlberg \n        branch nick: ctdb\n        timestamp: Wed 2007-05-02 11:02:04 +1000\n        message:\n          update some calls to ctdb_control() that were still using the old \n          signature (flags field)\n          \n          update some calls to ctdb_get_config() to use the new name \n          ctdb_ctrl_get_config()\n          \n          change #include \"talloc/talloc.h\" to #include \"lib/talloc/talloc.h\" in \n          lib/events/events.h\n        ------------------------------------------------------------\n        revno: 44.1.153.1.27\n        merged: sahlberg@ronnie-20070502005329-edb046ec999fb2dd\n        parent: sahlberg@ronnie-20070502003743-1c619c3995deb5b9\n        parent: tridge@samba.org-20070501213758-rcydp2jih2keiapj\n        committer: Ronnie Sahlberg \n        branch nick: ctdb\n        timestamp: Wed 2007-05-02 10:53:29 +1000\n        message:\n          merge with tridges tree to resolve all conflicts\n        ------------------------------------------------------------\n        revno: 44.1.153.1.26\n        merged: sahlberg@ronnie-20070502003743-1c619c3995deb5b9\n        parent: sahlberg@ronnie-20070502002514-733ae450ba6775e2\n        committer: Ronnie Sahlberg \n        branch nick: ctdb\n        timestamp: Wed 2007-05-02 10:37:43 +1000\n        message:\n          specify which node to perform recovery to when using the recovery \n          control\n        ------------------------------------------------------------\n        revno: 44.1.153.1.25\n        merged: sahlberg@ronnie-20070502002514-733ae450ba6775e2\n        parent: sahlberg@ronnie-20070502002034-3612e4d3403e70d8\n        committer: Ronnie Sahlberg \n        branch nick: ctdb\n        timestamp: Wed 2007-05-02 10:25:14 +1000\n        message:\n          fix a bug in pushdb control.\n          \n          we should only write the pushed record if RSN of the new one if higher \n          than the rsn of the existing one    not the other way around\n        ------------------------------------------------------------\n        revno: 44.1.153.1.24\n        merged: sahlberg@ronnie-20070502002034-3612e4d3403e70d8\n        parent: sahlberg@ronnie-20070429145827-6d3a43aebd8d9a67\n        committer: Ronnie Sahlberg \n        branch nick: ctdb\n        timestamp: Wed 2007-05-02 10:20:34 +1000\n        message:\n          add an initial recovery control to perform samba3 style recovery\n          \n          this is not optimized at all and copies/merges all records between \n          databases instead of only those records for which a certain node is \n          lmaster.  (step 7 should later be enhanced to a, delete the database, \n          push only those records for which the node is lmaster)\n        ------------------------------------------------------------\n        revno: 44.1.153.1.23\n        merged: sahlberg@ronnie-20070429145827-6d3a43aebd8d9a67\n        parent: sahlberg@ronnie-20070429134927-b789df5252e6fb0c\n        committer: Ronnie Sahlberg \n        branch nick: ctdb\n        timestamp: Mon 2007-04-30 00:58:27 +1000\n        message:\n          add push/pull of tdb  and a control to copy a tdb from one node to \n          another node\n        ------------------------------------------------------------\n        revno: 44.1.153.1.22\n        merged: sahlberg@ronnie-20070429134927-b789df5252e6fb0c\n        parent: sahlberg@ronnie-20070429125156-a8b3fda51a6e172f\n        parent: tridge@samba.org-20070428171336-4yw1gh5qfslqan73\n        committer: Ronnie Sahlberg \n        branch nick: ctdb\n        timestamp: Sun 2007-04-29 23:49:27 +1000\n        message:\n          merge from tridge\n        ------------------------------------------------------------\n        revno: 44.1.153.1.21\n        merged: sahlberg@ronnie-20070429125156-a8b3fda51a6e172f\n        parent: sahlberg@ronnie-20070429121451-78d550f5be8c62c2\n        committer: Ronnie Sahlberg \n        branch nick: ctdb\n        timestamp: Sun 2007-04-29 22:51:56 +1000\n        message:\n          add a new \"recovery mode\" field to ctdb.\n          while recovery is in progress  the daemon will discard all CTDB_REQ_CALL \n          and rely on clients retransmitting them\n          \n          add new controls to get/set the recovery mode\n        ------------------------------------------------------------\n        revno: 44.1.153.1.20\n        merged: sahlberg@ronnie-20070429121451-78d550f5be8c62c2\n        parent: sahlberg@ronnie-20070429084846-fa89013d7f437257\n        committer: Ronnie Sahlberg \n        branch nick: ctdb\n        timestamp: Sun 2007-04-29 22:14:51 +1000\n        message:\n          implement a control to pull a database from a remote node\n          \n          it does not yet work since ctdb_control can right now only be called \n          from client context and the pull is implemented as the target ctdb node \n          itself using a get_keys to pull the keys from the source node   thus \n          ctdb daemon needs to ctdb_control to a remote node\n        ------------------------------------------------------------\n        revno: 44.1.153.1.19\n        merged: sahlberg@ronnie-20070429084846-fa89013d7f437257\n        parent: sahlberg@ronnie-20070429083411-1bf5033a95973a9d\n        committer: Ronnie Sahlberg \n        branch nick: ctdb\n        timestamp: Sun 2007-04-29 18:48:46 +1000\n        message:\n          control to delete all records in a database\n        ------------------------------------------------------------\n        revno: 44.1.153.1.18\n        merged: sahlberg@ronnie-20070429083411-1bf5033a95973a9d\n        parent: sahlberg@ronnie-20070428194713-c78b74526ca63879\n        committer: Ronnie Sahlberg \n        branch nick: ctdb\n        timestamp: Sun 2007-04-29 18:34:11 +1000\n        message:\n          add a new control to set all records in a database to a new dmaster \n        ------------------------------------------------------------\n        revno: 44.1.153.1.17\n        merged: sahlberg@ronnie-20070428194713-c78b74526ca63879\n        parent: sahlberg@ronnie-20070428131123-ba31a5af036f3f3f\n        committer: Ronnie Sahlberg \n        branch nick: ctdb\n        timestamp: Sun 2007-04-29 05:47:13 +1000\n        message:\n          add a control to read an entire tdb from a node including \n          key/lmaster/header and data\n        ------------------------------------------------------------\n        revno: 44.1.153.1.16\n        merged: sahlberg@ronnie-20070428131123-ba31a5af036f3f3f\n        parent: sahlberg@ronnie-20070428104242-6b8810b511e6b587\n        parent: tridge@samba.org-20070428100146-vc86b04jx6za7v7h\n        committer: Ronnie Sahlberg \n        branch nick: ctdb\n        timestamp: Sat 2007-04-28 23:11:23 +1000\n        message:\n          merge with tridge\n          \n          fix the logic in ctdb_connected to print CONNECTED if the node is \n          connected and UNAVAILABLE when the node is dead  instead of the opposite\n    ------------------------------------------------------------\n    revno: 44.1.186\n    merged: tridge@samba.org-20070501213758-rcydp2jih2keiapj\n    parent: tridge@samba.org-20070501213204-7d8eage8651zq2o3\n    committer: Andrew Tridgell \n    branch nick: tridge\n    timestamp: Wed 2007-05-02 07:37:58 +1000\n    message:\n      new files for updated events system\n    ------------------------------------------------------------\n    revno: 44.1.185\n    merged: tridge@samba.org-20070501213204-7d8eage8651zq2o3\n    parent: tridge@samba.org-20070501205012-nlrvpj4m3znvumdz\n    committer: Andrew Tridgell \n    branch nick: tridge\n    timestamp: Wed 2007-05-02 07:32:04 +1000\n    message:\n      merge latest versions of lib/replace, lib/talloc, lib/tdb and lib/events into ctdb bzr tree\n    ------------------------------------------------------------\n    revno: 44.1.184\n    merged: tridge@samba.org-20070501205012-nlrvpj4m3znvumdz\n    parent: tridge@samba.org-20070501032502-6fk64ptyeqjybf45\n    committer: Andrew Tridgell \n    branch nick: tridge\n    timestamp: Wed 2007-05-02 06:50:12 +1000\n    message:\n      fixed a lib/events bug found by volker\n    ------------------------------------------------------------\n    revno: 44.1.183\n    merged: tridge@samba.org-20070501032502-6fk64ptyeqjybf45\n    parent: tridge@samba.org-20070430203455-hz83ozsdn4cp1krv\n    committer: Andrew Tridgell \n    branch nick: tridge\n    timestamp: Tue 2007-05-01 13:25:02 +1000\n    message:\n      added a hopcount in ctdb_call\n    ------------------------------------------------------------\n    revno: 44.1.182\n    merged: tridge@samba.org-20070430203455-hz83ozsdn4cp1krv\n    parent: tridge@samba.org-20070430135406-5f2krpfqjekpa2n3\n    committer: Andrew Tridgell \n    branch nick: tridge\n    timestamp: Tue 2007-05-01 06:34:55 +1000\n    message:\n      auto-determine listen address by attempting to bind to each address in the cluster in turn\n    ------------------------------------------------------------\n    revno: 44.1.181\n    merged: tridge@samba.org-20070430135406-5f2krpfqjekpa2n3\n    parent: tridge@samba.org-20070430133140-79ydyjc7o4pq21k9\n    committer: Andrew Tridgell \n    branch nick: tridge\n    timestamp: Mon 2007-04-30 15:54:06 +0200\n    message:\n      added attach command in ctdb_control\n    ------------------------------------------------------------\n    revno: 44.1.180\n    merged: tridge@samba.org-20070430133140-79ydyjc7o4pq21k9\n    parent: tridge@samba.org-20070430091021-83436vamcf4mb239\n    committer: Andrew Tridgell \n    branch nick: tridge\n    timestamp: Mon 2007-04-30 15:31:40 +0200\n    message:\n      changed the way set_call and attach are done so that you can safely\n      attach to databases after the protocol has started. The daemon\n      broadcasts information on new databases to the other daemons.\n      \n      This also eliminates the need for the client to know about the hash\n      between db name and db_id.\n    ------------------------------------------------------------\n    revno: 44.1.179\n    merged: tridge@samba.org-20070430091021-83436vamcf4mb239\n    parent: tridge@samba.org-20070429204223-p3irof22u7mgolo6\n    committer: Andrew Tridgell \n    branch nick: tridge\n    timestamp: Mon 2007-04-30 11:10:21 +0200\n    message:\n      don't use stderr here - rely on logging\n    ------------------------------------------------------------\n    revno: 44.1.178\n    merged: tridge@samba.org-20070429204223-p3irof22u7mgolo6\n    parent: tridge@samba.org-20070429141940-kxbij0fq3pj33qvn\n    committer: Andrew Tridgell \n    branch nick: tridge\n    timestamp: Sun 2007-04-29 22:42:23 +0200\n    message:\n      saner logfile code\n      testing of ctdbd\n\nDiff too large for email (7681, the limit is 1000).\n\n"}