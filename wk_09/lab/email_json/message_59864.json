{"category": "ham", "to_address": "samba-cvs@samba.org", "from_address": "vlendec@samba.org", "subject": "svn commit: samba r23670 - in branches: SAMBA_3_0/source/script\n\tSAMBA_3_0_26/source/script", "body": "Author: vlendec\nDate: 2007-07-01 19:11:40 +0000 (Sun, 01 Jul 2007)\nNew Revision: 23670\n\nWebSVN: http://websvn.samba.org/cgi-bin/viewcvs.cgi?view=rev&root=samba&rev=23670\n\nLog:\nFix mkversion.sh for the git case: Only use the first line where\n\"commit\" occurs\n\nModified:\n   branches/SAMBA_3_0/source/script/mkversion.sh\n   branches/SAMBA_3_0_26/source/script/mkversion.sh\n\n\nChangeset:\nModified: branches/SAMBA_3_0/source/script/mkversion.sh\n===================================================================\n--- branches/SAMBA_3_0/source/script/mkversion.sh\t2007-07-01 00:09:20 UTC (rev 23669)\n+++ branches/SAMBA_3_0/source/script/mkversion.sh\t2007-07-01 19:11:40 UTC (rev 23670)\n@@ -107,7 +107,7 @@\n     if test x\"${HAVEVER}\" != x\"yes\";then\n \tHAVEGIT=no\n         GIT_INFO=`git show --abbrev-commit HEAD 2>/dev/null`\n-\tTMP_REVISION=`echo -e \"${GIT_INFO}\" | grep 'commit ' |sed -e 's/commit \\([0-9a-f]*\\).*/\\1/'`\n+\tTMP_REVISION=`echo -e \"${GIT_INFO}\" | grep 'commit ' | sed 1q |sed -e 's/commit \\([0-9a-f]*\\).*/\\1/'`\n \tif test -n \"$TMP_REVISION\";then\n \t    HAVEGIT=yes\n             HAVEVER=yes\n\nModified: branches/SAMBA_3_0_26/source/script/mkversion.sh\n===================================================================\n--- branches/SAMBA_3_0_26/source/script/mkversion.sh\t2007-07-01 00:09:20 UTC (rev 23669)\n+++ branches/SAMBA_3_0_26/source/script/mkversion.sh\t2007-07-01 19:11:40 UTC (rev 23670)\n@@ -107,7 +107,7 @@\n     if test x\"${HAVEVER}\" != x\"yes\";then\n \tHAVEGIT=no\n         GIT_INFO=`git show --abbrev-commit HEAD 2>/dev/null`\n-\tTMP_REVISION=`echo -e \"${GIT_INFO}\" | grep 'commit ' |sed -e 's/commit \\([0-9a-f]*\\).*/\\1/'`\n+\tTMP_REVISION=`echo -e \"${GIT_INFO}\" | grep 'commit ' | sed 1q |sed -e 's/commit \\([0-9a-f]*\\).*/\\1/'`\n \tif test -n \"$TMP_REVISION\";then\n \t    HAVEGIT=yes\n             HAVEVER=yes\n\n"}