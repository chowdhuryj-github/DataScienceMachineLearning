{"category": "ham", "to_address": "\"r-help@lists.r-project.org server posting\" <r-help@stat.math.ethz.ch>", "from_address": "Benilton Carvalho <bcarvalh@jhsph.edu>", "subject": "[R] Efficient computation of trimmed stats?", "body": "Hi everyone,\n\nI was wondering if there is anything already implemented for  \nefficient (\"row-wise\") computation of group-specific trimmed stats  \n(mean and sd on the trimmed vector) on large matrices.\n\nFor example:\n\nset.seed(1)\nnc = 300\nnr = 250000\nx = matrix(rnorm(nc*nr), ncol=nc)\ng = matrix(sample(1:3, nr*nc, rep=T), ncol=nc)\n\ntrimmedMeanByGroup <- function(y, grp, trim=.05)\n   tapply(y, factor(grp, levels=1:3), mean, trim=trim)\n\nsapply(1:10, function(i) trimmedMeanByGroup(x[i,], g[i,]))\n\nworks fine... but:\n\n > system.time(sapply(1:nr, function(i) trimmedMeanByGroup(x[i,], g \n[i,])))\n    user  system elapsed\n399.928   0.019 399.988\n\ndoes not look interesting for me.\n\nMaybe some package has some implementation of the above?\n\nThank you very much,\n-b\n\n--\nBenilton Carvalho\nPhD Candidate\nDepartment of Biostatistics\nBloomberg School of Public Health\nJohns Hopkins University\nbcarvalh@jhsph.edu\n\n______________________________________________\nR-help@stat.math.ethz.ch mailing list\nhttps://stat.ethz.ch/mailman/listinfo/r-help\nPLEASE do read the posting guide http://www.R-project.org/posting-guide.html\nand provide commented, minimal, self-contained, reproducible code.\n\n"}