{"category": "ham", "to_address": "\"Keith Alan Chamberlain\" <Keith.Chamberlain@colorado.edu>", "from_address": "\"Gabor Grothendieck\" <ggrothendieck@gmail.com>", "subject": "Re: [R] A More efficient method?", "body": "Here are two ways.  The second way is more than 10x faster.\n\n> set.seed(1)\n> C <- sample(c(\"a\", \"b\"), 100000, replace = TRUE)\n> system.time(s1 <- ifelse(C == \"a\", 1, -1))\n   user  system elapsed\n   0.37    0.01    0.38\n> system.time(s2 <- 2 * (C == \"a\") - 1)\n   user  system elapsed\n   0.02    0.00    0.02\n> identical(s1, s2)\n[1] TRUE\n\nOn 7/4/07, Keith Alan Chamberlain  wrote:\n> Dear Rhelpers,\n>\n> Is there a faster way than below to set a vector based on values from\n> another vector? I'd like to call a pre-existing function for this, but one\n> which can also handle an arbitrarily large number of categories. Any ideas?\n>\n> Cat=c('a','a','a','b','b','b','a','a','b')      # Categorical variable\n> C1=vector(length=length(Cat))   # New vector for numeric values\n>\n> # Cycle through each column and set C1 to corresponding value of Cat.\n> for(i in 1:length(C1)){\n>        if(Cat[i]=='a') C1[i]=-1 else C1[i]=1\n> }\n>\n> C1\n> [1] -1 -1 -1  1  1  1 -1 -1  1\n> Cat\n> [1] \"a\" \"a\" \"a\" \"b\" \"b\" \"b\" \"a\" \"a\" \"b\"\n>\n> Sincerely,\n> KeithC.\n> Psych Undergrad, CU Boulder (US)\n> RE McNair Scholar\n>\n> ______________________________________________\n> R-help@stat.math.ethz.ch mailing list\n> https://stat.ethz.ch/mailman/listinfo/r-help\n> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html\n> and provide commented, minimal, self-contained, reproducible code.\n>\n\n______________________________________________\nR-help@stat.math.ethz.ch mailing list\nhttps://stat.ethz.ch/mailman/listinfo/r-help\nPLEASE do read the posting guide http://www.R-project.org/posting-guide.html\nand provide commented, minimal, self-contained, reproducible code.\n\n"}