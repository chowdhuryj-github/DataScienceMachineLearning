{"category": "ham", "to_address": "samba-cvs@samba.org", "from_address": "Jelmer Vernooij <jelmer@samba.org>", "subject": "Rev 12003: Add initial work on wrapper for loadparm. in\n\tfile:///home/jelmer/bzr.samba/python/", "body": "At file:///home/jelmer/bzr.samba/python/\n\n------------------------------------------------------------\nrevno: 12003\nrevision-id: jelmer@samba.org-20070425124241-22fwezq4jl8g79rx\nparent: jelmer@samba.org-20070425105204-wq6tcn0d3h78bb77\ncommitter: Jelmer Vernooij \nbranch nick: python\ntimestamp: Wed 2007-04-25 14:42:41 +0200\nmessage:\n  Add initial work on wrapper for loadparm.\nadded:\n  source/scripting/python/config.mk config.mk-20070425124132-wptmykwi2tvyqm26-1\n  source/scripting/python/param.c param.c-20070425124147-y6pej29g7xqsb3n6-1\nmodified:\n  .bzrignore                     svn-v2:17811@0c0555d6-39d7-0310-84fc-f1cc0bd64818-branches%2fSAMBA_4_0-.bzrignore\n=== added file 'source/scripting/python/config.mk'\n--- a/source/scripting/python/config.mk\t1970-01-01 00:00:00 +0000\n+++ b/source/scripting/python/config.mk\t2007-04-25 12:42:41 +0000\n@@ -0,0 +1,4 @@\n+[SUBSYSTEM::python_param]\n+PUBLIC_DEPENDENCIES = LIBPYTHON LIBSAMBA-CONFIG\n+OBJ_FILES = \\\n+\t\t\tparam.o\n\n=== added file 'source/scripting/python/param.c'\n--- a/source/scripting/python/param.c\t1970-01-01 00:00:00 +0000\n+++ b/source/scripting/python/param.c\t2007-04-25 12:42:41 +0000\n@@ -0,0 +1,56 @@\n+/* \n+   Unix SMB/CIFS implementation.\n+\n+   Python wrapper for reading smb.conf files\n+\n+   Copyright (C) Jelmer Vernooij 2007\n+   \n+   This program is free software; you can redistribute it and/or modify\n+   it under the terms of the GNU General Public License as published by\n+   the Free Software Foundation; either version 2 of the License, or\n+   (at your option) any later version.\n+   \n+   This program is distributed in the hope that it will be useful,\n+   but WITHOUT ANY WARRANTY; without even the implied warranty of\n+   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+   GNU General Public License for more details.\n+   \n+   You should have received a copy of the GNU General Public License\n+   along with this program; if not, write to the Free Software\n+   Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.\n+*/\n+\n+#include \"includes.h\"\n+#include \"scripting/ejs/smbcalls.h\"\n+#include \"Python.h\"\n+#include \"param/param.h\"\n+\n+static PyObject *param_load(PyObject *self, PyObject *args)\n+{\n+\tchar *filename;\n+\tPyObject *param;\n+\n+\tif (!PyArg_ParseTuple(args, \"s:new\", &filename))\n+\t        return NULL;\n+\n+\tparam = PyObject_New();\n+\n+\t\n+}\n+\n+static PyMethodDef methods[] = {\n+\t{ \"load\", (PyCFunction)param_load, METH_VARARGS, NULL},\n+\t{ NULL, NULL }\n+};\n+\n+PyDoc_STRVAR(param_doc, \"Simple wrappers around the smb.conf parsers\");\n+\n+PyMODINIT_FUNC initparam(void)\n+{\n+\tPyObject *mod = Py_InitModule3(\"param\", methods, param_doc);\n+\tif (mod == NULL)\n+\t\treturn;\n+\n+\tPyModule_AddObject\n+\n+}\n\n=== modified file '.bzrignore'\n--- a/.bzrignore\t2007-04-24 15:41:33 +0000\n+++ b/.bzrignore\t2007-04-25 12:42:41 +0000\n@@ -178,3 +178,4 @@\n source/lib/python/Modules/Setup.config\n lib/ldb/swig/ldb.py\n source/lib/ldb/swig/ldb.py\n+source/lib/tdb/swig/tdb.py\n\n"}