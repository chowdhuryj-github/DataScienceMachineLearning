{"category": "ham", "to_address": "samba-cvs@samba.org", "from_address": "jra@samba.org", "subject": "svn commit: samba r23445 - in branches: SAMBA_3_0/source/smbd\n\tSAMBA_3_0_26/source/smbd", "body": "Author: jra\nDate: 2007-06-12 18:14:16 +0000 (Tue, 12 Jun 2007)\nNew Revision: 23445\n\nWebSVN: http://websvn.samba.org/cgi-bin/viewcvs.cgi?view=rev&root=samba&rev=23445\n\nLog:\nFix suggested by Volker. Don't call rename_open_files\nif the name wasn't changed.\nJeremy.\n\nModified:\n   branches/SAMBA_3_0/source/smbd/reply.c\n   branches/SAMBA_3_0_26/source/smbd/reply.c\n\n\nChangeset:\nModified: branches/SAMBA_3_0/source/smbd/reply.c\n===================================================================\n--- branches/SAMBA_3_0/source/smbd/reply.c\t2007-06-12 16:31:03 UTC (rev 23444)\n+++ branches/SAMBA_3_0/source/smbd/reply.c\t2007-06-12 18:14:16 UTC (rev 23445)\n@@ -4638,7 +4638,6 @@\n \t\tid = file_id_sbuf(&sbuf1);\n \n \t\tif (strcsequal(directory, newname)) {\n-\t\t\trename_open_files(conn, NULL, id, newname);\n \t\t\tDEBUG(3, (\"rename_internals: identical names in \"\n \t\t\t\t  \"rename %s - returning success\\n\",\n \t\t\t\t  directory));\n@@ -4770,7 +4769,6 @@\n \t\tid = file_id_sbuf(&sbuf1);\n \n \t\tif (strcsequal(fname,destname)) {\n-\t\t\trename_open_files(conn, NULL, id, newname);\n \t\t\tDEBUG(3,(\"rename_internals: identical names \"\n \t\t\t\t \"in wildcard rename %s - success\\n\",\n \t\t\t\t fname));\n\nModified: branches/SAMBA_3_0_26/source/smbd/reply.c\n===================================================================\n--- branches/SAMBA_3_0_26/source/smbd/reply.c\t2007-06-12 16:31:03 UTC (rev 23444)\n+++ branches/SAMBA_3_0_26/source/smbd/reply.c\t2007-06-12 18:14:16 UTC (rev 23445)\n@@ -4636,7 +4636,6 @@\n \t\tid = file_id_sbuf(&sbuf1);\n \n \t\tif (strcsequal(directory, newname)) {\n-\t\t\trename_open_files(conn, NULL, id, newname);\n \t\t\tDEBUG(3, (\"rename_internals: identical names in \"\n \t\t\t\t  \"rename %s - returning success\\n\",\n \t\t\t\t  directory));\n@@ -4768,7 +4767,6 @@\n \t\tid = file_id_sbuf(&sbuf1);\n \n \t\tif (strcsequal(fname,destname)) {\n-\t\t\trename_open_files(conn, NULL, id, newname);\n \t\t\tDEBUG(3,(\"rename_internals: identical names \"\n \t\t\t\t \"in wildcard rename %s - success\\n\",\n \t\t\t\t fname));\n\n"}