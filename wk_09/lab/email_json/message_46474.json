{"category": "ham", "to_address": "samba-cvs@samba.org", "from_address": "jra@samba.org", "subject": "svn commit: samba r23425 - in branches: SAMBA_3_0/source/nmbd\n\tSAMBA_3_0_25/source/nmbd SAMBA_3_0_26/source/nmbd", "body": "Author: jra\nDate: 2007-06-12 01:45:40 +0000 (Tue, 12 Jun 2007)\nNew Revision: 23425\n\nWebSVN: http://websvn.samba.org/cgi-bin/viewcvs.cgi?view=rev&root=samba&rev=23425\n\nLog:\nVolker noticed this obvious fix for the wins server\ncode :-). Thanks Volker !\nJeremy.\n\nModified:\n   branches/SAMBA_3_0/source/nmbd/nmbd_winsserver.c\n   branches/SAMBA_3_0_25/source/nmbd/nmbd_winsserver.c\n   branches/SAMBA_3_0_26/source/nmbd/nmbd_winsserver.c\n\n\nChangeset:\nModified: branches/SAMBA_3_0/source/nmbd/nmbd_winsserver.c\n===================================================================\n--- branches/SAMBA_3_0/source/nmbd/nmbd_winsserver.c\t2007-06-11 22:28:27 UTC (rev 23424)\n+++ branches/SAMBA_3_0/source/nmbd/nmbd_winsserver.c\t2007-06-12 01:45:40 UTC (rev 23425)\n@@ -2140,7 +2140,7 @@\n \n \t\t/* handle records, samba is the wins owner */\n \t\tif (ip_equal(namerec->data.wins_ip, our_fake_ip)) {\n-\t\t\tswitch (namerec->data.wins_flags | WINS_STATE_MASK) {\n+\t\t\tswitch (namerec->data.wins_flags & WINS_STATE_MASK) {\n \t\t\t\tcase WINS_ACTIVE:\n \t\t\t\t\tnamerec->data.wins_flags&=~WINS_STATE_MASK;\n \t\t\t\t\tnamerec->data.wins_flags|=WINS_RELEASED;\n@@ -2165,7 +2165,7 @@\n \t\t\t\t\tgoto done;\n \t\t\t}\n \t\t} else {\n-\t\t\tswitch (namerec->data.wins_flags | WINS_STATE_MASK) {\n+\t\t\tswitch (namerec->data.wins_flags & WINS_STATE_MASK) {\n \t\t\t\tcase WINS_ACTIVE:\n \t\t\t\t\t/* that's not as MS says it should be */\n \t\t\t\t\tnamerec->data.wins_flags&=~WINS_STATE_MASK;\n\nModified: branches/SAMBA_3_0_25/source/nmbd/nmbd_winsserver.c\n===================================================================\n--- branches/SAMBA_3_0_25/source/nmbd/nmbd_winsserver.c\t2007-06-11 22:28:27 UTC (rev 23424)\n+++ branches/SAMBA_3_0_25/source/nmbd/nmbd_winsserver.c\t2007-06-12 01:45:40 UTC (rev 23425)\n@@ -2140,7 +2140,7 @@\n \n \t\t/* handle records, samba is the wins owner */\n \t\tif (ip_equal(namerec->data.wins_ip, our_fake_ip)) {\n-\t\t\tswitch (namerec->data.wins_flags | WINS_STATE_MASK) {\n+\t\t\tswitch (namerec->data.wins_flags & WINS_STATE_MASK) {\n \t\t\t\tcase WINS_ACTIVE:\n \t\t\t\t\tnamerec->data.wins_flags&=~WINS_STATE_MASK;\n \t\t\t\t\tnamerec->data.wins_flags|=WINS_RELEASED;\n@@ -2165,7 +2165,7 @@\n \t\t\t\t\tgoto done;\n \t\t\t}\n \t\t} else {\n-\t\t\tswitch (namerec->data.wins_flags | WINS_STATE_MASK) {\n+\t\t\tswitch (namerec->data.wins_flags & WINS_STATE_MASK) {\n \t\t\t\tcase WINS_ACTIVE:\n \t\t\t\t\t/* that's not as MS says it should be */\n \t\t\t\t\tnamerec->data.wins_flags&=~WINS_STATE_MASK;\n\nModified: branches/SAMBA_3_0_26/source/nmbd/nmbd_winsserver.c\n===================================================================\n--- branches/SAMBA_3_0_26/source/nmbd/nmbd_winsserver.c\t2007-06-11 22:28:27 UTC (rev 23424)\n+++ branches/SAMBA_3_0_26/source/nmbd/nmbd_winsserver.c\t2007-06-12 01:45:40 UTC (rev 23425)\n@@ -2140,7 +2140,7 @@\n \n \t\t/* handle records, samba is the wins owner */\n \t\tif (ip_equal(namerec->data.wins_ip, our_fake_ip)) {\n-\t\t\tswitch (namerec->data.wins_flags | WINS_STATE_MASK) {\n+\t\t\tswitch (namerec->data.wins_flags & WINS_STATE_MASK) {\n \t\t\t\tcase WINS_ACTIVE:\n \t\t\t\t\tnamerec->data.wins_flags&=~WINS_STATE_MASK;\n \t\t\t\t\tnamerec->data.wins_flags|=WINS_RELEASED;\n@@ -2165,7 +2165,7 @@\n \t\t\t\t\tgoto done;\n \t\t\t}\n \t\t} else {\n-\t\t\tswitch (namerec->data.wins_flags | WINS_STATE_MASK) {\n+\t\t\tswitch (namerec->data.wins_flags & WINS_STATE_MASK) {\n \t\t\t\tcase WINS_ACTIVE:\n \t\t\t\t\t/* that's not as MS says it should be */\n \t\t\t\t\tnamerec->data.wins_flags&=~WINS_STATE_MASK;\n\n"}