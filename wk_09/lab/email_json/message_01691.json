{"category": "ham", "to_address": "samba-cvs@samba.org", "from_address": "jmcd@samba.org", "subject": "svn commit: samba r22148 - in branches: SAMBA_3_0/source/modules\n\tSAMBA_3_0_25/source/modules", "body": "Author: jmcd\nDate: 2007-04-10 15:41:22 +0000 (Tue, 10 Apr 2007)\nNew Revision: 22148\n\nWebSVN: http://websvn.samba.org/cgi-bin/viewcvs.cgi?view=rev&root=samba&rev=22148\n\nLog:\nFix gpfs module on posix-acl test.  Adds gpfsacl_sys_set_fd (calls\n_file).  Thanks to Gomati Mohanan.\n\nModified:\n   branches/SAMBA_3_0/source/modules/vfs_gpfs.c\n   branches/SAMBA_3_0_25/source/modules/vfs_gpfs.c\n\n\nChangeset:\nModified: branches/SAMBA_3_0/source/modules/vfs_gpfs.c\n===================================================================\n--- branches/SAMBA_3_0/source/modules/vfs_gpfs.c\t2007-04-10 07:36:58 UTC (rev 22147)\n+++ branches/SAMBA_3_0/source/modules/vfs_gpfs.c\t2007-04-10 15:41:22 UTC (rev 22148)\n@@ -597,8 +597,7 @@\n \t\t\t    files_struct *fsp,\n \t\t\t    int fd, SMB_ACL_T theacl)\n {\n-\terrno = ENOTSUP;\n-\treturn -1;\n+\treturn gpfsacl_sys_acl_set_file(handle, fsp->fsp_name, SMB_ACL_TYPE_ACCESS, theacl);\n }\n \n int gpfsacl_sys_acl_delete_def_file(vfs_handle_struct *handle,\n\nModified: branches/SAMBA_3_0_25/source/modules/vfs_gpfs.c\n===================================================================\n--- branches/SAMBA_3_0_25/source/modules/vfs_gpfs.c\t2007-04-10 07:36:58 UTC (rev 22147)\n+++ branches/SAMBA_3_0_25/source/modules/vfs_gpfs.c\t2007-04-10 15:41:22 UTC (rev 22148)\n@@ -597,8 +597,7 @@\n \t\t\t    files_struct *fsp,\n \t\t\t    int fd, SMB_ACL_T theacl)\n {\n-\terrno = ENOTSUP;\n-\treturn -1;\n+\treturn gpfsacl_sys_acl_set_file(handle, fsp->fsp_name, SMB_ACL_TYPE_ACCESS, theacl);\n }\n \n int gpfsacl_sys_acl_delete_def_file(vfs_handle_struct *handle,\n\n"}