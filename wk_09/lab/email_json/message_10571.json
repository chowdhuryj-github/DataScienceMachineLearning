{"category": "ham", "to_address": "Ranjan Maitra <maitra@iastate.edu>", "from_address": "\"Charles C. Berry\" <cberry@tajo.ucsd.edu>", "subject": "Re: [R] how to convert the lower triangle of a matrix to a\n symmetric matrix", "body": "On Thu, 19 Apr 2007, Ranjan Maitra wrote:\n\n> Hi,\n>\n> I have a vector of p*(p+1)/2 elements, essentially the lower triangle of \n> a symmetric matrix. I was wondering if there is an easy way to make it \n> fill a symmetric matrix. I have to do it several times, hence some \n> efficient approach would be very useful.\n\nIt depends on what the ordering of elements in your vector is.\n\nMany programs will order those elements (1,1), (2,1), (2,2), (3,1) , ...\n\nIn which case this shows how:\n\n\n> k.given.i.j <- function(x , y ) ifelse( y k.mat <- function(p) outer( 1:p, 1:p, k.given.i.j )\n> k.mat( 3 )\n      [,1] [,2] [,3]\n[1,]    1    2    4\n[2,]    2    3    5\n[3,]    4    5    6\n> matrix( rnorm( choose(4,2) )[ k.mat( 3 ) ] , nr = 3 )\n            [,1]        [,2]        [,3]\n[1,] -1.2165313  0.28262740  0.62448849\n[2,]  0.2826274 -1.19842868  0.05676263\n[3,]  0.6244885  0.05676263 -1.80957190\n>\n\nFor efficiency, you might save and reuse the result of k.mat().\n\nIf the elements are ordered (1,1), (2,1), (3,1), ..., you will need to \nwrite your own version of k.given.i.j()\n\n\n\n>\n> Many thanks and best wishes,\n> Ranjan\n>\n> ______________________________________________\n> R-help@stat.math.ethz.ch mailing list\n> https://stat.ethz.ch/mailman/listinfo/r-help\n> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html\n> and provide commented, minimal, self-contained, reproducible code.\n>\n\nCharles C. Berry                        (858) 534-2098\n                                          Dept of Family/Preventive Medicine\nE mailto:cberry@tajo.ucsd.edu\t         UC San Diego\nhttp://biostat.ucsd.edu/~cberry/         La Jolla, San Diego 92093-0901\n\n______________________________________________\nR-help@stat.math.ethz.ch mailing list\nhttps://stat.ethz.ch/mailman/listinfo/r-help\nPLEASE do read the posting guide http://www.R-project.org/posting-guide.html\nand provide commented, minimal, self-contained, reproducible code.\n\n"}