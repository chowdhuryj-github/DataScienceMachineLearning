{"category": "ham", "to_address": "James Peach <jpeach@samba.org>", "from_address": "Michael Adam <ma@sernet.de>", "subject": "Re: svn commit: samba r23108 - in branches:\n\tSAMBA_3_0/source/lib/replace SAMBA_3_0_26/source/lib/replace\n\tSAMBA_4_0/source/lib/replace", "body": "On Thu, May 24, 2007 at 08:48:58AM -0700, James Peach wrote:\n> On May 24, 2007, at 12:15 AM, obnox@samba.org wrote:\n> >Modified: branches/SAMBA_3_0/source/lib/replace/replace.h\n> >===================================================================\n> >--- branches/SAMBA_3_0/source/lib/replace/replace.h\t2007-05-24  \n> >01:57:02 UTC (rev 23107)\n> >+++ branches/SAMBA_3_0/source/lib/replace/replace.h\t2007-05-24  \n> >07:15:36 UTC (rev 23108)\n> >@@ -111,11 +111,6 @@\n> >extern int errno;\n> >#endif\n> >\n> >-#if defined(HAVE_LINUX_READAHEAD) && ! defined(HAVE_READAHEAD_DECL)\n> >-ssize_t readahead(int fd, off64_t offset, size_t count);\n> >-#endif\n> >-\n> >-\n> >#ifndef HAVE_STRDUP\n> >#define strdup rep_strdup\n> >char *rep_strdup(const char *s);\n> >@@ -326,6 +321,12 @@\n> >#ifndef RTLD_LAZY\n> >#define RTLD_LAZY 0\n> >#endif\n> >+#ifndef RTLD_NOW\n> >+#define RTLD_NOW 0\n> >+#endif\n> >+#ifndef RTLD_GLOBAL\n> >+#define RTLD_GLOBAL 0\n> >+#endif\n> \n> Is there any expectation that this is actually going to work? If we  \n> cabn't figure out the header that these definition live in, then  \n> making them up isn't necessarily going to help, eg. on AIX RTLD_GLOBAL  \n> appears to be 0x100. I don't know any system that defines them *all*  \n> to zero.\n> \n> If ldb requires these definitions, Id suggest simply disabling shared  \n> library support in lds unless they are present. That seems safer that  \n> passing an arbitrary (random?) value into dlopen.\n\nYou are probably right. My primary goal was to get the build\nworking on a system at all. I have taken the defines from\nheimdal/lib/hdb/hdb.c more or less blindly...\n\nI have to reconsider this.\n\nCheers, Michael\n\n"}