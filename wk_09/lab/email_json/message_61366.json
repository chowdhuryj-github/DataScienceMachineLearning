{"category": "ham", "to_address": "<r-help@stat.math.ethz.ch>", "from_address": "\"Afshartous, David\" <afshart@exchange.sba.miami.edu>", "subject": "[R] xyplot and autokey,\n\tmaintaining colors specified via \"col\" in key", "body": " \nAll,\n\nWhen specifying colors to xyplot w/ a groups argument, using\nauto.key no longer maintains the colors properly.  I've searched\nthe docs and help but haven't found exactly what I need ... I saw\na few examples in the archives involving par.settings but that doesn't\nseem to do it. I also saw some people using key instead of auto.key, but\nthat didn't seem consistent.  Is there a quick fix to the example code\nbelow?\n\ncheers,\nDave\n\ndat.ex = data.frame(  rep(c(1:6), each=6), c(rnorm(12), rnorm(12, 1),\nrnorm(12, 2)), rep(c(1:6), 6),\nrep(c(\"Drug1\", \"Drug2\", \"Placebo\"), each=12) )\nnames(dat.ex) = c(\"patient.no\", \"outcome\", \"time\", \"drug\")\n\n\n## colors in xyplot agree w/ colors in key, colors not specified:\nxyplot(outcome ~ time, dat.ex, groups=drug, type=c(\"g\", \"smooth\"), \nauto.key = list(space = \"top\",  text = levels(dat.ex$drug),\npoints=FALSE, lines=TRUE ) )\n\n## colors in xyplot do NOT agree w/ colors in key when colors changed:\nxyplot(outcome ~ time, dat.ex, groups=drug, type=c(\"g\", \"smooth\"), \nauto.key = list(space = \"top\",  text = levels(dat.ex$drug),\npoints=FALSE, lines=TRUE ),\ncol = c(1,2,3)  )\n\ni.e., the key is still generated w/ the \"old\" colors.\n\n______________________________________________\nR-help@stat.math.ethz.ch mailing list\nhttps://stat.ethz.ch/mailman/listinfo/r-help\nPLEASE do read the posting guide http://www.R-project.org/posting-guide.html\nand provide commented, minimal, self-contained, reproducible code.\n\n"}