{"category": "ham", "to_address": "samba-cvs@samba.org", "from_address": "lmuelle@samba.org", "subject": "svn commit: samba r22320 - in branches: SAMBA_3_0/source/lib\n\tSAMBA_3_0_25/source/lib", "body": "Author: lmuelle\nDate: 2007-04-17 18:35:10 +0000 (Tue, 17 Apr 2007)\nNew Revision: 22320\n\nWebSVN: http://websvn.samba.org/cgi-bin/viewcvs.cgi?view=rev&root=samba&rev=22320\n\nLog:\nBe more careful and check for the euid instead of the uid.\n\nThx for the hint James!\n\nModified:\n   branches/SAMBA_3_0/source/lib/fault.c\n   branches/SAMBA_3_0_25/source/lib/fault.c\n\n\nChangeset:\nModified: branches/SAMBA_3_0/source/lib/fault.c\n===================================================================\n--- branches/SAMBA_3_0/source/lib/fault.c\t2007-04-17 17:24:02 UTC (rev 22319)\n+++ branches/SAMBA_3_0/source/lib/fault.c\t2007-04-17 18:35:10 UTC (rev 22320)\n@@ -164,7 +164,7 @@\n \t/* If we're running as non root we might not be able to dump the core\n \t * file to the corepath.  There must not be an unbecome_root() before\n \t * we call abort(). */\n-\tif (getuid() != 0) {\n+\tif (geteuid() != 0) {\n \t\tbecome_root();\n \t}\n \n\nModified: branches/SAMBA_3_0_25/source/lib/fault.c\n===================================================================\n--- branches/SAMBA_3_0_25/source/lib/fault.c\t2007-04-17 17:24:02 UTC (rev 22319)\n+++ branches/SAMBA_3_0_25/source/lib/fault.c\t2007-04-17 18:35:10 UTC (rev 22320)\n@@ -164,7 +164,7 @@\n \t/* If we're running as non root we might not be able to dump the core\n \t * file to the corepath.  There must not be an unbecome_root() before\n \t * we call abort(). */\n-\tif (getuid() != 0) {\n+\tif (geteuid() != 0) {\n \t\tbecome_root();\n \t}\n \n\n"}