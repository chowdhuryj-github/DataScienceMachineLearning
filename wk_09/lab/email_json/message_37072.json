{"category": "ham", "to_address": "r-help@stat.math.ethz.ch", "from_address": "Albert Pang <albert.pang@mac.com>", "subject": "[R] Looking for the first observation within the month", "body": "Hi all, I have a simple data frame, first list is a list of dates (in  \n\"%Y-%m-%d\" format) and second list an observation on that particular  \ndate.  There might not be observations everyday.  Let's just say  \nthere are no observations on saturdays and sundays.  Now I want to  \nselect the first observation of every month into a list.  Is there an  \neasy way to do that?\n\nDate\t\t\tObservation\n----\t\t\t-----------\n2007-05-23\t\t20\n2007-05-22\t\t30\n2007-05-21\t\t10\n\n2007-04-10\t\t50\n2007-04-09\t\t40\n2007-04-07\t\t30\n\n2007-03-05\t\t10\n\nThe result I need is the data frame\n\n2007-05-21\t\t10\n2007-04-07\t\t30\n2007-03-05\t\t10\n\nor I am equally happy with just the vector c(10, 30, 10)\n\nI am new to R and after going through the manuals and the  \ndocumentation I can gather, I have come up with a convoluted way of  \ndoing it\n\n1)  I first get the Date into a vector.  (I am articificially  \nreproducing this vector below and call it A)\n\n > A<-c( as.Date(\"2007-05-23\"), as.Date(\"2007-05-22\"), as.Date \n(\"2007-05-21\"), as.Date(\"2007-04-10\"), as.Date(\"2007-04-09\"), as.Date \n(\"2007-04-07\"), as.Date(\"2007-03-05\"))\n > A\n[1] \"2007-05-23\" \"2007-05-22\" \"2007-05-21\" \"2007-04-10\" \"2007-04-09\"\n[6] \"2007-04-07\" \"2007-03-05\"\n\n\n2)  use cut with breaks falling on the months\n\n > B<-cut(A, breaks=\"month\")\n > B\n[1] 2007-05-01 2007-05-01 2007-05-01 2007-04-01 2007-04-01 2007-04-01\n[7] 2007-03-01\nLevels: 2007-03-01 2007-04-01 2007-05-01\n\n\n3)  then split to get a list of vectors group by the boundary of the  \ndate\n\n > C<-split(A, B)\n > C\n$`2007-03-01`\n[1] \"2007-03-05\"\n\n$`2007-04-01`\n[1] \"2007-04-10\" \"2007-04-09\" \"2007-04-07\"\n\n$`2007-05-01`\n[1] \"2007-05-23\" \"2007-05-22\" \"2007-05-21\"\n\n\n4)  in a for loop I loop through the elements within the list (the  \nelements are vectors of dates) with each vector I find the minimum  \nand concatentate it to a final vector D\n\n > D<-numeric()\n > for ( i in 1:length(C)){ D <- c( D, min(C[[i]]))}\n > class(D)<-\"Date\"\n > D\n[1] \"2007-03-05\" \"2007-04-07\" \"2007-05-21\"\n\nNext with D, I then go back and find out the positions of the  \nelements in D within A.  And then use the result as an index vector  \ninto the vector of observations (which is not shown here)  I feel  \nsure I am doing it the stupid way (or the procedural way)\n\nIs there a more declarative way of doing it?  Any pointers will be  \ngreatly appreciated!\n\nThanks a lot in advance,\n\nAlbert Pang\n\n\n\n\n\n\t[[alternative HTML version deleted]]\n\n______________________________________________\nR-help@stat.math.ethz.ch mailing list\nhttps://stat.ethz.ch/mailman/listinfo/r-help\nPLEASE do read the posting guide http://www.R-project.org/posting-guide.html\nand provide commented, minimal, self-contained, reproducible code.\n\n"}