{"category": "ham", "to_address": "Prof Brian Ripley <ripley@stats.ox.ac.uk>", "from_address": "Patrick Burns <pburns@pburns.seanet.com>", "subject": "Re: [R] Populate matrix from data.frame", "body": "You need some caution with Brian's solution as it\ndepends on the matrix being in the same order as\nthe factors in the data frame.\n\na <- data.frame(cbind(x=c('a','a','a','b','c'), \ny=c('a','b','c','d','e'),z=c(1,2,3,4,5)))\n\nmm <- matrix(0,5,5)\ncolnames(mm) <- c('a','b','c','d','e')\nrownames(mm) <- c('a','b','c','d','e')\n\npp <- mm[5:1, 5:1]\n\nmm[cbind(a$x, a$y)] <- a$z # desired result\n\npp[cbind(a$x, a$y)] <- a$z # not desired result\n\nIt would be nice if the following worked:\n\nmm[cbind(as.character(a$x), as.character(a$y))] <- a$z\n\n\nPatrick Burns\npatrick@burns-stat.com\n+44 (0)20 8525 0696\nhttp://www.burns-stat.com\n(home of S Poetry and \"A Guide for the Unwilling S User\")\n\nProf Brian Ripley wrote:\n\n>On Thu, 28 Jun 2007, Andrej Kastrin wrote:\n>\n>  \n>\n>>Dear all,\n>>\n>>I have a data frame\n>>a <- data.frame(cbind(x=c('a','a','a','b','c'),\n>>y=c('a','b','c','d','e'),z=c(1,2,3,4,5)))\n>>    \n>>\n>>>a\n>>>      \n>>>\n>> x y z\n>>1 a a 1\n>>2 a b 2\n>>3 a c 3\n>>4 b d 4\n>>5 c e 5\n>>\n>>and a matrix\n>>mm <- matrix(0,5,5)\n>>colnames(mm) <- c('a','b','c','d','e')\n>>rownames(mm) <- c('a','b','c','d','e')\n>>    \n>>\n>>>mm\n>>>      \n>>>\n>> a b c d e\n>>a 0 0 0 0 0\n>>b 0 0 0 0 0\n>>c 0 0 0 0 0\n>>d 0 0 0 0 0\n>>e 0 0 0 0 0\n>>\n>>How to populate matrix in a way that first column of data frame 'a'\n>>correspond to rownames(mm), second column to colnames(mm) and the third\n>>column is the element of matrix 'mm'?\n>>    \n>>\n>\n>mm[cbind(a$x, a$y)] <- a$z\n>\n>Please read about the forms of indexing matrices in 'An Introduction to \n>R'.\n>\n>  \n>\n\n______________________________________________\nR-help@stat.math.ethz.ch mailing list\nhttps://stat.ethz.ch/mailman/listinfo/r-help\nPLEASE do read the posting guide http://www.R-project.org/posting-guide.html\nand provide commented, minimal, self-contained, reproducible code.\n\n"}