{"category": "ham", "to_address": "yitzle <yitzle@users.sourceforge.net>", "from_address": "Rob Dixon <rob.dixon@350.com>", "subject": "Re: Code Comments/Tips - Can this code be better?", "body": "yitzle wrote:\n>\n> I got an input source that got records of fixed number of lines, eg\n> Name, Address, Age, Phone, Cell\n> I'm not interested in Age or Cell.\n> I'm doing something along the lines of the following. Can I do better?\n> \n> my @lines = qw/name address age phone cell end/;\n> my %process = {name=>1, address=>1, phone=>1, end=>1};\n> my $i = 0;\n> my $name;\n> my %hash;\n> while() {\n>     $name = $_ if($lines[$i] eq 'name');\n>     next unless($process{$lines[$i]});\n>     $hash{$name}{$lines[$i]} = $_;\n> } continue {\n>     $i = ($i++) % (#$lines + 1);\n> }\n> \n> One part that really irks me is the hash for listing what lines get \n> processed.\n> I suppose I can process everything and have a qw// list of what parts\n> of the hash I want to use at a later point of the code...\n\nI would put all of the data into the hash for completeness, and I would do\nit like this:\n\n  use strict;\n  use warnings;\n\n  my @lines = qw/name address age phone cell end/;\n\n  my %hash;\n\n  my @data;\n\n  while () {\n\n    chomp;\n    push @data, $_;\n\n    if (@data == @lines) {\n\n      my %record;\n      @record{@lines} = @data;\n\n      $hash{$record{name}} = \\%record;\n\n      undef @data;\n    }\n  }\n\n\n\n\nRob\n\n-- \nTo unsubscribe, e-mail: beginners-unsubscribe@perl.org\nFor additional commands, e-mail: beginners-help@perl.org\nhttp://learn.perl.org/\n\n\n"}