{"category": "ham", "to_address": "\"RICHARD FERNANDEZ\" <rfernandez@arrow.com>", "from_address": "\"Tom Phoenix\" <tom@stonehenge.com>", "subject": "Re: CPAN shell (LWP, Net::FTP) won't authenticate properly", "body": "On 6/25/07, RICHARD FERNANDEZ  wrote:\n\n> I'm trying to use the CPAN shell to install some modules from our\n> internal CPAN mirror.\n> I'm using a URL of the form ftp://MyCpanMirror/u02/CPAN/ , and I have a\n> valid .netrc configured with a user and password for the mirror box.\n>\n> At first I was able to query/install modules easily, but then I did an\n> \"install Bundle::CPAN\", and now I can't log into my CPAN mirror. To be\n> specific, LWP and Net::FTP are attempting to use an anonymous login,\n> which is not allowed, instead of trying to log in via the user\n> information contained in .netrc.\n\nSounds like somebody goofed, and assumed that all CPAN mirrors allow\nanonymous access. You probably need to file a bug report, but let's\nsee how far we can get first.\n\nIt's undocumented, but maybe try this:\n\n  BEGIN { $CPAN::DEBUG = 512; } # FTP?\n\n> I've read the docs for CPAN, LWP::UserAgent, and Net::FTP, but I don't\n> see how to change this behavior. I was under the impression that if a\n> .netrc was available, Net::FTP at least, would use it for\n> authentication.\n\nThat's my impression as well. Does Net::Netrc work for you from the\ncommand line, maybe something like this?\n\n  perl -MNet::Netrc -lwe 'print join \" \",\nNet::Netrc->lookup(\"MyCpanMirror\")->lpa'\n\nIf you're still able to use the ftp command to manually log in to your\nmirror, you should be able to configure CPAN to use that, as a\nworkaround. I say you should, but I don't know how tenaciously it may\ntry to use Net::FTP (or whatever is broken) instead.\n\nGood luck with it!\n\n--Tom Phoenix\nStonehenge Perl Training\n\n-- \nTo unsubscribe, e-mail: beginners-unsubscribe@perl.org\nFor additional commands, e-mail: beginners-help@perl.org\nhttp://learn.perl.org/\n\n\n"}