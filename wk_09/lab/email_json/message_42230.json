{"category": "ham", "to_address": "\"Tim Bergsma\" <timb@metrumrg.com>", "from_address": "\"Christophe Pallier\" <christophe@pallier.org>", "subject": "Re: [R] test for nested factors", "body": "Here are two functions I wrote, 'is.nested' and 'are.crossed', that check\nwhether a factor is nested inside antoher one, or if both are crossed:\n\nis.nested <- function (factor1,factor2)\n  {\n    # only one positive number per line in the f1 * f2 crosstable\n    all(apply(table(factor1,factor2)>0,1,sum) == 1)\n  }\n\nare.crossed <- function (factor1,factor2)\n  { all(table(factor1,factor2) > 0 ) }\n\nChristophe Pallier\nwww.pallier.org\n\nOn 6/4/07, Tim Bergsma  wrote:\n>\n> Is there a conventional way to test for nested factors?  I.e., if 'a'\n> and 'b' are lists of same-length factors, does each level specified by\n> 'a' correspond to exactly one level specified by 'b'?\n>\n> The function below seems to suffice, but I'd be happy to know of a more\n> succinct solution, if it already exists.\n>\n> Thanks,\n>\n> Tim.\n>\n> ---\n>\n> \"%nested.in%\" <- function(x,f,...){\n>         #coerce to list\n>         if(!is.list(x))x<-list(x)\n>         if(!is.list(f))f<-list(f)\n>         #collapse to vector\n>         x <- tapply(x[[1]],x)\n>         f <- tapply(f[[1]],f)\n>         #analyse\n>         return(all(sapply(lapply(split(f,x),unique),length)==1))\n> }\n>\n> CO2$Plant %nested.in% CO2[,c(\"Type\",\"Treatment\")] #TRUE\n> CO2$Plant %nested.in% (CO2$uptake < mean(CO2$uptake)) #FALSE\n>\n> ______________________________________________\n> R-help@stat.math.ethz.ch mailing list\n> https://stat.ethz.ch/mailman/listinfo/r-help\n> PLEASE do read the posting guide\n> http://www.R-project.org/posting-guide.html\n> and provide commented, minimal, self-contained, reproducible code.\n>\n\n\n\n-- \nChristophe Pallier (http://www.pallier.org)\n\n\t[[alternative HTML version deleted]]\n\n______________________________________________\nR-help@stat.math.ethz.ch mailing list\nhttps://stat.ethz.ch/mailman/listinfo/r-help\nPLEASE do read the posting guide http://www.R-project.org/posting-guide.html\nand provide commented, minimal, self-contained, reproducible code.\n\n"}