{"category": "ham", "to_address": "samba-cvs@samba.org", "from_address": "metze@samba.org", "subject": "svn commit: samba r22752 - in\n\tbranches/SAMBA_4_0/source/wrepl_server: .", "body": "Author: metze\nDate: 2007-05-07 15:43:40 +0000 (Mon, 07 May 2007)\nNew Revision: 22752\n\nWebSVN: http://websvn.samba.org/cgi-bin/viewcvs.cgi?view=rev&root=samba&rev=22752\n\nLog:\nbail out on talloc failure\n\nmetze\nModified:\n   branches/SAMBA_4_0/source/wrepl_server/wrepl_scavenging.c\n\n\nChangeset:\nModified: branches/SAMBA_4_0/source/wrepl_server/wrepl_scavenging.c\n===================================================================\n--- branches/SAMBA_4_0/source/wrepl_server/wrepl_scavenging.c\t2007-05-07 15:31:12 UTC (rev 22751)\n+++ branches/SAMBA_4_0/source/wrepl_server/wrepl_scavenging.c\t2007-05-07 15:43:40 UTC (rev 22752)\n@@ -498,6 +498,7 @@\n \tDEBUG(4,(\"wreplsrv_scavenging_run(): start\\n\"));\n \n \ttmp_mem = talloc_new(service);\n+\tNT_STATUS_HAVE_NO_MEMORY(tmp_mem);\n \tservice->scavenging.processing = True;\n \tstatus = wreplsrv_scavenging_owned_records(service,tmp_mem);\n \tservice->scavenging.processing = False;\n@@ -505,6 +506,7 @@\n \tNT_STATUS_NOT_OK_RETURN(status);\n \n \ttmp_mem = talloc_new(service);\t\n+\tNT_STATUS_HAVE_NO_MEMORY(tmp_mem);\n \tservice->scavenging.processing = True;\n \tstatus = wreplsrv_scavenging_replica_non_active_records(service, tmp_mem);\n \tservice->scavenging.processing = False;\n@@ -512,6 +514,7 @@\n \tNT_STATUS_NOT_OK_RETURN(status);\n \n \ttmp_mem = talloc_new(service);\n+\tNT_STATUS_HAVE_NO_MEMORY(tmp_mem);\n \tservice->scavenging.processing = True;\n \tstatus = wreplsrv_scavenging_replica_active_records(service, tmp_mem);\n \tservice->scavenging.processing = False;\n\n"}