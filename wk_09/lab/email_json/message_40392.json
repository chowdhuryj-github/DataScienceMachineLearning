{"category": "ham", "to_address": "samba-cvs@samba.org", "from_address": "metze@samba.org", "subject": "svn commit: samba r23293 - in\n\tbranches/SAMBA_4_0/source/lib/replace: .", "body": "Author: metze\nDate: 2007-06-01 13:04:56 +0000 (Fri, 01 Jun 2007)\nNew Revision: 23293\n\nWebSVN: http://websvn.samba.org/cgi-bin/viewcvs.cgi?view=rev&root=samba&rev=23293\n\nLog:\nthe fix for HP-UX 11.11 doesn't work on HP-UX 11.00\nwe end up with sozeof(uint64_t) == 4 :-(\n\nthe _APP32_64BIT_OFF_T section in  missed\nto redirect pread, pwrite to pread64, pwrite64 in HP-UX 11.00\nso try it manually as a workarround\n\nmetze\nModified:\n   branches/SAMBA_4_0/source/lib/replace/libreplace_cc.m4\n\n\nChangeset:\nModified: branches/SAMBA_4_0/source/lib/replace/libreplace_cc.m4\n===================================================================\n--- branches/SAMBA_4_0/source/lib/replace/libreplace_cc.m4\t2007-06-01 12:29:22 UTC (rev 23292)\n+++ branches/SAMBA_4_0/source/lib/replace/libreplace_cc.m4\t2007-06-01 13:04:56 UTC (rev 23293)\n@@ -60,7 +60,11 @@\n \t*hpux*)\n \t\t# mmap on HPUX is completely broken...\n \t\tAC_DEFINE(MMAP_BLACKLIST, 1, [Whether MMAP is broken])\n-\t\tif test \"`uname -r`\" = \"B.11.00\" -o \"`uname -r`\" = \"B.11.11\"; then\n+\t\tif test \"`uname -r`\" = \"B.11.00\"; then\n+\t\t\tAC_MSG_WARN([Enabling HPUX 11.00 header bug workaround])\n+\t\t\tCFLAGS=\"$CFLAGS -Dpread=pread64 -Dpwrite=pwrite64\"\n+\t\tfi\n+\t\tif test \"`uname -r`\" = \"B.11.11\"; then\n \t\t\tAC_MSG_WARN([Enabling HPUX 11.11 header bug workaround])\n \t\t\tCFLAGS=\"$CFLAGS -D_LARGEFILE64_SUPPORT -D__LP64__ -DO_LARGEFILE=04000\"\n \t\tfi\n\n"}