{"category": "ham", "to_address": "parrotbug@parrotcode.org", "from_address": "Mark Glines <mark@glines.org>", "subject": "GC bug on freebsd/x86, triggered by a perl6 test", "body": "I tried the perl6 testsuite on freebsd at Coke's request, and\ndiscovered a test that fails on freebsd but succeeds on linux.  The\ntest seems to be a GC-related assertion failure; parrot -G does not\ncrash, parrot without -G does crash.\n\nI am running on freebsd 6.2, in a checkout of svn r18803.  I did a\nrealclean beforehand, and configured with just \"perl Configure.pl\", no\narguments.\n\nTo reproduce:\n\nmake realclean\nperl Configure.pl\nmake\ncd languages/perl6\nLD_LIBRARY_PATH=../../blib/lib make\n\n$ LD_LIBRARY_PATH=../../blib/lib ../../parrot perl6.pbc t/00-parrot/05-var-array.t\nAssertion failed: (s->encoding && s->charset && !PObj_on_free_list_TEST(s)), function string_hash, file\nsrc/string.c, line 2024.\nAbort trap (core dumped)\n$ LD_LIBRARY_PATH=../../blib/lib ../../parrot -G perl6.pbc t/00-parrot/05-var-array.t\n1..11\nok 1\nok 2\nok 3\nok 4\nok 5\nok 6\nok 7\nok 8\nok 9\nok 10\nok 11\n\n\n(the LD_LIBRARY_PATH bit is required on freebsd so parrot can find libparrot.so.)\n\nMark\n\n"}