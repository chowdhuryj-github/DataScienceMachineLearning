{"category": "ham", "to_address": "samba-cvs@samba.org", "from_address": "tridge@samba.org", "subject": "svn commit: samba r23699 - in\n\tbranches/SAMBA_4_0/source/dsdb/schema: .", "body": "Author: tridge\nDate: 2007-07-04 05:15:06 +0000 (Wed, 04 Jul 2007)\nNew Revision: 23699\n\nWebSVN: http://websvn.samba.org/cgi-bin/viewcvs.cgi?view=rev&root=samba&rev=23699\n\nLog:\n\nwhen we create the global schema, remember to set the ldb opaque so we\ncan find it again\n\nModified:\n   branches/SAMBA_4_0/source/dsdb/schema/schema_init.c\n\n\nChangeset:\nModified: branches/SAMBA_4_0/source/dsdb/schema/schema_init.c\n===================================================================\n--- branches/SAMBA_4_0/source/dsdb/schema/schema_init.c\t2007-07-04 04:18:44 UTC (rev 23698)\n+++ branches/SAMBA_4_0/source/dsdb/schema/schema_init.c\t2007-07-04 05:15:06 UTC (rev 23699)\n@@ -1016,7 +1016,7 @@\n {\n \tint ret;\n \tif (!global_schema) {\n-\t  return LDB_SUCCESS;\n+\t\treturn LDB_SUCCESS;\n \t}\n \tret = ldb_set_opaque(ldb, \"dsdb_schema\", global_schema);\n \tif (ret != LDB_SUCCESS) {\n@@ -1063,6 +1063,8 @@\n \n \ttalloc_steal(talloc_autofree_context(), schema);\n \tglobal_schema = schema;\n+\n+\tdsdb_set_global_schema(ldb);\n }\n \n WERROR dsdb_attach_schema_from_ldif_file(struct ldb_context *ldb, const char *pf, const char *df)\n\n"}