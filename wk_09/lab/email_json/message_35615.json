{"category": "ham", "to_address": "Simon McVittie <simon.mcvittie@collabora.co.uk>", "from_address": "Dan Williams <dcbw@redhat.com>", "subject": "Re: [sugar] [PATCH] services/presence/server_plugin: Use\n\tmore\tconventional conditional import for md5", "body": "On Thu, 2007-05-24 at 12:47 +0100, Simon McVittie wrote:\n> -----BEGIN PGP SIGNED MESSAGE-----\n> Hash: SHA1\n> \n> - ---\n>  services/presence/server_plugin.py |   15 +++++++--------\n>  1 files changed, 7 insertions(+), 8 deletions(-)\n\nLooks good\n\n> diff --git a/services/presence/server_plugin.py b/services/presence/server_plugin.py\n> index 8556792..486bec4 100644\n> - --- a/services/presence/server_plugin.py\n> +++ b/services/presence/server_plugin.py\n> @@ -24,6 +24,12 @@ from buddyiconcache import BuddyIconCache\n>  import logging\n>  import os\n>  \n> +try:\n> +    # Python >= 2.5\n> +    from hashlib import md5\n> +except ImportError:\n> +    from md5 import new as md5\n> +\n>  import sys\n>  import psutils\n>  \n> @@ -397,14 +403,7 @@ class ServerPlugin(gobject.GObject):\n>          if not icon_data:\n>              icon_data = self._owner.props.icon\n>  \n> - -        m = None\n> - -        if sys.version_info[:3] >= (2, 5, 0):\n> - -            import hashlib\n> - -            m = hashlib.md5()\n> - -        else:\n> - -            import md5\n> - -            m = md5.new()\n> - -\n> +        m = md5()\n>          m.update(icon_data)\n>          hash = m.hexdigest()\n>  \n> - -- \n> 1.5.2-rc3.GIT\n> \n> -----BEGIN PGP SIGNATURE-----\n> Version: GnuPG v1.4.6 (GNU/Linux)\n> Comment: OpenPGP key: http://www.pseudorandom.co.uk/2003/contact/ or pgp.net\n> \n> iD8DBQFGVXs+WSc8zVUw7HYRAoKkAKC8KYV2LnUnW4pLKT8pDwrUW0351QCdG3Xo\n> EpqPrqBFkbS2J6BkyCTQVZA=\n> =YxOQ\n> -----END PGP SIGNATURE-----\n> _______________________________________________\n> Sugar mailing list\n> Sugar@laptop.org\n> http://mailman.laptop.org/mailman/listinfo/sugar\n\n_______________________________________________\nSugar mailing list\nSugar@laptop.org\nhttp://mailman.laptop.org/mailman/listinfo/sugar\n\n"}