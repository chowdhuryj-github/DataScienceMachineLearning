{"category": "ham", "to_address": "Alberto Monteiro <albmont@centroin.com.br>", "from_address": "Roger Bivand <Roger.Bivand@nhh.no>", "subject": "Re: [R] Help with map", "body": "On Fri, 4 May 2007, Alberto Monteiro wrote:\n\n> I have just learned how to play with map, but something weird\n> (or not) is happening.\n> \n> Suppose I want to draw a map of two countries (that have disconnected\n> components), like Argentina and Brazil.\n> \n> If I command:\n> \n> library(maps)\n> library(mapdata)\n> map(\"worldHires\", c(\"Argentina\", \"Brazil\"))\n> \n> It works fine. However, if I want to _colour_ the interior:\n> \n> map(\"worldHires\", c(\"Argentina\", \"Brazil\"), c(\"cyan\", \"green\"), fill=T)\n> \n> Then the colors will be assigned to the islands (Marajo in Brazil's\n> North and Tierra del Fuego in Argentina's South) and there will be\n> a recycling.\n> \n> Is there any way to associate one color to each country?\n\nTry:\n\nmap_poly_obj <- map(\"worldHires\", c(\"Argentina\", \"Brazil\"), plot=FALSE, \n  fill=TRUE)\nstr(map_poly_obj)\n\nand you'll see that the component of interest is the named polygons, of\nwhich there are 28, namely\n\nmap_poly_obj$names\n\nSo you can build a matching colours vector, or:\n\nlibrary(sp)\nlibrary(maptools)\nIDs <- sapply(strsplit(map_poly_obj$names, \":\"), function(x) x[1])\nSP_AB <- map2SpatialPolygons(map_poly_obj, IDs=IDs, \n  proj4string=CRS(\"+proj=longlat +datum=wgs84\"))\n\nbut\n\nplot(SP_AB, col=c(\"cyan\", \"green\"))\n\nstill misses, because some polygons have their rings of coordinates in \ncounter-clockwise order, so:\n\npl_new <- lapply(slot(SP_AB, \"polygons\"), checkPolygonsHoles)\nslot(SP_AB, \"polygons\") <- pl_new\n# please forget the assignment to the slot and do not do it unless you can \n# replace what was there before\n\nplot(SP_AB, col=c(\"cyan\", \"green\"), axes=TRUE)\n\nnow works. Moreover, SP_AB is a SpatialPolygons object, which can be \npromoted to a SpatialPolygonsDataFrame object, for a data slot holding a \ndata.frame with row names matching the Polygons ID values:\n\nsapply(slot(SP_AB, \"polygons\"), function(x) slot(x, \"ID\"))\n\nSo adding a suitable data frame gets you to the lattice graphics method\n\nspplot(SP_AB, \"my_var\")\n\nHope this helps,\n\nRoger\n\n> \n> Alberto Monteiro\n> \n> ______________________________________________\n> R-help@stat.math.ethz.ch mailing list\n> https://stat.ethz.ch/mailman/listinfo/r-help\n> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html\n> and provide commented, minimal, self-contained, reproducible code.\n> \n\n-- \nRoger Bivand\nEconomic Geography Section, Department of Economics, Norwegian School of\nEconomics and Business Administration, Helleveien 30, N-5045 Bergen,\nNorway. voice: +47 55 95 93 55; fax +47 55 95 95 43\ne-mail: Roger.Bivand@nhh.no\n\n______________________________________________\nR-help@stat.math.ethz.ch mailing list\nhttps://stat.ethz.ch/mailman/listinfo/r-help\nPLEASE do read the posting guide http://www.R-project.org/posting-guide.html\nand provide commented, minimal, self-contained, reproducible code.\n\n"}