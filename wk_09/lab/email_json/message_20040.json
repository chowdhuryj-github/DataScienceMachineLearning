{"category": "ham", "to_address": "samba-cvs@samba.org", "from_address": "jelmer@samba.org", "subject": "svn commit: samba r22596 - in branches/SAMBA_4_0: . source/lib/ldb\n\tsource/lib/talloc source/lib/tdb", "body": "Author: jelmer\nDate: 2007-04-30 08:53:56 +0000 (Mon, 30 Apr 2007)\nNew Revision: 22596\n\nWebSVN: http://websvn.samba.org/cgi-bin/viewcvs.cgi?view=rev&root=samba&rev=22596\n\nLog:\nSet _CFLAGS variables rather than putting knowledge in the ldb Makefile. \nThis should make it easier to allow use of system tdb or talloc libs using \npkg-config.\n\nModified:\n   branches/SAMBA_4_0/\n   branches/SAMBA_4_0/source/lib/ldb/Makefile.in\n   branches/SAMBA_4_0/source/lib/talloc/libtalloc.m4\n   branches/SAMBA_4_0/source/lib/tdb/libtdb.m4\n\n\nChangeset:\n\nProperty changes on: branches/SAMBA_4_0\n___________________________________________________________________\nName: bzr:merge\n...skipped...\n\nModified: branches/SAMBA_4_0/source/lib/ldb/Makefile.in\n===================================================================\n--- branches/SAMBA_4_0/source/lib/ldb/Makefile.in\t2007-04-30 08:08:36 UTC (rev 22595)\n+++ branches/SAMBA_4_0/source/lib/ldb/Makefile.in\t2007-04-30 08:53:56 UTC (rev 22596)\n@@ -18,11 +18,20 @@\n EXTRA_OBJ=@EXTRA_OBJ@\n TESTS=test-tdb.sh @TESTS@\n \n+TALLOC_LIBS = @TALLOC_LIBS@\n+TALLOC_CFLAGS = @TALLOC_CFLAGS@\n+\n+TDB_LIBS = @TDB_LIBS@\n+TDB_CFLAGS = @TDB_CFLAGS@\n+\n+POPT_LIBS = @POPT_LIBS@\n+POPT_CFLAGS = @POPT_CFLAGS@\n+\n CFLAGS=-g -I$(srcdir)/include -Iinclude -I$(srcdir) -I$(srcdir)/.. \\\n-       @POPT_CFLAGS@ -I@tallocdir@ -I@tdbdir@/include -I@libreplacedir@ \\\n+       $(POPT_CFLAGS) $(TALLOC_CFLAGS) $(TDB_CFLAGS) -I@libreplacedir@ \\\n \t-DLIBDIR=\\\"$(libdir)\\\" -DSHLIBEXT=\\\"@SHLIBEXT@\\\" -DUSE_MMAP=1 @CFLAGS@\n \n-LIB_FLAGS=@LDFLAGS@ -Llib -lldb @LIBS@ @POPT_LIBS@\n+LIB_FLAGS=@LDFLAGS@ -Llib -lldb @LIBS@ $(POPT_LIBS)\n \n LDB_TDB_DIR=ldb_tdb\n LDB_TDB_OBJ=$(LDB_TDB_DIR)/ldb_tdb.o \\\n\nModified: branches/SAMBA_4_0/source/lib/talloc/libtalloc.m4\n===================================================================\n--- branches/SAMBA_4_0/source/lib/talloc/libtalloc.m4\t2007-04-30 08:08:36 UTC (rev 22595)\n+++ branches/SAMBA_4_0/source/lib/talloc/libtalloc.m4\t2007-04-30 08:53:56 UTC (rev 22596)\n@@ -15,6 +15,9 @@\n TALLOCOBJ=\"talloc.o\"\n AC_SUBST(TALLOCOBJ)\n \n+TALLOC_CFLAGS=\"-I$tallocdir\"\n+AC_SUBST(TALLOC_CFLAGS)\n+\n AC_CHECK_SIZEOF(size_t,cross)\n AC_CHECK_SIZEOF(void *,cross)\n \n\nModified: branches/SAMBA_4_0/source/lib/tdb/libtdb.m4\n===================================================================\n--- branches/SAMBA_4_0/source/lib/tdb/libtdb.m4\t2007-04-30 08:08:36 UTC (rev 22595)\n+++ branches/SAMBA_4_0/source/lib/tdb/libtdb.m4\t2007-04-30 08:53:56 UTC (rev 22596)\n@@ -17,6 +17,9 @@\n AC_SUBST(TDBOBJ)\n AC_SUBST(LIBREPLACEOBJ)\n \n+TDB_CFLAGS=\"-I$tdbdir/include\"\n+AC_SUBST(TDB_CFLAGS)\n+\n AC_CHECK_FUNCS(mmap pread pwrite getpagesize utime)\n AC_CHECK_HEADERS(getopt.h sys/select.h sys/time.h)\n \n\n"}