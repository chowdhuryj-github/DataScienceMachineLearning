{"category": "ham", "to_address": "samba-cvs@samba.org", "from_address": "jelmer@samba.org", "subject": "svn commit: samba r23542 - in branches/SAMBA_4_0: . source/lib/tdr\n\tsource/script", "body": "Author: jelmer\nDate: 2007-06-18 21:48:57 +0000 (Mon, 18 Jun 2007)\nNew Revision: 23542\n\nWebSVN: http://websvn.samba.org/cgi-bin/viewcvs.cgi?view=rev&root=samba&rev=23542\n\nLog:\nInclude function documentation in prototype headers.\nModified:\n   branches/SAMBA_4_0/\n   branches/SAMBA_4_0/source/lib/tdr/tdr.c\n   branches/SAMBA_4_0/source/script/mkproto.pl\n\n\nChangeset:\n\nProperty changes on: branches/SAMBA_4_0\n___________________________________________________________________\nName: bzr:revision-info\n   - timestamp: Fri 2007-06-01 13:45:21.213999987 +0200\ncommitter: Jelmer Vernooij \nproperties: \n\tbranch-nick: SAMBA_4_0\n\n   + timestamp: Mon 2007-06-18 23:45:24.862999916 +0200\ncommitter: Jelmer Vernooij \nproperties: \n\tbranch-nick: SAMBA_4_0\n\nName: bzr:revision-id-v3\n   - jelmer@samba.org-20070528142122-cf5oh79k3uyecr1j\njelmer@samba.org-20070528210210-rmhpmrglmhpe9aps\njelmer@samba.org-20070601114521-2xayni5somt1iwse\n\n   + jelmer@samba.org-20070528142122-cf5oh79k3uyecr1j\njelmer@samba.org-20070528210210-rmhpmrglmhpe9aps\njelmer@samba.org-20070601114521-2xayni5somt1iwse\n12369 jelmer@samba.org-20070618214524-xu3jrkjbp7bwn0yf\n\nName: bzr:merge\n...skipped...\n\nModified: branches/SAMBA_4_0/source/lib/tdr/tdr.c\n===================================================================\n--- branches/SAMBA_4_0/source/lib/tdr/tdr.c\t2007-06-18 16:10:00 UTC (rev 23541)\n+++ branches/SAMBA_4_0/source/lib/tdr/tdr.c\t2007-06-18 21:48:57 UTC (rev 23542)\n@@ -45,7 +45,7 @@\n #define TDR_SSVAL(tdr, ofs, v) do { if (TDR_BE(tdr))  { RSSVAL(tdr->data.data,ofs,v); } else SSVAL(tdr->data.data,ofs,v); } while (0)\n #define TDR_SIVAL(tdr, ofs, v) do { if (TDR_BE(tdr))  { RSIVAL(tdr->data.data,ofs,v); } else SIVAL(tdr->data.data,ofs,v); } while (0)\n \n-/*\n+/**\n   expand the available space in the buffer to 'size'\n */\n NTSTATUS tdr_push_expand(struct tdr_push *tdr, uint32_t size)\n@@ -198,10 +198,11 @@\n \treturn NT_STATUS_OK;\n }\n \n-/*\n+/**\n   pull a ipv4address\n */\n-NTSTATUS tdr_pull_ipv4address(struct tdr_pull *tdr, TALLOC_CTX *ctx, const char **address)\n+NTSTATUS tdr_pull_ipv4address(struct tdr_pull *tdr, TALLOC_CTX *ctx, \n+\t\t\t\t\t\t\t  const char **address)\n {\n \tstruct ipv4_addr in;\n \tTDR_CHECK(tdr_pull_uint32(tdr, ctx, &in.addr));\n@@ -211,7 +212,7 @@\n \treturn NT_STATUS_OK;\n }\n \n-/*\n+/**\n   push a ipv4address\n */\n NTSTATUS tdr_push_ipv4address(struct tdr_push *tdr, const char **address)\n@@ -221,7 +222,7 @@\n \treturn NT_STATUS_OK;\n }\n \n-/*\n+/**\n   print a ipv4address\n */\n NTSTATUS tdr_print_ipv4address(struct tdr_print *tdr, const char *name, \n@@ -231,7 +232,7 @@\n \treturn NT_STATUS_OK;\n }\n \n-/*\n+/**\n   parse a hyper\n */\n NTSTATUS tdr_pull_hyper(struct tdr_pull *tdr, TALLOC_CTX *ctx, uint64_t *v)\n@@ -243,7 +244,7 @@\n \treturn NT_STATUS_OK;\n }\n \n-/*\n+/**\n   push a hyper\n */\n NTSTATUS tdr_push_hyper(struct tdr_push *tdr, uint64_t *v)\n@@ -255,9 +256,7 @@\n \treturn NT_STATUS_OK;\n }\n \n-\n-\n-/*\n+/**\n   push a NTTIME\n */\n NTSTATUS tdr_push_NTTIME(struct tdr_push *tdr, NTTIME *t)\n@@ -266,7 +265,7 @@\n \treturn NT_STATUS_OK;\n }\n \n-/*\n+/**\n   pull a NTTIME\n */\n NTSTATUS tdr_pull_NTTIME(struct tdr_pull *tdr, TALLOC_CTX *ctx, NTTIME *t)\n@@ -275,7 +274,7 @@\n \treturn NT_STATUS_OK;\n }\n \n-/*\n+/**\n   push a time_t\n */\n NTSTATUS tdr_push_time_t(struct tdr_push *tdr, time_t *t)\n@@ -283,7 +282,7 @@\n \treturn tdr_push_uint32(tdr, (uint32_t *)t);\n }\n \n-/*\n+/**\n   pull a time_t\n */\n NTSTATUS tdr_pull_time_t(struct tdr_pull *tdr, TALLOC_CTX *ctx, time_t *t)\n\nModified: branches/SAMBA_4_0/source/script/mkproto.pl\n===================================================================\n--- branches/SAMBA_4_0/source/script/mkproto.pl\t2007-06-18 16:10:00 UTC (rev 23541)\n+++ branches/SAMBA_4_0/source/script/mkproto.pl\t2007-06-18 21:48:57 UTC (rev 23542)\n@@ -158,10 +158,24 @@\n \n \t$private_file->(\"\\n/* The following definitions come from $filename  */\\n\\n\");\n \n+\tmy $comment = undef;\n+\tmy $incomment = 0;\n \twhile (my $line = ) {\t      \n \t\tmy $target = \\&private\n \t\tmy $is_public = 0;\n \n+\t\tif ($line =~ /^\\/\\*\\*/) { \n+\t\t\t$comment = \"\";\n+\t\t\t$incomment = 1;\n+\t\t}\n+\n+\t\tif ($incomment) {\n+\t\t\t$comment .= $line;\n+\t\t\tif ($line =~ /\\*\\//) {\n+\t\t\t\t$incomment = 0;\n+\t\t\t}\n+\t\t} \n+\n \t\t# these are ordered for maximum speed\n \t\tnext if ($line =~ /^\\s/);\n \t      \n@@ -189,6 +203,8 @@\n \n \t\tnext if ($line =~ /^int\\s*main/);\n \n+\t\t$target->(\"\\n$comment\") if (defined($comment)); $comment = undef;\n+\n \t\tif ( $line =~ /\\(.*\\)\\s*$/o ) {\n \t\t\tchomp $line;\n \t\t\t$target->(\"$line;\\n\");\n\n"}