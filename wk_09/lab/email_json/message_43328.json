{"category": "ham", "to_address": "samba-cvs@samba.org", "from_address": "tridge@samba.org", "subject": "Rev 476: - fixed flags display in logs in\n\thttp://samba.org/~tridge/ctdb", "body": "------------------------------------------------------------\nrevno: 476\nrevision-id: tridge@samba.org-20070606011324-nse5zhhtb8xalu59\nparent: tridge@samba.org-20070606011245-opmhuwt69ou5uxtm\ncommitter: Andrew Tridgell \nbranch nick: tridge\ntimestamp: Wed 2007-06-06 11:13:24 +1000\nmessage:\n  - fixed flags display in logs\n  - added monitor handler to test event script\nmodified:\n  common/ctdb_recoverd.c         recoverd.c-20070503213540-bvxuyd9jm1f7ig90-1\n  tests/events                   events-20070601105359-jc8p0xp6iq7phful-1\n=== modified file 'common/ctdb_recoverd.c'\n--- a/common/ctdb_recoverd.c\t2007-06-06 00:25:46 +0000\n+++ b/common/ctdb_recoverd.c\t2007-06-06 01:13:24 +0000\n@@ -991,8 +991,7 @@\n \t\treturn;\n \t}\n \n-\tDEBUG(0,(\"Node %u has changed flags - was 0x%x now 0x%x\\n\", \n-\t\t c->vnn, nodemap->nodes[i].flags, c->flags));\n+\tDEBUG(0,(\"Node %u has changed flags - now 0x%x\\n\", c->vnn, c->flags));\n \n \tnodemap->nodes[i].flags = c->flags;\n \t\n\n=== modified file 'tests/events'\n--- a/tests/events\t2007-06-01 10:54:26 +0000\n+++ b/tests/events\t2007-06-06 01:13:24 +0000\n@@ -5,6 +5,10 @@\n shift\n \n case $cmd in \n+    monitor)\n+\techo \"`date` monitor event\"\n+\texit 0\n+\t;;\n      startup)\n \techo \"`date` ctdb startup event\"\n \texit 0;\t\n\n"}