{"category": "ham", "to_address": "Rainer.Krug@uct.ac.za", "from_address": "Prof Brian Ripley <ripley@stats.ox.ac.uk>", "subject": "Re: [R] make sample() faster", "body": "I think the problem is not sample (which is written in C), but that you \nare calling it with size=1.  Taking one sample with probabilities from a \nlarge discrete distribution is necessarily slow, but you can take a large \nsample for little more cost.\n\nOn Thu, 14 Jun 2007, Rainer M. Krug wrote:\n\n> Hi\n>\n> I have a simulation which is relatively slow. I used Rprofile() and\n> identified the calls to sample() as the culprit is sample():\n>\n> > summaryRprof(\"Documents/PostDoc/Aloe_Pillansii/R/create.out\")\n> $by.self\n>                   self.time self.pct total.time total.pct\n> \"sample\"               1.30     44.2       1.52      51.7\n> \"ifelse\"               0.46     15.6       2.44      83.0\n> .\n> .\n> .\n>\n> I am using sample() as follow:\n> result <- sample(\n>                  x=d.growth.seedling$growth,\n>                  size=1,\n>                  prob=d.growth.seedling$p,\n>                  replace\n>                  )\n>\n> d.growth.seedling$p and d.growth.seedling$growth have a length of 1024\n> and are calculated initially by using density().\n>\n> My question: is there any way to make this faster, i.e. replace sample()\n> as I use it with another faster algorithm (if necessary implemented in C)?\n>\n> Thanks in advance,\n>\n> Rainer\n>\n>\n\n-- \nBrian D. Ripley,                  ripley@stats.ox.ac.uk\nProfessor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/\nUniversity of Oxford,             Tel:  +44 1865 272861 (self)\n1 South Parks Road,                     +44 1865 272866 (PA)\nOxford OX1 3TG, UK                Fax:  +44 1865 272595\n\n______________________________________________\nR-help@stat.math.ethz.ch mailing list\nhttps://stat.ethz.ch/mailman/listinfo/r-help\nPLEASE do read the posting guide http://www.R-project.org/posting-guide.html\nand provide commented, minimal, self-contained, reproducible code.\n\n"}