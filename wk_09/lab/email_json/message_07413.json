{"category": "ham", "to_address": "samba-cvs@samba.org", "from_address": "abartlet@samba.org", "subject": "svn commit: samba r22295 - in\n\tbranches/SAMBA_4_0/source/script/tests: .", "body": "Author: abartlet\nDate: 2007-04-17 03:52:08 +0000 (Tue, 17 Apr 2007)\nNew Revision: 22295\n\nWebSVN: http://websvn.samba.org/cgi-bin/viewcvs.cgi?view=rev&root=samba&rev=22295\n\nLog:\nUse delegated credentials and kerberos to test the pass-though\nauthenticatication as well as the ntvfs/cifs layer.\n\nAndrew Bartlett\n\nModified:\n   branches/SAMBA_4_0/source/script/tests/Samba4.pm\n   branches/SAMBA_4_0/source/script/tests/test_cifs.sh\n\n\nChangeset:\nModified: branches/SAMBA_4_0/source/script/tests/Samba4.pm\n===================================================================\n--- branches/SAMBA_4_0/source/script/tests/Samba4.pm\t2007-04-17 03:49:46 UTC (rev 22294)\n+++ branches/SAMBA_4_0/source/script/tests/Samba4.pm\t2007-04-17 03:52:08 UTC (rev 22295)\n@@ -463,11 +463,10 @@\n [cifs]\n \tread only = no\n \tntvfs handler = cifs\n-\tcifs:server = $server\n-\tcifs:user = $username\n-\tcifs:password = $password\n-\tcifs:domain = $domain\n+\tcifs:server = $netbiosname\n \tcifs:share = tmp\n+#There is no username specified here, instead the client is expected\n+#to log in with kerberos, and smbd will used delegated credentials.\n \n [simple]\n \tpath = $tmpdir\n\nModified: branches/SAMBA_4_0/source/script/tests/test_cifs.sh\n===================================================================\n--- branches/SAMBA_4_0/source/script/tests/test_cifs.sh\t2007-04-17 03:49:46 UTC (rev 22294)\n+++ branches/SAMBA_4_0/source/script/tests/test_cifs.sh\t2007-04-17 03:52:08 UTC (rev 22295)\n@@ -17,5 +17,5 @@\n \tcontinue;\n     fi\n     start=\"\"\n-    plantest \"ntvfs/cifs $t\" dc $VALGRIND bin/smbtorture $TORTURE_OPTIONS $ADDARGS //\\$SERVER/cifs -U\"\\$USERNAME\"%\"\\$PASSWORD\" $t\n+    plantest \"ntvfs/cifs $t\" dc $VALGRIND bin/smbtorture $TORTURE_OPTIONS $ADDARGS //\\$NETBIOSNAME/cifs -U\"\\$USERNAME\"%\"\\$PASSWORD\" $t\n done\n\n"}