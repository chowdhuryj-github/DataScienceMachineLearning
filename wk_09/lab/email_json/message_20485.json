{"category": "ham", "to_address": "oryann9 <oryann9@yahoo.com>", "from_address": "\"Chas Owens\" <chas.owens@gmail.com>", "subject": "Re: unit messages", "body": "On 4/30/07, oryann9  wrote:\nsnip\n> my $regexp  =\n> qr/(host:\\w+)|(onlinejfs.*)|(jfs\\sversion.*)/is;\nsnip\n\nWhy are you creating this regex so far from where it is being used?\nWhy are you using three captures when this expression can only return one?\n\nsnip\n>         if (/$regexp/) {\n>             ($host,$swlist,$kernel) = ($1, $2, $3);\n>             print \"\\n$1\";\n>             print \"\\t$2\";\n>             print \"$3\\n\";\n>         }\nsnip\n\nWhy are you using three prints instead of one (print \"\\n$1\\t$2$3\\n\")?\n\nThe three print lines are where your warnings are coming from.  Only\none of $1, $2, $3 is set at a time (since they are all alternatives).\n\nThis script demonstrates what is going on:\n\n#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nmy @a = qw(abc def ghi);\n\nfor my $s (@a) {\n        $s =~ /(b)|(e)|(h)/;\n        print \"1 => [$1] 2 => [$2] 3 => [$3]\\n\";\n}\n\nI would rewrite your code:\n\n#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nwhile () {\n        s/^\\s+|\\s+$//g;\n        next unless length;\n        if (/(host:\\w+)/is) {\n               print \"\\n$1\";\n        } elsif (/(onlinejfs.*)/is) {\n                print \"\\t$1\";\n        } elsif (/(jfs\\sversion.*)/is) {\n                print \"$1\\n\";\n        }\n}\n\n__DATA__\n\n---------------------------\nHOST:axyz\n---------------------------\n\nYou have mail.\nlogout\n\n# OnlineJFS                             B.11.11\nOnline features of the VxFS File System\n OnlineJFS.VXFS-ADV-RUN                B.11.11\nVXFS-ADV-RUN\n# PHCO_25831                            1.0\nSCSI Ultra160 driver Online Addition script\n SW-DIST.SD-JPN-E-HELP                 B.11.11.0212\nJapanese EUC Online Help for SD\n SW-DIST.SD-JPN-S-HELP                 B.11.11.0212\nJapanese SJIS Online Help for SD\n X11.X11-RUN-CL-MAN                    B.11.11\nOnline manual pages for X11 clients\n X11.X11-RUN-CT-MAN                    B.11.11\nOnline manual pages for X11 contrib clients\n X11.X11-RUN-MAN                       B.11.11\nOnline manual pages for X11 clients\n\n\n OnlineDiag                    B.11.11.09.11  HPUX\n11.11 Support Tools Bundle, Dec 2002\n\n\nJFS version loaded in Kernel: $Revision: libvxfs.a:\nCUPI80_BL2000_1108_2 Wed Nov 8 10:59:22 PST 2000 $\nConnection to closed.\n\n---------------------------\nHOST:xyxxx\n---------------------------\n\n__DesiredOutput__\n\nHOST:xyzzz\n\nOnlineJFS B.11.11 Online features of the VxFS File\nSystem\n\nOnlineJFS.VXFS-ADV-RUN  B.11.11 VXFS-ADV-RUN\n\nJFS version loaded in Kernel: $Revision: libvxfs.a:\nCUPI80_BL2000_1108_2 Wed Nov 8 10:59:22 PST 20\n00 $\n\n-- \nTo unsubscribe, e-mail: beginners-unsubscribe@perl.org\nFor additional commands, e-mail: beginners-help@perl.org\nhttp://learn.perl.org/\n\n\n"}