{"category": "ham", "to_address": "samba-technical@lists.samba.org", "from_address": "Jeremy Allison <jra@samba.org>", "subject": "Re: svn commit: samba r23290 - in branches:\n\tSAMBA_3_0/source/nsswitch SAMBA_3_0_26/source/nsswitch", "body": "On Fri, Jun 01, 2007 at 12:18:17PM +0000, obnox@samba.org wrote:\n> Author: obnox\n> Date: 2007-06-01 12:18:16 +0000 (Fri, 01 Jun 2007)\n> New Revision: 23290\n> \n> WebSVN: http://websvn.samba.org/cgi-bin/viewcvs.cgi?view=rev&root=samba&rev=23290\n> \n> Log:\n> Fix another small and stupid but severe typo. \n> Hopfully, I have finally got this right... :-)\n> \n> Michael\n> \n> \n> Modified:\n>    branches/SAMBA_3_0/source/nsswitch/winbindd_ads.c\n>    branches/SAMBA_3_0_26/source/nsswitch/winbindd_ads.c\n> \n> \n> Changeset:\n> Modified: branches/SAMBA_3_0/source/nsswitch/winbindd_ads.c\n> ===================================================================\n> --- branches/SAMBA_3_0/source/nsswitch/winbindd_ads.c\t2007-06-01 12:01:53 UTC (rev 23289)\n> +++ branches/SAMBA_3_0/source/nsswitch/winbindd_ads.c\t2007-06-01 12:18:16 UTC (rev 23290)\n> @@ -1054,7 +1054,7 @@\n>  \t\t\t\t{\n>  \t\t\t\t\tsid_copy(&(*sid_mem)[*num_names],\n>  \t\t\t\t\t\t &sid_mem_nocache[i]);\n> -\t\t\t\t\t(*names)[*num_names] = talloc_move(names, &names_nocache[i]);\n> +\t\t\t\t\t(*names)[*num_names] = talloc_move(*names, &names_nocache[i]);\n>  \t\t\t\t\t(*name_types)[*num_names] = name_types_nocache[i];\n>  \t\t\t\t\t(*num_names)++;\n>  \t\t\t\t}\n\nHmmm. I'd probably change \"*names\" to mem_ctx, there's no\nreal need for a heirarchy here, right ? You just want to\nmake sure both \"names\" and \"(*names)[*num_names]\" are\nallocated from the passed in mem_ctx, correct ?\n\nJeremy.\n\n"}