{"category": "ham", "to_address": "samba-cvs@samba.org", "from_address": "abartlet@samba.org", "subject": "svn commit: samba r23064 - in branches/SAMBA_4_0/source:\n\tlib/cmdline ntvfs/cifs", "body": "Author: abartlet\nDate: 2007-05-22 05:22:18 +0000 (Tue, 22 May 2007)\nNew Revision: 23064\n\nWebSVN: http://websvn.samba.org/cgi-bin/viewcvs.cgi?view=rev&root=samba&rev=23064\n\nLog:\nClarify comment and indent\n\nModified:\n   branches/SAMBA_4_0/source/lib/cmdline/popt_credentials.c\n   branches/SAMBA_4_0/source/ntvfs/cifs/vfs_cifs.c\n\n\nChangeset:\nModified: branches/SAMBA_4_0/source/lib/cmdline/popt_credentials.c\n===================================================================\n--- branches/SAMBA_4_0/source/lib/cmdline/popt_credentials.c\t2007-05-22 05:21:59 UTC (rev 23063)\n+++ branches/SAMBA_4_0/source/lib/cmdline/popt_credentials.c\t2007-05-22 05:22:18 UTC (rev 23064)\n@@ -71,19 +71,19 @@\n \n \tswitch(opt->val) {\n \tcase 'U':\n-\t\t{\n-\t\t\tchar *lp;\n-\n-\t\t\tcli_credentials_parse_string(cmdline_credentials, arg, CRED_SPECIFIED);\n-\t\t\t/* This breaks the abstraction, including the const above */\n-\t\t\tif ((lp=strchr_m(arg,'%'))) {\n-\t\t\t\tlp[0]='\\0';\n-\t\t\t\tlp++;\n-\t\t\t\t/* Try to prevent this showing up in ps */\n-\t\t\t\tmemset(lp,0,strlen(lp));\n-\t\t\t}\n+\t{\n+\t\tchar *lp;\n+\t\t\n+\t\tcli_credentials_parse_string(cmdline_credentials, arg, CRED_SPECIFIED);\n+\t\t/* This breaks the abstraction, including the const above */\n+\t\tif ((lp=strchr_m(arg,'%'))) {\n+\t\t\tlp[0]='\\0';\n+\t\t\tlp++;\n+\t\t\t/* Try to prevent this showing up in ps */\n+\t\t\tmemset(lp,0,strlen(lp));\n \t\t}\n-\t\tbreak;\n+\t}\n+\tbreak;\n \n \tcase OPT_PASSWORD:\n \t\tcli_credentials_set_password(cmdline_credentials, arg, CRED_SPECIFIED);\n\nModified: branches/SAMBA_4_0/source/ntvfs/cifs/vfs_cifs.c\n===================================================================\n--- branches/SAMBA_4_0/source/ntvfs/cifs/vfs_cifs.c\t2007-05-22 05:21:59 UTC (rev 23063)\n+++ branches/SAMBA_4_0/source/ntvfs/cifs/vfs_cifs.c\t2007-05-22 05:22:18 UTC (rev 23064)\n@@ -186,7 +186,7 @@\n \t\tDEBUG(5, (\"CIFS backend: Using delegated credentials\\n\"));\n \t\tcredentials = req->session_info->credentials;\n \t} else {\n-\t\tDEBUG(1,(\"CIFS backend: You must supply server, user and password and or have delegated credentials\\n\"));\n+\t\tDEBUG(1,(\"CIFS backend: NO delegated credentials found: You must supply server, user and password or the client must supply delegated credentials\\n\"));\n \t\treturn NT_STATUS_INVALID_PARAMETER;\n \t}\n \n\n"}