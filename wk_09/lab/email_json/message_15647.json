{"category": "ham", "to_address": "samba-cvs@samba.org", "from_address": "abartlet@samba.org", "subject": "svn commit: samba r22522 - in branches/SAMBA_4_0/source/dsdb/samdb:\n\t.", "body": "Author: abartlet\nDate: 2007-04-25 16:36:46 +0000 (Wed, 25 Apr 2007)\nNew Revision: 22522\n\nWebSVN: http://websvn.samba.org/cgi-bin/viewcvs.cgi?view=rev&root=samba&rev=22522\n\nLog:\nPrint why we can't find these entries.\n\nAndrew Bartlett\n\nModified:\n   branches/SAMBA_4_0/source/dsdb/samdb/samdb.c\n\n\nChangeset:\nModified: branches/SAMBA_4_0/source/dsdb/samdb/samdb.c\n===================================================================\n--- branches/SAMBA_4_0/source/dsdb/samdb/samdb.c\t2007-04-25 16:36:15 UTC (rev 22521)\n+++ branches/SAMBA_4_0/source/dsdb/samdb/samdb.c\t2007-04-25 16:36:46 UTC (rev 22522)\n@@ -1163,6 +1163,8 @@\n \n \tret = ldb_search(ldb, ldb_dn_new(tmp_ctx, ldb, \"\"), LDB_SCOPE_BASE, NULL, root_attrs, &root_res);\n \tif (ret) {\n+\t\tDEBUG(1,(\"Searching for dsServiceName in rootDSE failed: %s\\n\", \n+\t\t\t ldb_errstring(ldb)));\n \t\tgoto failed;\n \t}\n \ttalloc_steal(tmp_ctx, root_res);\n@@ -1414,11 +1416,15 @@\n \n \ttmp_ctx = talloc_new(ldb);\n \tif (tmp_ctx == NULL) {\n-\t\tgoto failed;\n+\t\tDEBUG(1, (\"talloc_new failed in samdb_is_pdc\"));\n+\t\treturn False;\n \t}\n \n \tret = ldb_search(ldb, ldb_get_default_basedn(ldb), LDB_SCOPE_BASE, NULL, dom_attrs, &dom_res);\n \tif (ret) {\n+\t\tDEBUG(1,(\"Searching for fSMORoleOwner in %s failed: %s\\n\", \n+\t\t\t ldb_dn_get_linearized(ldb_get_default_basedn(ldb)), \n+\t\t\t ldb_errstring(ldb)));\n \t\tgoto failed;\n \t}\n \ttalloc_steal(tmp_ctx, dom_res);\n\n"}