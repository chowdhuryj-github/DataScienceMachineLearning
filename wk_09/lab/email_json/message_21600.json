{"category": "ham", "to_address": "samba-technical@samba.org", "from_address": "Martin Zielinski <mz@seh.de>", "subject": "3.0.25rc3 and printer location string", "body": "Hello list,\n\nI took a closer look at the code in nt_printing.c which pulls the\nprinter location and comment string from cups.\nWhen I access my test system with one printer from XP, go to the\n\"printers and faxes\" folder, right click on the printer and select\n\"properties\" this results in more than 100 get_a_printer_2 calls in the\nsamba code.\nSince I haven't assigned any comment or location string, this results in\nas many requests to the cups server trying to receive the strings.\n\nThis behaviour results in a significant performance loss and I don't\nthink, it should be enabled by default.\n\nI currently do not see any other way than extending the service \nstructure with a location string, extending the pcap_cache struct and \nload the string during the service load.\n\nComments?\n\nRegards,\n\nMartin\n\n-- \nMartin Zielinski             mz@seh.de\nSoftware Development\nSEH Computertechnik GmbH     www.seh.de\n\n\n"}