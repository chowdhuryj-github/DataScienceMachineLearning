{"category": "ham", "to_address": "samba-cvs@samba.org", "from_address": "tridge@samba.org", "subject": "Rev 244: merge from ronnie in http://samba.org/~tridge/ctdb", "body": "------------------------------------------------------------\nrevno: 244\nrevision-id: tridge@samba.org-20070504004339-kn6qu8t7ek3z1co5\nparent: tridge@samba.org-20070503071223-l9hybdfd0lwdswu0\nparent: sahlberg@ronnie-20070503234553-4bf967bca57c0ba6\ncommitter: Andrew Tridgell \nbranch nick: tridge\ntimestamp: Fri 2007-05-04 10:43:39 +1000\nmessage:\n  merge from ronnie\nadded:\n  direct/recoverd.c              recoverd.c-20070503213540-bvxuyd9jm1f7ig90-1\nmodified:\n  Makefile.in                    makefile.in-20061117234101-o3qt14umlg9en8z0-1\n  common/ctdb_client.c           ctdb_client.c-20070411010216-3kd8v37k61steeya-1\n  common/ctdb_control.c          ctdb_control.c-20070426122724-j6gkpiofhbwdin63-1\n  common/ctdb_recover.c          ctdb_recover.c-20070503002147-admmfgt1oj6gexfo-1\n  include/ctdb.h                 ctdb.h-20061117234101-o3qt14umlg9en8z0-11\n  include/ctdb_private.h         ctdb_private.h-20061117234101-o3qt14umlg9en8z0-13\n  tests/ctdbd.sh                 ctdbd.sh-20070411085038-phusiewluwzyqjpc-2\n  tools/ctdb_control.c           ctdb_control.c-20070426122705-9ehj1l5lu2gn9kuj-1\n    ------------------------------------------------------------\n    revno: 197.1.49\n    merged: sahlberg@ronnie-20070503234553-4bf967bca57c0ba6\n    parent: sahlberg@ronnie-20070503230101-9fc8d7cbbc2fc6b8\n    committer: Ronnie Sahlberg \n    branch nick: ctdb\n    timestamp: Fri 2007-05-04 09:45:53 +1000\n    message:\n      update getvnnmap control to take a timeout parameter\n      dont explicitely free the vnnmap pointer in the getvnnmap control  this \n      is freed by the mem_ctx instead\n      \n      add code to the recoverd to detect when/if recovery is required\n      veiry that the number of active nodes, the nodemap and the vnn map is \n      consistent across the entire cluster and if not   trigger a recovery \n      (which right now just prints \"we need to do recovery\" to the screen.\n    ------------------------------------------------------------\n    revno: 197.1.48\n    merged: sahlberg@ronnie-20070503230101-9fc8d7cbbc2fc6b8\n    parent: sahlberg@ronnie-20070503223202-6defdbe314660e83\n    committer: Ronnie Sahlberg \n    branch nick: ctdb\n    timestamp: Fri 2007-05-04 09:01:01 +1000\n    message:\n      change the signature for ctdb_ctrl_getnodemap() so that a timeout \n      parameter is added.\n      change ctdb_get_connected_nodes in the same way\n    ------------------------------------------------------------\n    revno: 197.1.47\n    merged: sahlberg@ronnie-20070503223202-6defdbe314660e83\n    parent: sahlberg@ronnie-20070503223018-0799fc78283a686f\n    committer: Ronnie Sahlberg \n    branch nick: ctdb\n    timestamp: Fri 2007-05-04 08:32:02 +1000\n    message:\n      ctdb_control should use the provided timeout and not hardcode to 1.0 \n      seconds\n    ------------------------------------------------------------\n    revno: 197.1.46\n    merged: sahlberg@ronnie-20070503223018-0799fc78283a686f\n    parent: sahlberg@ronnie-20070503071638-802462107800a0a8\n    committer: Ronnie Sahlberg \n    branch nick: ctdb\n    timestamp: Fri 2007-05-04 08:30:18 +1000\n    message:\n      start working on a recovery daemon\n      \n      change ctdb_control so it takes a timeval pointer as argument.\n      this is the timeout. if the node has not responded within hte timeout\n      ctdb_control will return an error instead of hanging.\n      if the timeval pointer is NULL then the call will block indefinitely if \n      there is no response.\n      \n      this is used for now in the createdb control   but all the helpers \n      ctdb_ctrl_* should probably be updated to take a timeout parameter as \n      well.\n    ------------------------------------------------------------\n    revno: 197.1.45\n    merged: sahlberg@ronnie-20070503071638-802462107800a0a8\n    parent: sahlberg@ronnie-20070503061803-7e09396b07253194\n    parent: tridge@samba.org-20070503071223-l9hybdfd0lwdswu0\n    committer: Ronnie Sahlberg \n    branch nick: ctdb\n    timestamp: Thu 2007-05-03 17:16:38 +1000\n    message:\n      merge from tridge\n    ------------------------------------------------------------\n    revno: 197.1.44\n    merged: sahlberg@ronnie-20070503061803-7e09396b07253194\n    parent: sahlberg@ronnie-20070503044253-a4389b52c03c42ba\n    committer: Ronnie Sahlberg \n    branch nick: ctdb\n    timestamp: Thu 2007-05-03 16:18:03 +1000\n    message:\n      cleanup the control \"write record\"\n    ------------------------------------------------------------\n    revno: 197.1.43\n    merged: sahlberg@ronnie-20070503044253-a4389b52c03c42ba\n    parent: sahlberg@ronnie-20070503033038-5042e3eb473e382c\n    parent: tridge@samba.org-20070503035354-r8chwmgxqwl5o8fx\n    committer: Ronnie Sahlberg \n    branch nick: ctdb\n    timestamp: Thu 2007-05-03 14:42:53 +1000\n    message:\n      merge from tridge\n\nDiff too large for email (1019, the limit is 200).\n\n"}