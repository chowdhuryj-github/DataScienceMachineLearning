{"category": "ham", "to_address": "samba-cvs@samba.org", "from_address": "metze@samba.org", "subject": "svn commit: samba r22508 - in branches/SAMBA_4_0/source/dsdb/repl: .", "body": "Author: metze\nDate: 2007-04-25 02:43:23 +0000 (Wed, 25 Apr 2007)\nNew Revision: 22508\n\nWebSVN: http://websvn.samba.org/cgi-bin/viewcvs.cgi?view=rev&root=samba&rev=22508\n\nLog:\nat option for the startup delay\n\nmetze\nModified:\n   branches/SAMBA_4_0/source/dsdb/repl/drepl_service.c\n\n\nChangeset:\nModified: branches/SAMBA_4_0/source/dsdb/repl/drepl_service.c\n===================================================================\n--- branches/SAMBA_4_0/source/dsdb/repl/drepl_service.c\t2007-04-24 18:19:13 UTC (rev 22507)\n+++ branches/SAMBA_4_0/source/dsdb/repl/drepl_service.c\t2007-04-25 02:43:23 UTC (rev 22508)\n@@ -116,6 +116,7 @@\n {\n \tWERROR status;\n \tstruct dreplsrv_service *service;\n+\tuint32_t periodic_startup_interval;\n \n \tswitch (lp_server_role()) {\n \tcase ROLE_STANDALONE:\n@@ -164,9 +165,10 @@\n \t\treturn;\n \t}\n \n+\tperiodic_startup_interval\t= lp_parm_int(-1, \"dreplsrv\", \"periodic_startup_interval\", 15); /* in seconds */\n \tservice->periodic.interval\t= lp_parm_int(-1, \"dreplsrv\", \"periodic_interval\", 300); /* in seconds */\n \n-\tstatus = dreplsrv_periodic_schedule(service, service->periodic.interval);\n+\tstatus = dreplsrv_periodic_schedule(service, periodic_startup_interval);\n \tif (!W_ERROR_IS_OK(status)) {\n \t\ttask_server_terminate(task, talloc_asprintf(task,\n \t\t\t\t      \"dreplsrv: Failed to periodic schedule: %s\\n\",\n\n"}