{"category": "ham", "to_address": "samba-cvs@samba.org", "from_address": "tridge@samba.org", "subject": "Rev 518: install man page in http://samba.org/~tridge/ctdb", "body": "------------------------------------------------------------\nrevno: 518\nrevision-id: tridge@samba.org-20070609052130-7kxgjidk0a3frpdc\nparent: tridge@samba.org-20070609051105-qttmz36qj1fsfrqh\ncommitter: Andrew Tridgell \nbranch nick: tridge\ntimestamp: Sat 2007-06-09 15:21:30 +1000\nmessage:\n  install man page\nmodified:\n  Makefile.in                    makefile.in-20061117234101-o3qt14umlg9en8z0-1\n  packaging/RPM/ctdb.spec        ctdb.spec-20070527204758-biuh7znabuwan3zn-3\n=== modified file 'Makefile.in'\n--- a/Makefile.in\t2007-06-08 22:41:36 +0000\n+++ b/Makefile.in\t2007-06-09 05:21:30 +0000\n@@ -8,6 +8,7 @@\n libdir = @libdir@\n bindir = @bindir@\n sbindir = @sbindir@\n+mandir = @mandir@\n localstatedir = @localstatedir@\n VPATH = @srcdir@:@tdbdir@:@tallocdir@:@libreplacedir@:@poptdir@\n srcdir = @srcdir@\n@@ -16,6 +17,7 @@\n DESTDIR = /\n EXTRA_OBJ=@EXTRA_OBJ@\n XSLTPROC = /usr/bin/xsltproc\n+INSTALLCMD = @INSTALL@\n \n POPT_LIBS = @POPT_LIBS@\n POPT_CFLAGS = @POPT_CFLAGS@\n@@ -56,7 +58,7 @@\n \n DIRS = lib bin\n \n-all: showflags dirs $(CTDB_SERVER_OBJ) $(CTDB_CLIENT_OBJ) $(BINS) $(SBINS) $(TEST_BINS)\n+all: showflags dirs doc $(CTDB_SERVER_OBJ) $(CTDB_CLIENT_OBJ) $(BINS) $(SBINS) $(TEST_BINS)\n \n showflags:\n \t@echo 'ctdb will be compiled with flags:'\n@@ -115,20 +117,22 @@\n \tmkdir -p $(DESTDIR)$(includedir)\n \tmkdir -p $(DESTDIR)$(etcdir)/ctdb\n \tmkdir -p $(DESTDIR)$(etcdir)/ctdb/events.d\n-\tinstall -m755 bin/ctdb $(DESTDIR)$(bindir)\n-\tinstall -m755 bin/ctdbd $(DESTDIR)$(sbindir)\n-\tinstall -m644 include/ctdb.h $(DESTDIR)$(includedir)\n-\tinstall -m644 include/ctdb_private.h $(DESTDIR)$(includedir) # for samba3\n-\tinstall -m755 config/events $(DESTDIR)$(etcdir)/ctdb\n-\tinstall -m755 config/functions $(DESTDIR)$(etcdir)/ctdb\n-\tinstall -m755 config/statd-callout $(DESTDIR)$(etcdir)/ctdb\n-\tinstall -m755 config/events.d/10.interface $(DESTDIR)$(etcdir)/ctdb/events.d\n-\tinstall -m755 config/events.d/40.vsftpd $(DESTDIR)$(etcdir)/ctdb/events.d\n-\tinstall -m755 config/events.d/50.samba $(DESTDIR)$(etcdir)/ctdb/events.d\n-\tinstall -m755 config/events.d/59.nfslock $(DESTDIR)$(etcdir)/ctdb/events.d\n-\tinstall -m755 config/events.d/60.nfs $(DESTDIR)$(etcdir)/ctdb/events.d\n-\tinstall -m755 tools/onnode.ssh $(DESTDIR)$(bindir)\n-\tinstall -m755 tools/onnode.rsh $(DESTDIR)$(bindir)\n+\t${INSTALLCMD} -m755 bin/ctdb $(DESTDIR)$(bindir)\n+\t${INSTALLCMD} -m755 bin/ctdbd $(DESTDIR)$(sbindir)\n+\t${INSTALLCMD} -m644 include/ctdb.h $(DESTDIR)$(includedir)\n+\t${INSTALLCMD} -m644 include/ctdb_private.h $(DESTDIR)$(includedir) # for samba3\n+\t${INSTALLCMD} -m755 config/events $(DESTDIR)$(etcdir)/ctdb\n+\t${INSTALLCMD} -m755 config/functions $(DESTDIR)$(etcdir)/ctdb\n+\t${INSTALLCMD} -m755 config/statd-callout $(DESTDIR)$(etcdir)/ctdb\n+\t${INSTALLCMD} -m755 config/events.d/10.interface $(DESTDIR)$(etcdir)/ctdb/events.d\n+\t${INSTALLCMD} -m755 config/events.d/40.vsftpd $(DESTDIR)$(etcdir)/ctdb/events.d\n+\t${INSTALLCMD} -m755 config/events.d/50.samba $(DESTDIR)$(etcdir)/ctdb/events.d\n+\t${INSTALLCMD} -m755 config/events.d/59.nfslock $(DESTDIR)$(etcdir)/ctdb/events.d\n+\t${INSTALLCMD} -m755 config/events.d/60.nfs $(DESTDIR)$(etcdir)/ctdb/events.d\n+\t${INSTALLCMD} -m755 tools/onnode.ssh $(DESTDIR)$(bindir)\n+\t${INSTALLCMD} -m755 tools/onnode.rsh $(DESTDIR)$(bindir)\n+\tif [ -f doc/ctdb.1 ];then ${INSTALLCMD} -d $(DESTDIR)$(mandir)/man1; fi\n+\tif [ -f doc/ctdb.1 ];then ${INSTALLCMD} -m 644 doc/ctdb.1 $(DESTDIR)$(mandir)/man1; fi\n \tcd $(DESTDIR)$(bindir) && ln -sf onnode.ssh onnode\n \n test: all\n\n=== modified file 'packaging/RPM/ctdb.spec'\n--- a/packaging/RPM/ctdb.spec\t2007-06-07 05:25:36 +0000\n+++ b/packaging/RPM/ctdb.spec\t2007-06-09 05:21:30 +0000\n@@ -5,7 +5,7 @@\n Packager: Samba Team \n Name: ctdb\n Version: 1.0\n-Release: 3\n+Release: 4\n Epoch: 0\n License: GNU GPL version 2\n Group: System Environment/Daemons\n@@ -104,5 +104,6 @@\n %{_bindir}/onnode.ssh\n %{_bindir}/onnode.rsh\n %{_bindir}/onnode\n+%{_mandir}/man1/ctdb.1\n %{_includedir}/ctdb.h\n %{_includedir}/ctdb_private.h\n\n"}