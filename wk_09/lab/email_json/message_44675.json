{"category": "ham", "to_address": "samba-cvs@samba.org", "from_address": "lha@samba.org", "subject": "svn commit: lorikeet r719 - in trunk/heimdal: .", "body": "Author: lha\nDate: 2007-06-08 05:33:16 +0000 (Fri, 08 Jun 2007)\nNew Revision: 719\n\nWebSVN: http://websvn.samba.org/cgi-bin/viewcvs.cgi?view=rev&root=lorikeet&rev=719\n\nLog:\nLast bits to make useful.\n\nModified:\n   trunk/heimdal/IMPORT-HEIMDAL.sh\n\n\nChangeset:\nModified: trunk/heimdal/IMPORT-HEIMDAL.sh\n===================================================================\n--- trunk/heimdal/IMPORT-HEIMDAL.sh\t2007-06-08 03:20:08 UTC (rev 718)\n+++ trunk/heimdal/IMPORT-HEIMDAL.sh\t2007-06-08 05:33:16 UTC (rev 719)\n@@ -3,23 +3,32 @@\n hpath=svn://svn.h5l.se/heimdal/trunk/heimdal\n spath=svn+ssh://svn.samba.org/data/svn/lorikeet/trunk/heimdal\n \n-echo \"heimdal import `date`\" > log\n-svn checkout $hpath heimdal-import >> log || exit 1\n-svn checkout $spath heimdal-lorikeet >> log || exit 1\n+rm -rf heimdal-import heimdal-lorikeet\n+\n+l=`pwd`/log\n+echo \"heimdal import `date`\" > ${l}\n+svn checkout $hpath heimdal-import >> ${l} || exit 1\n+svn checkout $spath heimdal-lorikeet >> ${l} || exit 1\n cd heimdal-import || exit 1\n-autoreconf -f -i >> log || exit 1\n-./configure >> log  || exit 1\n-make dist >> log || exit 1\n+hsvnrev=`svn info  | awk '/^Revision:/ { print $2; }'`\n+test \"X$hsvnrev\" = \"X\" && exit 1\n+autoreconf -f -i >> ${l} || exit 1\n+./configure >> ${l}  || exit 1\n+make dist >> ${l} || exit 1\n name=`make print-distdir`\n test \"X$name\" = \"X\" && exit 1\n gzip -dc $name.tar.gz | tar xf - || exit 1\n (cd $name && find . -name '*.cat[0-9]' -print | xargs rm) || exit 1\n (cd $name && tar cf - * ) | (cd ../heimdal-lorikeet && tar xf - ) || exit 1\n cd ../heimdal-lorikeet\n-svn status | grep '^\\?' | cut -b2- | xargs svn add\n+svn status | grep '^\\?' | cut -b2- | xargs svn add >> ${l}\n (cd lib/roken && perl -pi -e 's,\"roken.h\",\\,g' *.c)\n \n-echo \"now run patch < heimdal-lorikeet.diff and fix up the damage\"\n+echo \"now run:\"\n+echo \"cd heimdal-lorikeet\"\n+echo \"patch < heimdal-lorikeet.diff\"\n+echo \"and fix up the damage\"\n+echo \"svn commit -m \\\"Merged with Heimdal svn revision $hsvnrev\\\"\"\n \n exit 0\n \n\n"}