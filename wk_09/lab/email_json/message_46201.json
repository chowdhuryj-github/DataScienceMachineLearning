{"category": "ham", "to_address": "jerry gay <jerry.gay@gmail.com>", "from_address": "Ron Blaschke <ron@rblasch.org>", "subject": "Re: [perl #41569] t/distro/file_metadata.t fails on win32", "body": "jerry gay wrote:\n> On 6/11/07, Paul Cochrane  wrote:\n>> On 09/03/07, chromatic  wrote:\n>> > On Friday 09 March 2007 05:00, Ron Blaschke wrote:\n>> >\n>> > > Attached patch replaces the backslashes with slashes on Windows.\n>> >\n>> > Would using File::Spec be less fragile?\n>>\n>> I've attached a patch which uses File::Spec instead of replacing one\n>> set of slashes with another.  Comments welcome!  :-)\n>>\n> good idea.\n> \n> instead of breaking up the path and reconstructing it separately\n> (since the individual components of the path aren't used anywhere\n> else,) how about using 'canonpath' to clean up the path in one step.\n> something like:\n> \n>                if ( $result =~ m{(.*) - (.*)} ) {\n>                    my $file = canonpath $1;\n>                    my $attribute = $2;\n> \n>                    # and add to the results hash\n>                    $results{$file} = $attribute;\n>                }\n\nI may be missing something here, but I think the problem was that the\nfile name sets in MANIFEST and those reported by svn must match up, but\ndidn't because of the file separator.  MANIFEST uses forward slashes,\nFile::Spec those of the current platform, which probably brings you back\nto square one.\n\nIf you decide for File::Spec you should also canonicalize\n@manifest_files, I guess.\n\nRon\n\n"}