{"category": "ham", "to_address": "\"Roberto Brunelli\" <brunelli@itc.it>", "from_address": "\"Gabor Grothendieck\" <ggrothendieck@gmail.com>", "subject": "Re: [R] Selective 'expansion' of arguments in a match.call() result\n\t...", "body": "Try this:\n\n\n# ith arg is expanded if expand[[i]] is TRUE where expand is\n# extended to vector of same length as ... .\n# default is to expand all args if 1st arg is \"character\"\nexample2 <- function(..., expand = is.character(..1)) {\n\tL <- list(...)\n\texpand <- rep(expand, length = length(L))\n\tmc <- match.call()\n\tmc$expand <- NULL\n\tfor(i in which(expand)) mc[[i+1]] <- L[[i]]\n\tmc\n}\n\n# test\na <- b <- 1\nexample2(a, b)\nd <- \"a\"\nexample2(d, b)\nexample2(a, b, expand = TRUE)\nexample2(a, b, expand = c(TRUE, FALSE))\n\n\nOn 5/31/07, Roberto Brunelli  wrote:\n> Is it  possible to  write a support  function to  automatize selective\n> argument expansion (based on argument  value type) as in the following\n> example, in  order  to write  terse  code  even  when there  are  many\n> arguments?  Forcing evaluation of all arguments is not a problem ...\n>\n> ______________________________________________Thanks a lot!__________R_\n>\n> # When called with document = 1, we have the simple match.call() result,\n> # when document =  2 and name is a string, it  is expanded, otherwise it\n> # is not\n>\n> example <- function (name, document = FALSE) {\n>\n>   print(name)\n>\n>   if(document == 1) {\n>     resh          <- match.call()\n>   } else if (document == 2) {\n>     resh          <- match.call()\n>\n>     if(is.character(name)) {\n>       resh$name     <- name\n>     }\n>     resh$document <- document\n>   } else {\n>     resh <- call(\"\")\n>   }\n>\n>   resh\n> }\n>\n>  > a <- \"Roberto\"\n>  > b <- 1\n>  > example(a, document = 1)\n> [1] \"Roberto\"\n> example(name = a, document = 1)\n>  > example(a, document = 2)\n> [1] \"Roberto\"\n> example(name = \"Roberto\", document = 2)\n>  > example(b, document = 2)\n> [1] 1\n> example(name = b, document = 2)\n>  >\n>\n> --\n>        \n> | Roberto Brunelli - [scientist at  Fondazione Bruno Kessler-irst]\n> |           'Home can be anywhere, for it is a part of one's self'\n>\n> ------------------\n> ITC -> dall'1 marzo 2007 Fondazione Bruno Kessler\n> ITC -> since 1 March 2007 Fondazione Bruno Kessler\n>\n> ______________________________________________\n> R-help@stat.math.ethz.ch mailing list\n> https://stat.ethz.ch/mailman/listinfo/r-help\n> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html\n> and provide commented, minimal, self-contained, reproducible code.\n>\n\n______________________________________________\nR-help@stat.math.ethz.ch mailing list\nhttps://stat.ethz.ch/mailman/listinfo/r-help\nPLEASE do read the posting guide http://www.R-project.org/posting-guide.html\nand provide commented, minimal, self-contained, reproducible code.\n\n"}