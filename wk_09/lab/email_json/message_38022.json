{"category": "ham", "to_address": "samba-cvs@samba.org", "from_address": "tridge@samba.org", "subject": "Rev 381: use autoconf for more paths in\n\thttp://samba.org/~tridge/ctdb", "body": "------------------------------------------------------------\nrevno: 381\nrevision-id: tridge@samba.org-20070529052041-dmvblb655nqxg7dx\nparent: tridge@samba.org-20070529051500-0lhsk7t608qowp9i\ncommitter: Andrew Tridgell \nbranch nick: tridge\ntimestamp: Tue 2007-05-29 15:20:41 +1000\nmessage:\n  use autoconf for more paths\nmodified:\n  Makefile.in                    makefile.in-20061117234101-o3qt14umlg9en8z0-1\n  common/cmdline.c               cmdline.c-20070416041216-w1zvz91bkdsgjckw-1\n  direct/ctdbd.c                 ctdbd.c-20070411085044-dqmhr6mfeexnyt4m-1\n  packaging/RHEL/ctdb.spec       ctdb.spec-20070527204758-biuh7znabuwan3zn-3\n=== modified file 'Makefile.in'\n--- a/Makefile.in\t2007-05-29 02:16:59 +0000\n+++ b/Makefile.in\t2007-05-29 05:20:41 +0000\n@@ -10,6 +10,7 @@\n localstatedir = @localstatedir@\n VPATH = @srcdir@:@tdbdir@:@tallocdir@:@libreplacedir@:@poptdir@\n srcdir = @srcdir@\n+etcdir = @sysconfdir@\n builddir = @builddir@\n DESTDIR = /\n EXTRA_OBJ=@EXTRA_OBJ@\n@@ -20,7 +21,7 @@\n \n CFLAGS=-g -I$(srcdir)/include -Iinclude -Ilib -Ilib/util -I$(srcdir) \\\n        -I@tallocdir@ -I@tdbdir@/include -I@libreplacedir@ \\\n-\t-DVARDIR=\\\"$(localstatedir)\\\" -DUSE_MMAP=1 @CFLAGS@ $(POPT_CFLAGS)\n+\t-DVARDIR=\\\"$(localstatedir)\\\" -DETCDIR=\\\"$(etcdir)\\\" -DUSE_MMAP=1 @CFLAGS@ $(POPT_CFLAGS)\n \n LIB_FLAGS=@LDFLAGS@ -Llib @LIBS@ $(POPT_LIBS) @INFINIBAND_LIBS@\n \n\n=== modified file 'common/cmdline.c'\n--- a/common/cmdline.c\t2007-05-29 05:15:00 +0000\n+++ b/common/cmdline.c\t2007-05-29 05:20:41 +0000\n@@ -39,7 +39,7 @@\n \tconst char *logfile;\n \tconst char *events;\n } ctdb_cmdline = {\n-\t.nlist = \"/etc/ctdb/nodes\",\n+\t.nlist = ETCDIR \"/ctdb/nodes\",\n \t.transport = \"tcp\",\n \t.myaddress = NULL,\n \t.socketname = CTDB_PATH,\n\n=== modified file 'direct/ctdbd.c'\n--- a/direct/ctdbd.c\t2007-05-29 02:49:25 +0000\n+++ b/direct/ctdbd.c\t2007-05-29 05:20:41 +0000\n@@ -43,7 +43,7 @@\n \tconst char *public_interface;\n \tconst char *event_script;\n } options = {\n-\t.event_script = \"/etc/ctdb/events\"\n+\t.event_script = ETCDIR \"/ctdb/events\"\n };\n \n \n\n=== modified file 'packaging/RHEL/ctdb.spec'\n--- a/packaging/RHEL/ctdb.spec\t2007-05-29 05:15:00 +0000\n+++ b/packaging/RHEL/ctdb.spec\t2007-05-29 05:20:41 +0000\n@@ -62,6 +62,7 @@\n \n install -m644 setup/ctdb.sysconfig $RPM_BUILD_ROOT%{_sysconfdir}/sysconfig/ctdb\n install -m755 setup/ctdb.init $RPM_BUILD_ROOT%{initdir}/ctdb\n+install -m755 tools/events $RPM_BUILD_ROOT%{_sysconfdir}/ctdb/events\n \n # Remove \"*.old\" files\n find $RPM_BUILD_ROOT -name \"*.old\" -exec rm -f {} \\;\n\n"}