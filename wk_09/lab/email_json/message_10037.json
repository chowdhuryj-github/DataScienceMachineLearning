{"category": "ham", "to_address": "R R-help <r-help@stat.math.ethz.ch>", "from_address": "John Kane <jrkrideau@yahoo.ca>", "subject": "[R] Character coerced to factor and I cannot get it back", "body": "Something probably obivous but I don't see it.  I\nneeded to find the first 1 or two digits of some 5 and\n6 digit numbers since they identified research sites\nwhile the rest of the number was the plot id.  \n\nI converted the numbers to characters, got the first 1\nor  2 characters as appropriate and went to add the\nnew vector to the data.frame.  For some reason R is\ninsisting on turning the character variables into\nfactors.  This is alright since they really are\nfactors anyway but I took me a while to realise what\nwas happening.  \n\nFor convenience, because of the way I had defined some\nother variables it tried to coerce the variable back\ninto character and I cannot.  \n\nCan anyone explain what I am doing wrong or where I am\nmisunderstanding what R is doing and why?\n\nThanks\n\nEXAMPLE\n\nmylist  <- list(dd  <- data.frame(aa <- 1:4, bb <- \nletters[1:4],\n         cc <- c(12345, 123456, 45678, 456789)),\n          vec  <-  letters[1:10]  )\n\n#Get data frame from list\ndd <-  mylist[[1]]\nattach(dd)\n\n# Convert numeric id to character id\nid  <-  as.character(dd[,3]) ; id\n# get site designators (first one or two characters of\nid\n\nst  <- substring(id, 1,nchar(id)-4 ) ; st\ntypeof (st)  ; class(st)\n\ndd1  <-  cbind(dd, st)\n    names(dd1)  <- c(\"aa\",\"bb\",\"cc\",\"st\")\n    dd1\n    typeof(dd1$st); class(dd1$st)\n    \ndd2  <-  cbind(dd, as.character(st))\n    names(dd2)  <- c(\"aa\",\"bb\",\"cc\",\"st\")\n    dd2\n    typeof(dd2$st) ;   class(dd2$st)\n\n______________________________________________\nR-help@stat.math.ethz.ch mailing list\nhttps://stat.ethz.ch/mailman/listinfo/r-help\nPLEASE do read the posting guide http://www.R-project.org/posting-guide.html\nand provide commented, minimal, self-contained, reproducible code.\n\n"}