{"category": "ham", "to_address": "samba-cvs@samba.org", "from_address": "vlendec@samba.org", "subject": "svn commit: samba r23594 - in branches: SAMBA_3_0/source/lib\n\tSAMBA_3_0_26/source/lib", "body": "Author: vlendec\nDate: 2007-06-24 13:24:20 +0000 (Sun, 24 Jun 2007)\nNew Revision: 23594\n\nWebSVN: http://websvn.samba.org/cgi-bin/viewcvs.cgi?view=rev&root=samba&rev=23594\n\nLog:\nFix parsing of local pids if cluster support is compiled in but no\ncluster is used\n\nModified:\n   branches/SAMBA_3_0/source/lib/util.c\n   branches/SAMBA_3_0_26/source/lib/util.c\n\n\nChangeset:\nModified: branches/SAMBA_3_0/source/lib/util.c\n===================================================================\n--- branches/SAMBA_3_0/source/lib/util.c\t2007-06-22 22:37:07 UTC (rev 23593)\n+++ branches/SAMBA_3_0/source/lib/util.c\t2007-06-24 13:24:20 UTC (rev 23594)\n@@ -3143,6 +3143,10 @@\n \t\tresult.vnn = vnn;\n \t\tresult.pid = pid;\n \t}\n+\telse if (sscanf(pid_string, \"%u\", &pid) == 1) {\n+\t\tresult.vnn = NONCLUSTER_VNN;\n+\t\tresult.pid = pid;\n+\t}\n \telse {\n \t\tresult.vnn = NONCLUSTER_VNN;\n \t\tresult.pid = -1;\n\nModified: branches/SAMBA_3_0_26/source/lib/util.c\n===================================================================\n--- branches/SAMBA_3_0_26/source/lib/util.c\t2007-06-22 22:37:07 UTC (rev 23593)\n+++ branches/SAMBA_3_0_26/source/lib/util.c\t2007-06-24 13:24:20 UTC (rev 23594)\n@@ -3123,6 +3123,10 @@\n \t\tresult.vnn = vnn;\n \t\tresult.pid = pid;\n \t}\n+\telse if (sscanf(pid_string, \"%u\", &pid) == 1) {\n+\t\tresult.vnn = NONCLUSTER_VNN;\n+\t\tresult.pid = pid;\n+\t}\n \telse {\n \t\tresult.vnn = NONCLUSTER_VNN;\n \t\tresult.pid = -1;\n\n"}