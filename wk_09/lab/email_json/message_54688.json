{"category": "ham", "to_address": "\"Michael Hoffman\" <b3i4old02@sneakemail.com>", "from_address": "deepayan.sarkar@gmail.com", "subject": "Re: [R] Lattice: hiding only some strips", "body": "On 6/22/07, Michael Hoffman  wrote:\n> Deepayan Sarkar wrote:\n> > On 6/22/07, Michael Hoffman  wrote:\n> >> I am using R 2.4.0 and lattice to produce some xyplots conditioned on a\n> >> factor and a shingle. The shingle merely chops up the data along the\n> >> x-axis, so it is easy to identify which part of the shingle a panel is\n> >> in by looking at the x-axis markings. I only want to have a strip at the\n> >> top for the factor.\n> >>\n> >> Is this possible? I looked into calculateGridLayout() and it seems to me\n> >> that there isn't an easy way to do it without rewriting that function\n> >> (and others).\n> >\n> > It's nowhere near that complicated, you just need to write your own\n> > strip function. E.g.,\n> >\n> > mtcars$HP <- equal.count(mtcars$hp)\n> >\n> > xyplot(mpg ~ disp | HP + factor(cyl), mtcars,\n> >        par.strip.text = list(lines = 0.5),\n> >        strip = function(which.given, which.panel, ...) {\n> >            if (which.given == 2)\n> >                strip.default(which.given = 1,\n> >                              which.panel = which.panel[which.given],\n> >                              ...)\n> >        })\n>\n> Thank you for this response. But it looks like I poorly specified the\n> problem. I only want to have a strip at the very top of the plot, not at\n> the top of each panel.\n>\n> You can probably understand why I want this better if we take your\n> example and swap the givens around:\n>\n> xyplot(mpg ~ disp | factor(cyl) * HP, mtcars,\n>         par.strip.text = list(lines = 0.5),\n>         strip = function(which.given, which.panel, ...) {\n>             if (which.given == 1)\n>                 strip.default(which.given = 1,\n>                               which.panel = which.panel[which.given],\n>                               ...)\n>         })\n>\n> So now I have 4, 6, and 8 at the top of every row of panels as a label\n> for cyl. But I don't need that--really I only need 4, 6, and 8 at the\n> very top (or bottom) of the plot, just like with default settings I only\n> get the axis labels at the top and bottom of the plot, not duplicated\n> for every panel.\n>\n> What I want is to draw strips at the very top of the plot and not to\n> draw strips that are between panels.\n>\n> Can this be done?\n\nSure.\n\nxyplot(mpg ~ disp | factor(cyl) * HP, mtcars,\n       par.strip.text = list(lines = 0.5),\n       strip = function(which.given, which.panel, ...) {\n           if (which.given == 1)\n               strip.default(which.given = 1,\n                             which.panel = which.panel[which.given],\n                             ...)\n       },\n       par.settings =\n       list(layout.heights =\n            list(strip = rep(c(0, 1), c(5, 1)))))\n\n-Deepayan\n\n______________________________________________\nR-help@stat.math.ethz.ch mailing list\nhttps://stat.ethz.ch/mailman/listinfo/r-help\nPLEASE do read the posting guide http://www.R-project.org/posting-guide.html\nand provide commented, minimal, self-contained, reproducible code.\n\n"}