{"category": "ham", "to_address": "beginners@perl.org", "from_address": "sum_duud <Turnbull.Glenn@gmail.com>", "subject": "Splitting a CSV file at a variable number", "body": "I have a large CSV file of the format x,y,z,number (a coordinate file)\nthat I need to parse and output as individual files based on the\nfourth field (column 3).  The file looks like the sample below, and\nthe fourth field can be from zero to 20,\nso in essence I would like the perl script to output all the fourth\ncolumn \"0\" values to a file called phase_0.csv and all the \"1\" values\nto phase_1.csv etc.\n\n257673.711,6275192.977,150.500,0\n257693.711,6275167.977,147.500,0\n257713.711,6275167.977,147.500,2\n257693.711,6275192.977,147.500,0\n257713.711,6275192.977,147.500,0\n257693.711,6275167.977,150.500,2\n257713.711,6275167.977,150.500,2\n257693.711,6275192.977,150.500,0\n257713.711,6275192.977,150.500,2\n257733.711,6275167.977,147.500,2\n257753.711,6275167.977,147.500,2\n257733.711,6275192.977,147.500,2\n\nThe perl script I have will work on one file, and one defined field,\nbut is there a way or telling perl to increment the search of the\nfourth field value and effectively looping through the data until\nthere are no more fourth field values. ?.\nThe script I have is below:-\n\n\nopen( DEFAULT , \"phase.csv\") or die \"Could not open $input.csv\\n\";\n$blank = ;\n\n############################################################\n# OPEN OUTPUT FILE AND WRITE HEADER LINE\n############################################################\n\nopen( OUT , \">phase_1.csv\") or die \"could not open $output\\n\";\nprint OUT \"X, Y, Z, Phase\\n\";\n\n# Read the data from csv file\n# -----------------------------------------\n\nwhile (my $line = )\n     {\n\tchomp $line;\n\tmy @col =split (/\\s*,\\s*/ , $line);\n\t$phase  = $col[3];\n\tif ($phase == 1)\n\t  {\n\t   print OUT \"$col[0], $col[1], $col[2], $col[3] \\n\";\n\t  }\n      }\nclose DEFAULT;\nclose OUT;\nexit 0;\n# pause so that window does not close\nprint \"\\nPress  \\n\";\n;\n\n\nAny help would be greatly appreciated.\n\n\n-- \nTo unsubscribe, e-mail: beginners-unsubscribe@perl.org\nFor additional commands, e-mail: beginners-help@perl.org\nhttp://learn.perl.org/\n\n\n"}