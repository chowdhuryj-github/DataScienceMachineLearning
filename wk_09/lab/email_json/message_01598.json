{"category": "ham", "to_address": "Craig Schneider <craigsc@zdata.co.za>", "from_address": "yaron@kahanovitch.com", "subject": "Re: Sorting dir output", "body": "\nHi,\n\nIf you wish to select all files that are directly under given directory you can implement the following (in pure perl fashion):\n\n\nsub numerically { $b <=> $a;}\n\n$DIR = ;\n\n$THRESHOLD_IN_DAYS = 3;\n\nmy %time_to_file;\nmy $currTime = time();\n#Store all file in hash with time as key.\nfor each my $file ( grep (-f,<*>)) { \n    my $time = stat($file)->mtime;\n    $time_to_file{$currTime - $time} = [] unless ( exists $time_to_file{$currTime - $time});\n    push @{$time_to_file{$currTime - $time}},$file;\n}\n\n#Sort by time from the new to the old\nmy @sorted = sort numerically keys(%time_to_job);\n\nmy $time_threshold_in_seconds = $THRESHOLD_IN_DAYS * 24 *3600\n\nforeach my $atime (@sorted) {\n    if ($atime >= $time_threshold_in_seconds) {\n        foreach my $afile ($time_to_file{$atime}) {\n            print \"$afile is older than $THRESHOLD_IN_DAYS lets delete it\\n\";\n            unlink($afile) or warn \"Cannot delete $afile. $!\";\n        }\n     }\n}\n\nHope that helps\n\nYaron Kahanovitch\n\n\n\n----- Original Message -----\nFrom: \"Craig Schneider\" \nTo: beginners@perl.org\nSent: Tuesday, April 10, 2007 2:19:40 PM (GMT+0200) Auto-Detected\nSubject: Sorting dir output\n\nHi Guys\n\nHow could I exec a 'dir' command on a dos system and put the output in\nan array, sort by date and the files that are older than 3 days be moved\ninto a folder called 'history'\n\nThanks\n\nCraig\n\n--\nTo unsubscribe, e-mail: beginners-unsubscribe@perl.org\nFor additional commands, e-mail: beginners-help@perl.org\nhttp://learn.perl.org/\n\n\n\n\n-- \nTo unsubscribe, e-mail: beginners-unsubscribe@perl.org\nFor additional commands, e-mail: beginners-help@perl.org\nhttp://learn.perl.org/\n\n\n"}