{"category": "ham", "to_address": "samba-cvs@samba.org", "from_address": "tridge@samba.org", "subject": "Rev 236: fixed a memory leak in the ctdb_control code in\n\thttp://samba.org/~tridge/ctdb", "body": "------------------------------------------------------------\nrevno: 236\nrevision-id: tridge@samba.org-20070502195146-3e77ekh35mpfa42k\nparent: tridge@samba.org-20070502192114-f33n5eur6vzyi8xt\ncommitter: Andrew Tridgell \nbranch nick: tridge\ntimestamp: Thu 2007-05-03 05:51:46 +1000\nmessage:\n  fixed a memory leak in the ctdb_control code\nmodified:\n  common/ctdb_daemon.c           ctdb_daemon.c-20070409200331-3el1kqgdb9m4ib0g-1\n=== modified file 'common/ctdb_daemon.c'\n--- a/common/ctdb_daemon.c\t2007-05-02 01:02:04 +0000\n+++ b/common/ctdb_daemon.c\t2007-05-02 19:51:46 +0000\n@@ -810,7 +810,7 @@\n \n \t/* construct a message to send to the client containing the data */\n \tlen = offsetof(struct ctdb_reply_control, data) + data.dsize;\n-\tr = ctdbd_allocate_pkt(ctdb, client, CTDB_REPLY_CONTROL, len, \n+\tr = ctdbd_allocate_pkt(ctdb, state, CTDB_REPLY_CONTROL, len, \n \t\t\t       struct ctdb_reply_control);\n \tCTDB_NO_MEMORY_VOID(ctdb, r);\n \n\n"}