{"category": "ham", "to_address": "samba-cvs@samba.org", "from_address": "metze@samba.org", "subject": "svn commit: samba r22196 - in\n\tbranches/SAMBA_4_0/source/dsdb/common: .", "body": "Author: metze\nDate: 2007-04-12 12:38:32 +0000 (Thu, 12 Apr 2007)\nNew Revision: 22196\n\nWebSVN: http://websvn.samba.org/cgi-bin/viewcvs.cgi?view=rev&root=samba&rev=22196\n\nLog:\ngive better error codes to make RPC-UNIXINFO pass\n\nmetze\nModified:\n   branches/SAMBA_4_0/source/dsdb/common/sidmap.c\n\n\nChangeset:\nModified: branches/SAMBA_4_0/source/dsdb/common/sidmap.c\n===================================================================\n--- branches/SAMBA_4_0/source/dsdb/common/sidmap.c\t2007-04-12 11:59:38 UTC (rev 22195)\n+++ branches/SAMBA_4_0/source/dsdb/common/sidmap.c\t2007-04-12 12:38:32 UTC (rev 22196)\n@@ -211,7 +211,7 @@\n \t\t dom_sid_string(tmp_ctx, sid)));\n \n \ttalloc_free(tmp_ctx);\n-\treturn NT_STATUS_INVALID_SID;\n+\treturn NT_STATUS_NONE_MAPPED;\n }\n \n \n@@ -344,7 +344,7 @@\n \t\t dom_sid_string(tmp_ctx, sid)));\n \n \ttalloc_free(tmp_ctx);\n-\treturn NT_STATUS_INVALID_SID;\n+\treturn NT_STATUS_NONE_MAPPED;\n }\n \n \n@@ -426,7 +426,7 @@\n \t*/\n allocate_sid:\n \tif (uid > SIDMAP_MAX_LOCAL_UID) {\n-\t\treturn NT_STATUS_INVALID_SID;\n+\t\treturn NT_STATUS_NONE_MAPPED;\n \t}\n \n \tstatus = sidmap_primary_domain_sid(sidmap, tmp_ctx, &domain_sid);\n@@ -524,7 +524,7 @@\n \t*/\n allocate_sid:\n \tif (gid > SIDMAP_MAX_LOCAL_GID) {\n-\t\treturn NT_STATUS_INVALID_SID;\n+\t\treturn NT_STATUS_NONE_MAPPED;\n \t}\n \n \tstatus = sidmap_primary_domain_sid(sidmap, tmp_ctx, &domain_sid);\n@@ -565,14 +565,14 @@\n \n \tif (!dom_sid_in_domain(domain_sid, sid)) {\n \t\ttalloc_free(tmp_ctx);\n-\t\treturn NT_STATUS_INVALID_SID;\n+\t\treturn NT_STATUS_NONE_MAPPED;\n \t}\n \n \ttalloc_free(tmp_ctx);\n \n \trid = sid->sub_auths[sid->num_auths-1];\n \tif (rid < SIDMAP_LOCAL_USER_BASE) {\n-\t\treturn NT_STATUS_INVALID_SID;\n+\t\treturn NT_STATUS_NONE_MAPPED;\n \t}\n \n \tif (rid < SIDMAP_LOCAL_GROUP_BASE) {\n\n"}