{"category": "ham", "to_address": "hongyuan cao <gracefly1210@yahoo.com>", "from_address": "Frank E Harrell Jr <f.harrell@vanderbilt.edu>", "subject": "Re: [R] Error in if (!length(fname) || !any(fname == zname)) { :", "body": "hongyuan cao wrote:\n> Dear R users,\n> \n> I tried to fit a cox proportional hazard model to get estimation of stratified survival probability. my R code is as follows:\n> \n> cph(Surv(time.sur, status.sur)~ strat(colon[,13])+colon[,18] +colon[,20]+colon[,9], surv=TRUE)\n> Error in if (!length(fname) || !any(fname == zname)) { : \n>         missing value where TRUE/FALSE needed\n> Here colon[,13] is the one that I want to stratify and the others are all coefficients. How can I solve this problem?  Thanks a lot!!!!!\n> \n> Grace\n\nThe Design package does not like you to have complex variable names like \nthat, and in general storing your data in a matrix when you want to \ntreat columns as separate variables is not the best approach.  I would \nuse something like\n\nS <- with(d, Surv(  ) )   # d = data frame\nh <- as.data.frame(colon)  # assumes colon is a matrix;make sure it had \ncolumn names\ncph(S ~ strat(v1)+v2+v3+v4, data=h)\n\n-- \nFrank E Harrell Jr   Professor and Chair           School of Medicine\n                      Department of Biostatistics   Vanderbilt University\n\n______________________________________________\nR-help@stat.math.ethz.ch mailing list\nhttps://stat.ethz.ch/mailman/listinfo/r-help\nPLEASE do read the posting guide http://www.R-project.org/posting-guide.html\nand provide commented, minimal, self-contained, reproducible code.\n\n"}