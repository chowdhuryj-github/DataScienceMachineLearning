{"category": "ham", "to_address": "r-help@stat.math.ethz.ch", "from_address": "fc502@york.ac.uk", "subject": "[R] probl with optimization", "body": "hi everyone!\n\ni've got a problem in optimizing the following function\n\nfun <- function(theta){\n theta <- rbind(beta,lambda)\n fun <- sum(exp(h(beta)%*%lambda))\n fun\n}\n\nwhere h(beta) is\n\nh <- function(beta,...){\n g1 <- matrix(0,b,M)\n g2 <- matrix(0,b,M)\n h1 <- matrix(0,b,1)\n h2 <- matrix(0,b,1)\n for(f in 1:M){\n  for(F in 1:b){\n   g1[F,f] <- exp(mu-beta*(z1[F,f]+z2[F,f])+3*z2[F,f])-1\n   g2[F,f] <- z2[F,f]*(exp(mu-beta*(z1[F,f]+z2[F,f])+3*z2[F,f])-1)\n  }\n }\n for(q in 1:b){\n  h1[q] <- (1/M)*sum(g1[q,])\n  h2[q] <- (1/M)*sum(g2[q,])\n }\n h <- matrix(0, b,2)\n h[,1] <- h1\n h[,2] <- h2\n h\n}\n\ni tried to optimize fun with optim and nlminb but i get an error:\nError in beta * (z1[F, f] + z2[F, f]) : \n        non-numeric argument to binary operator\n\nany help will be extremely appreciated\n\nbest\n\nfederico\n\n______________________________________________\nR-help@stat.math.ethz.ch mailing list\nhttps://stat.ethz.ch/mailman/listinfo/r-help\nPLEASE do read the posting guide http://www.R-project.org/posting-guide.html\nand provide commented, minimal, self-contained, reproducible code.\n\n"}