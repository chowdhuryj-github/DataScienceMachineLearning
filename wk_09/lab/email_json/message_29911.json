{"category": "ham", "to_address": "Michael Toews <mwtoews@sfu.ca>", "from_address": "Marc Schwartz <marc_schwartz@comcast.net>", "subject": "Re: [R] legend with mixed boxes and lines (not both)", "body": "On Mon, 2007-05-14 at 18:13 -0700, Michael Toews wrote:\n> Hi,\n> I seem to be unable to get a mixed legend that has lines *or* polygons \n> (not both). For example:\n> \n> ppi <- seq(0,2*pi,length.out=21)[-21]\n> frame()\n> plot.window(ylim=c(-5,5),xlim=c(-5,5),asp=1)\n> polygon(cos(ppi)*4+rnorm(20,sd=.2),sin(ppi)*4+rnorm(20,sd=.2),\n>     col=\"green\",border=FALSE)\n> polygon(cos(ppi)*2+rnorm(20,sd=.1),sin(ppi)*2+rnorm(20,sd=.1),\n>     col=\"blue\",border=FALSE)\n> abline(0,2,col=\"red\")\n> legend(\"topleft\",legend=c(\"out\",\"in\",\"line\"),bty=\"n\",\n>     fill=c(\"green\",\"blue\",NA),col=c(NA,NA,\"red\"),\n>     lwd=c(NA,NA,1))\n> \n> I'm really guessing the behaviour in the legend() call, by setting fill \n> to NA for the item, etc. I also tried fill=c(\"green\",\"blue\",FALSE), but \n> that didn't go over too well either. I also tried adding \"merge=TRUE\", \n> but that just puts the line into the box. I also tried using \n> box.lwd=c(1,1,0), but that also did not work\n> Is there either a way to do this or a clean workaround? Thanks in advance.\n> +mt\n\nIs this what you want?\n\nppi <- seq(0, 2 * pi, length.out = 21)[-21]\n\nplot(c(-5, 5), c(-5, 5), xaxs = \"i\", yaxs = \"i\",\n     type = \"n\", axes = FALSE, ann = FALSE, asp=1)\n\npolygon(cos(ppi) * 4 + rnorm(20, sd = .2), \n        sin(ppi) * 4 + rnorm(20, sd = .2),\n        col = \"green\", border = FALSE)\n\npolygon(cos(ppi) * 2 + rnorm(20, sd = .1),\n        sin(ppi) * 2 + rnorm(20, sd= .1),\n        col = \"blue\", border = FALSE)\n\nabline(0, 2, col = \"red\")\n\nlegend(\"topleft\", legend = c(\"out\", \"in\", \"line\"), \n       bty = \"n\",\n       col = c(\"green\", \"blue\", \"red\"),\n       lty = c(0, 0, 1), lwd = c(0, 0, 1),\n       pch = c(22, 22, NA),\n       pt.bg = c(\"green\", \"blue\", NA),\n       pt.cex = 2)\n\n\nInstead of using 'fill', set the points explicitly and then define the\npoint backgrounds, line types, etc. to get the desired result.\n\nSee ?par for line type information.\n\nBTW, some strategically placed spaces would help with code readability.\n\nHTH,\n\nMarc Schwartz\n\n______________________________________________\nR-help@stat.math.ethz.ch mailing list\nhttps://stat.ethz.ch/mailman/listinfo/r-help\nPLEASE do read the posting guide http://www.R-project.org/posting-guide.html\nand provide commented, minimal, self-contained, reproducible code.\n\n"}