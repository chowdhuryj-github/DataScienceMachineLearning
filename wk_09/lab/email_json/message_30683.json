{"category": "ham", "to_address": "Murray Pung <mcpung@gmail.com>", "from_address": "Marc Schwartz <marc_schwartz@comcast.net>", "subject": "Re: [R] log rank test p value", "body": "On Wed, 2007-05-16 at 11:54 +1000, Murray Pung wrote:\n> How can I get the Log - Rank p value to be output?\n> \n> The chi square value can be output, so I was thinking if I can also have the\n> degrees of freedom output I could generate the p value, but can't see how to\n> find df either.\n> \n> > (survtest <- survdiff(Surv(time, cens) ~ group, data = surv,rho=0))\n> Call:\n> survdiff(formula = Surv(time, cens) ~ group, data = surv, rho = 0)\n> \n>          N Observed Expected (O-E)^2/E (O-E)^2/V\n> group=1 20       16     11.0      2.23      4.64\n> group=2 20       12     17.0      1.45      4.64\n> \n>  Chisq= 4.6  on 1 degrees of freedom, p= 0.0312\n> \n> > survtest$chisq\n> [1] 4.641028\n> \n> > survtest$df\n> NULL\n\nThat part of the output is created in print.survdiff(), which you can\nreview by using:\n\n  survival:::print.survdiff\n\nThe degrees of freedom and the p value are calculated in that function.\n\n\nUsing the example in ?survdiff:\n\nsurvtest <- survdiff(Surv(futime, fustat) ~ rx, data = ovarian)\n\n> survtest\nCall:\nsurvdiff(formula = Surv(futime, fustat) ~ rx, data = ovarian)\n\n      N Observed Expected (O-E)^2/E (O-E)^2/V\nrx=1 13        7     5.23     0.596      1.06\nrx=2 13        5     6.77     0.461      1.06\n\n Chisq= 1.1  on 1 degrees of freedom, p= 0.303 \n\n\n\n> str(survtest)\nList of 6\n $ n    : 'table' int [, 1:2] 13 13\n  ..- attr(*, \"dimnames\")=List of 1\n  .. ..$ groups: chr [1:2] \"rx=1\" \"rx=2\"\n $ obs  : num [1:2] 7 5\n $ exp  : num [1:2] 5.23 6.77\n $ var  : num [1:2, 1:2]  2.94 -2.94 -2.94  2.94\n $ chisq: num 1.06\n $ call : language survdiff(formula = Surv(futime, fustat) ~ rx, data = ovarian)\n - attr(*, \"class\")= chr \"survdiff\"\n\n\n\nWe can then do the following to secure the p value:\n\n> 1 - pchisq(survtest$chisq, 1)\n[1] 0.3025911\n\n\nSee ?str and ?pchisq for more information.\n\nHTH,\n\nMarc Schwartz\n\n______________________________________________\nR-help@stat.math.ethz.ch mailing list\nhttps://stat.ethz.ch/mailman/listinfo/r-help\nPLEASE do read the posting guide http://www.R-project.org/posting-guide.html\nand provide commented, minimal, self-contained, reproducible code.\n\n"}