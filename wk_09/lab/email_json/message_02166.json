{"category": "ham", "to_address": "John Sorkin <jsorkin@grecc.umaryland.edu>", "from_address": "Marc Schwartz <marc_schwartz@comcast.net>", "subject": "Re: [R] problems understanding sapply", "body": "On Tue, 2007-04-10 at 21:19 -0400, John Sorkin wrote:\n> R 2.4.1\n> windows XP\n>  \n> I am trying to fill in a matrix with binomial probabilities without\n> using a for loop. I am trying to obtain a value for pbinom using the\n> value stored in column one of the matrix delete. Clearly I am doing\n> something wrong. Please help me understand my error.\n>  \n> > delete<-matrix(nrow=31,ncol=2)\n> > delete[1:31,1]<-1:31\n> > delete[,2]<-sapply(delete[,2], pbinom,delete[,1],30,0)\n> Error in delete[, 2] <- sapply(delete[, 2], pbinom, delete[, 1], 30,\n> 0) : \n>         number of items to replace is not a multiple of replacement\n> length\n>  \n> Thanks,\n> John\n\nJohn,\n\nYou have a vector (delete[, 1]) being passed to pbinom(). Thus for each\nvalue in delete[, 2], pbinom() is returning a vector containing 31\nelements:\n\n> str(pbinom(delete[, 1], 30, 0))\n num [1:31] 1 1 1 1 1 1 1 1 1 1 ...\n\n\nBy using sapply() in the way you are above, you are essentially getting\na double vectorized process with a result of:\n\n> str(sapply(delete[,2], pbinom, delete[, 1], 30, 0))\n num [1:31, 1:31] NA NA NA NA NA NA NA NA NA NA ...\n\nThat is, a 31 x 31 matrix as a result and you are trying to assign that\nresult to the 31 elements in the second column of delete.\n\n\nAll you really need (since pbinom() is already vectorized) is:\n\n> pbinom(delete[, 1], 30, 0)\n [1] 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1\n\nPresuming that this is end result that you seek.\n\nHTH,\n\nMarc Schwartz\n\n______________________________________________\nR-help@stat.math.ethz.ch mailing list\nhttps://stat.ethz.ch/mailman/listinfo/r-help\nPLEASE do read the posting guide http://www.R-project.org/posting-guide.html\nand provide commented, minimal, self-contained, reproducible code.\n\n"}