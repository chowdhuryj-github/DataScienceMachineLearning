{"category": "ham", "to_address": "<r-help@stat.math.ethz.ch>", "from_address": "\"Williams Scott\" <Scott.Williams@petermac.org>", "subject": "[R] data recoding problem", "body": "Hi R experts,\n\nI have a data recoding problem I cant get my head around - I am not that\ngreat at the subsetting syntax. I have a dataset of longitudinal\ntoxicity data (for multistate modelling) for which I want to also want\nto do a simple Kaplan-Meier curve of the time to first toxic event.\n\nThe data for 2 cases presently looks like this (one with an event, the\nother without), with id representing each person on study, and follow-up\ntime and status:\n\n\n> tox\n\n id      t       event\n\n PMC011  0.000     0\n PMC011  3.154     0\n PMC011  5.914     0\n PMC011 12.353     0\n PMC011 18.103     1\n PMC011 24.312     0\n PMC011 30.029     0\n PMC011 47.967     0\n PMC011 96.953     0\n PMC016  0.000     0\n PMC016  3.943     0\n PMC016  5.782     0\n PMC016 11.762     0\n PMC016 17.741     0\n PMC016 23.951     0\n PMC016 28.353     0\n PMC016 44.747     0\n PMC016 89.692     0 \n\nSo what I need is an output in the same column format, containing each\nof the unique values of id:\n\nPMC011 18.103     1\nPMC016 89.692     0\n\nIn my head, I would do this by looking at each unique value of id (each\nunique case), look down the event data of each of these cases - if there\nis no event (event==0), then I would go to the time column (t) and find\nthe max value and paste this time along with a 0 for event. If there\nwere an event, I would then need to find the minimum time associated\nwith an event to paste across with the event marker. I am sure someone\nout there can point me in the right direction to do this without tedious\nand slow loops. Any help greatly appreciated.\n\nCheers\n\nScott\n_____________________________\n\nDr. Scott Williams\n\nMBBS BScMed FRANZCR\n\nRadiation Oncologist\n\nPeter MacCallum Cancer Centre\n\nMelbourne, Australia\n\nph +61 3 9656 1111\n\nfax +61 3 9656 1424\n\nscott.williams@petermac.org\n\n______________________________________________\nR-help@stat.math.ethz.ch mailing list\nhttps://stat.ethz.ch/mailman/listinfo/r-help\nPLEASE do read the posting guide http://www.R-project.org/posting-guide.html\nand provide commented, minimal, self-contained, reproducible code.\n\n"}