{"category": "ham", "to_address": "r-help@stat.math.ethz.ch", "from_address": "Jim Price <price_ja@hotmail.com>", "subject": "Re: [R] summarizing dataframe at variable/factor levels", "body": "\nmy.data <- data.frame(\n\ttrts <- rep(c('Drug 1','Drug2'), each = 10),\n\tdoses <- rep(c('Low dose','High dose'), 10),\n\tresp <- rnorm(20)\n)\n\n\ntapply(my.data$resp, list(my.data$trts, my.data$doses), mean)\n\n\n\n\nJim\n\n\n\n\n\nAfshartous, David wrote:\n> \n> \n> All,\n> \n> Is there an efficient way to apply say \"mean\" or \"median\" to a dataframe\n> \n> according to say all combinations of two variables in the dataframe?\n> Below is a simple example and the outline of a \"manual\" solution that\n> will work but is not very efficient\n> (could also generalize this to a function).  Searched the archives and\n> docs but didn't see anything close to this question.\n> \n> Cheers,\n> dave\n> \n> dat.ex = data.frame(  rep(c(1:6), each=6), c(rnorm(12), rnorm(12, 1),\n> rnorm(12, 2)), rnorm(36, 5), rep(c(1:6), 6),\n> rep(c(\"Drug1\", \"Drug2\", \"Placebo\"), each=12) )\n> names(dat.ex) = c(\"patient.no\", \"outcome\", \"x\", \"time\", \"drug\")\n> \n> mean of first 2 time pts on Drug1:\n> mean.time.1.drug.1 = mean( dat.ex[dat.ex$time==1 & dat.ex$drug==\"Drug1\",\n> c(2,3)])\n> mean.time.2.drug.1 = mean( dat.ex[dat.ex$time==2 & dat.ex$drug==\"Drug1\",\n> c(2,3)])\n> \n> dat.ex.reduced = as.data.frame(rbind(mean.time.1.drug.1,\n> mean.time.2.drug.1))\n> dat.ex.reduced$Drug = c(\"Drug1\", \"Drug1\")  ## add back Drug variable and\n> time variable\n> dat.ex.reduced$time = c(1,2)\n> \n> ______________________________________________\n> R-help@stat.math.ethz.ch mailing list\n> https://stat.ethz.ch/mailman/listinfo/r-help\n> PLEASE do read the posting guide\n> http://www.R-project.org/posting-guide.html\n> and provide commented, minimal, self-contained, reproducible code.\n> \n> \n\n-- \nView this message in context: http://www.nabble.com/summarizing-dataframe-at-variable-factor-levels-tf4030788.html#a11450001\nSent from the R help mailing list archive at Nabble.com.\n\n______________________________________________\nR-help@stat.math.ethz.ch mailing list\nhttps://stat.ethz.ch/mailman/listinfo/r-help\nPLEASE do read the posting guide http://www.R-project.org/posting-guide.html\nand provide commented, minimal, self-contained, reproducible code.\n\n"}