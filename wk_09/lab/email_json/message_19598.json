{"category": "ham", "to_address": "fc502@york.ac.uk", "from_address": "Prof Brian Ripley <ripley@stats.ox.ac.uk>", "subject": "Re: [R] probl with optimization", "body": "On Sun, 29 Apr 2007, fc502@york.ac.uk wrote:\n\n> hi everyone!\n>\n> i've got a problem in optimizing the following function\n>\n> fun <- function(theta){\n> theta <- rbind(beta,lambda)\n> fun <- sum(exp(h(beta)%*%lambda))\n> fun\n> }\n\nWell, what are beta and lambda?  Trying to optimize a function that does \nnot depend on its argument is going to be difficult.\n\n> where h(beta) is\n>\n> h <- function(beta,...){\n> g1 <- matrix(0,b,M)\n> g2 <- matrix(0,b,M)\n> h1 <- matrix(0,b,1)\n> h2 <- matrix(0,b,1)\n> for(f in 1:M){\n>  for(F in 1:b){\n>   g1[F,f] <- exp(mu-beta*(z1[F,f]+z2[F,f])+3*z2[F,f])-1\n>   g2[F,f] <- z2[F,f]*(exp(mu-beta*(z1[F,f]+z2[F,f])+3*z2[F,f])-1)\n>  }\n> }\n> for(q in 1:b){\n>  h1[q] <- (1/M)*sum(g1[q,])\n>  h2[q] <- (1/M)*sum(g2[q,])\n> }\n> h <- matrix(0, b,2)\n> h[,1] <- h1\n> h[,2] <- h2\n> h\n> }\n>\n> i tried to optimize fun with optim and nlminb but i get an error:\n> Error in beta * (z1[F, f] + z2[F, f]) :\n>        non-numeric argument to binary operator\n\nPossibly that the visible 'beta' is the R function of that name?\n\n> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html\n> and provide commented, minimal, self-contained, reproducible code.\n\nIt would have helped to have a complete example.  But using the debuggig \nfunctions described in `Writing R Extensions' will help you debug this: \nyou could have printed the visible 'beta' for example.\n\n-- \nBrian D. Ripley,                  ripley@stats.ox.ac.uk\nProfessor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/\nUniversity of Oxford,             Tel:  +44 1865 272861 (self)\n1 South Parks Road,                     +44 1865 272866 (PA)\nOxford OX1 3TG, UK                Fax:  +44 1865 272595\n\n______________________________________________\nR-help@stat.math.ethz.ch mailing list\nhttps://stat.ethz.ch/mailman/listinfo/r-help\nPLEASE do read the posting guide http://www.R-project.org/posting-guide.html\nand provide commented, minimal, self-contained, reproducible code.\n\n"}