{"category": "ham", "to_address": "Vittorio <vdemart1@tin.it>", "from_address": "\"Gabor Grothendieck\" <ggrothendieck@gmail.com>", "subject": "Re: [R] Reading a web page in pdf format", "body": "Here is one additional solution.  This one produces a data frame.  The\nregular expression removes:\n\n- everything from beginning to first (\n- everything from last ( to end\n- everything between ) and ( in the middle\n\nThe | characters separate the three parts.  Then read.table reads it in.\n\n\nURL <- \"http://www.snamretegas.it/italiano/business/gas/bilancio/pdf/bilancio.pdf\"\nLines.raw <- readLines(URL)\nLines <- grep(\"Industriale|Termoelettrico\", Lines.raw, value = TRUE)\n\nrx <- \"^[^(]*[(]|[)][^(]*$|[)][^(]*[(]\"\nread.table(textConnection(gsub(rx, \"\", Lines)), dec = \",\")\n\n\nOn 5/9/07, Gabor Grothendieck  wrote:\n> Modify this to suit.  After grepping out the correct lines we use strapply\n> to find and emit character sequences that come after a \"(\" but do not contain\n> a \")\" .  back = -1 says to only emit the backreferences and not the entire\n> matched expression (which would have included the leading \"(\" ):\n>\n> URL <- \"http://www.snamretegas.it/italiano/business/gas/bilancio/pdf/bilancio.pdf\"\n> Lines.raw <- readLines(URL)\n> Lines <- grep(\"Industriale|Termoelettrico\", Lines.raw, value = TRUE)\n> library(gsubfn)\n> strapply(Lines, \"[(]([^)]*)\", back = -1, simplify = rbind)\n>\n> which gives a character matrix whose first column is the label\n> and second column is the number in character form.  You can\n> then manipulate it as desired.\n>\n> On 5/9/07, Vittorio  wrote:\n> > Each day the daily balance in the following link\n> >\n> > http://www.\n> > snamretegas.it/italiano/business/gas/bilancio/pdf/bilancio.pdf\n> >\n> > is\n> > updated.\n> >\n> > I would like to set up an R procedure to be run daily in a\n> > server able to read the figures in a couple of lines only\n> > (\"Industriale\" and \"Termoelettrico\", towards the end of the balance)\n> > and put the data in a table.\n> >\n> > Is that possible? If yes, what R-packages\n> > should I use?\n> >\n> > Ciao\n> > Vittorio\n> >\n> > ______________________________________________\n> > R-help@stat.math.ethz.ch mailing list\n> > https://stat.ethz.ch/mailman/listinfo/r-help\n> > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html\n> > and provide commented, minimal, self-contained, reproducible code.\n> >\n>\n\n______________________________________________\nR-help@stat.math.ethz.ch mailing list\nhttps://stat.ethz.ch/mailman/listinfo/r-help\nPLEASE do read the posting guide http://www.R-project.org/posting-guide.html\nand provide commented, minimal, self-contained, reproducible code.\n\n"}