{"category": "ham", "to_address": "\"Jay Savage\" <daggerquill@gmail.com>", "from_address": "\"Chas Owens\" <chas.owens@gmail.com>", "subject": "Re: Tie::Handle::CSV", "body": "On 6/27/07, Jay Savage  wrote:\nsnip\n> Make sure that the last record in your file is correctly terminated\n> (i.e. there are no unclosed quotes), and that the last record is\n> followed immediately by the final newline, which is alos the last\n> character of the file.\nsnip\n\nTry applying the following patch against\n$YOUR_PERL_DIR/Tie/Handle/CSV.pm.  It extends the error message on a\nbad parse to make it more readable.\n\n--- CSV.pm.bak  2007-06-27 14:39:54.000000000 -0400\n+++ CSV.pm      2007-06-27 14:46:10.000000000 -0400\n@@ -151,7 +151,7 @@\n       if (defined $csv_line)\n          {\n          $opts->{'csv_parser'}->parse($csv_line)\n-            || croak $opts->{'csv_parser'}->error_input();\n+            || croak \"could not parse: [\" .\n$opts->{'csv_parser'}->error_input() . \"]\";\n          if ( $opts->{'header'} )\n             {\n             my $parsed_line = $opts->{'simple_reads'}\n\n-- \nTo unsubscribe, e-mail: beginners-unsubscribe@perl.org\nFor additional commands, e-mail: beginners-help@perl.org\nhttp://learn.perl.org/\n\n\n"}