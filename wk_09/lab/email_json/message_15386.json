{"category": "ham", "to_address": "beginners@perl.org", "from_address": "Rob Dixon <rob.dixon@350.com>", "subject": "Re: How to sum up values", "body": "Stanislav Nedelchev wrote:\n> Rob Dixon wrote:\n>> Andrej Kastrin wrote:\n>>> Dear all,\n>>>\n>>> Question about the sum function; the file structure is as follows:\n>>>\n>>> A|100\n>>> A|200\n>>> A|150\n>>> B|20\n>>> B|90\n>>> C|10\n>>> C|30\n>>> C|300\n>>>\n>>> The result I want to obtain is to sum values in the second column\n>>> (columnB) for each particular letter in the first column (ColumnA);\n>>> e.g.:\n>>>\n>>> A|450\n>>> B|100\n>>> C|330\n>>>\n>>> I don't want to use hash structure because the input file is very\n>>> large. Is there any simple way to do that step-by-step: to sum up\n>>> values in columnB until the letter in columnA changes and print the\n>>> result...\n>>>\n>>> Thanks in advance for any suggestion, Andrej\n>>>\n>>>\n>>> #!/usr/bin/perl\n>>> use strict;\n>>> use warnings;\n>>>\n>>> open FH1, \"< test.txt\" or die \"Can't open file : $!\";\n>>> while () {\n>>>    chomp;\n>>>    ($columnA,$columnB)=split /\\|/;\n>>>    ... ???\n>>> }\n>> my ($label, $total);\n>>\n>> while () {\n>>  chomp;\n>>  my ($columnA,$columnB)=split /\\|/;\n>>  \n>>  if ($label and $columnA ne $label) {\n>>    print \"$label|$total\\n\";\n>>    $total = 0;\n>>  }\n>>\n>>  $label = $columnA;\n>>  $total += $columnB;\n>>\n>>  print \"$label|$total\\n\" if eof;\n>> }\n>>\n>>\n>>\n>> HTH,\n>>\n>> Rob\n>>\n> It's was interesting to see some different solutions of the problem .\n> I was very usefull to me but i think that if data is in random order it\n> will not work in expected way.\n> Maybe I'm wrong.\n> Data :\n> A|100\n> B|20\n> A|200\n> A|150\n> B|20\n> B|90\n> C|10\n> C|30\n> C|300\n> \n> Result:\n> A|100\n> B|20\n> A|350\n> B|110\n> C|340\n> \n> Best Regards.\n\nI wrote this solution specifically because no one else had answered the original\nposter's question:\n\nAndrej Kastrin wrote:\n>>>\n>>> I don't want to use hash structure because the input file is very\n>>> large. Is there any simple way to do that step-by-step: to sum up\n>>> values in columnB until the letter in columnA changes and print the\n>>> result...\n\nThis program does exactly that, although I would have coded a hash solution\nif I had the choice.\n\nRob\n\n-- \nTo unsubscribe, e-mail: beginners-unsubscribe@perl.org\nFor additional commands, e-mail: beginners-help@perl.org\nhttp://learn.perl.org/\n\n\n"}