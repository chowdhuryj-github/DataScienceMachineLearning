{"category": "ham", "to_address": "r-help@stat.math.ethz.ch", "from_address": "gatemaze@gmail.com", "subject": "[R] partial correlation significance", "body": "Hi,\n\namong the many (5) methods that I found in the list to do partial\ncorrelation in the following two that I had a look I am getting different\nt-values. Does anyone have any clues on why is that? The source code is\nbelow. Thanks.\n\npcor3 <- function (x, test = T, p = 0.05) {\n  nvar <- ncol(x)\n  ndata <- nrow(x)\n  conc <- solve(cor(x))\n  resid.sd <- 1/sqrt(diag(conc))\n  pcc <- -sweep(sweep(conc, 1, resid.sd, \"*\"), 2, resid.sd, \"*\")\n  #colnames(pcc) <- rownames(pcc) <- colnames(x)\n  if (test) {\n    t.df <- ndata - nvar\n    t <- pcc/sqrt((1 - pcc^2)/t.df)\n    print(t);\n    pcc <- list(coefs = pcc, sig = t > qt(1 - (p/2), df = t.df))\n  }\n  return(pcc)\n}\n\n\npcor4 <- function(x, y, z) {\n  return(cor.test(lm(x~z)$resid,lm(y~z)$resid));\n}\n\n\t[[alternative HTML version deleted]]\n\n______________________________________________\nR-help@stat.math.ethz.ch mailing list\nhttps://stat.ethz.ch/mailman/listinfo/r-help\nPLEASE do read the posting guide http://www.R-project.org/posting-guide.html\nand provide commented, minimal, self-contained, reproducible code.\n\n"}