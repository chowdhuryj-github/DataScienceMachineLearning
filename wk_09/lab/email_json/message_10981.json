{"category": "ham", "to_address": "\"Patrick R. Michaud via RT\" <parrotbug-followup@parrotcode.org>", "from_address": "Andy Spieherty <spiehera@lafayette.edu>", "subject": "Re: [perl #42620] PGE 'Out of memory' panics.", "body": "On Thu, 19 Apr 2007, Patrick R. Michaud via RT wrote:\n\n> On Thu, Apr 19, 2007 at 11:47:55AM -0700, Andy Spieherty wrote:\n\n> > t/compilers/pge/p5regex/p5rx.............Parrot VM: PANIC: Out of mem!\n\n> I believe that both of these tests are currently being run with \n> the -G flag, which should mean that Parrot is not doing any garbage \n> collection:\n> \n>     $ head -2 t/compilers/pge/p5regex/p5rx.t\n>     #!./parrot -G\n\n> Given the number of tests that run, I'm not too surprised \n> that they run out of memory when -G is present.\n\nOk, that makes sense.\n\n> This does prompt the question of removing -G from the tests, \n> but the last time I looked into doing this (about a month ago) Parrot\n> still had intermittent GC errors that would cause random\n> failures in the tests.  After a lot of discussion on the mailing\n> list and in #parrot I think it was decided that running the \n> tests with -G was preferable to having random test failures\n> showing up in the pge tests due to GC problems in Parrot.\n\nThat's fair enough.  With -G, I get to test 395 in p5regex/p5rx.t.  \nWithout the -G, I memory usage still grows, and I only get to test 185 \nbefore getting the PANIC.  Running with --gc-debug, I only got to test \n190. (The exact test number seems to fluctuate from run to run.  However, \nsince each test run of p5rx.t with garbage collection enabled takes over 7 \nminutes, I haven't done a lot of runs.)\n\n> Hope this helps, and thanks for the report!\n> \n> (Should we close this ticket?)\n\nThat's entirely up to you.\n\n-- \n    Andy Spieherty\t\tspiehera@lafayette.edu\n\n"}