{"category": "ham", "to_address": "Andrew Bartlett <abartlet@samba.org>", "from_address": "\"Stefan (metze) Metzmacher\" <metze@samba.org>", "subject": "posible bug in credentials code", "body": "-----BEGIN PGP SIGNED MESSAGE-----\nHash: SHA1\n\nHi Andrew,\n\nI just noticed the cli_credentials struct used by the winbind service in\nthe member server has some double elements under it. Maybe this is the\nproblem why we always do a new AP-REQ for each connection and the in\nmemory ccache doesn't work correct...\n\nCan you take a look at this please?\n\nstruct cli_credentials  contains  502 bytes in 20 blocks (ref 5)\n   struct gssapi_creds_container  contains 4 bytes in 1 blocks (ref 0)\n   LOCALMEMBER3$@SAMBA.EXAMPLE.COM contains 32 bytes in 1 blocks (ref 0)\n   struct ccache_container  contains 20 bytes in   2 blocks (ref 0)\n      reference to: struct smb_krb5_context\n   struct creds_CredentialState   contains  68 bytes in 1 blocks (ref 1)\n   struct gssapi_creds_container  contains   4 bytes in 1 blocks (ref 0)\n   LOCALMEMBER3$@SAMBA.EXAMPLE.COM contains 32 bytes in 1 blocks (ref 0)\n   struct ccache_container contains 20 bytes in   2 blocks (ref 0)\n      reference to: struct smb_krb5_context\n   struct smb_krb5_context   contains   8 bytes in 1 blocks (ref 2)\n   LOCALMEMBER3$           contains     14 bytes in   1 blocks (ref 0)\n   SAMBA.EXAMPLE.COM       contains     18 bytes in   1 blocks (ref 0)\n   SAMBADOMAIN             contains     12 bytes in   1 blocks (ref 0)\n   cK4nOr,K                contains      9 bytes in   1 blocks (ref 0)\n   (&(flatname=SAMBADOMAIN)(objectclass=primaryDomain)) contains 53 ...\n   SAMBA.EXAMPLE.COM       contains     18 bytes in   1 blocks (ref 0)\n   LOCALMEMBER3            contains     13 bytes in   1 blocks (ref 0)\n   SAMBADOMAIN             contains     12 bytes in   1 blocks (ref 0)\n                           contains      1 bytes in   1 blocks (ref 0)\n\nmetze\n-----BEGIN PGP SIGNATURE-----\nVersion: GnuPG v1.4.5 (GNU/Linux)\nComment: Using GnuPG with SUSE - http://enigmail.mozdev.org\n\niD8DBQFGUXMom70gjA5TCD8RAjcmAJ9qL5Dpj/NpfiF4bjcJGAQ4jl2oKACgnEaM\nfmMus9R+9R7Z+pg7H32sGag=\n=4uiQ\n-----END PGP SIGNATURE-----\n\n"}