{"category": "ham", "to_address": "samba-cvs@samba.org", "from_address": "obnox@samba.org", "subject": "svn commit: samba r23284 - in branches/SAMBA_3_0/source/nsswitch: .", "body": "Author: obnox\nDate: 2007-05-31 23:58:56 +0000 (Thu, 31 May 2007)\nNew Revision: 23284\n\nWebSVN: http://websvn.samba.org/cgi-bin/viewcvs.cgi?view=rev&root=samba&rev=23284\n\nLog:\nOh what a nasty typo! This gave me some headache,\nwith talloc randomly failing.\n\nHey, shouldn't TALLOC_ARRAY _not_ return NULL when\nrequested to allocate an array with zero entries? :-)\n\nMichael\n\n\nModified:\n   branches/SAMBA_3_0/source/nsswitch/winbindd_ads.c\n\n\nChangeset:\nModified: branches/SAMBA_3_0/source/nsswitch/winbindd_ads.c\n===================================================================\n--- branches/SAMBA_3_0/source/nsswitch/winbindd_ads.c\t2007-05-31 23:55:37 UTC (rev 23283)\n+++ branches/SAMBA_3_0/source/nsswitch/winbindd_ads.c\t2007-05-31 23:58:56 UTC (rev 23284)\n@@ -975,7 +975,7 @@\n \t * we try to resolve as many sids as possible from the\n \t * cache. Only the rest is passed to the lsa_lookup_sids call. */\n \t\n-\tif (num_names) {\n+\tif (num_members) {\n \t\t(*sid_mem) = TALLOC_ZERO_ARRAY(mem_ctx, DOM_SID, num_members);\n \t\t(*names) = TALLOC_ZERO_ARRAY(mem_ctx, char *, num_members);\n \t\t(*name_types) = TALLOC_ZERO_ARRAY(mem_ctx, uint32, num_members);\n\n"}