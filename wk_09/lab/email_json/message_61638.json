{"category": "ham", "to_address": "David Reiss <dreiss@systemsbiology.org>", "from_address": "Duncan Murdoch <murdoch@stats.uwo.ca>", "subject": "Re: [R] bug in closing gzfile-opened connections?", "body": "On 03/07/2007 1:37 PM, David Reiss wrote:\n> Hi,\n> I am making multiple calls to gzfile() via read.table(), e.g.\n> \n>> x <- read.table( gzfile( \"xxx.gz\" ) )\n> \n> After i do this many times (I haven't counted, but probably between 50 and\n> 100 times) I get the error message:\n> \n> Error in open.connection(file, \"r\") : unable to open connection\n> In addition: Warning message:\n> cannot open compressed file 'xxx.gz'\n> \n> however, I also find that:\n> \n>> showConnections()\n>      description class mode text isopen can read can write\n> \n> so there are no (apparently) open connections. Calling closeAllConnections()\n> does not fix the problem. I have to quit and re-start R.\n> I am using R 2.5.0 on a Mac (OSX 10.4.9).\n> \n> Anyone know if this is a bug or a 'feature'? I see from the gzfile help\n> that:\n> \n>  In general functions using connections\n>      will open them if they are not open, but then close them again, so\n>      to leave a connection open call 'open' explicitly.\n\nYou didn't give a reproducible example, so I couldn't say.  When I \ncreate a gzipped version of a write.table output and run\n\nfor(i in 1:1000) read.table(gzfile(f))\n\nin R 2.5.0 I don't see a problem.  This is on Windows, but I doubt that \nmakes a difference.\n\nDuncan Murdoch\n\n______________________________________________\nR-help@stat.math.ethz.ch mailing list\nhttps://stat.ethz.ch/mailman/listinfo/r-help\nPLEASE do read the posting guide http://www.R-project.org/posting-guide.html\nand provide commented, minimal, self-contained, reproducible code.\n\n"}