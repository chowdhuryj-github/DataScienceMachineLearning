{"category": "ham", "to_address": "Peter Dalgaard <p.dalgaard@biostat.ku.dk>", "from_address": "Lorenzo Isella <lorenzo.isella@gmail.com>", "subject": "Re: [R] Optimized File Reading with R", "body": "An apology: it takes roughly a couple of minutes on my laptop, running \nDebian. I had been running some other simulations for quite some time \nand, though it looks odd for Linux, the subsequent work I did with R was \nslowed down.\nMany thanks\n\nLorenzo\n\nPeter Dalgaard wrote:\n> Prof Brian Ripley wrote:\n>> On Tue, 15 May 2007, Lorenzo Isella wrote:\n>>\n>>  \n>>> Dear All,\n>>> Hope I am not bumping into a FAQ, but so far my online search has \n>>> been fruitless\n>>> I need to read some data file using R. I am using the (I think)\n>>> standard command:\n>>>\n>>> data_150<-read.table(\"y_complete06000\", header=FALSE)\n>>>\n>>> where y_complete06000 is a 6000 by 40 table of numbers.\n>>> I am puzzled at the fact that R is taking several minutes to read \n>>> this file.\n>>> First I thought it may have been due to its shape, but even\n>>> re-expressing and saving the matrix as a 1D array does not help.\n>>> It is not a small file, but not even huge (it amounts to about 5Mb of\n>>> text file).\n>>> Is there anything I can do to speed up the file reading?\n>>>     \n>>\n>> You could try reading the help page or the 'R Data Import/Export' \n>> manual.\n>> Both point out things like\n>>\n>>       'read.table' is not the right tool for reading large matrices,\n>>       especially those with many columns: it is designed to read _data\n>>       frames_ which may have columns of very different classes. Use\n>>       'scan' instead.\n>>\n>> On the other hand I am surprised at several minutes, but as you \n>> haven't even told us your OS, it is hard to know what to expect.  My \n>> Linux box took 3 secs for a 6000x40 matrix with read.table, 0.8 sec \n>> with scan.\n>>\n>>   \n> If it is 40 rows and 6000 columns, then it might explain it:\n>\n> > x <- as.data.frame(matrix(rnorm(40*6000),6000))\n> > write.table(x,file=\"xx.txt\")\n> > system.time(y <- read.table(\"xx.txt\"))\n> user system elapsed\n> 1.229 0.007 1.250\n> > write.table(t(x),file=\"xx.txt\")\n> > system.time(y <- read.table(\"xx.txt\"))\n> user system elapsed\n> 92.986 0.188 93.912\n>\n>\n> However, this is still not _several_ minutes, and it is on my laptop \n> which is not particularly fast.\n>\n\n______________________________________________\nR-help@stat.math.ethz.ch mailing list\nhttps://stat.ethz.ch/mailman/listinfo/r-help\nPLEASE do read the posting guide http://www.R-project.org/posting-guide.html\nand provide commented, minimal, self-contained, reproducible code.\n\n"}