{"category": "ham", "to_address": "perl6-compiler@perl.org", "from_address": "David Brunton <dbrunton@yahoo.com>", "subject": "Re: Error calling bless in non-default constructor", "body": "Is this what you're looking for?\n\nclass MattTest {\n    has Str $.string;\n    submethod BUILD (:$string) {  ## submethod BUILD is the constructor\n                                                ## :$string is a named argument \"string\"\n        say \"passed $string\";\n    }\n}\n\nmy $test = MattTest(:string('abc'));\n\n# Check to see the class is the right kind of thing:\n\nsay $test.WHAT\n\n# Output the class as a readable string\n\nsay $test.perl;\n\n\n\n\n----- Original Message ----\nFrom: Matthew Keene \nTo: perl6-compiler@perl.org\nSent: Tuesday, May 15, 2007 5:02:56 AM\nSubject: Error calling bless in non-default constructor\n\nI'm trying to use a non-default constructor for a class under Pugs 6.2.13, like so\n\nclass MattTest {\n\n  sub new (Class $class : Str $string) {\n    say \"Passed $string to the constructor for $class\" ;\n    return $class.bless ;\n  }\n  \n}\n\nmy $test = MattTest.new('abc') ;\n\nThis is failing with the following output:\n\nD:\\Apps\\Perl6>pugs ConstructorTest.p6\nPassed abc to the constructor for MattTest\n*** No such method in class MattTest: \"&bless\"\n    at ConstructorTest.p6 line 5, column 12-25\n\nAm I doing something wrong, or is bless currently unimplemented in Pugs, or is something else wrong.  I have more or less copied the code for the constructor from the test in oo/construction.t.\n\n           \n---------------------------------\nHow would you spend $50,000 to create a more sustainable environment in Australia?  Go to Yahoo!7 Answers and share your idea.\n\n\n\n\n       \n____________________________________________________________________________________Get the free Yahoo! toolbar and rest assured with the added security of spyware protection.\nhttp://new.toolbar.yahoo.com/toolbar/features/norton/index.php\n\n"}