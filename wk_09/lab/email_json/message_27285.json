{"category": "ham", "to_address": "Tao Shi <shitao@hotmail.com>", "from_address": "Duncan Murdoch <murdoch@stats.uwo.ca>", "subject": "Re: [R] can't use Sweave in a function?", "body": "On 10/05/2007 9:08 PM, Tao Shi wrote:\n> Hi List,\n> \n> Please see the following simple example which illustrate the problem.  I'm \n> using R-2.5.0 in WinXP and\n> R2HTML 1.58.\n>\n\nThe code in an Sweave document needs to be self-contained.  It won't see \nvariables in some other R session.\n\nIf you want to pass the values of x and y into your document, use save() \nto save them to a file, then load() them in the document.\n\nDuncan Murdoch\n\n> Thanks,\n> \n> ....Tao\n> \n> \n> #=============\"test.rnw\" =================\n> \n> \n> \n> \n> \n> Report\n> \n> \n> <>=\n>   print(y)\n>   print(\"\\n\")\n>   print(paste(\"(\", x, \")\", sep=\"\"))\n> @\n> \n> \n> \n> \n> \n> \n> #============================\n> \n> \n> #=========== R session ==================\n>> ls()\n> character(0)\n>> f1 <- function() {\n> +   y <- 1:5\n> +   x <- \"ABC\"\n> +   Sweave(\"test.rnw\", driver=RweaveHTML)\n> + }\n>> f1()\n> Writing to file test.html\n> Processing code chunks ...\n> 1 : term html\n> \n> Error:  chunk 1\n> Error in print(y) : object \"y\" not found\n>> debug(f1)\n>> f1()\n> debugging in: f1()\n> debug: {\n>     y <- 1:5\n>     x <- \"ABC\"\n>     Sweave(\"test.rnw\", driver = RweaveHTML)\n> }\n> Browse[1]>\n> debug: y <- 1:5\n> Browse[1]>\n> debug: x <- \"ABC\"\n> Browse[1]>\n> debug: Sweave(\"test.rnw\", driver = RweaveHTML)\n> Browse[1]> x\n> [1] \"ABC\"\n> Browse[1]> y\n> [1] 1 2 3 4 5\n> Browse[1]>\n> Writing to file test.html\n> Processing code chunks ...\n> 1 : term html\n> \n> Error:  chunk 1\n> Error in print(y) : object \"y\" not found\n>> undebug(f1)\n>>\n>>   y <- 1:5\n>>   x <- \"ABC\"\n>>\n>>\n>> ls()\n> [1] \"f1\" \"x\"  \"y\"\n>>   Sweave(\"test.rnw\", driver=RweaveHTML)\n> Writing to file test.html\n> Processing code chunks ...\n> 1 : term html\n> file  test.html is completed\n> \n>> R.Version()\n> $platform\n> [1] \"i386-pc-mingw32\"\n> \n> $arch\n> [1] \"i386\"\n> \n> $os\n> [1] \"mingw32\"\n> \n> $system\n> [1] \"i386, mingw32\"\n> \n> $status\n> [1] \"\"\n> \n> $major\n> [1] \"2\"\n> \n> $minor\n> [1] \"5.0\"\n> \n> $year\n> [1] \"2007\"\n> \n> $month\n> [1] \"04\"\n> \n> $day\n> [1] \"23\"\n> \n> $`svn rev`\n> [1] \"41293\"\n> \n> $language\n> [1] \"R\"\n> \n> $version.string\n> [1] \"R version 2.5.0 (2007-04-23)\"\n> \n> \n> ______________________________________________\n> R-help@stat.math.ethz.ch mailing list\n> https://stat.ethz.ch/mailman/listinfo/r-help\n> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html\n> and provide commented, minimal, self-contained, reproducible code.\n\n______________________________________________\nR-help@stat.math.ethz.ch mailing list\nhttps://stat.ethz.ch/mailman/listinfo/r-help\nPLEASE do read the posting guide http://www.R-project.org/posting-guide.html\nand provide commented, minimal, self-contained, reproducible code.\n\n"}