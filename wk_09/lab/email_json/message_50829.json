{"category": "ham", "to_address": "bugs-bitbucket@netlabs.develooper.com", "from_address": "Jerry Gay (via RT) <parrotbug-followup@parrotcode.org>", "subject": "[perl #43253] [BUG] parrot segfaults when building perl6 on windows with msvc ", "body": "# New Ticket Created by  Jerry Gay \n# Please include the string:  [perl #43253]\n# in the subject line of all future correspondence about this issue. \n# \n\n\nfor some time now, parrot has been segfaulting on windows. this is a\nnotoriously tricky bug to find, and jonathan, chromatic, and i have\nspend a good amount of time hunting it down, to no avail. i *think*\nit's a problem with recycling RetContinuation PMCs, but i have more\nwork to do.\n\nin order to get languages/perl6 to build on windows for the 0.4.13\nrelease, i'll patch the perl6 makefile as below:\n\nIndex: config/makefiles/root.in\n===================================================================\n--- config/makefiles/root.in    (revision 19135)\n+++ config/makefiles/root.in    (working copy)\n@@ -52,9 +52,13 @@\n PMCS = perl6str perl6bool\n PMC_SOURCES = $(PMCDIR)/perl6str.pmc\n\n+# [rtXXXXX]: [BUG] parrot segfaults when building perl6 on windows with msvc\n+# added -G flag in order to work around segfault\n+PARROT_ARGS = -G\n+\n # the default target\n perl6.pbc: $(PARROT) $(PGE_LIBRARY)/Perl6Grammar.pir $(SOURCES)\n-       $(PARROT) $(PGE_LIBRARY)/Perl6Grammar.pir \\\n+       $(PARROT) $(PARROT_ARGS) $(PGE_LIBRARY)/Perl6Grammar.pir \\\n            --output=src/parser/grammar_gen.pir \\\n            src/parser/grammar_rules.pg src/parser/grammar_optok.pg\n        $(PARROT) $(TGE_DIR)/tgc.pir --output=src/PAST/Grammar_gen.pir\nsrc/PAST/Grammar.tg\n\n\ni'll update the repo as soon as i have a ticket number, and respond to\nthis ticket with the revision.\n~jerry\n\n"}