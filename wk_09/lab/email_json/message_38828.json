{"category": "ham", "to_address": "Prof Brian Ripley <ripley@stats.ox.ac.uk>", "from_address": "Barry Rowlingson <b.rowlingson@lancaster.ac.uk>", "subject": "Re: [R] search path question", "body": "Prof Brian Ripley wrote:\n\n> \n> You could do this via a search_file() connection wrapper, but there is a \n> problem with ensuring connections get closed (which on.exit does here).\n> \n\n  I'm not sure exactly what you mean by a 'search_file() connection \nwrapper', but I have realised that its probably a better idea to write a \nfunction that checks a search path for a file and then returns that file:\n\nsearch_file =\nfunction(name,path=options()$scanpath,...){\nfor(p in path){\n       file=file.path(p,name)\n       if(file.exists(file)){\n         return(file)\n       }\n     }\nreturn(name)\n}\n\n  Then you can use that in any filename-using function:\n\n  options(scanpath=c(\"/data1\",\"/data2\",\"/etc\"))\n\n  > search_file(\"passwd\")\n  [1] \"/etc/passwd\"\n\n  > passwd = read.table(search_file(\"passwd\"),sep=\":\")\n  > record = scan(search_file(\"passwd\"),what='')[1]\n\nBarry\n\n______________________________________________\nR-help@stat.math.ethz.ch mailing list\nhttps://stat.ethz.ch/mailman/listinfo/r-help\nPLEASE do read the posting guide http://www.R-project.org/posting-guide.html\nand provide commented, minimal, self-contained, reproducible code.\n\n"}