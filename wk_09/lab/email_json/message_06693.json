{"category": "ham", "to_address": "samba-cvs@samba.org", "from_address": "metze@samba.org", "subject": "svn commit: samba r22262 - in branches/SAMBA_3_0/source/smbd: .", "body": "Author: metze\nDate: 2007-04-16 12:00:08 +0000 (Mon, 16 Apr 2007)\nNew Revision: 22262\n\nWebSVN: http://websvn.samba.org/cgi-bin/viewcvs.cgi?view=rev&root=samba&rev=22262\n\nLog:\nfix the build on systems without GSS_C_NT_HOSTBASED_SERVICE\n\nmetze\nModified:\n   branches/SAMBA_3_0/source/smbd/seal.c\n\n\nChangeset:\nModified: branches/SAMBA_3_0/source/smbd/seal.c\n===================================================================\n--- branches/SAMBA_3_0/source/smbd/seal.c\t2007-04-16 10:49:11 UTC (rev 22261)\n+++ branches/SAMBA_3_0/source/smbd/seal.c\t2007-04-16 12:00:08 UTC (rev 22262)\n@@ -103,6 +103,9 @@\n \tchar *host_princ_s = NULL;\n \tNTSTATUS status = NT_STATUS_OK;\n \n+\tgss_OID_desc nt_hostbased_service =\n+\t{10, CONST_DISCARD(char *,\"\\x2a\\x86\\x48\\x86\\xf7\\x12\\x01\\x02\\x01\\x04\")};\n+\n \tasprintf(&host_princ_s, \"%s@%s\", service, name);\n \tif (host_princ_s == NULL) {\n \t\treturn NT_STATUS_NO_MEMORY;\n@@ -113,7 +116,7 @@\n \n \tret = gss_import_name(&min,\n \t\t\t\t&input_name,\n-\t\t\t\tGSS_C_NT_HOSTBASED_SERVICE,\n+\t\t\t\t&nt_hostbased_service,\n \t\t\t\t&srv_name);\n \n \tif (ret != GSS_S_COMPLETE) {\n\n"}