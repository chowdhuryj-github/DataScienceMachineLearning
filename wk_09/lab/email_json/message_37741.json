{"category": "ham", "to_address": "Uwe Ligges <ligges@statistik.uni-dortmund.de>", "from_address": "Prof Brian Ripley <ripley@stats.ox.ac.uk>", "subject": "Re: [R] S4 object slot of type 'call'", "body": "On Mon, 28 May 2007, Uwe Ligges wrote:\n\n>\n>\n> Roberto Brunelli wrote:\n>> I'm using an S4 object with a slot of type 'call': I would like to be able to initialize\n>> it with something like NULL or NA (indicating that there is no information in the slot)\n>> but the value should comply with the fact that it must be of type call.\n>>\n>> Is there any simple way to obtain this?\n>\n>\n> This looks fine:\n>\n>\n> > setClass(\"testCall\", representation = representation(call = \"call\"))\n> [1] \"testCall\"\n> > test <- new(\"testCall\")\n> >\n> > test\n> An object of class \"testCall\"\n> Slot \"call\":\n> ``()\n>\n>\n>\n> Although, I found a bug while playing around:\n>\n> cl <- call(\"round\", 10.5)\n> cl[] <- NULL\n> cl\n> ## CRASH using R-2.5.0 on Windows XP\n\nYes, well, what did you think that would do?\n\nA call is a pairlist (a LANGSXP).  [] on a pairlist converts it to a \nvector list, subsets, and for a LANGSXP converts back.  So you have\na 0-length call, and lots of code assumes that a LANGSXP has length at \nleast one, including deparse (used in printing).\n\ncl <- call(\"round\")\ncl[1] <- list(NULL)\n\nmight be what you were trying to get.\n\n-- \nBrian D. Ripley,                  ripley@stats.ox.ac.uk\nProfessor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/\nUniversity of Oxford,             Tel:  +44 1865 272861 (self)\n1 South Parks Road,                     +44 1865 272866 (PA)\nOxford OX1 3TG, UK                Fax:  +44 1865 272595\n\n______________________________________________\nR-help@stat.math.ethz.ch mailing list\nhttps://stat.ethz.ch/mailman/listinfo/r-help\nPLEASE do read the posting guide http://www.R-project.org/posting-guide.html\nand provide commented, minimal, self-contained, reproducible code.\n\n"}