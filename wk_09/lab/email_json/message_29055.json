{"category": "ham", "to_address": "samba-cvs@samba.org", "from_address": "tridge@samba.org", "subject": "svn commit: samba r22833 - in\n\tbranches/SAMBA_4_0/source/torture/local: .", "body": "Author: tridge\nDate: 2007-05-14 01:01:05 +0000 (Mon, 14 May 2007)\nNew Revision: 22833\n\nWebSVN: http://websvn.samba.org/cgi-bin/viewcvs.cgi?view=rev&root=samba&rev=22833\n\nLog:\n\nuse EVENT_FD_AUTOCLOSE in our event test suite\n\nModified:\n   branches/SAMBA_4_0/source/torture/local/event.c\n\n\nChangeset:\nModified: branches/SAMBA_4_0/source/torture/local/event.c\n===================================================================\n--- branches/SAMBA_4_0/source/torture/local/event.c\t2007-05-14 01:00:06 UTC (rev 22832)\n+++ branches/SAMBA_4_0/source/torture/local/event.c\t2007-05-14 01:01:05 UTC (rev 22833)\n@@ -82,7 +82,7 @@\n \t/* create a pipe */\n \tpipe(fd);\n \n-\tfde = event_add_fd(ev_ctx, ev_ctx, fd[0], EVENT_FD_READ, \n+\tfde = event_add_fd(ev_ctx, ev_ctx, fd[0], EVENT_FD_READ|EVENT_FD_AUTOCLOSE, \n \t\t\t   fde_handler, fd);\n \n \tevent_add_timed(ev_ctx, ev_ctx, timeval_current_ofs(2,0), \n@@ -105,7 +105,6 @@\n \t}\n \n \ttalloc_free(fde);\n-\tclose(fd[0]);\n \tclose(fd[1]);\n \n \twhile (alarm_count < fde_count+1) {\n\n"}