{"category": "ham", "to_address": "samba-cvs@samba.org", "from_address": "jra@samba.org", "subject": "svn commit: samba r22573 - in branches: SAMBA_3_0/source/rpc_server\n\tSAMBA_3_0_25/source/rpc_server", "body": "Author: jra\nDate: 2007-04-29 19:20:48 +0000 (Sun, 29 Apr 2007)\nNew Revision: 22573\n\nWebSVN: http://websvn.samba.org/cgi-bin/viewcvs.cgi?view=rev&root=samba&rev=22573\n\nLog:\nFix old bug mixing free() and talloc_free()\nwhen the add_sid_to_array_XX code was moved\nfrom malloc to talloc. Found running valgrind\nand rpcclient. Needs merging for 3.0.25 final.\nJeremy.\n\nModified:\n   branches/SAMBA_3_0/source/rpc_server/srv_lsa_nt.c\n   branches/SAMBA_3_0_25/source/rpc_server/srv_lsa_nt.c\n\n\nChangeset:\nModified: branches/SAMBA_3_0/source/rpc_server/srv_lsa_nt.c\n===================================================================\n--- branches/SAMBA_3_0/source/rpc_server/srv_lsa_nt.c\t2007-04-29 15:24:49 UTC (rev 22572)\n+++ branches/SAMBA_3_0/source/rpc_server/srv_lsa_nt.c\t2007-04-29 19:20:48 UTC (rev 22573)\n@@ -1502,7 +1502,7 @@\n \t\t(*sids).ptr_sid[j] = 1;\n \t}\n \n-\tSAFE_FREE(sid_list);\n+\ttalloc_free(sid_list);\n \n \tinit_lsa_r_enum_accounts(r_u, num_entries);\n \n\nModified: branches/SAMBA_3_0_25/source/rpc_server/srv_lsa_nt.c\n===================================================================\n--- branches/SAMBA_3_0_25/source/rpc_server/srv_lsa_nt.c\t2007-04-29 15:24:49 UTC (rev 22572)\n+++ branches/SAMBA_3_0_25/source/rpc_server/srv_lsa_nt.c\t2007-04-29 19:20:48 UTC (rev 22573)\n@@ -1505,7 +1505,7 @@\n \t\t(*sids).ptr_sid[j] = 1;\n \t}\n \n-\tSAFE_FREE(sid_list);\n+\ttalloc_free(sid_list);\n \n \tinit_lsa_r_enum_accounts(r_u, num_entries);\n \n\n"}