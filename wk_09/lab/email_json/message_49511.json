{"category": "ham", "to_address": "beginners@perl.org", "from_address": "shadkeene@hotmail.com", "subject": "Unable to reference variable from one loop to another in same script", "body": "Hi,\nI'm able to parse different data in the same loop...however, now I'd\nlike to extract data from two files, using two while loops after\nopening each .txt file...then do arithmetic with the data I extracted.\nThe problem is that when I reference a variable in the second while\nloop that I initialized in the first while loop, the script doesn't\nrecognize it. To be more clear, there is a number value for\n$SLPdataSFO[6] that I extracted in the first while loop, and I'd like\nto subtract that value from $SLPdataSAC[6], which I extracted in the\nsecond while loop. I tried to make it a global variable at the\nbeginning by using \"our @SLPdataSFO = ();\" to make it a global\nvariable, but no luck there. Any ideas? Thanks for your help....the\nerror I receive is shown after the .txt files, with the script after\nthat.\nI've posted the two .txt files I'm bringing in from the while loops if\nit's any help.\nShad\n\n\n\n                        Station ID: KSFO Lat:   39.48 Long:\n-119.77\n1st .txt file) NAM Model Run: 12Z JUN  9,\n2007\n\n Forecast Hours:    0hr    6hr   12hr   18hr   24hr   30hr   36hr\n Sfc Prs(mb):     865.3  864.0  863.9  865.1  864.2  862.8  861.7\n Mean SLP (mb):  1012.0 1008.3 1006.3 1009.8 1010.3 1007.0 1003.9\n 2m agl Tmp (F):   52.0   71.0   75.0   63.9   58.9   73.3   73.2\n 2m agl Dewpt(F):  39.2   37.7   40.5   39.2   34.4   33.0   43.7\n 2m agl RH (%):      61     29     28     39     39     22\n33\n 10m agl Dir:       275    188    260    265    182    231\n252\n 10m agl Spd(kt):     1      4     10      6      3     10\n16\n 6hr Precip (in):  0.00   0.00   0.00   0.00   0.00   0.00\n0.00\n AccumPrecip(in):  0.00   0.00   0.00   0.00   0.00   0.00   0.00\n Sfc CAPE (J/kg):   0.0    0.0    3.1    0.0    0.0    0.0   36.7\n Sfc CINH (J/kg):   0.0    0.0   -7.8    0.0    0.0   -0.5\n-66.6\n Precip H20 (in):  0.47   0.48   0.55   0.58   0.54   0.57   0.71\n\n                        Station ID: KSAC Lat:   39.48 Long:\n-119.77\n2nd .txt file) NAM Model Run: 12Z JUN  9,\n2007\n\n Forecast Hours:    0hr    6hr   12hr   18hr   24hr   30hr\n36hr\n Sfc Prs(mb):     865.3  864.0  863.9  865.1  864.2  862.8  861.7\n Mean SLP (mb):  1014.0 1009.3 1010.3 1011.8 1012.3 1007.0 1003.9\n 2m agl Tmp (F):   52.0   71.0   75.0   63.9   58.9   73.3\n73.2\n 2m agl Dewpt(F):  39.2   37.7   40.5   39.2   34.4   33.0\n43.7\n 2m agl RH (%):      61     29     28     39     39     22\n33\n 10m agl Dir:       275    188    260    265    182    231\n252\n 10m agl Spd(kt):     1      4     10      6      3     10\n16\n 6hr Precip (in):  0.00   0.00   0.00   0.00   0.00   0.00   0.00\n AccumPrecip(in):  0.00   0.00   0.00   0.00   0.00   0.00   0.00\n Sfc CAPE (J/kg):   0.0    0.0    3.1    0.0    0.0    0.0   36.7\n Sfc CINH (J/kg):   0.0    0.0   -7.8    0.0    0.0   -0.5  -66.6\n 0-3km Hel(J/kg):  72.3   17.1    6.3  -56.0   33.1   31.4\n19.2\n Precip H20 (in):  0.47   0.48   0.55   0.58   0.54   0.57   0.7\n\n\n\nerror: Global symbol \"@SLPdataSFO\" requires explicit package name at c:\n\\perl-scripts\\BarkerRegParser.cgi line 54.\nExecution of c:\\perl-scripts\\BarkerRegParser.cgi aborted due to\ncompilation errors.\n\n\n#!/perl/bin/perl -w\nuse CGI qw(:standard);\nuse CGI::Carp qw(warningsToBrowser fatalsToBrowser);\nuse Fcntl qw(:flock :seek);\nuse strict;\n\nprint header;\nprint start_html(\"Gradients\");\n\nopen(FH, \"C:/perl-scripts/Data/BarkerSFOtest.txt\") #open barker SFO\nextrapolated NAM data .txt file\nor &dienice(\"couldn't open output file: $!\");\n\n\nprint \"PW\";\n\n\n\nwhile (my $line = )  {  #reads through each line of model data\n\nif ($line =~ m/^ Mean/)  {  #finds line with sealevel pressure\n    print \"$line\";\nmy $SFOdataSLP = $line;   #places $line into new string called $data\nSLP\nmy @SLPdataSFO = split(/\\s+/, $SFOdataSLP);  #splits $data SLP string\ninto individual elements between whitespace\nprint \"$SLPdataSFO[6]\";\nprint \"$SLPdataSFO[4]\";\nmy $SLPchgSFO = $SLPdataSFO[6] -= $SLPdataSFO[4];  #subtracts 12hr SLP\nfrom 0hr SLP\nprint \"$SLPchgSFO\";\nmy $roundf = sprintf(\"%1.1f\", $SLPchgSFO);\nprint \"$roundf\";\n}\n\nelsif ($line =~ m/^ Precip/) {  #if line isn't Precip Water line, then\nwill skip to next line\n    print \"$line\";\nmy $dataPW = $line;\nmy @PWdata = split(/\\s+/, $dataPW);\nprint \"$PWdata[6]\";\n}\n\n\n\n\n}\nclose (FH);\n\nopen(FH, \"C:/perl-scripts/Data/BarkerSACtest.txt\") #open barker SFO\nextrapolated NAM data .txt file\nor &dienice(\"couldn't open output file: $!\");\n\nwhile (my $line = )  {  #reads through each line of model data\n\nif ($line =~ m/^ Mean/)  {  #finds line with mean sealevel pressure\n    print \"$line\";\nmy $SACdataSLP = $line;   #places $line into new string called\n$SACdataSLP\nmy @SLPdataSAC = split(/\\s+/, $SACdataSLP);  #splits $SACdataSLP\nstring into individual elements between whitespace\nmy $SACSFOgrad12 = $SLPdataSFO[6] -= $SLPdataSAC[6]; #subtracts SFO\nfrom SAC 12-hr fcst sealevel pressure\nprint \"$SACSFOgrad12\";\n}\n}\n\nclose (FH);\n\n\n\n\n\n\nprint end_html;\n\nsub dienice  {\n my($errmsg) = @_;\n print \"Error\\n\";\n print \"$errmsg\\n\";\n print end_html;\n exit;\n}\n\n\n-- \nTo unsubscribe, e-mail: beginners-unsubscribe@perl.org\nFor additional commands, e-mail: beginners-help@perl.org\nhttp://learn.perl.org/\n\n\n"}