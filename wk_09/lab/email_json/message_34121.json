{"category": "ham", "to_address": "samba-cvs@samba.org", "from_address": "mimir@samba.org", "subject": "svn commit: samba r23065 - in\n\tbranches/SAMBA_4_0/source/scripting/ejs: .", "body": "Author: mimir\nDate: 2007-05-22 06:34:14 +0000 (Tue, 22 May 2007)\nNew Revision: 23065\n\nWebSVN: http://websvn.samba.org/cgi-bin/viewcvs.cgi?view=rev&root=samba&rev=23065\n\nLog:\nrevert local includes to prevent security problems (at least\ntemporarily...)\n\n\nrafal\n\n\nModified:\n   branches/SAMBA_4_0/source/scripting/ejs/smbcalls.c\n\n\nChangeset:\nModified: branches/SAMBA_4_0/source/scripting/ejs/smbcalls.c\n===================================================================\n--- branches/SAMBA_4_0/source/scripting/ejs/smbcalls.c\t2007-05-22 05:22:18 UTC (rev 23064)\n+++ branches/SAMBA_4_0/source/scripting/ejs/smbcalls.c\t2007-05-22 06:34:14 UTC (rev 23065)\n@@ -124,23 +124,6 @@\n \t\tchar *path, *emsg;\n \t\tint ret;\n \n-\t\t/* First, try to include file from current working directory.\n-\t\t   This allows local includes which is handy sometimes. */\n-\t\tpath = talloc_asprintf(mprMemCtx(), \"%s\", script);\n-\t\tif (path == NULL) {\n-\t\t\treturn -1;\n-\t\t}\n-\t\t\n-\t\tif (file_exist(path)) {\n-\t\t\tret = ejsEvalFile(eid, path, &result, &emsg);\n-\t\t\ttalloc_free(path);\n-\t\t\tif (ret < 0) {\n-\t\t\t\tejsSetErrorMsg(eid, \"%s: %s\", script, emsg);\n-\t\t\t\treturn -1;\n-\t\t\t}\n-\t\t\tcontinue;\n-\t\t}\n-\n \t\t/* use specfied path to search for requested file */\n \t\tfor (j=0;js_include[j];j++) {\n \t\t\tpath = talloc_asprintf(mprMemCtx(), \"%s/%s\", js_include[j], script);\n\n"}