{"category": "ham", "to_address": "samba-cvs@samba.org", "from_address": "tridge@samba.org", "subject": "Rev 128: now that both daemon and client access the database,\n\tit needs to be a real disk file in http://samba.org/~tridge/ctdb", "body": "------------------------------------------------------------\nrevno: 128\nrevision-id: tridge@samba.org-20070417053249-780b8b0319475cef\nparent: tridge@samba.org-20070417050142-bfa384732fe44e41\ncommitter: Andrew Tridgell \nbranch nick: tridge\ntimestamp: Tue 2007-04-17 15:32:49 +1000\nmessage:\n  now that both daemon and client access the database, it needs to be a real disk file\nmodified:\n  common/ctdb_ltdb.c             ctdb_ltdb.c-20061128065342-to93h6eejj5kon81-2\n=== modified file 'common/ctdb_ltdb.c'\n--- a/common/ctdb_ltdb.c\t2007-04-17 01:20:00 +0000\n+++ b/common/ctdb_ltdb.c\t2007-04-17 05:32:49 +0000\n@@ -85,7 +85,7 @@\n \t/* when we have a separate daemon this will need to be a real\n \t   file, not a TDB_INTERNAL, so the parent can access it to\n \t   for ltdb bypass */\n-\tctdb_db->ltdb = tdb_wrap_open(ctdb, name, 0, TDB_INTERNAL, open_flags, mode);\n+\tctdb_db->ltdb = tdb_wrap_open(ctdb, name, 0, TDB_DEFAULT, open_flags, mode);\n \tif (ctdb_db->ltdb == NULL) {\n \t\tctdb_set_error(ctdb, \"Failed to open tdb %s\\n\", name);\n \t\ttalloc_free(ctdb_db);\n\n"}