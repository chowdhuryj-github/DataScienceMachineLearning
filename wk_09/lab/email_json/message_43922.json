{"category": "ham", "to_address": "R-help@stat.math.ethz.ch", "from_address": "\"Melanie Ann Harsch\" <harschm@lincoln.ac.nz>", "subject": "[R] error message: only first element in each line of matrix used", "body": "I have a matrix and am trying to write a code to\n1. identify all neg values along each line\n2. for each neg value I need to identify min(j+3)\n3. end with this code: eq[i,j]<- ifelse(mat.r[i,j] < (0.5*mat.s[i,j]), mat.all[i,j], 0)\n\nThis is the code I have so far.  I have tried several different methods but I \nkeep getting the same error message that the condition has length >1 and \nonly the first element will be used.\nAny suggestions?\n\nint <- 3\n\tfor(i in 1:nrow(mat.all)) {\n        start.year <- min(which(is.na(mat.all[i,])==F & (mat.all[i,]<0)))\n        fin.year <- max(which(is.na(mat.all[i,])==F))  \n\t\tfor(j in start.year:fin.year) {\n\t\t\tif(mat.all[i,(j-int):(j-1)]<0){\n      mat.s[i,j] <- ifelse((mat.all[i,(j-int):(j-1)])==pmin, mat.all[i,j], 0);\n\t\t  mat.r [i,j] <- which.max((mat.all[i,(j+1):(j+int)]) > 0) }\n\t\t  }}\n\n______________________________________________\nR-help@stat.math.ethz.ch mailing list\nhttps://stat.ethz.ch/mailman/listinfo/r-help\nPLEASE do read the posting guide http://www.R-project.org/posting-guide.html\nand provide commented, minimal, self-contained, reproducible code.\n\n"}