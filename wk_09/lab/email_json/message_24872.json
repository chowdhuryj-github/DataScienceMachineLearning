{"category": "ham", "to_address": "samba <samba-technical@lists.samba.org>", "from_address": "Henrik Zagerholm <henke@mac.se>", "subject": "libsmbclient -> smbc_setxattr corrupts context.", "body": "Hello list,\n\nI just found what I believe is a bug in smc_setxattr but wanted to  \nair it hear before submitting to bugzilla.\n\nI've notices that every-time I use smbc_setxattr my context gets  \nmessed up and I must initialize a new one before I call the function  \nagain.\n\nMy pseudo code is as follow.\n\nSMB::init_context();\nsmbc_setxattr(\"smb://SERVER/SHARE/file1\",ACL, ACL.size, 0) -> SUCCESS!\n\nsmbc_setxattr(\"smb://SERVER/SHARE/file2\",ACL, ACL.size, 0) -> FAILS!\n\n\nSMB::init_context();\nsmbc_setxattr(\"smb://SERVER/SHARE/file1\",ACL, ACL.size, 0) -> SUCCESS!\n\nSMB::init_context();\nsmbc_setxattr(\"smb://SERVER/SHARE/file2\",ACL, ACL.size, 0) -> SUCCESS!\n\nCould someone confirm this?\n\nRegards,\nHenrik\n\n"}