{"category": "ham", "to_address": "dieter.menne@menne-biomed.de", "from_address": "\"hadley wickham\" <h.wickham@gmail.com>", "subject": "Re: [R] Stacked barchart color", "body": "On 6/12/07, Dieter Menne  wrote:\n> Dear Latticer,\n>\n> I want to give individual colors to all elements in a simple stacked\n> barchart. I know why the example below does not work (and it is a excellent\n> default), but is there any workaround for this?\n>\n> Dieter\n>\n>\n> # This only colors red and green, but I want blue and gray for Peatland.\n>\n> barchart(yield ~ variety , groups=year, data = barley,  stack = TRUE,\n>   subset=site==\"Grand Rapids\" & variety %in% c(\"Velvet\",\"Peatland\"),\n>     col=c(\"red\",\"green\",\"blue\",\"gray\"))\n\nHi Dieter,\n\nYou can do this with ggplot2 (http://had.co.nz/ggplot2) as follows:\n\nlibrary(ggplot2)\n\nbarley1 <- subset(barley, site==\"Grand Rapids\" & variety %in%\nc(\"Velvet\",\"Peatland\"))\nbarley1[] <- lapply(barley1, \"[\", drop=TRUE)\n\nqplot(variety, yield, data=barley1, geom=\"bar\", stat=\"identity\",\nfill=factor(year))\n\nbarley1$fill <- c(\"red\",\"green\",\"blue\",\"gray\")\nqplot(variety, yield, data=barley1, geom=\"bar\", stat=\"identity\",\nfill=fill) + scale_fill_identity()\n\nSee http://had.co.nz/ggplot2/scale_identity.html and\nhttp://had.co.nz/ggplot2/position_stack.html for more details.\n\nHadley\n\n______________________________________________\nR-help@stat.math.ethz.ch mailing list\nhttps://stat.ethz.ch/mailman/listinfo/r-help\nPLEASE do read the posting guide http://www.R-project.org/posting-guide.html\nand provide commented, minimal, self-contained, reproducible code.\n\n"}