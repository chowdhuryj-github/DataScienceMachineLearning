{"category": "ham", "to_address": "Mandy Barron <BarronM@landcareresearch.co.nz>", "from_address": "Jim Lemon <jim@bitwrit.com.au>", "subject": "Re: [R] indexing a subset dataframe", "body": "Mandy Barron wrote:\n> Hello\n> I am having problems indexing a subset dataframe, which was created\n> as:\n> \n>>waspsNoGV<-subset(wasps,site!=\"GV\")\n> \n> \n> Fitting a linear model revealed some data points which had high\n> leverage, so I attempted to redo the regression without these data\n> points:\n> \n>>wasps.lm<-lm(r~Nt,data=waspsNoGV[-c(61,69,142),])\n> \n> which resulted in a \"subscript out of bounds\" error.\n> \n> I'm pretty sure the problem is that the data points identified in the\n> regression as having high leverage were the row names carried over from\n> the original dataframe which had 150 rows, but when I try to remove data\n> point #142 from the subset dataframe this tries to reference by a\n> numerical index but there are only 130 data points in the subset\n> dataframe hence the \"subscript out of bounds\" message.  So I guess my\n> question is how do I reference the data points to drop from the\n> regression by name?\n> \nHi Mandy,\nYou're correct in that the old indices are no longer valid in the new \ndataframe. If you want to use the original indices (i.e. you can't just \nidentify the new row indices in the new dataframe), you can do this:\n\nwaspsNoGV$oldindices<-which(wasps$site != \"GV\")\nwasps.lm<-lm(r~Nt,\n  data=waspsNoGV[-(wasps$oldindices %in% c(61,69,142))])\n\nJim\n\n______________________________________________\nR-help@stat.math.ethz.ch mailing list\nhttps://stat.ethz.ch/mailman/listinfo/r-help\nPLEASE do read the posting guide http://www.R-project.org/posting-guide.html\nand provide commented, minimal, self-contained, reproducible code.\n\n"}