{"category": "ham", "to_address": "samba-cvs@samba.org", "from_address": "metze@samba.org", "subject": "svn commit: samba r23488 - in branches/SAMBA_4_0/source/kdc: .", "body": "Author: metze\nDate: 2007-06-14 12:19:53 +0000 (Thu, 14 Jun 2007)\nNew Revision: 23488\n\nWebSVN: http://websvn.samba.org/cgi-bin/viewcvs.cgi?view=rev&root=samba&rev=23488\n\nLog:\nhdb_openp has changed from void * to int...\n\nlha: what is the reason for this? it's really bad to use\n     an int for storing a pointer value...\n\nmetze\nModified:\n   branches/SAMBA_4_0/source/kdc/hdb-ldb.c\n\n\nChangeset:\nModified: branches/SAMBA_4_0/source/kdc/hdb-ldb.c\n===================================================================\n--- branches/SAMBA_4_0/source/kdc/hdb-ldb.c\t2007-06-14 12:05:08 UTC (rev 23487)\n+++ branches/SAMBA_4_0/source/kdc/hdb-ldb.c\t2007-06-14 12:19:53 UTC (rev 23488)\n@@ -1015,7 +1015,7 @@\n \n \tif (ret != 0) {\n \t\ttalloc_free(priv);\n-\t\tdb->hdb_openp = NULL;\n+\t\tdb->hdb_openp = 0;\n \t} else {\n \t\ttalloc_free(mem_ctx);\n \t}\n@@ -1094,13 +1094,14 @@\n \tpriv->msgs = talloc_steal(priv, res->msgs);\n \ttalloc_free(res);\n \n-\tdb->hdb_openp = priv;\n+\t/* why has hdb_openp changed from (void *) to (int) ??? */\n+\tdb->hdb_openp = (int)priv;\n \n \tret = LDB_seq(context, db, flags, entry);\n-\t\n+\n \tif (ret != 0) {\n     \t\ttalloc_free(priv);\n-\t\tdb->hdb_openp = NULL;\n+\t\tdb->hdb_openp = 0;\n \t} else {\n \t\ttalloc_free(mem_ctx);\n \t}\n\n"}