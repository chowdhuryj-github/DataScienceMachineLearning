{"category": "ham", "to_address": "Peter Dalgaard <P.Dalgaard@biostat.ku.dk>", "from_address": "Tony Plate <tplate@acm.org>", "subject": "Re: [R] regular expressions with grep() and negative indexing", "body": "I use regexpr() instead of grep() in cases like this, e.g.:\n\nx2[regexpr(\"exclude\",x2)==-1]\n\n(regexpr returns a vector of the same length as character vector given \nit, so there's no problem with it returning a zero length vector)\n\n-- Tony Plate\n\nPeter Dalgaard wrote:\n> Stephen Tucker wrote:\n>> Dear R-helpers,\n>>\n>> Does anyone know how to use regular expressions to return vector elements\n>> that don't contain a word? For instance, if I have a vector\n>>   x <- c(\"seal.0\",\"seal.1-exclude\")\n>> I'd like to get back the elements which do not contain the word \"exclude\",\n>> using something like (I know this doesn't work) but:\n>>   grep(\"[^(exclude)]\",x)\n>>\n>> I can use \n>>   x[-grep(\"exclude\",x)]\n>> for this case but then if I use this expression in a recursive function, it\n>> will not work for instances in which the vector contains no elements with\n>> that word. For instance, if I have\n>>   x2 <- c(\"dolphin.0\",\"dolphin.1\")\n>> then\n>>   x2[-grep(\"exclude\",x2)]\n>> will give me 'character(0)'\n>>\n>> I know I can accomplish this in several steps, for instance:\n>>   myfunc <- function(x) {\n>>     iexclude <- grep(\"exclude\",x)\n>>     if(length(iexclude) > 0) x2 <- x[-iexclude] else x2 <- x\n>>     # do stuff with x2 <...?\n>>   }\n>>\n>> But this is embedded in a much larger function and I am trying to minimize\n>> intermediate variable assignment (perhaps a futile effort). But if anyone\n>> knows of an easy solution, I'd appreciate a tip.\n>>   \n> It has come up a couple of times before, and yes, it is a bit of a pain.\n> \n> Probably the quickest way out is\n> \n> negIndex <- function(i) \n> \n>    if(length(i))\n> \n>        -i \n> \n>    else \n> \n>        TRUE\n>\n\n______________________________________________\nR-help@stat.math.ethz.ch mailing list\nhttps://stat.ethz.ch/mailman/listinfo/r-help\nPLEASE do read the posting guide http://www.R-project.org/posting-guide.html\nand provide commented, minimal, self-contained, reproducible code.\n\n"}