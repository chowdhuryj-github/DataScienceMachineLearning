{"category": "ham", "to_address": "sugar@lists.laptop.org", "from_address": "Bernardo Innocenti <bernie@codewiz.org>", "subject": "[sugar] [PATCH] unfreeze DCON when Sugar UI is (almost) ready to\n\tshow", "body": "This is part of a masterplan to implement #621 .\n---\n shell/hardware/hardwaremanager.py |    6 ++++++\n shell/view/Shell.py               |    3 +++\n 2 files changed, 9 insertions(+), 0 deletions(-)\n\ndiff --git a/shell/hardware/hardwaremanager.py b/shell/hardware/hardwaremanager.py\nindex f23af25..c962b28 100644\n--- a/shell/hardware/hardwaremanager.py\n+++ b/shell/hardware/hardwaremanager.py\n@@ -69,6 +69,12 @@ class HardwareManager(object):\n             logging.error('Cannot mute the audio channel')\n         self._mixer.set_mute(self._master, mute)\n \n+    def set_dcon_freeze(self, frozen):\n+        if not self._service:\n+            return\n+\n+        self._service.set_dcon_freeze(frozen)\n+\n     def set_display_mode(self, mode):\n         if not self._service:\n             return\ndiff --git a/shell/view/Shell.py b/shell/view/Shell.py\nindex 892123c..75bfd93 100644\n--- a/shell/view/Shell.py\n+++ b/shell/view/Shell.py\n@@ -68,6 +68,9 @@ class Shell(gobject.GObject):\n \n         self.start_activity('org.laptop.JournalActivity')\n \n+        # Unfreeze the display when it's stable\n+        get_hardware_manager().set_dcon_freeze(0)\n+\n     def _activity_started_cb(self, home_model, home_activity):\n         activity_host = ActivityHost(home_activity)\n         self._hosts[activity_host.get_xid()] = activity_host\n-- \n1.5.2\n\n_______________________________________________\nSugar mailing list\nSugar@lists.laptop.org\nhttp://lists.laptop.org/listinfo/sugar\n\n"}