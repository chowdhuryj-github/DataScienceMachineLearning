{"category": "ham", "to_address": "\"Michelle Wynn\" <mlwynn@indiana.edu>, r-help@stat.math.ethz.ch", "from_address": "Don MacQueen <macq@llnl.gov>", "subject": "Re: [R] data.frame and subsetting problem", "body": "I too have no idea what the object named \"x2\" is, or where it came \nfrom. Particularly since after your use of subset(), the new \ndataframe, y, *does* include a row where V2 = 'color'.\n\nBut I have a guess at what your problem may be.\n\nIn your original dataframe (\"x\") the first and second columns are \nfactors, because that is the default behavior of read.delim().\n\nFactors have levels. The second column has 5 levels. Try\n   levels(x$V2)\nto see.\n\nWhen you use subset(), you get fewer rows, but the fact that there \nwere five levels is retained.\n\nThen, the plot function sees that that there are five levels, and \nincludes an empty place-holder for the level(s) with no data.\n\nTry something like\n    y <- data.frame(subset(x, V1 == \"shirt\"))\n    y$V2 <- factor(unique(format(y$V2)))\nto force it to get rid of the now-empty factor levels.\n\nThere are other ways to do this, I just don't happen to remember any \nof them at the moment.\n\nIf I'm right this is a question that comes up fairly often. Might \neven be in the FAQs.\n\n-Don\n\n\nAt 12:15 PM -0700 6/16/07, Michelle Wynn wrote:\n>I have read the R online help and wiki and I cannot seem to get something to\n>work the way I need it to.\n>\n>I want to create a new data frame from an subset of an existing data frame\n>which has no reference to the original superset.  If you following this\n>example, what I am trying to do may make more sense.\n>\n>I have a file with values like this:\n>\n>shirt,size,40\n>shirt,color,10\n>shirt,length,10\n>shirt,brand, 1\n>shoes,style,5\n>shoes,brand,4\n>shoes,color,1\n>\n>and I read it into a dataframe like:\n>x <- data.frame(read.delim(\"temp2.txt\", sep=\",\", header=FALSE))\n>\n>I then want to plot just a subset of this data (say shirts only)...\n>y <- data.frame(subset(x, V1 == \"shirt\"))\n>plot(x2[,2:3])\n>\n>when I do, the resulting plot contains an empty value for 'color' even\n>though my subset has no value in column V2 that equals 'color' anymore.\n>\n>Is it possible create a new data.frame that truly deletes the rows from the\n>original data frame that I am excluding with the subset parameter?\n>\n>Thanks,\n>Michelle\n>\n>\t[[alternative HTML version deleted]]\n>\n>______________________________________________\n>R-help@stat.math.ethz.ch mailing list\n>https://stat.ethz.ch/mailman/listinfo/r-help\n>PLEASE do read the posting guide http://www.R-project.org/posting-guide.html\n>and provide commented, minimal, self-contained, reproducible code.\n\n\n-- \n---------------------------------\nDon MacQueen\nLawrence Livermore National Laboratory\nLivermore, CA, USA\n925-423-1062\nmacq@llnl.gov\n\n______________________________________________\nR-help@stat.math.ethz.ch mailing list\nhttps://stat.ethz.ch/mailman/listinfo/r-help\nPLEASE do read the posting guide http://www.R-project.org/posting-guide.html\nand provide commented, minimal, self-contained, reproducible code.\n\n"}