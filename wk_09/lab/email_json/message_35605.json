{"category": "ham", "to_address": "Simon McVittie <simon.mcvittie@collabora.co.uk>", "from_address": "Dan Williams <dcbw@redhat.com>", "subject": "Re: [sugar] [PATCH] services/presence/buddy.py: Don't allow\n\tthe\tOwner to disappear, even if they have no handles left", "body": "On Tue, 2007-05-22 at 16:48 +0100, Simon McVittie wrote:\n> -----BEGIN PGP SIGNED MESSAGE-----\n> Hash: SHA1\n> \n> - ---\n>  services/presence/buddy.py |    3 ++-\n>  1 files changed, 2 insertions(+), 1 deletions(-)\n\nObviously correct\n\n> diff --git a/services/presence/buddy.py b/services/presence/buddy.py\n> index eb072a1..90b000e 100644\n> - --- a/services/presence/buddy.py\n> +++ b/services/presence/buddy.py\n> @@ -266,7 +266,8 @@ class Buddy(ExportedGObject):\n>              del self.handles[tp_client]\n>              self.TelepathyHandleRemoved(conn.service_name, conn.object_path,\n>                                          handle)\n> - -            if not self.handles:\n> +            # the Owner can't disappear - that would be silly\n> +            if not self.handles and not self._owner:\n>                  self.emit('disappeared')\n>          else:\n>              _logger.debug('Telepathy handle %u supposedly removed, but '\n> - -- \n> 1.5.2-rc3.GIT\n> \n> -----BEGIN PGP SIGNATURE-----\n> Version: GnuPG v1.4.6 (GNU/Linux)\n> Comment: OpenPGP key: http://www.pseudorandom.co.uk/2003/contact/ or pgp.net\n> \n> iD8DBQFGUxDLWSc8zVUw7HYRAuM5AJkBGWkTob1/MQ18vNiOJEtIhQObnACdFdYa\n> /3VmpW9LN5TVQ97590YDkLM=\n> =GORN\n> -----END PGP SIGNATURE-----\n> _______________________________________________\n> Sugar mailing list\n> Sugar@laptop.org\n> http://mailman.laptop.org/mailman/listinfo/sugar\n\n_______________________________________________\nSugar mailing list\nSugar@laptop.org\nhttp://mailman.laptop.org/mailman/listinfo/sugar\n\n"}