{"category": "ham", "to_address": "John Kane <jrkrideau@yahoo.ca>", "from_address": "Tim Churches <tchur@optushome.com.au>", "subject": "Re: [R] sas.get problem", "body": "John Kane wrote:\n> I  have 3 SAS files all in the directory F:/sas, two\n> data files\n> and a format file :\n> form.ea1.sas7bdat\n> form.ea2.sas7bdat\n> sas.fmts.sas7bdat\n> \n> F is a USB.\n> \n> I am trying import them to R using \"sas.get\".\n> \n> I have not used SAS since I was downloading data from \n> mainframe\n> and having to write JCL.  I had forgotten how bizarre\n> SAS can be.\n> I currently have not even figured out how to load the\n> files into SAS but\n> they look fine since I can import them with no problem\n> into SPSS.\n> \n> I am using R2.4.1 under Windows XP\n> SAS files were created with SAS 9.x\n> They convert easily into SPSS 14\n> \n> I\n> n the example below I have tried various versions of\n> the file names with\n> with no luck.\n> Can anyone suggest some approach(s) that I might take.\n> \n> Example.\n> \n> library(Hmisc)\n> mydata <- sas.get(library=\"F:/sas\", mem=\"form.ea1\",\n>              format.library=\"sas.fmts.sas7bdat\",\n>            sasprog = '\"C:Program Files/SAS/SAS\n> 9.1/sas.exe\"')\n> \n> Error message  (one of several that I have gotten\n> while trying various things.)\n> The filename, directory name, or volume label syntax\n> is incorrect.\n> Error in sas.get(library = \"F:/sas\", mem = \"form.ea1\",\n> format.library = \"sas.fmts.sas7bdat\",  :\n>         SAS job failed with status 1\n> In addition: Warning messages:\n> 1: sas.fmts.sas7bdat/formats.sc? or formats.sas7bcat \n> not found. Formatting ignored.\n>  in: sas.get(library = \"F:/sas\", mem = \"form.ea1\",\n> format.library = \"sas.fmts.sas7bdat\",\n> 2: 'cmd' execution failed with error code 1 in:\n> shell(cmd, wait = TRUE, intern = output)\n\nThe sas.get function in the Hmisc library is broken under Windows.\n\nChange line 127 from:\n\n    status <- sys(paste(shQuote(sasprog), shQuote(sasin), \"-log\",\n        shQuote(log.file)), output = FALSE)\n\nto:\n\n    status <- system(paste(shQuote(sasprog), shQuote(sasin), \"-log\",\n        shQuote(log.file)))\n\nI found this fix in the R-help archives, sorry, don't have the original\nto hand so I can't give proper attribution, but the fix is not due to\nme. But it does work for me. I believe Frank Harrell has been notified\nof the problem and the fix. Once patched and working correctly, the\nsas.get function in the Hmisc library is fantastic - thanks Frank!\n\nTim C\n\n______________________________________________\nR-help@stat.math.ethz.ch mailing list\nhttps://stat.ethz.ch/mailman/listinfo/r-help\nPLEASE do read the posting guide http://www.R-project.org/posting-guide.html\nand provide commented, minimal, self-contained, reproducible code.\n\n"}