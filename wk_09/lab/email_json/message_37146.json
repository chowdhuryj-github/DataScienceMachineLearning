{"category": "ham", "to_address": "samba-cvs@samba.org", "from_address": "tridge@samba.org", "subject": "Rev 362: fixed error reporting in tickle ack code in\n\thttp://samba.org/~tridge/ctdb", "body": "------------------------------------------------------------\nrevno: 362\nrevision-id: tridge@samba.org-20070527140151-7odeuco0sg40nq9g\nparent: tridge@samba.org-20070527072335-qshsx2ywgppk6hx9\ncommitter: Andrew Tridgell \nbranch nick: tridge\ntimestamp: Mon 2007-05-28 00:01:51 +1000\nmessage:\n  fixed error reporting in tickle ack code\nmodified:\n  takeover/system.c              system.c-20070525071636-a5n1ihghjtppy08r-3\n=== modified file 'takeover/system.c'\n--- a/takeover/system.c\t2007-05-27 07:23:35 +0000\n+++ b/takeover/system.c\t2007-05-27 14:01:51 +0000\n@@ -224,10 +224,12 @@\n \tret = sendto(s, &pkt, sizeof(pkt), 0, dest, sizeof(*dest));\n \tif (ret != sizeof(pkt)) {\n \t\tDEBUG(0,(__location__ \" failed sendto (%s)\\n\", strerror(errno)));\n+\t\tclose(s);\n+\t\treturn -1;\n \t}\n+\n \tclose(s);\n-\n-\treturn ret;\n+\treturn 0;\n }\n \n \n\n"}