{"category": "ham", "to_address": "samba-cvs@samba.org", "from_address": "tridge@samba.org", "subject": "Rev 302: check for error on ctdb_ltdb_store in\n\thttp://samba.org/~tridge/ctdb", "body": "------------------------------------------------------------\nrevno: 302\nrevision-id: tridge@samba.org-20070515001659-uwyvianttzhe05r8\nparent: tridge@samba.org-20070514234433-s9apc5wp2heogcya\ncommitter: Andrew Tridgell \nbranch nick: tridge\ntimestamp: Tue 2007-05-15 10:16:59 +1000\nmessage:\n  check for error on ctdb_ltdb_store\nmodified:\n  common/ctdb_call.c             ctdb_call.c-20061128065342-to93h6eejj5kon81-1\n=== modified file 'common/ctdb_call.c'\n--- a/common/ctdb_call.c\t2007-05-12 09:55:18 +0000\n+++ b/common/ctdb_call.c\t2007-05-15 00:16:59 +0000\n@@ -271,7 +271,9 @@\n \tmemcpy(&r->data[key->dsize], data->dptr, data->dsize);\n \n \theader->dmaster = c->hdr.srcnode;\n-\tctdb_ltdb_store(ctdb_db, *key, header, *data);\n+\tif (ctdb_ltdb_store(ctdb_db, *key, header, *data) != 0) {\n+\t\tctdb_fatal(ctdb, \"Failed to store record in ctdb_call_send_dmaster\");\n+\t}\n \t\n \tctdb_queue_packet(ctdb, &r->hdr);\n \n\n"}