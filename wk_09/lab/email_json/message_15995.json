{"category": "ham", "to_address": "Perl Beginners <beginners@perl.org>", "from_address": "\"John W. Krahn\" <krahnj@telus.net>", "subject": "Re: Code Comments/Tips - Can this code be better?", "body": "yitzle wrote:\n> I got an input source that got records of fixed number of lines, eg\n> Name, Address, Age, Phone, Cell\n\nSo you are saying that 'Name' appears on every fifth line and *always* on\nevery fifth line?\n\n> I'm not interested in Age or Cell.\n> I'm doing something along the lines of the following. Can I do better?\n> \n> my @lines = qw/name address age phone cell end/;\n> my %process = {name=>1, address=>1, phone=>1, end=>1};\n> my $i = 0;\n> my $name;\n> my %hash;\n> while() {\n>     $name = $_ if($lines[$i] eq 'name');\n>     next unless($process{$lines[$i]});\n>     $hash{$name}{$lines[$i]} = $_;\n> } continue {\n>     $i = ($i++) % (#$lines + 1);\n\nYou should *never* use auto-incrment or auto-decrement on a variable that\nappears more than once in an expression, *ever*!\n\n      ( $i += 1 ) %= @lines;\n\n> }\n> \n> One part that really irks me is the hash for listing what lines get\n> processed.\n> I suppose I can process everything and have a qw// list of what parts\n> of the hash I want to use at a later point of the code...\n\n\nmy @lines = qw/ name address age phone cell end /;\nmy $name;\nmy %hash;\n\nwhile (  ) {\n    chomp;\n    my $record = $. % @lines;\n    $name = $_ if $record == 1;\n    push @{ $hash{ $name } }, $_ if $record == 2 || $record == 4;\n    }\n\n\n\nJohn\n-- \nPerl isn't a toolbox, but a small machine shop where you can special-order\ncertain sorts of tools at low cost and in short order.       -- Larry Wall\n\n-- \nTo unsubscribe, e-mail: beginners-unsubscribe@perl.org\nFor additional commands, e-mail: beginners-help@perl.org\nhttp://learn.perl.org/\n\n\n"}