{"category": "ham", "to_address": "samba-cvs@samba.org", "from_address": "tridge@samba.org", "subject": "Rev 217: better name for this hack in http://samba.org/~tridge/ctdb", "body": "------------------------------------------------------------\nrevno: 217\nrevision-id: tridge@samba.org-20070428154637-riqjifjcu6a6e1ws\nparent: tridge@samba.org-20070428154240-5dmi2gyuh4m54wpy\ncommitter: Andrew Tridgell \nbranch nick: tridge\ntimestamp: Sat 2007-04-28 17:46:37 +0200\nmessage:\n  better name for this hack\nmodified:\n  include/ctdb_private.h         ctdb_private.h-20061117234101-o3qt14umlg9en8z0-13\n  tools/ctdb_control.c           ctdb_control.c-20070426122705-9ehj1l5lu2gn9kuj-1\n=== modified file 'include/ctdb_private.h'\n--- a/include/ctdb_private.h\t2007-04-28 15:13:30 +0000\n+++ b/include/ctdb_private.h\t2007-04-28 15:46:37 +0000\n@@ -157,7 +157,7 @@\n \tuint32_t pending_calls;\n \tuint32_t lockwait_calls;\n \tuint32_t pending_lockwait_calls;\n-\tuint32_t __last_uint32; /* hack for control_status_all */\n+\tuint32_t __last_counter; /* hack for control_status_all */\n \tuint32_t max_redirect_count;\n \tdouble max_call_latency;\n \tdouble max_lockwait_latency;\n\n=== modified file 'tools/ctdb_control.c'\n--- a/tools/ctdb_control.c\t2007-04-28 15:42:40 +0000\n+++ b/tools/ctdb_control.c\t2007-04-28 15:46:37 +0000\n@@ -126,7 +126,7 @@\n \t\tuint32_t *v1 = (uint32_t *)&s1\n \t\tuint32_t *v2 = (uint32_t *)&status\n \t\tuint32_t num_ints = \n-\t\t\toffsetof(struct ctdb_status, __last_uint32) / sizeof(uint32_t);\n+\t\t\toffsetof(struct ctdb_status, __last_counter) / sizeof(uint32_t);\n \t\tret = ctdb_status(ctdb, nodes[i], &s1);\n \t\tif (ret != 0) {\n \t\t\tprintf(\"Unable to get status from node %u\\n\", nodes[i]);\n\n"}