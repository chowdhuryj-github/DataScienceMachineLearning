{"category": "ham", "to_address": "r-help@stat.math.ethz.ch", "from_address": "\"Tao Shi\" <shitao@hotmail.com>", "subject": "[R] can't use Sweave in a function?", "body": "Hi List,\n\nPlease see the following simple example which illustrate the problem.  I'm \nusing R-2.5.0 in WinXP and\nR2HTML 1.58.\n\nThanks,\n\n....Tao\n\n\n#=============\"test.rnw\" =================\n\n\n\nReport\n\n<>=\n  print(y)\n  print(\"\\n\")\n  print(paste(\"(\", x, \")\", sep=\"\"))\n@\n\n\n\n\n\n#============================\n\n\n#=========== R session ==================\n>ls()\ncharacter(0)\n>f1 <- function() {\n+   y <- 1:5\n+   x <- \"ABC\"\n+   Sweave(\"test.rnw\", driver=RweaveHTML)\n+ }\n>\n>f1()\nWriting to file test.html\nProcessing code chunks ...\n1 : term html\n\nError:  chunk 1\nError in print(y) : object \"y\" not found\n>debug(f1)\n>f1()\ndebugging in: f1()\ndebug: {\n    y <- 1:5\n    x <- \"ABC\"\n    Sweave(\"test.rnw\", driver = RweaveHTML)\n}\nBrowse[1]>\ndebug: y <- 1:5\nBrowse[1]>\ndebug: x <- \"ABC\"\nBrowse[1]>\ndebug: Sweave(\"test.rnw\", driver = RweaveHTML)\nBrowse[1]> x\n[1] \"ABC\"\nBrowse[1]> y\n[1] 1 2 3 4 5\nBrowse[1]>\nWriting to file test.html\nProcessing code chunks ...\n1 : term html\n\nError:  chunk 1\nError in print(y) : object \"y\" not found\n>\n>undebug(f1)\n>\n>   y <- 1:5\n>   x <- \"ABC\"\n>\n>\n>ls()\n[1] \"f1\" \"x\"  \"y\"\n>   Sweave(\"test.rnw\", driver=RweaveHTML)\nWriting to file test.html\nProcessing code chunks ...\n1 : term html\nfile  test.html is completed\n>\n\n>R.Version()\n$platform\n[1] \"i386-pc-mingw32\"\n\n$arch\n[1] \"i386\"\n\n$os\n[1] \"mingw32\"\n\n$system\n[1] \"i386, mingw32\"\n\n$status\n[1] \"\"\n\n$major\n[1] \"2\"\n\n$minor\n[1] \"5.0\"\n\n$year\n[1] \"2007\"\n\n$month\n[1] \"04\"\n\n$day\n[1] \"23\"\n\n$`svn rev`\n[1] \"41293\"\n\n$language\n[1] \"R\"\n\n$version.string\n[1] \"R version 2.5.0 (2007-04-23)\"\n\n>\n\n______________________________________________\nR-help@stat.math.ethz.ch mailing list\nhttps://stat.ethz.ch/mailman/listinfo/r-help\nPLEASE do read the posting guide http://www.R-project.org/posting-guide.html\nand provide commented, minimal, self-contained, reproducible code.\n\n"}