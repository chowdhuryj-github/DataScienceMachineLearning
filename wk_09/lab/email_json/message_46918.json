{"category": "ham", "to_address": "r-help@stat.math.ethz.ch", "from_address": "\"Earl F. Glynn\" <efg@stowers-institute.org>", "subject": "[R] Can strptime handle milliseconds or AM/PM?", "body": "I'm trying to proess date/time fields from files that were given to me to \nanalyze.\n\nAny clues what I'm doing wrong with strptime?   This seems to fail the same \nway under Linux or Windows.\n\n For ?strptime would it make sense to explain %OS3 somewhere besides the \nExamples?\n\n> # Why does %OS3 work here?\n> format(Sys.time(), \"%H:%M:%S\")\n[1] \"16:45:19\"\n> format(Sys.time(), \"%H:%M:%OS3\")\n[1] \"16:45:19.477\"\n\n> # Why doesn't %OS3 work here?\n> EventLog.Start <- \"17:49:33.779\"\n> strptime(EventLog.Start, \"%H:%M:%S\")\n[1] \"2007-06-12 17:49:33\"\n> strptime(EventLog.Start, \"%H:%M:%OS3\")\n[1] NA\n\n\n> # This works OK without milliseconds or AM/PM\n> x <- c(\"5:49:33 6/9/2007\", \"5:49:36 6/9/2007\", \"5:49:37 6/9/2007\")\n> strptime(x, \"%I:%M:%S\")   # unclear why this inserts today's date?\n[1] \"2007-06-12 05:49:33\" \"2007-06-12 05:49:36\" \"2007-06-12 05:49:37\"\n> strptime(x, \"%I:%M:%S %m/%d/%Y\")\n[1] \"2007-06-09 05:49:33\" \"2007-06-09 05:49:36\" \"2007-06-09 05:49:37\"\n\n\n> # How to handle milliseconds and AM/PM?  Why doesn't this work?\n> y <- c(\"5:49:33.795 PM 6/9/2007\", \"5:49:36.184 PM 6/9/2007\", \"5:49:37.808 \n> PM 6/9/2007\")\n> strptime(y, \"%I:%M:%S\")               # works except for milliseconds but \n> wrong date\n[1] \"2007-06-12 05:49:33\" \"2007-06-12 05:49:36\" \"2007-06-12 05:49:37\"\n> strptime(y, \"%I:%M:%OS3\")             # doesn't work\n[1] NA NA NA\n> strptime(y, \"%I:%M:%S %p %m/%d/%Y\")   # AM/PM doesn't work\n[1] NA NA NA\n> strptime(y, \"%I:%M:%S %p %m/%d/%Y\")   # AM/PM with dates doesn't work\n[1] NA NA NA\n> strptime(\"5:49:33 PM 6/9/2007\", \"%I:%M:%S %p\")  # doesn't get date right\n[1] \"2007-06-12 17:49:33\"\n\n### Windows ###\n\n> Sys.getlocale(category = \"LC_TIME\")\n[1] \"English_United States.1252\"\n> R.version\n               _\nplatform       i386-pc-mingw32\narch           i386\nos             mingw32\nsystem         i386, mingw32\nstatus\nmajor          2\nminor          5.0\nyear           2007\nmonth          04\nday            23\nsvn rev        41293\nlanguage       R\nversion.string R version 2.5.0 (2007-04-23)\n\n\n### Linux ###\n\n> Sys.getlocale(category = \"LC_TIME\")\n[1] \"C\"\n> R.version\n               _\nplatform       x86_64-unknown-linux-gnu\narch           x86_64\nos             linux-gnu\nsystem         x86_64, linux-gnu\nstatus\nmajor          2\nminor          4.1\nyear           2006\nmonth          12\nday            18\nsvn rev        40228\nlanguage       R\nversion.string R version 2.4.1 (2006-12-18)\n\n\nefg\n\nEarl F. Glynn\nStowers Institute for Medical Research\n\n______________________________________________\nR-help@stat.math.ethz.ch mailing list\nhttps://stat.ethz.ch/mailman/listinfo/r-help\nPLEASE do read the posting guide http://www.R-project.org/posting-guide.html\nand provide commented, minimal, self-contained, reproducible code.\n\n"}