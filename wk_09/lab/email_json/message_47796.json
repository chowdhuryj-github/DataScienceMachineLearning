{"category": "ham", "to_address": "samba-cvs@samba.org", "from_address": "obnox@samba.org", "subject": "svn commit: samba r23485 - in branches: SAMBA_3_0/source\n\tSAMBA_3_0/source/auth SAMBA_3_0/source/include\n\tSAMBA_3_0/source/lib SAMBA_3_0/source/utils\n\tSAMBA_3_0_26/source SAMBA_3_0_26/source/auth\n\tSAMBA_3_0_26/source/include SAMBA_3_0_26/source/lib\n\tSAMBA_3_0_26/source/utils", "body": "Author: obnox\nDate: 2007-06-14 11:29:35 +0000 (Thu, 14 Jun 2007)\nNew Revision: 23485\n\nWebSVN: http://websvn.samba.org/cgi-bin/viewcvs.cgi?view=rev&root=samba&rev=23485\n\nLog:\nThis checkin consists mostly of refactorings in preparation of the\nactivation of global registry options in loadparm.c, mainly to\nextract functionality from net_conf.c to be made availabel elsewhere\nand to minimize linker dependencies. \n\nIn detail:\n\n* move functions registry_push/pull_value from lib/util_reg.c to new file \n  lib/util_reg_api.c\n\n* create a fake user token consisting of builtin administrators sid and\n  se_disk_operators privilege by hand instead of using get_root_nt_token()\n  to minimize linker deps for bin/net.\n  \n  + new function registry_create_admin_token() in new lib/util_reg_smbconf.c\n  + move dup_nt_token from auth/token_util.c to new file lib/util_nttoken.c\n  + adapt net_conf.c and Makefile.in accordingly. \n\n* split lib/profiles.c into two parts: new file lib/profiles_basic.c\n  takes all the low level mask manipulation and format conversion functions\n  (se_priv, privset, luid). the privs array is completely hidden from\n  profiles.c by adding some access-functions. some mask-functions are not \n  static anymore.\n  \n  Generally, SID- and LUID-related stuff that has more dependencies \n  is kept in lib/profiles.c\n  \n* Move initialization of regdb from net_conf.c into a function \n  registry_init_regdb() in lib/util_reg_smbconf.c.\n\nMichael\n\n\n\n\nAdded:\n   branches/SAMBA_3_0/source/lib/privileges_basic.c\n   branches/SAMBA_3_0/source/lib/util_nttoken.c\n   branches/SAMBA_3_0/source/lib/util_reg_api.c\n   branches/SAMBA_3_0/source/lib/util_reg_smbconf.c\n   branches/SAMBA_3_0_26/source/lib/privileges_basic.c\n   branches/SAMBA_3_0_26/source/lib/util_nttoken.c\n   branches/SAMBA_3_0_26/source/lib/util_reg_api.c\n   branches/SAMBA_3_0_26/source/lib/util_reg_smbconf.c\nModified:\n   branches/SAMBA_3_0/source/Makefile.in\n   branches/SAMBA_3_0/source/auth/token_util.c\n   branches/SAMBA_3_0/source/include/privileges.h\n   branches/SAMBA_3_0/source/lib/privileges.c\n   branches/SAMBA_3_0/source/lib/util_reg.c\n   branches/SAMBA_3_0/source/utils/net_conf.c\n   branches/SAMBA_3_0_26/source/Makefile.in\n   branches/SAMBA_3_0_26/source/auth/token_util.c\n   branches/SAMBA_3_0_26/source/include/privileges.h\n   branches/SAMBA_3_0_26/source/lib/privileges.c\n   branches/SAMBA_3_0_26/source/lib/util_reg.c\n   branches/SAMBA_3_0_26/source/utils/net_conf.c\n\n\nChangeset:\nSorry, the patch is too large (3597 lines) to include; please use WebSVN to see it!\nWebSVN: http://websvn.samba.org/cgi-bin/viewcvs.cgi?view=rev&root=samba&rev=23485\n\n"}