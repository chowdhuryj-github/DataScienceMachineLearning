{"category": "ham", "to_address": "Herb Lewis <hlewis@panasas.com>", "from_address": "Jeremy Allison <jra@samba.org>", "subject": "Re: winbindd panic", "body": "On Tue, May 08, 2007 at 01:31:23PM -0700, Herb Lewis wrote:\n> I'm getting\n> [2007/05/08 20:20:20, 0, pid=3626] \n> freebsd_46_i386/debug/build/samba/source/nsswitch/winbindd.c:add_fd_event(522)\n> PANIC: assert failed at \n> freebsd_46_i386/debug/build/samba/source/nsswitch/winbindd.c\n> \n> because of the following code\n> \n> #ifdef DEVELOPER\n>                 SMB_ASSERT( match != ev );\n> #else\n>                 if ( match == ev )\n>                         return;\n> #endif\n> \n> What is this code supposed to be doing? The call is comming\n> from the function fork_domain_child\n\nIt's checking that the passed in ev pointer to a 'struct fd_event'\nisn't already in the list. The usage is confusing, but in the\n#DEVELOPER case it's panicing if the struct is already in\nthe list (as it shouldn't be) and in the non-#DEVELOPER case\nit's just ignoring the add request.\n\nCan you run under gdb and catch why it's adding\nthe same pointer twice ?\n\nJeremy.\n\n"}