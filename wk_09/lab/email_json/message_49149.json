{"category": "ham", "to_address": "Nicholas Lewin-Koh <nikko@hailmail.net>", "from_address": "Frank E Harrell Jr <f.harrell@vanderbilt.edu>", "subject": "Re: [R] complex contrasts and logistic regression", "body": "Nicholas Lewin-Koh wrote:\n> Hi,\n> I am doing a retrospective analysis on a cohort from a designed trial,\n> and I am fitting\n> the model\n> \n> fit<-glmD(survived ~ Covariate*Therapy + confounder,myDat,X=TRUE,\n> Y=TRUE, family=binomial()) \n\nFor logistic regression you can also use Design's lrm function which \ngives you more options.\n\n> \n> My covariate has three levels (\"A\",\"B\" and \"C\") and therapy has two\n> (treated and control), confounder is a continuous variable.\n> Also patients were randomized to treatment in the trial, but Covariate\n> is something that is measured\n> posthoc and can vary in the population.\n\nIf by posthoc you mean that the covariate is measured after baseline, it \nis difficult to get an interpretable analysis.\n\n>  \n> I am trying to wrap my head around how to calculate a few quantities\n> from the model\n> and get reasonable confidence intervals for them, namely I would like to\n> test\n> \n> H0: gamma=0, where gamma is the regression coefficient of the odds\n> ratios of surviving\n>              under treatment vs control at each level of Covariate\n>              (adjusted for the confounder)\n\nYou mean regression coefficient on the log odds ratio scale.  This is \neasy to do with the contrast( ) function in Design.  Do ?contrast.Design \nfor details and examples.\n\n> \n> and I would like to get the odds of surviving at each level of Covariate\n> under treatment and control\n> for each level of covariate adjusted for the confounder. I have looked\n> at contrast in the Design \n> library but I don't think it gives me the right quantity, for instance \n> \n> contrast(fit,list(covariate=\"A\", Therapy=\"Treated\",\n> confounder=median(myDat$confounder), X=TRUE)\n> ( \"A\" is the baseline level of Covariate) \n> \n> gives me beta0 + beta_Treated + beta_confounder*68  \n> \n> Is this correctly interpreted as the conditional odds of dying? \n> As to the 1st contrast I am not sure how to get it, would it be using\n> type = 'average' with some weights \n> in contrast? The answers are probably staring me in the face, i am just\n> not seeing them today.\n\ncontrast( ) is for contrasts (differences).  Sounds like you want \npredicted values.  Do ?predict  ?predict.lrm  ?predict.Design.  Also do \n?gendata which will generate a data frame for getting predictors, with \nunspecified predictors set to reference values such as medians.\n\nFrank\n\n> \n> Nicholas\n> \n> \n> \n\n\n-- \nFrank E Harrell Jr   Professor and Chair           School of Medicine\n                      Department of Biostatistics   Vanderbilt University\n\n______________________________________________\nR-help@stat.math.ethz.ch mailing list\nhttps://stat.ethz.ch/mailman/listinfo/r-help\nPLEASE do read the posting guide http://www.R-project.org/posting-guide.html\nand provide commented, minimal, self-contained, reproducible code.\n\n"}