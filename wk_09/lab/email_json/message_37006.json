{"category": "ham", "to_address": "<r-help@stat.math.ethz.ch>", "from_address": "\"Weiers  Tilman\" <tweiers@eeh.ee.ethz.ch>", "subject": "[R] weibplot (Weibull plot) for R", "body": "Hello,\n\nThe following script allows for Weibull plots using R. \n\nIts output is similar to the output of the wblplot function (or weibplot function) in MATLAB.\n\nAs opposed to the previously mentioned function it does not require proprietary software. Instead, it is based on R.\n\nMy code also allows for a graphical visualization of  weibull fitted data. In particular, data can be represented by a straight line in a so-called Weibull plot. According to my observations this is the most common way of analyzing Weibull distributed data (e.g. time to breakdown values, tensile strength values, metal fatigue). \n\nHere comes my code:\n\n# data 4 wbl plot\n\ndata<-c(10,25,35,90,175)\n\nconfidence_level=.95\n\njpeg()\n\nlibrary(survival)\n\n# time to breakdown values\n\nres<-survreg(Surv(data) ~ 1,dist='weibull')\n\n# scale parameter:\n\neta=exp(res$coefficient)\n\n# shape parameter:\n\nbeta=1/res$scale\n\n# plot stuff\n\nn=length(data)\n\nplot(data,log(-log(1-ppoints(n,a=.5))),log=\"x\",axes=FALSE,frame.plot=TRUE,xlab=\"data\",ylab=\"probability\") \n\n# Let the confidence interval code below plot the regression curve\n\n# curve(log(-log(exp(-(x/eta)^beta))),log=\"x\",add=TRUE) \n\n# annotate the graph\n\nticklabels=c(.1,.3,.63,.9) \n\nticksat=log(-log(1-ticksatlog)) \n\naxis(2,at=ticksat,labels=ticklabels) \n\naxis(1) \n\ngrid()\n\n# plot 95% confidence intervals\n\nx<-data\n\nout=lm(log(-log(1-ppoints(n,a=.5)))~log(x))\n\ncurve(predict(out,newdata=data.frame(x=x)),add=TRUE)\n\ncurve(predict(out,newdata=data.frame(x=x),level=confidence_level,interval=\"confidence\")[,\"lwr\"],add=TRUE)\n\ncurve(predict(out,newdata=data.frame(x=x),level=confidence_level,interval=\"confidence\")[,\"upr\"],add=TRUE)\n\n______________________________________________\nR-help@stat.math.ethz.ch mailing list\nhttps://stat.ethz.ch/mailman/listinfo/r-help\nPLEASE do read the posting guide http://www.R-project.org/posting-guide.html\nand provide commented, minimal, self-contained, reproducible code.\n\n"}