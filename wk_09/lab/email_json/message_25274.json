{"category": "ham", "to_address": "\"'samba-technical@lists.samba.org'\" <samba-technical@lists.samba.org>", "from_address": "Shalin Patel <Shalin_Patel@pmc-sierra.com>", "subject": "Samba deadtime issue with windows client", "body": "Hi \n\n \n\nI am using samba 3.0.14, I am having a deadtime parameter of \"10\". Smbclient disconnects if there is no activity as expected but Windows client doesn't disconnect if the connection is idle. \n\n \n\nI debugged and found that in function conn_idle_all it shows \"num_files_open =1\", even though I don't have any files open, and \"lastused\" is always less than \"deadtime\". \n\n \n\nI debugged further and found that when windows client connects it opens file \".\" Hence the \"num_files_open\" is incremented making it one, and it regularly sends SMBtrans messages which updates the \"lastused\" and keep it less than \"deadtime\". \n\n \n\nI am running samba on a resource crunched machine and want to keep the number of connection to minimum and also want that the idle connections to get disconnected.\n\n \n\nCan any one help me to make \"deadtime\" parameter working with windows client? My windows machine is windows server 2003; I have also tried with windows XP with same result. \n\n \n\n \n\nThanks \n\nShalin   \n\n"}