{"category": "ham", "to_address": "samba-cvs@samba.org", "from_address": "metze@samba.org", "subject": "svn commit: samba r22219 - in\n\tbranches/SAMBA_3_0_25/source/lib/replace: .", "body": "Author: metze\nDate: 2007-04-15 19:23:04 +0000 (Sun, 15 Apr 2007)\nNew Revision: 22219\n\nWebSVN: http://websvn.samba.org/cgi-bin/viewcvs.cgi?view=rev&root=samba&rev=22219\n\nLog:\nmerge from samba3/4:\n\nmerge stdint.h stdbool.h replacement fix to 3.0.25 branch\n\nmetze\nModified:\n   branches/SAMBA_3_0_25/source/lib/replace/README\n   branches/SAMBA_3_0_25/source/lib/replace/libreplace.m4\n   branches/SAMBA_3_0_25/source/lib/replace/libreplace_macros.m4\n\n\nChangeset:\nModified: branches/SAMBA_3_0_25/source/lib/replace/README\n===================================================================\n--- branches/SAMBA_3_0_25/source/lib/replace/README\t2007-04-15 19:09:34 UTC (rev 22218)\n+++ branches/SAMBA_3_0_25/source/lib/replace/README\t2007-04-15 19:23:04 UTC (rev 22219)\n@@ -80,6 +80,10 @@\n MAX\n QSORT_CAST\n \n+Headers:\n+stdint.h\n+stdbool.h\n+\n Prerequisites:\n memset (for bzero)\n syslog (for vsyslog)\n\nModified: branches/SAMBA_3_0_25/source/lib/replace/libreplace.m4\n===================================================================\n--- branches/SAMBA_3_0_25/source/lib/replace/libreplace.m4\t2007-04-15 19:09:34 UTC (rev 22218)\n+++ branches/SAMBA_3_0_25/source/lib/replace/libreplace.m4\t2007-04-15 19:23:04 UTC (rev 22219)\n@@ -61,9 +61,12 @@\n \n AC_CHECK_FUNCS(pipe strftime srandom random srand rand usleep setbuffer lstat getpgrp)\n \n-AC_CHECK_HEADERS(stdbool.h sys/select.h)\n+AC_CHECK_HEADERS(stdbool.h stdint.h sys/select.h)\n AC_CHECK_HEADERS(setjmp.h)\n \n+LIBREPLACE_PROVIDE_HEADER([stdint.h])\n+LIBREPLACE_PROVIDE_HEADER([stdbool.h])\n+\n AC_CHECK_TYPE(bool, \n [AC_DEFINE(HAVE_BOOL, 1, [Whether the bool type is available])],,\n [\n\nModified: branches/SAMBA_3_0_25/source/lib/replace/libreplace_macros.m4\n===================================================================\n--- branches/SAMBA_3_0_25/source/lib/replace/libreplace_macros.m4\t2007-04-15 19:09:34 UTC (rev 22218)\n+++ branches/SAMBA_3_0_25/source/lib/replace/libreplace_macros.m4\t2007-04-15 19:23:04 UTC (rev 22219)\n@@ -306,3 +306,12 @@\n )\n AS_IF([test $AS_TR_SH([ac_cv_c_prototype_$1]) = yes],[$3],[$4])\n ])\n+\n+AC_DEFUN(LIBREPLACE_PROVIDE_HEADER, \n+[AC_CHECK_HEADER([$1], \n+\t\t[ AC_CONFIG_COMMANDS(rm-$1, [rm -f $libreplacedir/$1], [libreplacedir=$libreplacedir]) ],\n+\t\t[ AC_CONFIG_COMMANDS(mk-$1, [echo \"#include \\\"replace.h\\\"\" > $libreplacedir/$1], [libreplacedir=$libreplacedir]) ]\n+\t)\n+])\n+\n+\n\n"}