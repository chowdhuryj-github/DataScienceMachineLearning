{"category": "ham", "to_address": "samba-cvs@samba.org", "from_address": "tridge@samba.org", "subject": "Rev 203: some debug code in http://samba.org/~tridge/ctdb", "body": "------------------------------------------------------------\nrevno: 203\nrevision-id: tridge@samba.org-20070427144243-b3qnoqoox7t2yp1x\nparent: tridge@samba.org-20070427132613-jlz3n8rz4icubshz\ncommitter: Andrew Tridgell \nbranch nick: tridge\ntimestamp: Fri 2007-04-27 16:42:43 +0200\nmessage:\n  some debug code\nmodified:\n  common/ctdb_control.c          ctdb_control.c-20070426122724-j6gkpiofhbwdin63-1\n  include/ctdb_private.h         ctdb_private.h-20061117234101-o3qt14umlg9en8z0-13\n=== modified file 'common/ctdb_control.c'\n--- a/common/ctdb_control.c\t2007-04-27 13:14:36 +0000\n+++ b/common/ctdb_control.c\t2007-04-27 14:42:43 +0000\n@@ -51,9 +51,13 @@\n \tswitch (opcode) {\n \tcase CTDB_CONTROL_PROCESS_EXISTS: {\n \t\tpid_t pid;\n+\t\tint32_t ret;\n \t\tCHECK_CONTROL_DATA_SIZE(sizeof(pid));\n \t\tpid = *(pid_t *)indata.dptr;\n-\t\treturn kill(pid, 0);\n+\t\tret = kill(pid, 0);\n+\t\tDEBUG(5,(\"process_exists on %u:%u gave %d\\n\", \n+\t\t\t ctdb->vnn, pid, ret));\n+\t\treturn ret;\n \t}\n \n \tcase CTDB_CONTROL_SET_DEBUG: {\n\n=== modified file 'include/ctdb_private.h'\n--- a/include/ctdb_private.h\t2007-04-27 13:26:13 +0000\n+++ b/include/ctdb_private.h\t2007-04-27 14:42:43 +0000\n@@ -34,6 +34,8 @@\n \n #define CTDB_CURRENT_NODE  0xF0000001\n #define CTDB_BROADCAST_VNN 0xF0000002\n+\n+\n /*\n   an installed ctdb remote call\n */\n\n"}