{"category": "ham", "to_address": "\"Gerald \\(Jerry\\) Carter\" <jerry@samba.org>,\n   David Gutierrez <davegu1@hotmail.com>", "from_address": "Constantine Vetoshev <gepardcv@yahoo.com>", "subject": "Re: Determining a user's remote port in a VFS module", "body": "Gerald (Jerry) Carter  samba.org> writes:\n\n> I think the poster was looking for an API call from\n> Samba VFS layer.  But I unclear as to whether the Q was\n> about the port to which the client connected or the\n> src port used by the client.\n\nI meant the latter. connection_struct in smb.h has a client_address field, but no corresponding client_port. I looked in util_sock.c, and I see that remote port information isn't being retrieved or set. client_socket_port() seems to return the local port on the Samba server (typically 445). I'm not terribly fluent in socket programming issues---is the remote port even readily available with POSIX APIs? What about low-level kernel calls?\n\nThanks,\nCV\n\n\n\n \n____________________________________________________________________________________\nSucker-punch spam with award-winning protection. \nTry the free Yahoo! Mail Beta.\nhttp://advision.webevents.yahoo.com/mailbeta/features_spam.html\n\n"}