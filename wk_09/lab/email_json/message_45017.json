{"category": "ham", "to_address": "\"Perl List\" <beginners@perl.org>", "from_address": "\"Mike Blezien\" <mickalo@frontiernet.net>", "subject": "Using SOAP::Lite ", "body": "Hello,\n\nI appologize for the long posting, but  was hoping to get some feedback as to \nwhat we are doing wrong. We are trying to integrate with a XML Gateway that uses \nSOAP. This our first time at trying to use SOAP w/Perl and not having alot of \nluck. Below is the code snip and Request/Response structures used by the \ngateway. If you have experience with using SOAP and Perl, I'd really appreciate \nyour assistance. If there is a better way to do this, please contact me directly \noff the list and be happy to discuss hiring you to put this together correctly.\n\n#####################################################################################\n# CODE SNIP\nmy $soap = SOAP::Lite\n    -> uri('https://www.edentifyservices.com/')\n    -> proxy('https://www.edentifyservices.com/XMLGateway/Request.asmx')\n    -> on_action( sub { return 'http://tempuri.org/ProcessRequest' });\n\n# Format the SOAP envelope\nmy $method = SOAP::Data->name('ProcessRequest')->attr({xmlns \n=>'http://tempuri.org/'});\n\n# Format the SOAP body\nmy $query = SOAP::Data->name(ProcessRequest => SOAP::Data->value(\n SOAP::Data->name(ServiceName=>'idalert'),\n SOAP::Data->name(XMLRequest=>'XMLRequestLine'), # THIS LINE PRODUCES SOAP ERROR\n SOAP::Data->name(Userid=>'USERID'}),\n SOAP::Data->name(password=>'PWD'),\n SOAP::Data->name(Options=>'OPTIONS'))\n );\n\n# Query the web service\nmy $result = $soap->call($method => $query);\n\nprint $cgi->header();\n\nif($result->fault)\n {\n    print \"Edentify Web Service Failed!\\n\";\n    print join ', \n',$result->faultcode,$result->faultstring,$result->faultdetail;\n }\nelse\n {\n  # Print out the results one by one\n  print \"ResponseType = \" . \n$result->valueof('//ProcessRequestResponse/ProcessRequestResult/EdentifyResponse/responsetype') \n. \"\";\n  print \"Code = \" . \n$result->valueof('//ProcessRequestResponse/ProcessRequestResult/EdentifyResponse/code') \n. \"\";\n  print \"Message = \" . \n$result->valueof('//ProcessRequestResponse/ProcessRequestResult/EdentifyResponse/message') \n. \"\";\n  print \"TransID = \" . \n$result->valueof('//ProcessRequestResponse/ProcessRequestResult/EdentifyResponse/transactionid') \n. \"\";\n  # NO RESULTS RETURNED.\n }\n# END CODE SNIP\n\n#################################################################################\n# XMLRequest format for above XMLRequest:\nXMLRequestLine=USERNAME\nFNAMEMNAMELNAME\nSUFFIX\nIDSSNBDAY\nADDR1ADDR2CITY\nSTATEZIP\n\n################################################################################\n# SOAP REQUEST/RESPONSE STRUCTURES\n################################################################################\n# REQUEST\nPOST /XMLGateway/Request.asmx HTTP/1.1\nHost: www.edentifyservices.com\nContent-Type: text/xml; charset=utf-8\nContent-Length: length\nSOAPAction: \"http://tempuri.org/ProcessRequest\"\n\n\n\n\n\nstring\nstring\nstring\nstring\nstring\n\n\n\n###############################################################################\nRESPONSE\nHTTP/1.1 200 OK\nContent-Type: text/xml; charset=utf-8\nContent-Length: length\n\n\n\n\n\nstring\n\n\n\n#############################################################################\n\n\nMike(mickalo)Blezien\n===============================\nThunder Rain Internet Publishing\n=============================== \n\n-- \nTo unsubscribe, e-mail: beginners-unsubscribe@perl.org\nFor additional commands, e-mail: beginners-help@perl.org\nhttp://learn.perl.org/\n\n\n"}