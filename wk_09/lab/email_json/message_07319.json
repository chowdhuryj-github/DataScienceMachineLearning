{"category": "ham", "to_address": "samba-cvs@samba.org", "from_address": "Jelmer Vernooij <jelmer@samba.org>", "subject": "Rev 11883: Fix some issues in fedora ds code. in\n\tfile:///home/jelmer/bzr.samba/SAMBA_4_0/", "body": "At file:///home/jelmer/bzr.samba/SAMBA_4_0/\n\n------------------------------------------------------------\nrevno: 11883\nrevision-id: jelmer@samba.org-20070417015128-npyzu1s7i89wmc12\nparent: svn-v2:22286@0c0555d6-39d7-0310-84fc-f1cc0bd64818-branches%2fSAMBA_4_0\ncommitter: Jelmer Vernooij \nbranch nick: SAMBA_4_0\ntimestamp: Tue 2007-04-17 03:51:28 +0200\nmessage:\n  Fix some issues in fedora ds code.\nmodified:\n  source/script/tests/Samba4.pm  svn-v2:21707@0c0555d6-39d7-0310-84fc-f1cc0bd64818-branches%2fSAMBA_4_0-source%2fscript%2ftests%2fSamba4.pm\n=== modified file 'source/script/tests/Samba4.pm'\n--- a/source/script/tests/Samba4.pm\t2007-04-17 00:30:01 +0000\n+++ b/source/script/tests/Samba4.pm\t2007-04-17 01:51:28 +0000\n@@ -167,6 +167,8 @@\n {\n \tmy ($self, $ldapdir, $basedn, $root, $password, $privatedir, $configuration) = @_;\n \n+\tmkdir($ldapdir);\n+\n \tmy $fedora_ds_inf = \"$ldapdir/fedorads.inf\";\n \tmy $fedora_ds_initial_ldif = \"$ldapdir/fedorads-initial.ldif\";\n \n@@ -206,8 +208,8 @@\n \";\n \tclose(CONF);\n \n-\topen(CONF, \">$fedora_ds_initial_ldif\");\n-\tprint \"\n+\topen(LDIF, \">$fedora_ds_initial_ldif\");\n+\tprint LDIF \"\n # These entries need to be added to get the container for the \n # provision to be aimed at.\n \n@@ -224,7 +226,7 @@\n objectclass: nsBackendInstance\n nsslapd-suffix: $basedn\n \";\n-\tclose(CONF);\n+\tclose(LDIF);\n \n \tsystem(\"perl $ENV{FEDORA_DS_PREFIX}/bin/ds_newinst.pl $fedora_ds_inf >&2\") == 0 or return 0;\n \n@@ -248,7 +250,7 @@\n nsslapd-pluginVendor: Fedora Project\n nsslapd-pluginDescription: Allow bitwise matching rules\n \";\n-\tclose(CONF);\n+\tclose(LDIF);\n \n \tsystem(\"$self->{bindir}/ad2oLschema $configuration -H $privatedir/sam.ldb --option=convert:target=fedora-ds -I $self->{setupdir}/schema-map-fedora-ds-1.0 -O $fedora_ds_dir/schema/99_ad.ldif >&2\");\n \n\n"}