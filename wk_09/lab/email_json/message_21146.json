{"category": "ham", "to_address": "samba-cvs@samba.org", "from_address": "tridge@samba.org", "subject": "Rev 223: don't use stderr here - rely on logging in\n\thttp://samba.org/~tridge/ctdb", "body": "------------------------------------------------------------\nrevno: 223\nrevision-id: tridge@samba.org-20070430091021-83436vamcf4mb239\nparent: tridge@samba.org-20070429204223-p3irof22u7mgolo6\ncommitter: Andrew Tridgell \nbranch nick: tridge\ntimestamp: Mon 2007-04-30 11:10:21 +0200\nmessage:\n  don't use stderr here - rely on logging\nmodified:\n  common/ctdb_util.c             ctdb_util.c-20061128065342-to93h6eejj5kon81-3\n  direct/ctdbd.c                 ctdbd.c-20070411085044-dqmhr6mfeexnyt4m-1\n=== modified file 'common/ctdb_util.c'\n--- a/common/ctdb_util.c\t2007-04-29 14:19:40 +0000\n+++ b/common/ctdb_util.c\t2007-04-30 09:10:21 +0000\n@@ -55,7 +55,6 @@\n void ctdb_fatal(struct ctdb_context *ctdb, const char *msg)\n {\n \tDEBUG(0,(\"ctdb fatal error: %s\\n\", msg));\n-\tfprintf(stderr, \"ctdb fatal error: '%s'\\n\", msg);\n \tabort();\n }\n \n\n=== modified file 'direct/ctdbd.c'\n--- a/direct/ctdbd.c\t2007-04-29 20:42:23 +0000\n+++ b/direct/ctdbd.c\t2007-04-30 09:10:21 +0000\n@@ -86,7 +86,8 @@\n \n \t/* useful default logfile */\n \tif (ctdb->logfile == NULL) {\n-\t\tchar *name = talloc_asprintf(ctdb, \"%s/log.ctdb.%u\", VARDIR, ctdb->vnn);\n+\t\tchar *name = talloc_asprintf(ctdb, \"%s/log.ctdb.vnn%u\", \n+\t\t\t\t\t     VARDIR, ctdb->vnn);\n \t\tctdb_set_logfile(ctdb, name);\n \t\ttalloc_free(name);\n \t}\n\n"}