{"category": "ham", "to_address": "samba-cvs@samba.org", "from_address": "tridge@samba.org", "subject": "svn commit: samba r23532 - in branches/SAMBA_4_0/source/param: .", "body": "Author: tridge\nDate: 2007-06-17 20:02:56 +0000 (Sun, 17 Jun 2007)\nNew Revision: 23532\n\nWebSVN: http://websvn.samba.org/cgi-bin/viewcvs.cgi?view=rev&root=samba&rev=23532\n\nLog:\n\nadded lp_parm_double()\n\nModified:\n   branches/SAMBA_4_0/source/param/loadparm.c\n\n\nChangeset:\nModified: branches/SAMBA_4_0/source/param/loadparm.c\n===================================================================\n--- branches/SAMBA_4_0/source/param/loadparm.c\t2007-06-17 19:35:00 UTC (rev 23531)\n+++ branches/SAMBA_4_0/source/param/loadparm.c\t2007-06-17 20:02:56 UTC (rev 23532)\n@@ -1017,6 +1017,20 @@\n }\n \n /*******************************************************************\n+convenience routine to return unsigned long parameters.\n+********************************************************************/\n+static double lp_double(const char *s)\n+{\n+\n+\tif (!s) {\n+\t\tDEBUG(0,(\"lp_double(%s): is called with NULL!\\n\",s));\n+\t\treturn (-1);\n+\t}\n+\n+\treturn strtod(s, NULL);\n+}\n+\n+/*******************************************************************\n convenience routine to return boolean parameters.\n ********************************************************************/\n static BOOL lp_bool(const char *s)\n@@ -1112,6 +1126,17 @@\n \treturn default_v;\n }\n \n+\n+double lp_parm_double(int lookup_service, const char *type, const char *option, double default_v)\n+{\n+\tconst char *value = lp_get_parametric(lookup_service, type, option);\n+\t\n+\tif (value)\n+\t\treturn lp_double(value);\n+\n+\treturn default_v;\n+}\n+\n /* Return parametric option from a given service. Type is a part of option before ':' */\n /* Parametric option has following syntax: 'Type: option = value' */\n \n\n"}