{"category": "ham", "to_address": "matt@diephouse.com, parrot-porters@perl.org", "from_address": "chromatic <chromatic@wgz.org>", "subject": "Re: [PATCH] Re-work Parrot_process_args", "body": "On Sunday 22 April 2007 17:38, Matt Diephouse wrote:\n\n> The attached patch completely reworks Parrot_process_args. The changes\n> are extensive and I think they make the code much clearer. Rather than\n> just check it in, I thought I'd try to get feedback here to make sure\n> that it is clearer to everyone else and not just to myself.\n\nIt's a lot clearer.\n\n> This patch also fixes a few bugs:\n>     #40490: Flat/Slurpy Named Parameter Passing Errors\n\nYay!\n\n>     A couple todo'd error condition tests\n>\n> I'm sure there is more that can be done to clean things up, but this\n> is at least a start. I've already spent 15+ hours on this patch, so\n> I'm ready to check things in and leave further improvements for\n> another time.\n\nI only noticed one thing (besides large swaths of removed code, which is \nalways nice).  This code occurs multiple times:\n\n+                /* if the :flat arg is empty, just go to the next arg */\n+                if (!st->src.slurp_n) {\n+                    st->src.mode &= ~CALL_STATE_FLATTEN;\n+                    st->src.i++;\n+                }\n\nIt's three lines; is it worth extracting somehow?\n\n-- c\n\n"}