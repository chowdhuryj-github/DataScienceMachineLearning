{"category": "ham", "to_address": "Jeremy Allison <jra@samba.org>", "from_address": "tridge@samba.org", "subject": "Re: svn commit: samba r22202 - in\n\tbranches/SAMBA_3_0/source/nsswitch: .", "body": "Jeremy,\n\n > Well, the equivalent. I'm talking about machines going\n > down hard. This happens especially with laptops more\n > than servers/desktops. That's the equivalent of a\n > kill -9 :-).\n\nit's even worse than kill -9 ! With kill -9 data that is already in\nthe buffer cache gets written. So if all you want to be safe against\nis kill -9 then transactions are relatively easy. The machine crashing\ncan leave part of what has been already written in the file, and part\nnot, which is why we need all those fsync/msync calls in the\ntransaction code.\n\nStill, none of this explains why disabling mmap makes the slightest\nbit of difference. I'm still very curious about that :-)\n\nCheers, Tridge\n\n"}