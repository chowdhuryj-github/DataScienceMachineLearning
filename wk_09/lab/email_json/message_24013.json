{"category": "ham", "to_address": "(Ted Harding) <Ted.Harding@manchester.ac.uk>, r-help@stat.math.ethz.ch", "from_address": "(Ted Harding) <ted.harding@nessie.mcc.ac.uk>", "subject": "Re: [R] Creating contingency table from mixed data", "body": "On 05-May-07 23:14:38, spime wrote:\n> \n> Hi,\n> \n> I am new in R. Please help me in the following case.\n> \n> I have data in hand:\n> http://www.nabble.com/file/8225/Data.txt Data.txt \n> \n> There are some categorical (binary and nominal) and continuous\n> variables.\n> \n> How can i get a generic RXC contingency table from this table? My main\n> objective is to fine count in each cell and mean of continuous\n> variables in\n> each cell.\n> \n> Please reply.\n> \n> Thanks in advance\n\nIf what is in that file is all your data, then it is easily and\nquite wuickly (10 minutes) done by hand, facilitated by first\nre-ordering your data as:\n\nVar1    Var2      Var3     Var4       Var5\n0        11         1        0         144\n0        17         1        1         123\n0        15         1        1         117\n0        18         2        0          99\n0        22         2        1         142\n\n1        17         1        0         136\n1        10         1        1         109\n1         8         2        1         133\n1        17         2        1         108\n1        11         3        0         112\n1        16         3        0         121\n1        12         3        1         152\n\n\n>From which, the following is easy to obtain:\n\n                           Var3:\n             ---------------------------------\nVar1:0 |      1       |      2       |      3       |\n=====================================================\nVar4:0 |   (11,144)   |   (18, 99)   |              |\n       |              |              |              |\n-----------------------------------------------------\nCount: |      1       |      1       |      0       |\n Mean: |   (11,144)   |   (18. 99)   |              |\n=====================================================\nVar4:1 |   (17,123)   |   (22,142)   |              |\n       |   (15,117)   |              |              |\n-----------------------------------------------------\nCount: |      2       |      1       |      0       |\n Mean: |   (16,120)   |   (22,142)   |              |\n=====================================================\n\n\n                           Var3:\n             ---------------------------------\nVar1:1 |      1       |      2       |      3       |\n=====================================================\nVar4:0 |   (17,136)   |              |   (11,112)   |\n       |              |              |   (16,121)   |\n-----------------------------------------------------\nCount: |      1       |      0       |      2       |\n Mean: |   (17,136)   |              | (13.5,116.5) |\n=====================================================\nVar4:1 |   (10,109)   |   ( 8,133)   |   (12,152)   |\n       |              |   (17,108)   |              |\n-----------------------------------------------------\nCount: |      1       |      2       |      1       |\n Mean: |   (10,109)   | (12.5,120.5) |   (12,152)   |\n=====================================================\n\n\nTo do it automatically, you could get the counts alone by\napplying table() to the \"factor\" columns (vars 1, 2, 4, taken\nall together). Thus (where \"Dat\" is a dataframe with columns\nVar1,...,Var5):\n\n> table(Dat$Var4,Dat$Var3,Dat$Var1,dnn=c(\"Var4\",\"Var3\",\"Var1\"))\n, , Var1 = 0\n\n    Var3\nVar4 1 2 3\n   0 1 1 0\n   1 2 1 0\n\n, , Var1 = 1\n\n    Var3\nVar4 1 2 3\n   0 1 0 2\n   1 1 2 1\n\nwhich is basicaloy a contingency table format already,\n\nor counts and means by() with functions sun() and mean() to the\n\"continuous\" variables, thus:\n\nCT <- by(Dat,list(var1=Dat$Var1,Var3=Dat$Var3,Var4=Dat$Var4),\n         function(x){list(Count=sum(x[,2]>0),Mean=mean(x[,c(2,5)]))})\n\nwhich produces:\n\nvar1: 0\nVar3: 1\nVar4: 0\n$Count\n[1] 1\n\n$Mean\nVar2 Var5 \n  11  144 \n\n------------------------------------------------------------ \nvar1: 1\nVar3: 1\nVar4: 0\n$Count\n[1] 1\n\n$Mean\nVar2 Var5 \n  17  136 \n\n------------------------------------------------------------ \nvar1: 0\nVar3: 2\nVar4: 0\n$Count\n[1] 1\n\n$Mean\nVar2 Var5 \n  18   99 \n\n------------------------------------------------------------ \nvar1: 1\nVar3: 2\nVar4: 0\nNULL\n------------------------------------------------------------ \nvar1: 0\nVar3: 3\nVar4: 0\nNULL\n------------------------------------------------------------ \nvar1: 1\nVar3: 3\nVar4: 0\n$Count\n[1] 2\n\n$Mean\n Var2  Var5 \n 13.5 116.5 \n\n------------------------------------------------------------ \nvar1: 0\nVar3: 1\nVar4: 1\n$Count\n[1] 2\n\n$Mean\nVar2 Var5 \n  16  120 \n\n------------------------------------------------------------ \nvar1: 1\nVar3: 1\nVar4: 1\n$Count\n[1] 1\n\n$Mean\nVar2 Var5 \n  10  109 \n\n------------------------------------------------------------ \nvar1: 0\nVar3: 2\nVar4: 1\n$Count\n[1] 1\n\n$Mean\nVar2 Var5 \n  22  142 \n\n------------------------------------------------------------ \nvar1: 1\nVar3: 2\nVar4: 1\n$Count\n[1] 2\n\n$Mean\n Var2  Var5 \n 12.5 120.5 \n\n------------------------------------------------------------ \nvar1: 0\nVar3: 3\nVar4: 1\nNULL\n------------------------------------------------------------ \nvar1: 1\nVar3: 3\nVar4: 1\n$Count\n[1] 1\n\n$Mean\nVar2 Var5 \n  12  152 \n\n\nbut this format is not very convenient for incorporating into\na contingency table such as the one shown above (obtained by hand). \n\nProbably others can find a way to convert the above output from\nCT into a contingency table.\n\nHowever, unless you have a lot of these to do, it may be quicker\nto do one, or a few, by hand!\n\nHoping this helps,\nTed.\n\n--------------------------------------------------------------------\nE-Mail: (Ted Harding) \nFax-to-email: +44 (0)870 094 0861\nDate: 06-May-07                                       Time: 02:57:12\n------------------------------ XFMail ------------------------------\n\n______________________________________________\nR-help@stat.math.ethz.ch mailing list\nhttps://stat.ethz.ch/mailman/listinfo/r-help\nPLEASE do read the posting guide http://www.R-project.org/posting-guide.html\nand provide commented, minimal, self-contained, reproducible code.\n\n"}