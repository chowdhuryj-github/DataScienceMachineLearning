{"category": "ham", "to_address": "\"Tobin, Jared\" <TobinJR@DFO-MPO.GC.CA>", "from_address": "\"Tobin, Jared\" <TobinJR@DFO-MPO.GC.CA>", "subject": "Re: [R] Using subset() in a user-defined function", "body": "I should mention the idea I worked on yesterday was cat()ing together\nthe appropriate condition strings and then ideally printing that entire\nconcatenated string into the subset argument.  However, as far as I\nknow, cat() only prints directly on the console and cannot be used to\nsubstitute input text into a function, so I scrapped that idea.\n\nJust figured I'd mention that in case there does happen to be a way to\ndo such a thing, and someone knows of a way offhand.\n\n--\n\njared tobin, student research assistant\ndept. of fisheries and oceans\ntobinjr@dfo-mpo.gc.ca\n\n-----Original Message-----\nFrom: Tobin, Jared \nSent: Thursday, June 14, 2007 12:28 PM\nTo: 'Duncan Murdoch'\nCc: r-help@stat.math.ethz.ch\nSubject: RE: [R] Using subset() in a user-defined function\n\nThanks for the quick response, Duncan.\n\nThe given code doesn't seem to work, and possibly due to this reason I\nfound in the online help for missing() (if I understand it correctly):\n\n\"Currently missing() can only be used in the immediate body of the\nfunction that defines the argument, not in the body of a nested function\nor a local call. This may change in the future.\"\n\nSo as I understand it, missing() cannot refer to the arguments of\nfunction1 if it is used in an argument of subset()?  It seems to remain\na promising function for this situation regardless, but I'm not sure how\nI could implement it into the subset() arguments offhand.\n\n--\n\njared tobin, student research assistant\ndept. of fisheries and oceans\ntobinjr@dfo-mpo.gc.ca\n\n-----Original Message-----\nFrom: Duncan Murdoch [mailto:murdoch@stats.uwo.ca]\nSent: Thursday, June 14, 2007 11:28 AM\nTo: Tobin, Jared\nCc: r-help@stat.math.ethz.ch\nSubject: Re: [R] Using subset() in a user-defined function\n\nOn 6/14/2007 9:38 AM, Tobin, Jared wrote:\n> Hello,\n> \n> I'm having a problem with using subset() inside a function I'm\nwriting.\n> Ignoring everything else in the function, the problem can be \n> illustrated by (where master.frame is the data frame I'm using):\n> \n> \n> function1 <- function(arg1=\"\", arg2=\"\", arg3=\"\"){\n> \n> \ttemp.frame <- subset(master.frame, a == arg1 & b == arg2 & c ==\n> arg3)\n> \n> }\n> \n> \n> This works fine if the user specifies all arguments, but if any one or\n\n> more of the arguments isn't specified, say arg1 for example, the \n> subset is empty because subset() goes looking for values of a == \"\" in\n\n> master.frame, and there are none.  I want it to work such that if an \n> argument is not specified, it is not included in what subset() goes \n> looking for.  So if I were to input:\n> \n> function1(arg2=5, arg3=6)\n> \n> then in function1, the subset command will look like\n> \n> \ttemp.frame <- subset(master.frame, b == 5 & c == 6)\n> \n> \n> Any suggestions would be much appreciated.\n\nCode it like this:\n\nsubset(master.frame, (missing(arg1) | a == arg1) &\n                      (missing(arg2) | b == arg2) &\n                      (missing(arg3) | c == arg3))\n\nI haven't tried this, and I forget what happens in subset() if you pass\nit a subset of the wrong length, so it might fail if all args are\nmissing, but otherwise I think it should work.  It does depend on\ndefaults for the args existing and not causing errors in the equality\ntests (it's not using shortcut evaluation).\n\nDuncan Murdoch\n\n______________________________________________\nR-help@stat.math.ethz.ch mailing list\nhttps://stat.ethz.ch/mailman/listinfo/r-help\nPLEASE do read the posting guide http://www.R-project.org/posting-guide.html\nand provide commented, minimal, self-contained, reproducible code.\n\n"}