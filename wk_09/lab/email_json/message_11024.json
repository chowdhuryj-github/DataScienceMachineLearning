{"category": "ham", "to_address": "R R-help <r-help@stat.math.ethz.ch>", "from_address": "John Kane <jrkrideau@yahoo.ca>", "subject": "[R] Fwd: Re: Character coerced to factor and I cannot get it back", "body": "\n--- John Kane  wrote:\n\n> Date: Fri, 20 Apr 2007 10:47:45 -0400 (EDT)\n> From: John Kane \n> Subject: Re: [R] Character coerced to factor and I\n> cannot get it back\n> To: jim holtman \n> \n> Thanks Jim,\n> \n> I can live with it as a factor or I will do as you\n> suggest.  What is bothering me is that I cannot seem\n> to  reliably convert it to a character and have it\n> stay one when I incorporate it into a data.frame.  \n> \n> Now that I know what is happening I can work around\n> it\n> but what happens the next time when I do a similar\n> cbind? \n> \n>  I cannot see why I get a factor when I deliberately\n> so as as.character(x) command.  \n> \n> Have I stumbled over a bug or is this how R is\n> supposed to work ?  Here is the problem in it's\n> simplest form.\n> aa  <- c('a','b','c','d', 'e')\n> bb  <- 11:15\n> dd  <- data.frame(bb, aa)\n> class(dd[,1])\n> class(dd[,2])\n> \n> \n> ddd  <- data.frame(bb, as.character(aa))\n> class(ddd[,1])\n> class(ddd[,2])\n> \n> If you run these \"aa\" is converted to a factor in\n> each\n> case.\n> \n> > sessionInfo()\n> R version 2.4.1 (2006-12-18) \n> i386-pc-mingw32 \n> \n> locale:\n>\nLC_COLLATE=English_Canada.1252;LC_CTYPE=English_Canada.1252;LC_MONETARY=English_Canada.1252;LC_NUMERIC=C;LC_TIME=English_Canada.1252\n> \n> attached base packages:\n> [1] \"stats\"     \"graphics\"  \"grDevices\" \"utils\"    \n> \"datasets\"  \"methods\"\n> [7] \"base\"\n> \n> \n>  \n> --- jim holtman  wrote:\n> \n> > Then convert it to a character and leave it there,\n> > or add another\n> > column with the value in characters.  If you leave\n> > it as a factor, you\n> > just have to remember to use the 'as.character' at\n> > the appropriate\n> > times.\n> > \n> > On 4/19/07, John Kane  wrote:\n> > >\n> > > --- jim holtman  wrote:\n> > >\n> > > > To convert the 'factor' to 'numeric':\n> > > >\n> > > > as.numeric(as.character(dd1$st))\n> > >\n> > > But I don't want it converted to numeric.  It is\n> a\n> > > site id which I would actually prefer as a\n> > character\n> > > variable.  In this case I really don't mind it\n> > being a\n> > > factor. It is more I am just annoyed that I\n> cannot\n> > > coerce it to character and keep it there for I\n> may\n> > > need to coerce some other factors to character\n> and\n> > I\n> > > wondered what I was doing wrong.\n> > >\n> > > Thanks\n> > >\n> > > >\n> > > >\n> > > > On 4/19/07, John Kane \n> > wrote:\n> > > > > Something probably obivous but I don't see\n> it.\n> >  I\n> > > > > needed to find the first 1 or two digits of\n> > some 5\n> > > > and\n> > > > > 6 digit numbers since they identified\n> research\n> > > > sites\n> > > > > while the rest of the number was the plot\n> id.\n> > > > >\n> > > > > I converted the numbers to characters, got\n> the\n> > > > first 1\n> > > > > or  2 characters as appropriate and went to\n> > add\n> > > > the\n> > > > > new vector to the data.frame.  For some\n> reason\n> > R\n> > > > is\n> > > > > insisting on turning the character variables\n> > into\n> > > > > factors.  This is alright since they really\n> > are\n> > > > > factors anyway but I took me a while to\n> > realise\n> > > > what\n> > > > > was happening.\n> > > > >\n> > > > > For convenience, because of the way I had\n> > defined\n> > > > some\n> > > > > other variables it tried to coerce the\n> > variable\n> > > > back\n> > > > > into character and I cannot.\n> > > > >\n> > > > > Can anyone explain what I am doing wrong or\n> > where\n> > > > I am\n> > > > > misunderstanding what R is doing and why?\n> > > > >\n> > > > > Thanks\n> > > > >\n> > > > > EXAMPLE\n> > > > >\n> > > > > mylist  <- list(dd  <- data.frame(aa <- 1:4,\n> > bb <-\n> > > > > letters[1:4],\n> > > > >         cc <- c(12345, 123456, 45678,\n> > 456789)),\n> > > > >          vec  <-  letters[1:10]  )\n> > > > >\n> > > > > #Get data frame from list\n> > > > > dd <-  mylist[[1]]\n> > > > > attach(dd)\n> > > > >\n> > > > > # Convert numeric id to character id\n> > > > > id  <-  as.character(dd[,3]) ; id\n> > > > > # get site designators (first one or two\n> > > > characters of\n> > > > > id\n> > > > >\n> > > > > st  <- substring(id, 1,nchar(id)-4 ) ; st\n> > > > > typeof (st)  ; class(st)\n> > > > >\n> > > > > dd1  <-  cbind(dd, st)\n> > > > >    names(dd1)  <- c(\"aa\",\"bb\",\"cc\",\"st\")\n> > > > >    dd1\n> > > > >    typeof(dd1$st); class(dd1$st)\n> > > > >\n> > > > > dd2  <-  cbind(dd, as.character(st))\n> > > > >    names(dd2)  <- c(\"aa\",\"bb\",\"cc\",\"st\")\n> > > > >    dd2\n> > > > >    typeof(dd2$st) ;   class(dd2$st)\n> > > > >\n> > > > >\n> ______________________________________________\n> > > > > R-help@stat.math.ethz.ch mailing list\n> > > > > https://stat.ethz.ch/mailman/listinfo/r-help\n> > > > > PLEASE do read the posting guide\n> > > > http://www.R-project.org/posting-guide.html\n> > > > > and provide commented, minimal,\n> > self-contained,\n> > > > reproducible code.\n> > > > >\n> > > >\n> > > >\n> > > > --\n> > > > Jim Holtman\n> > > > Cincinnati, OH\n> > > > +1 513 646 9390\n> > > >\n> > > > What is the problem you are trying to solve?\n> > > >\n> > >\n> > >\n> > >\n> > >      Ask a question on any topic and get answers\n> > from real people. Go to Yahoo! Answers and share\n\n> > >\n> > \n> > \n> > -- \n> > Jim Holtman\n> > Cincinnati, OH\n> > +1 513 646 9390\n> > \n> > What is the problem you are trying to solve?\n> > \n> \n> \n> \n>       Be smarter than spam. See how smart SpamGuard\n> is at giving junk email the boot with the All-new\n\n> http://mrd.mail.yahoo.com/try_beta?.intl=ca\n> \n>\n\n______________________________________________\nR-help@stat.math.ethz.ch mailing list\nhttps://stat.ethz.ch/mailman/listinfo/r-help\nPLEASE do read the posting guide http://www.R-project.org/posting-guide.html\nand provide commented, minimal, self-contained, reproducible code.\n\n"}