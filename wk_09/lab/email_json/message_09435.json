{"category": "ham", "to_address": "samba-cvs@samba.org", "from_address": "jra@samba.org", "subject": "svn commit: samba r22351 - in branches/SAMBA_3_0/source/smbd: .", "body": "Author: jra\nDate: 2007-04-19 00:40:08 +0000 (Thu, 19 Apr 2007)\nNew Revision: 22351\n\nWebSVN: http://websvn.samba.org/cgi-bin/viewcvs.cgi?view=rev&root=samba&rev=22351\n\nLog:\nMaking progress in tests...\nJeremy.\n\nModified:\n   branches/SAMBA_3_0/source/smbd/seal.c\n\n\nChangeset:\nModified: branches/SAMBA_3_0/source/smbd/seal.c\n===================================================================\n--- branches/SAMBA_3_0/source/smbd/seal.c\t2007-04-19 00:35:18 UTC (rev 22350)\n+++ branches/SAMBA_3_0/source/smbd/seal.c\t2007-04-19 00:40:08 UTC (rev 22351)\n@@ -127,6 +127,12 @@\n \t\treturn map_nt_error_from_gss(ret, min);\n \t}\n \n+\t/*\n+\t * We're accessing the krb5.keytab file here.\n+ \t * ensure we have permissions to do so.\n+ \t */\n+\tbecome_root();\n+\n \tret = gss_acquire_cred(&min,\n \t\t\t\tsrv_name,\n \t\t\t\tGSS_C_INDEFINITE,\n@@ -135,6 +141,7 @@\n \t\t\t\tp_srv_cred,\n \t\t\t\tNULL,\n \t\t\t\tNULL);\n+\tunbecome_root();\n \n \tif (ret != GSS_S_COMPLETE) {\n \t\tADS_STATUS adss = ADS_ERROR_GSS(ret, min);\n\n"}