{"category": "ham", "to_address": "Taj Khattra <taj.khattra@gmail.com>", "from_address": "Jeremy Allison <jra@samba.org>", "subject": "Re: typo in tdb_firstkey?", "body": "On Thu, Apr 19, 2007 at 01:30:04PM -0700, Taj Khattra wrote:\n> hi,\n> \n> re: samba-4_0 revision r22117\n> \n> should the F_RDLCK in tdb_firstkey():\n> \n>    tdb->travlocks.lock_rw = F_RDLCK;\n> \n> be F_WRLCK - the subsequent unlock in firstkey, and the lock/unlock in\n> nextkey all use F_WRLCK?\n> \n> in any case, i was wondering why we take a write-lock on a hash chain\n> in firstkey/nextkey instead of a read-lock?  (it's only held briefly,\n> so i don't know if it matters in practice)\n\nTaj,\n\n\tI think you are correct on this. I've just fixed traverse\nto use travlocks.lock_rw consistently. Please svn checkout and\nreview the change.\n\nThanks a *LOT* for noticing this,\n\nJeremy.\n\n"}