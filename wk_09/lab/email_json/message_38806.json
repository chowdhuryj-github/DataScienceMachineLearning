{"category": "ham", "to_address": "<r-help@stat.math.ethz.ch>", "from_address": "\"Steen Ladelund\" <STELAD01@glo.regionh.dk>", "subject": "[R] Factor function: odd behavior when labels argument contains\n\tduplicates?", "body": "Hi all.\n\nI think it would be nice to be able to combine levels of a factor on\ncreation a la\n\n x <- rep(0:5,5)\n\n y <- factor(x,levels=0:5,labels=c('1','1',2:5))  ## (1)\n\n y\n [1] 1 1 2 3 4 5 1 1 2 3 4 5 1 1 2 3 4 5 1 1 2 3 4 5 1 1 2 3 4 5\nLevels: 1 1 2 3 4 5\n\nI thougt this would (should?) create a factor with 5 levels, ie\ncombining 0 and 1 in x into one level in y.\n\nI find it hard to predict the behavior of the following lines:\n\n table(factor(y))          ## Odd ?\n 1  1  2  3  4  5 \n10  0  5  5  5  5 \n table(factor(factor(y)))  ## This is what I want\n 1  2  3  4  5 \n10  5  5  5  5 \n\nIt also seems strange that this should be the way to go:\n levels(y) <- levels(y)   ## Does what I want following (1) even tough\nit appear to be a void statement?\n y\ny\n [1] 1 1 2 3 4 5 1 1 2 3 4 5 1 1 2 3 4 5 1 1 2 3 4 5 1 1 2 3 4 5\nLevels: 1 2 3 4 5\n\nAm I missing an important point about factors or the factor function?\n\nsteen\n\nSteen Ladelund, statistician\n+4543233275 stelad01@glostruphosp.kbhamt.dk\nResearch Center for Prevention and Health\nGlostrup University Hospital, Denmark\nwww.fcfs.kbhamt.dk\n\n______________________________________________\nR-help@stat.math.ethz.ch mailing list\nhttps://stat.ethz.ch/mailman/listinfo/r-help\nPLEASE do read the posting guide http://www.R-project.org/posting-guide.html\nand provide commented, minimal, self-contained, reproducible code.\n\n"}