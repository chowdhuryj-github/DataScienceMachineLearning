{"category": "ham", "to_address": "bugs-bitbucket@netlabs.develooper.com", "from_address": "Mark Glines (via RT) <parrotbug-followup@parrotcode.org>", "subject": "[perl #43481] t/examples/shootout.t (shootout_16.pir) fails on gentoo/x86 ", "body": "# New Ticket Created by  Mark Glines \n# Please include the string:  [perl #43481]\n# in the subject line of all future correspondence about this issue. \n# \n\n\nFailed Test              Stat Wstat Total Fail  List of Failed\n-------------------------------------------------------------------------------\nt/examples/shootout.t       1   256    20    1  16\n\n\nparanoid@chirp ~/parrot $ perl t/examples/shootout.t\n1..20\nok 1 - examples/shootout/ack.pir\nok 2 - examples/shootout/binarytrees.pir\nok 3 - examples/shootout/fannkuch.pir\nok 4 - examples/shootout/fasta.pir\nok 5 - examples/shootout/knucleotide.pir\nok 6 - examples/shootout/mandelbrot.pir\nok 7 - examples/shootout/nbody.pir\nok 8 - examples/shootout/nsieve-bits-2.pir\nok 9 - examples/shootout/nsieve-bits.pir\nok 10 - examples/shootout/nsieve.pir\nok 11 - examples/shootout/partialsums-2.pir\nok 12 - examples/shootout/partialsums.pir\nok 13 - examples/shootout/pidigits.pir\nok 14 - examples/shootout/recursive-2.pir\nok 15 - examples/shootout/recursive.pir\nnot ok 16 - examples/shootout/regexdna.pir\n#     Failed test (t/examples/shootout.t at line 103)\n# Exited with error code: 139\n# Received:\n# agggtaaa|tttaccct 0\n# [cgt]gggtaaa|tttaccc[acg] 3\n# a[act]ggtaaa|tttacc[agt]t 9\n# ag[act]gtaaa|tttac[agt]ct 8\n# agg[act]taaa|ttta[agt]cct 10\n# aggg[acg]aaa|ttt[cgt]ccct 3\n# agggt[cgt]aa|tt[acg]accct 4\n# agggta[cgt]a|t[acg]taccct 3\n# agggtaa[cgt]|[acg]ttaccct 5\n# sh: line 1: 11716 Segmentation fault      ./parrot \"/home/paranoid/parrot/t/examples/shootout_16.pir\" < examples/shootout/regexdna.pir.input\n#\n# Expected:\n# agggtaaa|tttaccct 0\n# [cgt]gggtaaa|tttaccc[acg] 3\n# a[act]ggtaaa|tttacc[agt]t 9\n# ag[act]gtaaa|tttac[agt]ct 8\n# agg[act]taaa|ttta[agt]cct 10\n# aggg[acg]aaa|ttt[cgt]ccct 3\n# agggt[cgt]aa|tt[acg]accct 4\n# agggta[cgt]a|t[acg]taccct 3\n# agggtaa[cgt]|[acg]ttaccct 5\n#\n# 101745\n# 100000\n# 133640\n#\nok 17 - examples/shootout/revcomp.pir\nok 18 - examples/shootout/spectralnorm.pir\nok 19 - examples/shootout/sumcol.pir\nok 20 - examples/shootout/takfp.pir\n# Looks like you failed 1 test of 20.\n\n\nparanoid@chirp ~/parrot $ ./parrot \"/home/paranoid/parrot/t/examples/shootout_16.pir\" encoding == b->encoding && a->charset == b->charset) {\n(gdb) print a\n$1 = (const STRING *) 0x81da0c8\n(gdb) print b\n$2 = (const STRING *) 0x0\n(gdb) bt\n#0  0xb7d0e93a in string_rep_compatible (interp_unused=0x804e008, a=0x81da0c8,\n    b=0x0, e=0xbfdf2060) at src/string.c:357\n#1  0xb7d0fa06 in string_replace (interp=0x804e008, src=0x81da0c8,\n    offset=81240, length=1, rep=0x0, d=0x0) at src/string.c:1075\n#2  0xb7c5101f in Parrot_substr_s_i_i_s (cur_opcode=0x8247f14,\n    interp=0x804e008) at src/ops/string.ops:282\n#3  0xb7d137e9 in runops_slow_core (interp=0x804e008, pc=0x8247f14)\n    at src/runops_cores.c:184\n#4  0xb7cfdf13 in runops_int (interp=0x804e008, offset=3760)\n    at src/interpreter.c:769\n#5  0xb7d0380d in runops (interp=0x804e008, offs=0) at src/inter_run.c:95\n#6  0xb7d03a3c in runops_args (interp=0x804e008, sub=0x8217a70, obj=0x80942f8,\n    meth=0x0, sig=0xb7e75fde \"vP\",\n    ap=0xbfdf21ec \"Hz!\\b(\\\"0mX\\004\\bpz!\\bHz!\\b\\033(\\\"'\\u0264\\b\\004\\b\\001\") at src/inter_run.c:210\n#7  0xb7d03b46 in Parrot_runops_fromc_args (interp=0x804e008, sub=0x8217a70,\n    sig=0xb7e75fde \"vP\") at src/inter_run.c:287\n#8  0xb7d56b7f in Parrot_runcode (interp=0x804e008, argc=1, argv=0xbfdf2388)\n    at src/embed.c:785\n#9  0xb7e4c927 in imcc_run_pbc (interp=0x804e008, obj_file=0, output_file=0x0,\n    argc=1, argv=0xbfdf2388) at compilers/imcc/main.c:612\n#10 0xb7e4d157 in imcc_run (interp=0x804e008,\n    sourcefile=0xbfdf2f70 \"/home/paranoid/parrot/t/examples/shootout_16.pir\",\n    argc=1, argv=0xbfdf2388) at compilers/imcc/main.c:813\n#11 0x0804895d in main (argc=1, argv=0xbfdf2388) at src/main.c:61\n\n\nI believe this has been around for at least a week or two; the Gentoo\npackage guys are using the 20070620 snapshot tarball, and seeing it\nthere, too.  http://bugs.gentoo.org/show_bug.cgi?id=168979\n\nMark\n\n"}