{"category": "ham", "to_address": "samba-cvs@samba.org", "from_address": "tridge@samba.org", "subject": "Rev 154: this fixes a timeout error spotted by volker in\n\thttp://samba.org/~tridge/ctdb", "body": "------------------------------------------------------------\nrevno: 154\nrevision-id: tridge@samba.org-20070418091229-02a734be8c7a9e5f\nparent: tridge@samba.org-20070418084334-f8c90c6d688c8091\ncommitter: Andrew Tridgell \nbranch nick: tridge\ntimestamp: Wed 2007-04-18 19:12:29 +1000\nmessage:\n  this fixes a timeout error spotted by volker\n  It ensures that when the client context goes away (such as when the client exits) \n  that any timed events and partially completed requests from that client also go away\nmodified:\n  common/ctdb_daemon.c           ctdb_daemon.c-20070409200331-3el1kqgdb9m4ib0g-1\n=== modified file 'common/ctdb_daemon.c'\n--- a/common/ctdb_daemon.c\t2007-04-18 08:39:02 +0000\n+++ b/common/ctdb_daemon.c\t2007-04-18 09:12:29 +0000\n@@ -151,6 +151,7 @@\n \tstate = ctdb_daemon_call_send_remote(ctdb_db, call, header);\n \tstate->fetch_private = rec;\n \ttalloc_steal(state, rec);\n+\ttalloc_steal(mem_ctx, state);\n \n \treturn state;\n }\n\n"}