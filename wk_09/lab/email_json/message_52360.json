{"category": "ham", "to_address": "Volker.Lendecke@SerNet.DE", "from_address": "James Peach <jpeach@samba.org>", "subject": "Re: Consolidating kernel-related parts of opening a file?", "body": "On Jun 21, 2007, at 1:56 PM, Volker Lendecke wrote:\n\n> On Thu, Jun 21, 2007 at 01:17:59PM -0700, James Peach wrote:\n>> This looks nice. I don't think you have to pass share_access around,\n>> because by this time, fsp->share_access has been set.\n>\n> Thanks for that hint!\n>\n>> I have a module that detect share mode conflicts in SMB_VFS_OPEN\n>> rather than SMB_VFS_KERNEL_FLOCK, so it would be nice if this was\n>> supported more directly. If not, then it still reduces my patch\n>> nicely :)\n>\n> Wait -- OS/X has share modes?\n\nnot in the kernel\n\n> Do you have hints to docs?\n\nThere is the O_SHLOCK and O_EXLOCK flags to open(2) which take out BSD  \nflocks at open time, see\n\nhttp://developer.apple.com/documentation/Darwin/Reference/ManPages/man2/open.2.html\n\n--\nJames Peach | jpeach@samba.org\n\n"}