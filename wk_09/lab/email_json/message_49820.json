{"category": "ham", "to_address": "\"jim holtman\" <jholtman@gmail.com>, r-help@stat.math.ethz.ch", "from_address": "\"Economics Guy\" <economics.guy@gmail.com>", "subject": "Re: [R] Storing output vector form a loop as a matrix", "body": "Thanks so much to both of you. I did not exactly use the code from either of\nyou but your post help me figure out the things I was doing wrong.\n\nFor anyone who stumbles upon this thread later, here is the code I used that\nmade it work:\n\nThanks Again.\n\n\na <-c(\"A\",\"C\",\"B\",\"A\",\"B\",\"C\")\n\nb <-c(10,20,30,40,50,60)\n\nd <-data.frame(a,b)\n\nN=10 #Number of Loops\n\noutput.matrix <- matrix(0.0,3,N)\n\n#I need to START LOOP HERE\n\nfor (i in 1:N){\n\na <- sample(a, replace=FALSE)\n\nd <-data.frame(b,a)\n\noutput.vector <- by(d, a, function(x) sum(x$b))\n\noutput.vector <- as.vector(output.vector)\n\noutput.vector <- data.frame(output.vector)\n\noutput.vector <- as.vector(output.vector) #test\n\noutput.matrix[,i] <- t(output.vector)\n\n}\n\n\n\n\nOn 6/17/07, jim holtman  wrote:\n>\n> I think this does it for you:\n>\n> > a <-c(\"A\",\"C\",\"B\",\"A\",\"B\",\"C\")\n> >\n> > b <-c(10,20,30,40,50,60)\n> >\n> > C <-data.frame(a,b)  # don't use 'c' as it is a primitive function -\n> canbe confusing\n> >\n> > N=10 #Number of Loops\n> >\n> >\n> >\n> > output.matix <- replicate(N, function(x){\n> +     .samp <- C[sample(nrow(C), replace=TRUE), ]\n> +     tapply(.samp$b, .samp$a, sum)\n> + })\n> > # transpose if you want samples in columns\n> > output.matrix <- t(output.matrix)\n> > output.matrix\n>   [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10]\n> A   10  130  100   40   50   40   30   50   50    50\n> B  130   60   50  110  100  160  110  130   60   150\n> C   40   NA   60   80  120   60   NA   60   80    20\n> >\n>\n>\n>\n> On 6/17/07, Economics Guy  wrote:\n>\n> > Based on help files and searching the archives and help from the\n> > listserv I\n> > have managed to build my monte carlo program.\n> >\n> > However I cannot get the proper syntax for running the loop and storing\n> > the\n> > output of each loop (which is a vector) into a matrix.\n> >\n> > I took out some of the crazy code I was writing, but here is what I\n> > have:\n> >\n> > --------------------\n> >\n> > rm(list = ls(all = TRUE))\n> > # removes everything\n> >\n> > a <-c(\"A\",\"C\",\"B\",\"A\",\"B\",\"C\")\n> >\n> > b <-c(10,20,30,40,50,60)\n> >\n> > c <-data.frame(a,b)\n> >\n> > N=10 #Number of Loops\n> >\n> > output.matrix <- matrix(0.0,3,N)\n> >\n> > #I need to START LOOP HERE\n> >\n> > a <- sample(a, replace=TRUE)\n> >\n> > c <-data.frame(b,a)\n> >\n> > output.vector <- by(c, a, function(x) sum(x$b))\n> >\n> > output.vector <- as.vector(output)\n> >\n> > output.vector <- data.frame(output)\n> >\n> > #END LOOP here\n> >\n> >\n> > --------------------------\n> >\n> > What I would like to have at the end is the \" output.matrix\" contain as\n> > a\n> > column the  \"output.vector\" from  each iteration. The actual data frame\n> > I\n> > will be running has 60,000 observations and I am going to run 20000\n> > iterations so speed is important too.\n> >\n> > Thanks so much\n> >\n> > EG\n> >\n> >        [[alternative HTML version deleted]]\n> >\n> > ______________________________________________\n> > R-help@stat.math.ethz.ch mailing list\n> > https://stat.ethz.ch/mailman/listinfo/r-help\n> > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html\n> >\n> > and provide commented, minimal, self-contained, reproducible code.\n> >\n>\n>\n>\n> --\n> Jim Holtman\n> Cincinnati, OH\n> +1 513 646 9390\n>\n> What is the problem you are trying to solve?\n\n\t[[alternative HTML version deleted]]\n\n______________________________________________\nR-help@stat.math.ethz.ch mailing list\nhttps://stat.ethz.ch/mailman/listinfo/r-help\nPLEASE do read the posting guide http://www.R-project.org/posting-guide.html\nand provide commented, minimal, self-contained, reproducible code.\n\n"}