{"category": "ham", "to_address": "samba-cvs@samba.org", "from_address": "idra@samba.org", "subject": "svn commit: samba r22974 - in branches/SAMBA_3_0/source: .", "body": "Author: idra\nDate: 2007-05-17 18:20:16 +0000 (Thu, 17 May 2007)\nNew Revision: 22974\n\nWebSVN: http://websvn.samba.org/cgi-bin/viewcvs.cgi?view=rev&root=samba&rev=22974\n\nLog:\nenable relro with PIE if available, this gives extra protection to the ELF segment\nModified:\n   branches/SAMBA_3_0/source/configure.in\n\n\nChangeset:\nModified: branches/SAMBA_3_0/source/configure.in\n===================================================================\n--- branches/SAMBA_3_0/source/configure.in\t2007-05-17 13:56:19 UTC (rev 22973)\n+++ branches/SAMBA_3_0/source/configure.in\t2007-05-17 18:20:16 UTC (rev 22974)\n@@ -1763,6 +1763,29 @@\n \tfi\n fi\n \n+#Check if we can enable relro as well\n+if test x\"${samba_cv_fpie}\" = x\"yes\"\n+then\n+\tAC_CACHE_CHECK(for relro, samba_cv_fpie_relro,\n+\t[\n+\t\tcat > conftest.c <&AS_MESSAGE_LOG_FD])\n+\t\tthen\n+\t\t\tsamba_cv_fpie_relro=yes\n+\t\telse\n+\t\t\tsamba_cv_fpie_relro=no\n+\t\tfi\n+\t\trm -f conftest*\n+\t])\n+\tif test x\"${samba_cv_fpie_relro}\" = x\"yes\"\n+\tthen\n+\t\tPIE_LDFLAGS=\"-pie -Wl,z,relro\"\n+\tfi\n+fi\n+\n # Assume non-shared by default and override below\n BLDSHARED=\"false\"\n \n\n"}