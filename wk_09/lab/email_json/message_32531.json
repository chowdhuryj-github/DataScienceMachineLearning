{"category": "ham", "to_address": "samba-cvs@samba.org", "from_address": "jpeach@samba.org", "subject": "svn commit: samba r23009 - in branches: SAMBA_3_0/source/utils\n\tSAMBA_3_0_26/source/utils", "body": "Author: jpeach\nDate: 2007-05-19 04:23:04 +0000 (Sat, 19 May 2007)\nNew Revision: 23009\n\nWebSVN: http://websvn.samba.org/cgi-bin/viewcvs.cgi?view=rev&root=samba&rev=23009\n\nLog:\nBoth contains a strchr_m(server,'/') few lines after replacing all / with \\.\nThis patch removes this dead code.\n\nPatch from Pascal Terjan  for bug #2313.\n\nModified:\n   branches/SAMBA_3_0/source/utils/smbcacls.c\n   branches/SAMBA_3_0/source/utils/smbcquotas.c\n   branches/SAMBA_3_0_26/source/utils/smbcacls.c\n   branches/SAMBA_3_0_26/source/utils/smbcquotas.c\n\n\nChangeset:\nModified: branches/SAMBA_3_0/source/utils/smbcacls.c\n===================================================================\n--- branches/SAMBA_3_0/source/utils/smbcacls.c\t2007-05-19 02:52:14 UTC (rev 23008)\n+++ branches/SAMBA_3_0/source/utils/smbcacls.c\t2007-05-19 04:23:04 UTC (rev 23009)\n@@ -902,11 +902,8 @@\n \tfstrcpy(server,path+2);\n \tshare = strchr_m(server,'\\\\');\n \tif (!share) {\n-\t\tshare = strchr_m(server,'/');\n-\t\tif (!share) {\n-\t\t\tprintf(\"Invalid argument: %s\\n\", share);\n-\t\t\treturn -1;\n-\t\t}\n+\t\tprintf(\"Invalid argument: %s\\n\", share);\n+\t\treturn -1;\n \t}\n \n \t*share = 0;\n\nModified: branches/SAMBA_3_0/source/utils/smbcquotas.c\n===================================================================\n--- branches/SAMBA_3_0/source/utils/smbcquotas.c\t2007-05-19 02:52:14 UTC (rev 23008)\n+++ branches/SAMBA_3_0/source/utils/smbcquotas.c\t2007-05-19 04:23:04 UTC (rev 23009)\n@@ -500,11 +500,8 @@\n \tpstrcpy(server,path+2);\n \tshare = strchr_m(server,'\\\\');\n \tif (!share) {\n-\t\tshare = strchr_m(server,'/');\n-\t\tif (!share) {\n-\t\t\tprintf(\"Invalid argument: %s\\n\", share);\n-\t\t\texit(EXIT_PARSE_ERROR);\n-\t\t}\n+\t\tprintf(\"Invalid argument: %s\\n\", share);\n+\t\texit(EXIT_PARSE_ERROR);\n \t}\n \n \t*share = 0;\n\nModified: branches/SAMBA_3_0_26/source/utils/smbcacls.c\n===================================================================\n--- branches/SAMBA_3_0_26/source/utils/smbcacls.c\t2007-05-19 02:52:14 UTC (rev 23008)\n+++ branches/SAMBA_3_0_26/source/utils/smbcacls.c\t2007-05-19 04:23:04 UTC (rev 23009)\n@@ -902,11 +902,8 @@\n \tfstrcpy(server,path+2);\n \tshare = strchr_m(server,'\\\\');\n \tif (!share) {\n-\t\tshare = strchr_m(server,'/');\n-\t\tif (!share) {\n-\t\t\tprintf(\"Invalid argument: %s\\n\", share);\n-\t\t\treturn -1;\n-\t\t}\n+\t\tprintf(\"Invalid argument: %s\\n\", share);\n+\t\treturn -1;\n \t}\n \n \t*share = 0;\n\nModified: branches/SAMBA_3_0_26/source/utils/smbcquotas.c\n===================================================================\n--- branches/SAMBA_3_0_26/source/utils/smbcquotas.c\t2007-05-19 02:52:14 UTC (rev 23008)\n+++ branches/SAMBA_3_0_26/source/utils/smbcquotas.c\t2007-05-19 04:23:04 UTC (rev 23009)\n@@ -500,11 +500,8 @@\n \tpstrcpy(server,path+2);\n \tshare = strchr_m(server,'\\\\');\n \tif (!share) {\n-\t\tshare = strchr_m(server,'/');\n-\t\tif (!share) {\n-\t\t\tprintf(\"Invalid argument: %s\\n\", share);\n-\t\t\texit(EXIT_PARSE_ERROR);\n-\t\t}\n+\t\tprintf(\"Invalid argument: %s\\n\", share);\n+\t\texit(EXIT_PARSE_ERROR);\n \t}\n \n \t*share = 0;\n\n"}