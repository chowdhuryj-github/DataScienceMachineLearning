{"category": "ham", "to_address": "samba-cvs@samba.org", "from_address": "tridge@samba.org", "subject": "Rev 178: - when handling a record migration in the lmaster,\n\tbypass the usual in http://samba.org/~tridge/ctdb", "body": "------------------------------------------------------------\nrevno: 178\nrevision-id: tridge@samba.org-20070422122645-58g3itembhj40xax\nparent: tridge@samba.org-20070422072427-3687afmjkdro3it4\ncommitter: Andrew Tridgell \nbranch nick: tridge\ntimestamp: Sun 2007-04-22 14:26:45 +0200\nmessage:\n  - when handling a record migration in the lmaster, bypass the usual\n    dmaster request stage, and instead directly send a dmaster\n    reply. This avoids a race condition where a new call comes in for\n    the same record while processing the dmaster request\n  \n  - don't keep any redirect records during a ctdb call.  This prevents a\n    memory leak in case of a redirect storm\nmodified:\n  common/ctdb.c                  ctdb.c-20061127094323-t50f58d65iaao5of-2\n  common/ctdb_call.c             ctdb_call.c-20061128065342-to93h6eejj5kon81-1\n  include/ctdb_private.h         ctdb_private.h-20061117234101-o3qt14umlg9en8z0-13\n  tools/ctdb_dump.c              ctdb_dump.c-20070422072106-vavpof4y9zz8z2lh-1\n\nDiff too large for email (249, the limit is 200).\n\n"}