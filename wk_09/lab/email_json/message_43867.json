{"category": "ham", "to_address": "\"Sarah Hawley\" <sarah@canaryfoundation.org>", "from_address": "\"Deepayan Sarkar\" <deepayan.sarkar@gmail.com>", "subject": "Re: [R] Multiple color schemes for barchart (lattice)", "body": "On 6/6/07, Sarah Hawley  wrote:\n> Hello R-help.\n>\n> I am trying to make a stacked barplot where the color of the sections of\n> each bar depend on another variable.\n>\n> > myData[1:11,]\n>    score   percent    marker     cellType Malignant\n> 1      0 100.00000 ESR1 (ER) Bladder.M(5) TRUE\n> 2      0  80.00000      PAX8 Bladder.M(5) TRUE\n> 3      1  20.00000      PAX8 Bladder.M(5) TRUE\n> 4      0 100.00000 ESR1 (ER)   Brain.N(3) FALSE\n> 5      0 100.00000      PAX8   Brain.N(3) FALSE\n> 6      3 100.00000 ESR1 (ER) Breast.M(11) TRUE\n> 7      0 100.00000      PAX8 Breast.M(11) TRUE\n> 8      0  36.36364 ESR1 (ER) Cervix.M(11) TRUE\n> 9      1   9.09091 ESR1 (ER) Cervix.M(11) TRUE\n> 10     2  18.18182 ESR1 (ER) Cervix.M(11) TRUE\n> 11     3  36.36364 ESR1 (ER) Cervix.M(11) TRUE\n>\n> palette <- palette(gray(seq(0, 1,len=4)))\n> trellis.par.set(list(par.xlab.text=list(cex=0.85)\n>                    , superpose.polygon=list(col=palette())\n>                    , axis.text=list(cex=0.8)))\n>\n>\n> barchart(percent~cellType|marker\n>         , groups=score\n>         , data=myData\n>         , stack=TRUE\n>         , xlab='N=Normal/Benign, M=Malignant'\n>         , ylab='Percentage of Cores Staining'\n>         , color=palette()\n>         , auto.key = list(points = FALSE, rectangles = TRUE, space = \"top\")\n>         , scales=list(x=list(rot=70))\n>         , layout=c(1,2))\n>\n> I would like to make the color scheme of the bar differ according to the\n> variable 'Malignant' and add a second color scheme to the key.\n\nI may not have understood what you are looking for, but it seems like\nyou just need\n\ngroups = interaction(score, Malignant)\n\nFor example,\n\npalette <- palette(gray(seq(0, 1,len=8)))\n\ntrellis.par.set(list(par.xlab.text=list(cex=0.85)\n                  , superpose.polygon=list(col=palette())\n                  , axis.text=list(cex=0.8)))\n\nbarchart(percent~cellType|marker\n       , groups= interaction(score, Malignant)\n       , data=myData\n       , stack=TRUE\n       , xlab='N=Normal/Benign, M=Malignant'\n       , ylab='Percentage of Cores Staining'\n       # , color=palette() # not doing anything\n       , auto.key = list(points = FALSE, rectangles = TRUE, space =\n\"top\", columns = 2)\n       , scales=list(x=list(rot=70))\n       , layout=c(1,2))\n\n-Deepayan\n\n______________________________________________\nR-help@stat.math.ethz.ch mailing list\nhttps://stat.ethz.ch/mailman/listinfo/r-help\nPLEASE do read the posting guide http://www.R-project.org/posting-guide.html\nand provide commented, minimal, self-contained, reproducible code.\n\n"}