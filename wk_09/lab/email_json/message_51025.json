{"category": "ham", "to_address": "r-help@stat.math.ethz.ch", "from_address": "Alan Jackson <Rhelp@ajackson.org>", "subject": "[R] making a Time of Day axis", "body": "I am wrestling with time and date data. I came up with a way to plot and\nlabel a histogram with \"time of day\" on the x-axis, but it seemed like a\nlot more work than should be necessary. Is there a better way to do what\nI am trying to do?\n\nrequire(chron)\n#\tread input data\ndata = read.table(\"input.dat\", header=T)\n#\tCreate date-time and chron objects\ndatetime = strptime(paste(data[,3], data[,2]),format=\"%m/%d/%y %H:%M\")\ntime = times(paste(as.vector(data[,2]), \":00\",sep=\"\"))\n#\tPut it all into a data frame\ndata = data.frame(time, datetime, data$Trip)\nnames(data) = c(\"Time\",\"DateTime\",\"Trip\")\nattach(data)\n#\tCreate time of day array\ntimes = as.numeric(chron(times = Time))\ntod = subset(times, Trip=='m');\n#\tPlot base histogram\nhist(tod, axes=F, main=\"Morning Bus Arrival Times\", xlab=\"Time\", col=\"blue\");\naxis(2);\n#\twhere are the tics to be?\ntics = seq(min(tod), max(tod), (max(tod)-min(tod))/5);\n#\tbuild a labeled x-axis for the plot\naxis(1, tics, labels=sub(\":00$\",\"\",as.character(chron(times=tics, out.format=\"h:m:s\"))));\n\n#\tcleanup\ndetach(data)\n\n--- Data ---\nTrip Time Date\na 15:55 05/15/07\nm  5:47 05/16/07\na 15:54 05/16/07\nm  5:47 05/17/07\na 15:59 05/17/07\nm  5:50 05/21/07\nm  5:50 05/22/07\na 16:00 05/22/07\nm  5:48 05/23/07\nm  5:50 05/24/07\na 16:00 05/24/07\nm  5:48 05/25/07\nm  5:48 05/29/07\na 15:59 05/29/07\nm  5:46 05/30/07\nm  5:45 05/31/07\na 16:05 05/31/07\nm  5:47 06/04/07\na 15:53 06/04/07\nm  5:46 06/05/07\nm  5:47 06/06/07\na 15:53 06/06/07\nm  5:47 06/07/07\na 15:51 06/07/07\nm  5:45 06/08/07\nf 15:22 06/08/07\nm  5:48 06/11/07\nm  5:46 06/12/07\nm  5:48 06/13/07\nm  5:47 06/18/07\na 15:53 06/18/07\nm  5:47 06/19/07\na 15:55 06/19/07\n\n\n-- \n-----------------------------------------------------------------------\n| Alan K. Jackson            | To see a World in a Grain of Sand      |\n| alan@ajackson.org          | And a Heaven in a Wild Flower,         |\n| www.ajackson.org           | Hold Infinity in the palm of your hand |\n| Houston, Texas             | And Eternity in an hour. - Blake       |\n\n______________________________________________\nR-help@stat.math.ethz.ch mailing list\nhttps://stat.ethz.ch/mailman/listinfo/r-help\nPLEASE do read the posting guide http://www.R-project.org/posting-guide.html\nand provide commented, minimal, self-contained, reproducible code.\n\n"}