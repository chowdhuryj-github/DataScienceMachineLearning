{"category": "ham", "to_address": "samba-cvs@samba.org", "from_address": "jra@samba.org", "subject": "svn commit: samba r23345 - in branches: SAMBA_3_0/source/nsswitch\n\tSAMBA_3_0_26/source/nsswitch", "body": "Author: jra\nDate: 2007-06-04 19:58:11 +0000 (Mon, 04 Jun 2007)\nNew Revision: 23345\n\nWebSVN: http://websvn.samba.org/cgi-bin/viewcvs.cgi?view=rev&root=samba&rev=23345\n\nLog:\nStop Coverity from getting confused.\nJeremy.\n\nModified:\n   branches/SAMBA_3_0/source/nsswitch/winbindd_cache.c\n   branches/SAMBA_3_0_26/source/nsswitch/winbindd_cache.c\n\n\nChangeset:\nModified: branches/SAMBA_3_0/source/nsswitch/winbindd_cache.c\n===================================================================\n--- branches/SAMBA_3_0/source/nsswitch/winbindd_cache.c\t2007-06-04 19:50:30 UTC (rev 23344)\n+++ branches/SAMBA_3_0/source/nsswitch/winbindd_cache.c\t2007-06-04 19:58:11 UTC (rev 23345)\n@@ -3617,6 +3617,7 @@\n \t}\n \n \tif ( buflen < len ) {\n+\t\tSAFE_FREE(buffer);\n \t\tif ( (buffer = SMB_MALLOC_ARRAY(unsigned char, len)) == NULL ) {\n \t\t\tDEBUG(0,(\"pack_tdc_domains: failed to alloc buffer!\\n\"));\n \t\t\tbuflen = -1;\n\nModified: branches/SAMBA_3_0_26/source/nsswitch/winbindd_cache.c\n===================================================================\n--- branches/SAMBA_3_0_26/source/nsswitch/winbindd_cache.c\t2007-06-04 19:50:30 UTC (rev 23344)\n+++ branches/SAMBA_3_0_26/source/nsswitch/winbindd_cache.c\t2007-06-04 19:58:11 UTC (rev 23345)\n@@ -3617,6 +3617,7 @@\n \t}\n \n \tif ( buflen < len ) {\n+\t\tSAFE_FREE(buffer);\n \t\tif ( (buffer = SMB_MALLOC_ARRAY(unsigned char, len)) == NULL ) {\n \t\t\tDEBUG(0,(\"pack_tdc_domains: failed to alloc buffer!\\n\"));\n \t\t\tbuflen = -1;\n\n"}