{"category": "ham", "to_address": "perl6-internals@perl.org", "from_address": "Mark Glines <mark@glines.org>", "subject": "Re: [perl #42774] [PATCH] Configure.pl --gc=libc doesn't compile", "body": "On Fri, 27 Apr 2007 11:19:59 -0700\nAndy Spieherty (via RT)  wrote:\n> \"src/gc/dod.c\", line 462: undefined symbol:\n> PObj_bufstart_external_FLAG\n\nI hunted for this a bit lastnight, so I'm posting my progress.\n\nThe source lines in question are:\n\n461         /* the real external flag */\n462>>       if (PObj_bufstart_external_TEST(b))    <<\n463             PObj_external_SET(b);\n\nAfter some preprocessor nonsense, line 462 becomes:\n\n            if ((((b)->obj.flags) & PObj_bufstart_external_FLAG))\n\n\nPObj_bufstart_external_FLAG used to be defined in\ninclude/parrot/pobj.h, but it was removed in svn r10582:\n\nr10582 | leo | 2005-12-19 08:19:22 -0800 (Mon, 19 Dec 2005) | 9 lines\n\nBuffer allocation - Buffer flags\n\n* removed unused Buffer flags (bufstart_external, immobile)\n* create new PObj_is_COWable_FLAG for future generalization of COWed\nbuffers\n* use managed memory in PIO_reads\n\nPlease 'make clean' due to changed Buffer flags\n\n\nStrange that r10582 removed the flag itself, but not the accessors\n(PObj_bufstart_external_TEST and PObj_bufstart_external_SET).\n\n"}