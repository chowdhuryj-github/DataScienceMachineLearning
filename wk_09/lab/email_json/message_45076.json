{"category": "ham", "to_address": "\"Duncan Murdoch\" <murdoch@stats.uwo.ca>", "from_address": "\"Zack Weinberg\" <zackw@panix.com>", "subject": "Re: [R] evaluating variables in the context of a data frame", "body": "On 6/8/07, Duncan Murdoch  wrote:\n> > After a bit more experimentation I figured out that this does what I want:\n> >\n> >> h <- function(x, d) eval(substitute(x), d, parent.frame())\n> >\n> > but I don't understand why the substitute() helps, or indeed why it\n> > has any effect at all...\n>\n> Within the evaluation frame of h, x is a promise to evaluate an\n> expression.  substitute(x) extracts the expression.  If you just use x,\n> it gets evaluated in the frame from which h was called, rather than in a\n> frame created from d.\n\nThanks, that's helpful.  Could you comment on substitute() use in the\nmessage I just posted which contains the actual code I'm trying to get\nto work?  In addition to the question asked there, after your\nexplanation I still do not understand why\n\n  g <- ...\n  xyplot ( ..., groups=g, ... )\n\nshould refuse to find g, and the same thing with groups=substitute(g)\nworks (well, gets farther before blowing up).\n\nzw\n\n______________________________________________\nR-help@stat.math.ethz.ch mailing list\nhttps://stat.ethz.ch/mailman/listinfo/r-help\nPLEASE do read the posting guide http://www.R-project.org/posting-guide.html\nand provide commented, minimal, self-contained, reproducible code.\n\n"}