{"category": "ham", "to_address": "Andrew Yee <andrewjyee@gmail.com>", "from_address": "Marc Schwartz <marc_schwartz@comcast.net>", "subject": "Re: [R] more woes trying to convert a data.frame to a\n\tnumerical\tmatrix", "body": "On Wed, 2007-05-16 at 08:10 -0400, Andrew Yee wrote:\n> I have the following csv file:\n> \n> name,x,y,z\n> category,delta,gamma,epsilon\n> a,1,2,3\n> b,4,5,6\n> c,7,8,9\n> \n> I'd like to create a numeric matrix of just the numbers in this csv dataset.\n> \n> I've tried the following program:\n> \n> sample.data <- read.csv(\"sample.csv\")\n> numerical.data <- as.matrix(sample.data[-1,-1])\n> \n> However, print(numerical.data) returns what appears to be a matrix of\n> characters:\n> \n>   x   y   z\n> 2 \"1\" \"2\" \"3\"\n> 3 \"4\" \"5\" \"6\"\n> 4 \"7\" \"8\" \"9\"\n> \n> How do I force it to be numbers rather than characters?\n> \n> Thanks,\n> Andrew\n\nThe problem is that you have two rows which contain alpha entries. \n\nThe first row is treated as the header, but the second row is treated as\nactual data, thus overriding the numeric values in the subsequent rows.\n\nYou could use:\n\n  as.numeric(as.matrix(sample.data[-1, -1]))\n\nto coerce the matrix to numeric, or if you don't need the alpha entries,\nyou could modify the read.csv() call to something like:\n\n  read.csv(\"sample.csv\", header = FALSE, skip = 2, row.names = 1, \n           col.names = c(\"name\", \"x\", \"y\", \"z\")\n\nThis will skip the first two rows, set the first column to the row names\nand give you a data frame with numeric columns, which in most cases can\nbe treated as a numeric matrix and/or you could explicitly coerce it to\none.\n\nHTH,\n\nMarc Schwartz\n\n______________________________________________\nR-help@stat.math.ethz.ch mailing list\nhttps://stat.ethz.ch/mailman/listinfo/r-help\nPLEASE do read the posting guide http://www.R-project.org/posting-guide.html\nand provide commented, minimal, self-contained, reproducible code.\n\n"}