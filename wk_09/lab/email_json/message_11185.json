{"category": "ham", "to_address": "\"Sundar Dorai-Raj\" <sundar.dorai-raj@pdf.com>", "from_address": "\"Deepayan Sarkar\" <deepayan.sarkar@gmail.com>", "subject": "Re: [R] xyplot: Combining 'subscripts' and 'allow.multiple=T'", "body": "On 4/20/07, Sundar Dorai-Raj  wrote:>>> S\u00f8ren H\u00f8jsgaard said the following on 4/20/2007 3:57 AM:> > Dear all, Consider this plot> >> > xyplot(Sepal.Length + Sepal.Width ~ Petal.Length | Species,> >        data = iris, allow.multiple=T,  outer=F,> >        panel = function(x,y,...) {> >             panel.xyplot(x,y,...)> >        }> > )> >> > I want to *add* some things to each panel and what I want to add involves using the data for each panel, so I try to take this subset of data out with subscripts:> >> > xyplot(Sepal.Length + Sepal.Width ~ Petal.Length | Species,> >        data = iris, allow.multiple=T, outer=F,> >        panel = function(x,y,subscripts,...) {> >             panel.xyplot(x,y,...)> >             subiris <- iris[subscripts,] # Something using this ...> >        }> > )> >> > and then I get> > Error in NextMethod(\"[\") : argument \"subscripts\" is missing, with no default\nInteresting. I get\nError in panel.superpose(x, y, type = type, groups = groups, pch = pch,  :        argument \"subscripts\" is missing, with no default\nwhich is somewhat more informative.\n> > Does anyone know how to obtain this??> >> > By the way: The doc on xyplot says:  \"The value of subscripts becomes slightly more complicated when allow.multiple is in effect. Details can be found in the source code of the function latticeParseFormula.\". Sure.> >\nMaybe a better thing to say would be:\n    \"The documented value of 'subscripts' does not hold when     using an extended formula (with terms separated by '+').\"\nwhich while entirely useless, is completely accurate and at leastwouldn't give you anything to complain about. Would you prefer that?\nIn any case, you can always do something like\npanel = function(x, y, subscripts, ...) {    print(subscripts) ## debug},\nR is a programming language after all, and if you are not prepared touse it as such, may be you shouldn't be writing complicated panelfunctions.\n-Deepayan\n> > Best regards> > S\u00f8ren> >> >       [[alternative HTML version deleted]]> >> >> >> > ------------------------------------------------------------------------> >> > ______________________________________________> > R-help@stat.math.ethz.ch mailing list> > https://stat.ethz.ch/mailman/listinfo/r-help> > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html> > and provide commented, minimal, self-contained, reproducible code.>>> Hi, S\u00f8ren,>> Since you add \"subscripts\" to your panel arguments, you now need to> explicitly pass it on to panel.xyplot. Try:>>   xyplot(Sepal.Length + Sepal.Width ~ Petal.Length | Species,>         data = iris, allow.multiple=T, outer=F,>         panel = function(x,y,subscripts,...) {>              panel.xyplot(x,y,subscripts=subscripts,...)>              subiris <- iris[subscripts,] # Something using this ...> })>> HTH,>> --sundar>> ______________________________________________> R-help@stat.math.ethz.ch mailing list> https://stat.ethz.ch/mailman/listinfo/r-help> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html> and provide commented, minimal, self-contained, reproducible code.>\n______________________________________________R-help@stat.math.ethz.ch mailing listhttps://stat.ethz.ch/mailman/listinfo/r-helpPLEASE do read the posting guide http://www.R-project.org/posting-guide.htmland provide commented, minimal, self-contained, reproducible code.\n\n"}