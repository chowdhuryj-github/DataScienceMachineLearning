{"category": "ham", "to_address": "Birgit Lemcke <birgit.lemcke@systbot.uzh.ch>", "from_address": "Gavin Simpson <gavin.simpson@ucl.ac.uk>", "subject": "Re: [R] How to extract diagonals", "body": "On Wed, 2007-06-20 at 13:26 +0200, Birgit Lemcke wrote:\n> Hello,\n> \n> I am using Mac OS X on a power book and R 2.5.0\n> \n> I try to extract a diagonal from a dissimilarity matrix made with  \n> dsvdis, with this code:\n> \n> diag(DiTestRR)\n> \n> But I get this error message:\n> \n> Fehler in array(0, c(n, p)) : 'dim' spezifiziert ein zu groes Array\n> \n> english:\n> \n> Error in array(0, c(n, p)) : 'dim' specifies a too big array.\n> \n> Is there a limit to extract diagonals?\n\nThe returned object is not a matrix, but an object of class \"dist\" which\ndoesn't store the diagonals or the upper triangle of the dissimilarity\nmatrix to save memory. You need to convert the dist object to a matrix\nfirst, then extract the diagonal. But, as this shows:\n\n> require(labdsv)\n> ?dsvdis\n> data(bryceveg)\n> ?dsvdis\n> dis.bc <- dsvdis(bryceveg,index=\"bray/curtis\")\nWarning in symbol.For(\"dsvdis\") : 'symbol.For' is not needed: please\nremove it\n> diag(as.matrix(dis.bc))\n\nThis is meaningless as the diagonals are all zero, as they should be;\nthis is the distance between a site and itself.\n\n> \n> I hope somebody will help me!\n\nSo perhaps you could explain why you want the diagonal. It would be\neasier to just do:\n\ndiags <- rep(0, length = nrow(bryceveg))\n\nThat will be without the sample labels, but that is easily rectified\n\n> names(diags) <- rownames(bryceveg)\n> all.equal(diags, diag(as.matrix(dis.bc)))\n[1] TRUE\n\nSo you'll have to reformulate your question if this is not what you\nwanted.\n\nA word of warning, do not do diag(dis.bc)) on the above as it brought my\nLinux box to it's knees trying to do something silly - easily\nrecoverable, but beware.\n\nHTH\n\nG\n\n> \n> Greetings\n> \n> Birgit Lemcke\n\n-- \n%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%\n Gavin Simpson                 [t] +44 (0)20 7679 0522\n ECRC, UCL Geography,          [f] +44 (0)20 7679 0565\n Pearson Building,             [e] gavin.simpsonATNOSPAMucl.ac.uk\n Gower Street, London          [w] http://www.ucl.ac.uk/~ucfagls/\n UK. WC1E 6BT.                 [w] http://www.freshwaters.org.uk\n%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%\n\n______________________________________________\nR-help@stat.math.ethz.ch mailing list\nhttps://stat.ethz.ch/mailman/listinfo/r-help\nPLEASE do read the posting guide http://www.R-project.org/posting-guide.html\nand provide commented, minimal, self-contained, reproducible code.\n\n"}