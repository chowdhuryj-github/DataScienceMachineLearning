{"category": "ham", "to_address": "Marco Pesenti Gritti <mpg@redhat.com>", "from_address": "Bernardo Innocenti <bernie@codewiz.org>", "subject": "Re: [sugar] [PATCH] unfreeze DCON when Sugar UI is (almost) ready\n to\tshow", "body": "Marco Pesenti Gritti wrote:\n> Bernardo Innocenti wrote:\n>> Sorry, I sent the patches in reverse order.  Did you get\n>> the next one?\n> \n> Nope, and I can't find it in the archives... can you resend please?\n\nThat's probably because I had sent it to sugar@lists.develer.com.\nForce of habit...\n\n\n>From 6a0a13fd346b5c77dabb7368d495e880a3417527 Mon Sep 17 00:00:00 2001\nFrom: Bernardo Innocenti \nDate: Wed, 13 Jun 2007 20:33:42 -0400\nSubject: [PATCH] add set_dcon_freeze()\nOrganization: One Laptop Per Child\n\nThis is part of a masterplan to implement #621 .\n---\n hardwaremanager.py |   14 ++++++++++++++\n 1 files changed, 14 insertions(+), 0 deletions(-)\n\ndiff --git a/hardwaremanager.py b/hardwaremanager.py\nindex 3eeed82..478d428 100755\n--- a/hardwaremanager.py\n+++ b/hardwaremanager.py\n@@ -40,6 +40,7 @@ _KEYBOARD_BRIGHTNESS_KEY = '/sys/class/leds/olpc:keyboard/brightness'\n _DISPLAY_BRIGHTNESS_KEY = '/sys/class/backlight/dcon-bl/brightness'\n _DISPLAY_MODE_KEY = '/sys/devices/platform/dcon/output'\n _DCON_SOURCE_KEY = '/sys/devices/platform/dcon/source'\n+_DCON_FREEZE_KEY = '/sys/devices/platform/dcon/freeze'\n _POWER_STATE_KEY = '/sys/power/state'\n \n class HardwareManagerService(dbus.service.Object):\n@@ -58,6 +59,19 @@ class HardwareManagerService(dbus.service.Object):\n             logging.error('Cannot write DCON source to sysfs.')\n \n     @dbus.service.method(HARDWARE_MANAGER_INTERFACE,\n+                         in_signature='b', out_signature='')\n+    def set_dcon_freeze(self, frozen):\n+        try:\n+            f = open(_DCON_FREEZE_KEY, 'w')\n+            if frozen:\n+                f.write('1')\n+            else:\n+                f.write('0')\n+            f.close()\n+        except IOError:\n+            logging.error('Cannot write DCON freeze to sysfs.')\n+\n+    @dbus.service.method(HARDWARE_MANAGER_INTERFACE,\n                          in_signature='i', out_signature='')\n     def set_display_mode(self, mode):\n         if mode != COLOR_MODE and mode != BLACK_AND_WHITE_MODE:\n-- \n1.5.2\n\n\n\n\n\n-- \n   // Bernardo Innocenti\n \\X/  http://www.codewiz.org/\n_______________________________________________\nSugar mailing list\nSugar@lists.laptop.org\nhttp://lists.laptop.org/listinfo/sugar\n\n"}