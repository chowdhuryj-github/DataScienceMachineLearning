{"category": "ham", "to_address": "samba-cvs@samba.org", "from_address": "metze@samba.org", "subject": "svn commit: samba r23687 - in\n\tbranches/SAMBA_4_0/source/torture/rpc: .", "body": "Author: metze\nDate: 2007-07-03 16:27:35 +0000 (Tue, 03 Jul 2007)\nNew Revision: 23687\n\nWebSVN: http://websvn.samba.org/cgi-bin/viewcvs.cgi?view=rev&root=samba&rev=23687\n\nLog:\nnot every compiler supports __typeof__()\n\nmetze\nModified:\n   branches/SAMBA_4_0/source/torture/rpc/spoolss.c\n\n\nChangeset:\nModified: branches/SAMBA_4_0/source/torture/rpc/spoolss.c\n===================================================================\n--- branches/SAMBA_4_0/source/torture/rpc/spoolss.c\t2007-07-03 15:44:58 UTC (rev 23686)\n+++ branches/SAMBA_4_0/source/torture/rpc/spoolss.c\t2007-07-03 16:27:35 UTC (rev 23687)\n@@ -64,6 +64,8 @@\n \t}\\\n } while(0)\n \n+/* not every compiler supports __typeof__() */\n+#if (__GNUC__ >= 3)\n #define _CHECK_FIELD_SIZE(c,r,e,type) do {\\\n \tif (sizeof(__typeof__(c.e)) != sizeof(type)) { \\\n \t\tprintf(__location__ \":\" #c \".\" #e \"field is not \" #type \"\\n\"); \\\n@@ -76,6 +78,9 @@\n \t\tret = False; \\\n \t}\\\n } while(0)\n+#else\n+#define _CHECK_FIELD_SIZE(c,r,e,type) do {} while(0)\n+#endif\n \n #if 0 /* unused */\n #define COMPARE_UINT16(c,r,e) do {\\\n\n"}