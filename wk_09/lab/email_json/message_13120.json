{"category": "ham", "to_address": "samba-cvs@samba.org", "from_address": "abartlet@samba.org", "subject": "svn commit: samba r22475 - in\n\tbranches/SAMBA_4_0/source/lib/ldb/tools: .", "body": "Author: abartlet\nDate: 2007-04-23 07:23:45 +0000 (Mon, 23 Apr 2007)\nNew Revision: 22475\n\nWebSVN: http://websvn.samba.org/cgi-bin/viewcvs.cgi?view=rev&root=samba&rev=22475\n\nLog:\nRather than segfault, show the name of the malformed entry.\n\nAndrew Bartlett\n\nModified:\n   branches/SAMBA_4_0/source/lib/ldb/tools/ad2oLschema.c\n\n\nChangeset:\nModified: branches/SAMBA_4_0/source/lib/ldb/tools/ad2oLschema.c\n===================================================================\n--- branches/SAMBA_4_0/source/lib/ldb/tools/ad2oLschema.c\t2007-04-23 07:22:16 UTC (rev 22474)\n+++ branches/SAMBA_4_0/source/lib/ldb/tools/ad2oLschema.c\t2007-04-23 07:23:45 UTC (rev 22475)\n@@ -325,6 +325,12 @@\n \t\tchar *schema_entry = NULL;\n \t\tint j;\n \n+\t\tif (!name) {\n+\t\t\tprintf(\"Failed to find lDAPDisplayName for schema DN: %s\\n\", ldb_dn_get_linearized(msg->dn));\n+\t\t\tret.failures = 1;\n+\t\t\tcontinue;\n+\t\t}\n+\n \t\t/* We have been asked to skip some attributes/objectClasses */\n \t\tif (attrs_skip && str_list_check_ci(attrs_skip, name)) {\n \t\t\tret.skipped++;\n\n"}