{"category": "ham", "to_address": "beginners@perl.org, perl-beginners@moderators.isc.org", "from_address": "kenTk <ken@shail.co.uk>", "subject": "IO::Socket::INET client hangs on no server  on windoze", "body": "If there is no server or no connection this hangs for about 20 seconds\nand then crashes with the following error message.\nThe Timeout seems to make no difference and the 'warn' does not occur.\nIf works file with a good connection to a server.\nUsing 5.8.8 active perl.\nAnyone got any suggestions for making it return undef in an orderly\nfashion?\n(I have tested it on Linux and it seems to work fine both ways)\n\nuse strict;\nuse warnings;\nuse IO::Socket::INET;\n\nsub testSocket\n{\n  my $sock;\n  my $ok=0;\n  unless( $sock=IO::Socket::INET->new(192.168.5.41,\n                                 PeerPort => '21',\n                                 Proto    => 'tcp',\n                                 Timeout  =>'3'))\n  {  warn 'Cant connect'; }\n  else\n  { $sock->close;  $ok=1; }\n return $ok;\n}\n\nerror messages:\nNo errno EINPROGRESS at C:/Perl/site/lib/Errno.pm line 82\n        Errno::FETCH('Errno=ARRAY(0x1bc1790)', 'EINPROGRESS') called\nat C:/Perl/lib/IO/Socket.pm line 115\n        IO::Socket::connect('IO::Socket::INET=GLOB(0x35e55e0)',\n'\\x{2}\\x{0}\\x{0}\\x{15}\\x{c0}\\x{a8}\\x{5})\\x{0}\\x{0}\\x\n{0}\\x{0}\\x{0}\\x{0}\\x{0}\\x{0}') called at C:/Perl/lib/IO/Socket/INET.pm\nline 257\n        IO::Socket::INET::connect('IO::Socket::INET=GLOB(0x35e55e0)',\n'\\x{2}\\x{0}\\x{0}\\x{15}\\x{c0}\\x{a8}\\x{5})\\x{0}\\\nx{0}\\x{0}\\x{0}\\x{0}\\x{0}\\x{0}\\x{0}') called at C:/Perl/lib/IO/Socket/\nINET.pm line 232\n \nIO::Socket::INET::configure('IO::Socket::INET=GLOB(0x35e55e0)',\n'HASH(0x1b21384)') called at C:/Perl/lib/IO/\nSocket.pm line 48\n        IO::Socket::new('IO::Socket::INET', 'PeerAddr', 192.168.5.41,\n'PeerPort', 21, 'Proto', 'tcp', 'Timeout', 3,\n...) called at C:/Perl/lib/IO/Socket/INET.pm line 37\n        IO::Socket::INET::new('IO::Socket::INET', 'PeerAddr',\n192.168.5.41, 'PeerPort', 21, 'Proto', 'tcp', 'Timeout\n', 3, ...) called at spTools01.pl line 222\n        main::testSocket called at spTools01.pl line 61\n\n\n-- \nTo unsubscribe, e-mail: beginners-unsubscribe@perl.org\nFor additional commands, e-mail: beginners-help@perl.org\nhttp://learn.perl.org/\n\n\n"}