{"category": "ham", "to_address": "samba-cvs@samba.org", "from_address": "idra@samba.org", "subject": "svn commit: samba r23723 - in branches: SAMBA_3_0/source/libsmb\n\tSAMBA_3_0_26/source/libsmb", "body": "Author: idra\nDate: 2007-07-05 13:46:47 +0000 (Thu, 05 Jul 2007)\nNew Revision: 23723\n\nWebSVN: http://websvn.samba.org/cgi-bin/viewcvs.cgi?view=rev&root=samba&rev=23723\n\nLog:\n\nAlexander Larsson pointed me at a missing mapping in clierror.c\nWhen renaming a file across 2 filesystem a samba server returns\nNT_STATUS_NOT_SAME_DEVICE but thius is not translated to EXDEV,\nand the generic EINVAL is returned instead.\nThis should fix it, Jeremy or Derrel please check if this is ok.\n\n\nModified:\n   branches/SAMBA_3_0/source/libsmb/clierror.c\n   branches/SAMBA_3_0_26/source/libsmb/clierror.c\n\n\nChangeset:\nModified: branches/SAMBA_3_0/source/libsmb/clierror.c\n===================================================================\n--- branches/SAMBA_3_0/source/libsmb/clierror.c\t2007-07-05 10:32:51 UTC (rev 23722)\n+++ branches/SAMBA_3_0/source/libsmb/clierror.c\t2007-07-05 13:46:47 UTC (rev 23723)\n@@ -336,7 +336,9 @@\n #ifdef ECOMM\n \t{NT_STATUS_NET_WRITE_FAULT, ECOMM},\n #endif\n-\n+#ifdef EXDEV\n+\t{NT_STATUS_NOT_SAME_DEVICE, EXDEV},\n+#endif\n \t{NT_STATUS(0), 0}\n };\n \n\nModified: branches/SAMBA_3_0_26/source/libsmb/clierror.c\n===================================================================\n--- branches/SAMBA_3_0_26/source/libsmb/clierror.c\t2007-07-05 10:32:51 UTC (rev 23722)\n+++ branches/SAMBA_3_0_26/source/libsmb/clierror.c\t2007-07-05 13:46:47 UTC (rev 23723)\n@@ -331,7 +331,9 @@\n #ifdef ECOMM\n \t{NT_STATUS_NET_WRITE_FAULT, ECOMM},\n #endif\n-\n+#ifdef EXDEV\n+\t{NT_STATUS_NOT_SAME_DEVICE, EXDEV},\n+#endif\n \t{NT_STATUS(0), 0}\n };\n \n\n"}