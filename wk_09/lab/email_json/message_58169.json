{"category": "ham", "to_address": "samba-cvs@samba.org", "from_address": "metze@samba.org", "subject": "svn commit: samba r23653 - in branches/SAMBA_4_0/source/winbind: .", "body": "Author: metze\nDate: 2007-06-29 11:07:19 +0000 (Fri, 29 Jun 2007)\nNew Revision: 23653\n\nWebSVN: http://websvn.samba.org/cgi-bin/viewcvs.cgi?view=rev&root=samba&rev=23653\n\nLog:\nadd dummy implementation for all nss calls to let nsstest \npass against a samba4 winbind\n\nmetze\nModified:\n   branches/SAMBA_4_0/source/winbind/wb_samba3_cmd.c\n   branches/SAMBA_4_0/source/winbind/wb_samba3_protocol.c\n\n\nChangeset:\nModified: branches/SAMBA_4_0/source/winbind/wb_samba3_cmd.c\n===================================================================\n--- branches/SAMBA_4_0/source/winbind/wb_samba3_cmd.c\t2007-06-29 10:22:18 UTC (rev 23652)\n+++ branches/SAMBA_4_0/source/winbind/wb_samba3_cmd.c\t2007-06-29 11:07:19 UTC (rev 23653)\n@@ -662,3 +662,82 @@\n  done:\n \twbsrv_samba3_async_epilogue(status, s3call);\n }\n+\n+/* NSS calls */\n+\n+NTSTATUS wbsrv_samba3_getpwnam(struct wbsrv_samba3_call *s3call)\n+{\n+\tDEBUG(5, (\"wbsrv_samba3_getpwnam called\\n\"));\n+\ts3call->response.result = WINBINDD_ERROR;\n+\treturn NT_STATUS_OK;\n+}\n+\n+NTSTATUS wbsrv_samba3_getpwuid(struct wbsrv_samba3_call *s3call)\n+{\n+\tDEBUG(5, (\"wbsrv_samba3_getpwuid called\\n\"));\n+\ts3call->response.result = WINBINDD_ERROR;\n+\treturn NT_STATUS_OK;\n+}\n+\n+NTSTATUS wbsrv_samba3_setpwent(struct wbsrv_samba3_call *s3call)\n+{\n+\tDEBUG(5, (\"wbsrv_samba3_setpwent called\\n\"));\n+\ts3call->response.result = WINBINDD_OK;\n+\treturn NT_STATUS_OK;\n+}\n+\n+NTSTATUS wbsrv_samba3_getpwent(struct wbsrv_samba3_call *s3call)\n+{\n+\tDEBUG(5, (\"wbsrv_samba3_getpwent called\\n\"));\n+\ts3call->response.result = WINBINDD_ERROR;\n+\treturn NT_STATUS_OK;\n+}\n+\n+NTSTATUS wbsrv_samba3_endpwent(struct wbsrv_samba3_call *s3call)\n+{\n+\tDEBUG(5, (\"wbsrv_samba3_endpwent called\\n\"));\n+\ts3call->response.result = WINBINDD_OK;\n+\treturn NT_STATUS_OK;\n+}\n+\n+NTSTATUS wbsrv_samba3_getgrnam(struct wbsrv_samba3_call *s3call)\n+{\n+\tDEBUG(5, (\"wbsrv_samba3_getgrnam called\\n\"));\n+\ts3call->response.result = WINBINDD_ERROR;\n+\treturn NT_STATUS_OK;\n+}\n+\n+NTSTATUS wbsrv_samba3_getgrgid(struct wbsrv_samba3_call *s3call)\n+{\n+\tDEBUG(5, (\"wbsrv_samba3_getgrgid called\\n\"));\n+\ts3call->response.result = WINBINDD_ERROR;\n+\treturn NT_STATUS_OK;\n+}\n+\n+NTSTATUS wbsrv_samba3_getgroups(struct wbsrv_samba3_call *s3call)\n+{\n+\tDEBUG(5, (\"wbsrv_samba3_getgroups called\\n\"));\n+\ts3call->response.result = WINBINDD_ERROR;\n+\treturn NT_STATUS_OK;\n+}\n+\n+NTSTATUS wbsrv_samba3_setgrent(struct wbsrv_samba3_call *s3call)\n+{\n+\tDEBUG(5, (\"wbsrv_samba3_setgrent called\\n\"));\n+\ts3call->response.result = WINBINDD_OK;\n+\treturn NT_STATUS_OK;\n+}\n+\n+NTSTATUS wbsrv_samba3_getgrent(struct wbsrv_samba3_call *s3call)\n+{\n+\tDEBUG(5, (\"wbsrv_samba3_getgrent called\\n\"));\n+\ts3call->response.result = WINBINDD_ERROR;\n+\treturn NT_STATUS_OK;\n+}\n+\n+NTSTATUS wbsrv_samba3_endgrent(struct wbsrv_samba3_call *s3call)\n+{\n+\tDEBUG(5, (\"wbsrv_samba3_endgrent called\\n\"));\n+\ts3call->response.result = WINBINDD_OK;\n+\treturn NT_STATUS_OK;\n+}\n\nModified: branches/SAMBA_4_0/source/winbind/wb_samba3_protocol.c\n===================================================================\n--- branches/SAMBA_4_0/source/winbind/wb_samba3_protocol.c\t2007-06-29 10:22:18 UTC (rev 23652)\n+++ branches/SAMBA_4_0/source/winbind/wb_samba3_protocol.c\t2007-06-29 11:07:19 UTC (rev 23653)\n@@ -125,19 +125,41 @@\n \tcase WINBINDD_LIST_TRUSTDOM:\n \t\treturn wbsrv_samba3_list_trustdom(s3call);\n \n-\t\t/* Unimplemented commands */\n+\tcase WINBINDD_GETPWNAM:\n+\t\treturn wbsrv_samba3_getpwnam(s3call);\n \n-\tcase WINBINDD_GETPWNAM:\n \tcase WINBINDD_GETPWUID:\n+\t\treturn wbsrv_samba3_getpwuid(s3call);\n+\n+\tcase WINBINDD_SETPWENT:\n+\t\treturn wbsrv_samba3_setpwent(s3call);\n+\n+\tcase WINBINDD_GETPWENT:\n+\t\treturn wbsrv_samba3_getpwent(s3call);\n+\n+\tcase WINBINDD_ENDPWENT:\n+\t\treturn wbsrv_samba3_endpwent(s3call);\n+\n \tcase WINBINDD_GETGRNAM:\n+\t\treturn wbsrv_samba3_getgrnam(s3call);\n+\n \tcase WINBINDD_GETGRGID:\n+\t\treturn wbsrv_samba3_getgrgid(s3call);\n+\n \tcase WINBINDD_GETGROUPS:\n-\tcase WINBINDD_SETPWENT:\n-\tcase WINBINDD_ENDPWENT:\n-\tcase WINBINDD_GETPWENT:\n+\t\treturn wbsrv_samba3_getgroups(s3call);\n+\n \tcase WINBINDD_SETGRENT:\n+\t\treturn wbsrv_samba3_setgrent(s3call);\n+\n+\tcase WINBINDD_GETGRENT:\n+\t\treturn wbsrv_samba3_getgrent(s3call);\n+\n \tcase WINBINDD_ENDGRENT:\n-\tcase WINBINDD_GETGRENT:\n+\t\treturn wbsrv_samba3_endgrent(s3call);\n+\n+\t\t/* Unimplemented commands */\n+\n \tcase WINBINDD_PAM_CHAUTHTOK:\n \tcase WINBINDD_PAM_LOGOFF:\n \tcase WINBINDD_PAM_CHNG_PSWD_AUTH_CRAP:\n\n"}