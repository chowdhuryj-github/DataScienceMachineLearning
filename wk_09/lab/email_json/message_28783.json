{"category": "ham", "to_address": "samba-cvs@samba.org", "from_address": "metze@samba.org", "subject": "svn commit: samba r22825 - in branches/SAMBA_4_0/source/rpc_server:\n\t.", "body": "Author: metze\nDate: 2007-05-13 12:59:42 +0000 (Sun, 13 May 2007)\nNew Revision: 22825\n\nWebSVN: http://websvn.samba.org/cgi-bin/viewcvs.cgi?view=rev&root=samba&rev=22825\n\nLog:\nlet longhorn beta3 work with samba4\n\nif we return a zero assoc_group_id longhorn beta3 stops\nafter getting the bind_ack.\n\nmetze\nModified:\n   branches/SAMBA_4_0/source/rpc_server/dcerpc_server.c\n\n\nChangeset:\nModified: branches/SAMBA_4_0/source/rpc_server/dcerpc_server.c\n===================================================================\n--- branches/SAMBA_4_0/source/rpc_server/dcerpc_server.c\t2007-05-13 12:52:13 UTC (rev 22824)\n+++ branches/SAMBA_4_0/source/rpc_server/dcerpc_server.c\t2007-05-13 12:59:42 UTC (rev 22825)\n@@ -603,7 +603,8 @@\n \tpkt.pfc_flags = DCERPC_PFC_FLAG_FIRST | DCERPC_PFC_FLAG_LAST;\n \tpkt.u.bind_ack.max_xmit_frag = 0x2000;\n \tpkt.u.bind_ack.max_recv_frag = 0x2000;\n-\tpkt.u.bind_ack.assoc_group_id = call->pkt.u.bind.assoc_group_id;\n+\t/* we need to send a non zero assoc_group_id here to make longhorn happy, it also matches samba3 */\n+\tpkt.u.bind_ack.assoc_group_id = 0x12345678;\n \tif (iface) {\n \t\t/* FIXME: Use pipe name as specified by endpoint instead of interface name */\n \t\tpkt.u.bind_ack.secondary_address = talloc_asprintf(call, \"\\\\PIPE\\\\%s\", iface->name);\n\n"}