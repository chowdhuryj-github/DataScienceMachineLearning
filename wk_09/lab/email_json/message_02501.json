{"category": "ham", "to_address": "samba-cvs@samba.org", "from_address": "tridge@samba.org", "subject": "Rev 97: use event_loop_wait instead of while(1) in\n\thttp://samba.org/~tridge/ctdb", "body": "------------------------------------------------------------\nrevno: 97\nrevision-id: tridge@samba.org-20070411122143-e0d0192ca901c6f9\nparent: tridge@samba.org-20070411121946-c5d80408a49dda5b\ncommitter: Andrew Tridgell \nbranch nick: tridge\ntimestamp: Wed 2007-04-11 22:21:43 +1000\nmessage:\n  use event_loop_wait instead of while(1)\nmodified:\n  direct/ctdbd.c                 ctdbd.c-20070411085044-dqmhr6mfeexnyt4m-1\n=== modified file 'direct/ctdbd.c'\n--- a/direct/ctdbd.c\t2007-04-11 12:19:46 +0000\n+++ b/direct/ctdbd.c\t2007-04-11 12:21:43 +0000\n@@ -129,11 +129,9 @@\n \t/* start the protocol running */\n \tret = ctdb_start(ctdb);\n \n-\twhile (1) {\n-\t\tevent_loop_once(ev);\n-\t}\n+\tevent_loop_wait(ev);\n        \n \t/* shut it down */\n-\ttalloc_free(ctdb);\n+\ttalloc_free(ev);\n \treturn 0;\n }\n\n"}