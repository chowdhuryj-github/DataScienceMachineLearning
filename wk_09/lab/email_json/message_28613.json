{"category": "ham", "to_address": "samba-cvs@samba.org", "from_address": "jpeach@samba.org", "subject": "svn commit: samba r22820 - in branches/SAMBA_3_0/source: .", "body": "Author: jpeach\nDate: 2007-05-13 04:08:26 +0000 (Sun, 13 May 2007)\nNew Revision: 22820\n\nWebSVN: http://websvn.samba.org/cgi-bin/viewcvs.cgi?view=rev&root=samba&rev=22820\n\nLog:\nMove FAM libraries from smbd to vfs_fam_notify. Should fix bugzilla #4426.\n\nModified:\n   branches/SAMBA_3_0/source/Makefile.in\n   branches/SAMBA_3_0/source/configure.in\n\n\nChangeset:\nModified: branches/SAMBA_3_0/source/Makefile.in\n===================================================================\n--- branches/SAMBA_3_0/source/Makefile.in\t2007-05-12 19:53:47 UTC (rev 22819)\n+++ branches/SAMBA_3_0/source/Makefile.in\t2007-05-13 04:08:26 UTC (rev 22820)\n@@ -1620,7 +1620,7 @@\n \n bin/notify_fam.@SHLIBEXT@: $(VFS_NOTIFY_FAM_OBJ)\n \t@echo \"Building plugin $@\"\n-\t@$(SHLD_MODULE) $(VFS_NOTIFY_FAM_OBJ)\n+\t@$(SHLD_MODULE) $(VFS_NOTIFY_FAM_OBJ) @SMB_FAM_LIBS@\n \n bin/readahead.@SHLIBEXT@: $(VFS_READAHEAD_OBJ)\n \t@echo \"Building plugin $@\"\n\nModified: branches/SAMBA_3_0/source/configure.in\n===================================================================\n--- branches/SAMBA_3_0/source/configure.in\t2007-05-12 19:53:47 UTC (rev 22819)\n+++ branches/SAMBA_3_0/source/configure.in\t2007-05-13 04:08:26 UTC (rev 22820)\n@@ -2645,13 +2645,13 @@\n         # On IRIX, libfam requires libC, but other FAM implementations\n \t# might not need it.\n         AC_CHECK_LIB(fam, FAMOpen2,\n-            [samba_cv_HAVE_LIBFAM=yes; samba_fam_libs=\"-lfam\"],\n+            [samba_cv_HAVE_LIBFAM=yes; SMB_FAM_LIBS=\"-lfam\"],\n             [samba_cv_HAVE_LIBFAM=no])\n \n         if test x\"$samba_cv_HAVE_LIBFAM\" = x\"no\" ; then\n             samba_fam_xtra=-lC\n             AC_CHECK_LIB_EXT(fam, samba_fam_xtra, FAMOpen2,\n-                [samba_cv_HAVE_LIBFAM=yes; samba_fam_libs=\"-lfam -lC\"],\n+                [samba_cv_HAVE_LIBFAM=yes; SMB_FAM_LIBS=\"-lfam -lC\"],\n                 [samba_cv_HAVE_LIBFAM=no])\n             unset samba_fam_xtra\n         fi\n@@ -2671,6 +2671,8 @@\n     fi\n fi\n \n+AC_SUBST(SMB_FAM_LIBS)\n+\n #################################################\n # Check for DMAPI interfaces in libdm/libjfsdm/libxsdm\n \n@@ -6376,7 +6378,7 @@\n \n # Stuff the smbd-only libraries at the end of the smbd link\n # path (if we have them).\n-SMBD_LIBS=\"$samba_fam_libs $samba_dmapi_libs\"\n+SMBD_LIBS=\"$samba_dmapi_libs\"\n AC_SUBST(SMBD_LIBS)\n \n AC_OUTPUT(include/stamp-h Makefile script/findsmb smbadduser script/gen-8bit-gap.sh script/installbin.sh script/uninstallbin.sh)\n\n"}