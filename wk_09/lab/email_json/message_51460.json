{"category": "ham", "to_address": "\"Christopher R. Hertel\" <crh@ubiqx.mn.org>", "from_address": "simo <idra@samba.org>", "subject": "Re: Preserving NTFS permissions.", "body": "On Wed, 2007-06-20 at 11:44 -0500, Christopher R. Hertel wrote:\n> I'm working with someone who has a large-scale deployment using Samba 3 to\n> serve lots of Windows clients.  They're running into a small problem with\n> permission settings.\n> \n> Basically, the default mappings that Samba performs in order to store\n> permissions (the stuff done in dosmode.c, mostly) is \"changing\" the bits\n> that the end-users are setting.  They'd like to more closely preserve the\n> NTFS permission settings.\n\nIf you mean the dos attributes, you should really go with the classic:\nstore dos attributes = yes\nmap read only = no\nmap archive = no\nmap system = no\nmap hidden = no\n\nand let samba store the bits in an EA.\nThis will get off the way the annoying manipulation of the x bits and\nthe r for the user).\n\n> It appears as though this is something that could be done using the VFS\n> layer.  In particular, I should be able to store the full NTFS ACE in an EA.\n>  Something I read suggests that Samba 4 is already doing this.\n> \n> Does anyone have any experience setting this up under Samba 3?\n\nNot sure we can really do this with the current samba3 VFS\ninfrastructure. In any case storing the ACL in an EA is not the problem,\nthe problem is then enforcing them.\n\nSimo.\n\n-- \nSimo Sorce\nSamba Team GPL Compliance Officer\nemail: idra@samba.org\nhttp://samba.org\n\n"}