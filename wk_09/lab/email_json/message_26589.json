{"category": "ham", "to_address": "samba-technical <samba-technical@lists.samba.org>", "from_address": "derrell@samba.org", "subject": "readahead() which is Linux-only vs. posix_fadvise()", "body": "As I was working on a solution to the fact that my system provides the\nreadahead() function but not a declaration for that function, I discovered\nthat readahead() is documented as:\n\n CONFORMING TO\n       The  readahead()  system  call is Linux specific, and its use should be\n       avoided in portable applications.\n\nGiven this, it is possible that different Linux versions may conceivably use\nslightly different prototypes for readahead(), so providing a declaration in\nlib/replace is somewhat dangerous.\n\nIn researching this, I discovered what appears to be a POSIX replacement.  It\nlooks like readahead is equivalent to posix_fadvise(..., POSIX_FADV_WILLNEED).\n\nThe only place that readahead() is used, I think, is in vfs_readahead.c.\nIt might make sense for the maintainer of this module to look into using\nposix_fadvise() instead of readahead().\n\nCheers,\n\nDerrell\n\n"}