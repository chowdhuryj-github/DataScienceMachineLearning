{"category": "ham", "to_address": "Perl beginners <beginners@perl.org>", "from_address": "\"John W. Krahn\" <krahnj@telus.net>", "subject": "Re: read a list of subdirectories", "body": "Luba Pardo wrote:\n> Dear list,\n\nHello,\n\n> I want to parse through some files of a list of directories. Every \n> directory\n> have the same files, which means that I can make a loop and repeat the\n> process for each directory. I managed to write the code to process the \n> files\n> of a single directory but I do not exaclty how to read a list of \n> directories\n> and open one by one. I can only print the directories that are in the\n> parental directory , but I can't make the script to open the directory and\n> read the list of files. I do not what is the function to use to either open\n> everydir or read the 'subdirectories'. I hope someone can help\n> The beginning of the script looks like:\n> \n> #! /usr/bin/perl\n> use strict;\n> use warnings;\n> \n> my $pwd=$ENV{'PWD'};\n\nuse Cwd;\n\nmy $pwd = cwd;\n\n\n>  my @filedir =<*ctt>;\n\nYou are populating @filedir with all entries ending in 'ctt', including those \nthat are *not* subdirectories.\n\n\n>  foreach my $filedir (@filedir) {\n>      opendir ($filedir) || die  \"can't \\n\";\n\nperldoc -f opendir\n\nYou need a directory handle (same as open() needs a filehandle.)  You should \nalso include the $! variable in the error message so you know *why* it failed.\n\n\n>       my @f = ;\n\nYou are populating @f with all entries beginning in 'mlc' in the *current* \n*directory*, not in the $filedir directory.\n\n\n>       foreach my $f(@f) {\n>    open (IN,\"$f\") or die \"$!\\n\";\n\nperldoc -q quoting\n\nYou are trying to open the file $f in the *current* *directory*, not in the \n$filedir directory.\n\n\n>    print \"$f\\n\";\n>    my @a2= ();\n>   ...\n\nYou *may* want someting like this (UNTESTED):\n\n#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nuse Cwd;\n\nmy $pwd = cwd;\n\nfor my $filedir ( grep -d, <*ctt> ) {\n     for my $f ( grep -f, <$filedir/mlc*> ) {\n         open my $IN, '<', $f or die \"Cannot open '$f' $!\\n\";\n         print \"$f\\n\";\n         my @a2 = <$IN>;\n         ...\n\n\n\n\nJohn\n-- \nPerl isn't a toolbox, but a small machine shop where you\ncan special-order certain sorts of tools at low cost and\nin short order.                            -- Larry Wall\n\n-- \nTo unsubscribe, e-mail: beginners-unsubscribe@perl.org\nFor additional commands, e-mail: beginners-help@perl.org\nhttp://learn.perl.org/\n\n\n"}