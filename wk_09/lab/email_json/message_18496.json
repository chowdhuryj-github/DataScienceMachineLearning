{"category": "ham", "to_address": "samba-cvs@samba.org", "from_address": "tridge@samba.org", "subject": "Rev 210: fixed some warnings in http://samba.org/~tridge/ctdb", "body": "------------------------------------------------------------\nrevno: 210\nrevision-id: tridge@samba.org-20070428093549-hn7t2tsfo8e3ru1m\nparent: tridge@samba.org-20070428085758-hq0l44zjdfogmk23\ncommitter: Andrew Tridgell \nbranch nick: tridge\ntimestamp: Sat 2007-04-28 11:35:49 +0200\nmessage:\n  fixed some warnings\nmodified:\n  common/ctdb_client.c           ctdb_client.c-20070411010216-3kd8v37k61steeya-1\n  common/ctdb_daemon.c           ctdb_daemon.c-20070409200331-3el1kqgdb9m4ib0g-1\n  tcp/tcp_io.c                   tcp_io.c-20061128004937-x70q1cu5xzg5g2tm-3\n  tests/ctdb_messaging.c         ctdb_messaging.c-20070411034205-6d6vne56pbih2x1p-1\n=== modified file 'common/ctdb_client.c'\n--- a/common/ctdb_client.c\t2007-04-28 08:50:32 +0000\n+++ b/common/ctdb_client.c\t2007-04-28 09:35:49 +0000\n@@ -119,8 +119,8 @@\n \t\tgoto done;\n \t}\n \tif (cnt != hdr->length) {\n-\t\tctdb_set_error(ctdb, \"Bad header length %d expected %d in client\\n\", \n-\t\t\t       hdr->length, cnt);\n+\t\tctdb_set_error(ctdb, \"Bad header length %u expected %u in client\\n\", \n+\t\t\t       (unsigned)hdr->length, (unsigned)cnt);\n \t\tgoto done;\n \t}\n \n\n=== modified file 'common/ctdb_daemon.c'\n--- a/common/ctdb_daemon.c\t2007-04-28 08:50:32 +0000\n+++ b/common/ctdb_daemon.c\t2007-04-28 09:35:49 +0000\n@@ -498,13 +498,14 @@\n \tclient->ctdb->status.client_packets_recv++;\n \n \tif (cnt < sizeof(*hdr)) {\n-\t\tctdb_set_error(client->ctdb, \"Bad packet length %u in daemon\\n\", cnt);\n+\t\tctdb_set_error(client->ctdb, \"Bad packet length %u in daemon\\n\", \n+\t\t\t       (unsigned)cnt);\n \t\treturn;\n \t}\n \thdr = (struct ctdb_req_header *)data;\n \tif (cnt != hdr->length) {\n \t\tctdb_set_error(client->ctdb, \"Bad header length %u expected %u\\n in daemon\", \n-\t\t\t       hdr->length, cnt);\n+\t\t\t       (unsigned)hdr->length, (unsigned)cnt);\n \t\treturn;\n \t}\n \n\n=== modified file 'tcp/tcp_io.c'\n--- a/tcp/tcp_io.c\t2007-04-11 18:12:15 +0000\n+++ b/tcp/tcp_io.c\t2007-04-28 09:35:49 +0000\n@@ -43,13 +43,13 @@\n \t}\n \n \tif (cnt < sizeof(*hdr)) {\n-\t\tctdb_set_error(in->ctdb, \"Bad packet length %d\\n\", cnt);\n+\t\tctdb_set_error(in->ctdb, \"Bad packet length %u\\n\", (unsigned)cnt);\n \t\treturn;\n \t}\n \thdr = (struct ctdb_req_header *)data;\n \tif (cnt != hdr->length) {\n-\t\tctdb_set_error(in->ctdb, \"Bad header length %d expected %d\\n\", \n-\t\t\t       hdr->length, cnt);\n+\t\tctdb_set_error(in->ctdb, \"Bad header length %u expected %u\\n\", \n+\t\t\t       (unsigned)hdr->length, (unsigned)cnt);\n \t\treturn;\n \t}\n \n\n=== modified file 'tests/ctdb_messaging.c'\n--- a/tests/ctdb_messaging.c\t2007-04-27 14:31:45 +0000\n+++ b/tests/ctdb_messaging.c\t2007-04-28 09:35:49 +0000\n@@ -36,7 +36,8 @@\n static void message_handler(struct ctdb_context *ctdb, uint64_t srvid, \n \t\t\t\t TDB_DATA data, void *private_data)\n {\n-\tprintf(\"client vnn:%d received a message to srvid:%lld [%s]\\n\",ctdb_get_vnn(ctdb),srvid,data.dptr);\n+\tprintf(\"client vnn:%d received a message to srvid:%llu [%s]\\n\",\n+\t       ctdb_get_vnn(ctdb), (unsigned long long)srvid, data.dptr);\n \tfflush(stdout);\n }\n \n\n"}