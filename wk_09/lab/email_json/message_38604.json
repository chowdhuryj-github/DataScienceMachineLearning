{"category": "ham", "to_address": "\"Young Cho\" <young.stat@gmail.com>", "from_address": "\"jim holtman\" <jholtman@gmail.com>", "subject": "Re: [R] summing up colum values for unique IDs when multiple ID's\n\texist in data frame", "body": "try this:\n\n> x <- \" ID    val\n+ 1  A  0.100\n+ 2  B  0.001\n+ 3  C -0.100\n+ 4  A  0.200\n+ \"\n> x <- read.table(textConnection(x), header=TRUE)\n> (z <- tapply(x$val, x$ID, sum))\n     A      B      C\n 0.300  0.001 -0.100\n> data.frame(ID=names(z), val=z)\n  ID    val\nA  A  0.300\nB  B  0.001\nC  C -0.100\n>\n\n\n\nOn 5/29/07, Young Cho  wrote:\n>\n> I have data.frame's with IDs and multiple columns. B/c some of IDs showed\n> up\n> more than once, I need sum up colum values to creat a new dataframe with\n> unique ids.\n>\n> I hope there are some cheaper ways of doing it...  Because the dataframe\n> is\n> huge, it takes almost an hour to do the task.  Thanks so much in advance!\n>\n> Young\n>\n> # -------------------------  examples are here and sum.dup.r is at the\n> bottom.\n>\n> > x = data.frame(ID = c('A','B','C','A'), val=c(0.1,0.001,-0.1,0.2))\n> > x\n> ID    val\n> 1  A  0.100\n> 2  B  0.001\n> 3  C -0.100\n> 4  A  0.200\n> > sum.dup(x)\n> ID    val\n> 1  A  0.300\n> 2  B  0.001\n> 3  C -0.100\n>\n>\n>\n> sum.dup <- function( x ){\n>\n>        d.row = which(duplicated(x$ID))\n>        if( length(d.row) > 0){\n>                id = x$ID[d.row]\n>                com.val = x[-d.row,]\n>                for(i in 1:length(id)){\n>                        s = sum(x$val[ x$ID == id[i] ])\n>                        com.val$val[ com.val$ID == id[i] ] = s\n>                }\n>                ix = sort(as.character(com.val[,1]),index.return=T)\n>                return(com.val[ix$ix,])\n>        }else{\n>                ix = sort(as.character(x[,1]),index.return=T)\n>                return(x[ix$ix,])\n>        }\n>\n> }\n>\n>        [[alternative HTML version deleted]]\n>\n> ______________________________________________\n> R-help@stat.math.ethz.ch mailing list\n> https://stat.ethz.ch/mailman/listinfo/r-help\n> PLEASE do read the posting guide\n> http://www.R-project.org/posting-guide.html\n> and provide commented, minimal, self-contained, reproducible code.\n>\n\n\n\n-- \nJim Holtman\nCincinnati, OH\n+1 513 646 9390\n\nWhat is the problem you are trying to solve?\n\n\t[[alternative HTML version deleted]]\n\n______________________________________________\nR-help@stat.math.ethz.ch mailing list\nhttps://stat.ethz.ch/mailman/listinfo/r-help\nPLEASE do read the posting guide http://www.R-project.org/posting-guide.html\nand provide commented, minimal, self-contained, reproducible code.\n\n"}