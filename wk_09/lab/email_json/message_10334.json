{"category": "ham", "to_address": "samba-cvs@samba.org", "from_address": "tridge@samba.org", "subject": "Rev 168: merged fix from volker (thanks!) in\n\thttp://samba.org/~tridge/ctdb", "body": "------------------------------------------------------------\nrevno: 168\nrevision-id: tridge@samba.org-20070419215034-109370d61422c5cb\nparent: tridge@samba.org-20070419214737-2566236086cf5a53\nparent: vl@samba.org-20070419154445-12p81zc78s9wz4a5\ncommitter: Andrew Tridgell \nbranch nick: tridge\ntimestamp: Fri 2007-04-20 07:50:34 +1000\nmessage:\n  merged fix from volker (thanks!)\nmodified:\n  common/ctdb_daemon.c           ctdb_daemon.c-20070409200331-3el1kqgdb9m4ib0g-1\n    ------------------------------------------------------------\n    merged: vl@samba.org-20070419154445-12p81zc78s9wz4a5\n    parent: tridge@samba.org-20070419083149-bc28d74eb9e5df7b\n    committer: Volker Lendecke \n    branch nick: vl-ctdb\n    timestamp: Thu 2007-04-19 17:44:45 +0200\n    message:\n      The remote node needs to get the IMMEDIATE_MIGRATION flag to actually send the\n      record\n=== modified file 'common/ctdb_daemon.c'\n--- a/common/ctdb_daemon.c\t2007-04-19 21:47:37 +0000\n+++ b/common/ctdb_daemon.c\t2007-04-19 21:50:34 +0000\n@@ -361,6 +361,7 @@\n \tcall->key = key;\n \tcall->call_data.dptr = c->data + c->keylen;\n \tcall->call_data.dsize = c->calldatalen;\n+\tcall->flags = c->flags;\n \n \tif (header.dmaster == ctdb->vnn && !(ctdb->flags & CTDB_FLAG_SELF_CONNECT)) {\n \t\tstate = ctdb_call_local_send(ctdb_db, call, &header, &data);\n\n"}