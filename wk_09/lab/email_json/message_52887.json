{"category": "ham", "to_address": "beginners@perl.org", "from_address": "Alma <almatirkey@gmail.com>", "subject": "Database connection using cfg file", "body": "Hi All,\n\nI wanted to make a database connection using the values provided\nin .cfg file\n\nmy.cfg\n***********\n\ndbname=xyz\nuser=abc\npasswd=abc123\n\n***********\n\nmy perl package which need to read the my.cfg file & make the\nconnection\n\nmypackage\n************\nsub new(){\nmy @arr=();\n\n        readcfg();\n\n        #foreach  (@arr) {\n        #print \"$_ \\n\";\n        #print \"for loop\";\n        #}\n\n       $dbname=@arr[0];\n       $usr = @arr[1];\n       $pwd ||= @arr[2];\n#       ($self) = {};\n#       bless($self);\n       $databasehandle = DBI->connect(\"DBI:Pg:dbname=$dbname\",$usr,\n$pwd,{PrintError =>1});\n\n       if (!$databasehandle){\n               print \"Database connection is not estabilished\";\n               exit;\n       }\n\n\n\n        sub readcfg {\n\n               # $cfgpath = shift;\n                open(FH,\") {\n                        chomp $line;\n                         next if ($line =~ /^\\s*#/);\n                         next if ($line =~ /^\\s*$/);\n                        $line =~ s/#.*$//;\n                }\n\n($Key,$Val) = ($line =~ /^\\s*(\\S+)\\s*=\\s*(.*\\S)\\s*$/);\n                 push @arr,$Val;\n                return @arr;\n}\n\nreturn($self);\n}\n\n\n---------\n\nI am getting an error\n\n(DBI:connect ' ' ) failed .Fatal database 'root' doesn't exist.\n\nCan any one suggest me how can we read the values from conf file & get\nthe database connection .\n& i need to call the database handle to call the subroutine.\n\nThanks in advance.\n\n\n-- \nTo unsubscribe, e-mail: beginners-unsubscribe@perl.org\nFor additional commands, e-mail: beginners-help@perl.org\nhttp://learn.perl.org/\n\n\n"}