{"category": "ham", "to_address": "samba-cvs@samba.org", "from_address": "tridge@samba.org", "subject": "Rev 477: fixed error handling in event scripts in\n\thttp://samba.org/~tridge/ctdb", "body": "------------------------------------------------------------\nrevno: 477\nrevision-id: tridge@samba.org-20070606012706-wlzgtpwgr0hfrifu\nparent: tridge@samba.org-20070606011324-nse5zhhtb8xalu59\ncommitter: Andrew Tridgell \nbranch nick: tridge\ntimestamp: Wed 2007-06-06 11:27:06 +1000\nmessage:\n  fixed error handling in event scripts\nmodified:\n  config/events                  events-20070529030121-04fjh63cxfh8v1pj-1\n=== modified file 'config/events'\n--- a/config/events\t2007-06-04 13:54:46 +0000\n+++ b/config/events\t2007-06-06 01:27:06 +0000\n@@ -39,8 +39,8 @@\n # call all application or local scripts\n [ -d /etc/ctdb/events.d ] && {\n     # only accept scripts of the form NN.name\n-    /bin/ls /etc/ctdb/events.d | /bin/grep '^[0-9]*\\.\\w*$' | sort -n |\n-    while read SCRIPT; do\n+    scripts=`/bin/ls /etc/ctdb/events.d | /bin/grep '^[0-9]*\\.\\w*$' | sort -n`\n+    for SCRIPT in $scripts; do\n \t[ -x /etc/ctdb/events.d/$SCRIPT ] && {\n \t    /etc/ctdb/events.d/$SCRIPT $cmd \"$1\" \"$2\" \"$3\" || exit 1\n \t}\n\n"}