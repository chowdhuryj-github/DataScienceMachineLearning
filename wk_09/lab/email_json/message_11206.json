{"category": "ham", "to_address": "Andy Spieherty <spiehera@lafayette.edu>", "from_address": "Joshua Isom <jrisom@gmail.com>", "subject": "Re: [perl #42620] PGE 'Out of memory' panics.", "body": "\nOn Apr 20, 2007, at 9:18 AM, Andy Spieherty wrote:\n\n> On Thu, 19 Apr 2007, Patrick R. Michaud via RT wrote:\n>\n>> On Thu, Apr 19, 2007 at 11:47:55AM -0700, Andy Spieherty wrote:\n>\n>>> t/compilers/pge/p5regex/p5rx.............Parrot VM: PANIC: Out of \n>>> mem!\n>\n>> I believe that both of these tests are currently being run with\n>> the -G flag, which should mean that Parrot is not doing any garbage\n>> collection:\n>>\n>>     $ head -2 t/compilers/pge/p5regex/p5rx.t\n>>     #!./parrot -G\n>\n>> Given the number of tests that run, I'm not too surprised\n>> that they run out of memory when -G is present.\n>\n> Ok, that makes sense.\n>\n>> This does prompt the question of removing -G from the tests,\n>> but the last time I looked into doing this (about a month ago) Parrot\n>> still had intermittent GC errors that would cause random\n>> failures in the tests.  After a lot of discussion on the mailing\n>> list and in #parrot I think it was decided that running the\n>> tests with -G was preferable to having random test failures\n>> showing up in the pge tests due to GC problems in Parrot.\n>\n> That's fair enough.  With -G, I get to test 395 in p5regex/p5rx.t.\n> Without the -G, I memory usage still grows, and I only get to test 185\n> before getting the PANIC.  Running with --gc-debug, I only got to test\n> 190. (The exact test number seems to fluctuate from run to run.  \n> However,\n> since each test run of p5rx.t with garbage collection enabled takes \n> over 7\n> minutes, I haven't done a lot of runs.)\n>\n\nAs far as I know, --gc-debug doesn't actually do anything at all.  How \nmuch ram do you have available when you start running the test?  You \nmight be doing a lot of swapping in and out of processes which is \nslowing things down a lot.\n\n>> Hope this helps, and thanks for the report!\n>>\n>> (Should we close this ticket?)\n>\n> That's entirely up to you.\n>\n> -- \n>     Andy Spieherty\t\tspiehera@lafayette.edu\n>\n\n"}