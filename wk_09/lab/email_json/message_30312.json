{"category": "ham", "to_address": "Perl Beginners <beginners@perl.org>", "from_address": "\"John W. Krahn\" <krahnj@telus.net>", "subject": "Re: qx() won't accept over (about) 128,000 characters", "body": "Jameson C. Burt wrote:\n> Within Perl, I construct programs in other programming languages \n> and submit the result to a Unix (Linux or IBM AIX) operating system\n> with 2GB to 8GB memory.\n> I submit such a program to the operating system using Perl's\n>   qx()\n> Unfortunately, giving qx() over 128,420 characters (about and can vary\n> by a few characters) then returns nothing.\n> Yet, giving qx() 128,000 characters gets properly executed by the\n> operating system.\n> \n> Following is an example, \n> expedited from my original test that actually had 1270 lines.\n> Only with fewer lines (eg, replace 1370 by 1269) will this program output\n>    \"Last line of large program!\"\n> Here's the program that constructs \n> and tries giving qx() over 128,000 characters of code:\n>    #!/usr/bin/perl -w\n>    $shorty = ' ' x 99   .   '#'   .   \"\\n\" ;  #100/101 characters\n>    #Repeat 1370 lines of $shorty into @manylines:\n>    # foreach $i (0..1269)  {$manylines[$i] = $shorty} ;  #Succeeds\n>    foreach $i (0..1370)    {$manylines[$i] = $shorty} ;\n>    $manylines[$#manylines + 1] =  'echo \"Last Line of large program!\"' ;\n\nYou can simplify that to:\n\nmy @manylines = ( ( ' ' x 99 . \"#\\n\" ) x 1371, 'echo \"Last Line of large\nprogram!\"' );\n\n\n>    print qx(@manylines) ;\n>    # system(qq(@manylines)) ;   #Same problem.\n\nYour line of code is a comment (The # character starts a comment in shell)\nwhich is why nothing is returned:\n\n$ perl -e'\nmy @manylines = ( ( \" \" x 99 . \"#\\n\" ) x 1371, q[echo \"Last Line of large\nprogram!\"] );\nprint qx[@manylines];\n' | wc\n      0       0       0\n$ perl -e'\nmy @manylines = ( ( \" \" x 99 . \"\\n\" ) x 1371, q[echo \"Last Line of large\nprogram!\"] );\nprint qx[@manylines];\n' | wc\n      1       5      28\n$ perl -e'\nmy @manylines = ( ( \" \" x 99 . \"\\n\" ) x 1371, q[echo \"Last Line of large\nprogram!\"] );\nprint qx[@manylines];\n'\nLast Line of large program!\n\n\n> However, appending the following lines to the above code\n> will properly execute those 1370  lines.  \n>    open(OUTFILE, \">/tmp/zz.out\") ;\n>    print(OUTFILE  @manylines) ;\n>    close(OUTFILE) ;\n>    system(\"bash /tmp/zz.out\") ;\n> While I can run this latter code, it both adds more code \n> and adds a file to the operating system's filesystem.\n> \n> Can qx() accept large numbers of characters,\n> perhaps using some simple technique?\n\nWhen it is saved as a file the shell (bash) ignores the comment lines.\n\n\n\nJohn\n-- \nPerl isn't a toolbox, but a small machine shop where you can special-order\ncertain sorts of tools at low cost and in short order.       -- Larry Wall\n\n-- \nTo unsubscribe, e-mail: beginners-unsubscribe@perl.org\nFor additional commands, e-mail: beginners-help@perl.org\nhttp://learn.perl.org/\n\n\n"}