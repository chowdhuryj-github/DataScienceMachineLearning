{"category": "ham", "to_address": "\"Don MacQueen\" <macq@llnl.gov>", "from_address": "\"Michelle Wynn\" <mlwynn@indiana.edu>", "subject": "Re: [R] data.frame and subsetting problem", "body": "Yes, the problem I have is finding away to get rid of the extra levels I do\nnot need in the subset.\n\nWhat Don posted works for my needs.  I will also read up on factors/levels.\n\nThanks for all suggestions and sorry my example had and error (x2 was\nsupposed to y).\n\nMichelle\n\nOn 6/16/07, Don MacQueen  wrote:\n>\n> I too have no idea what the object named \"x2\" is, or where it came\n> from. Particularly since after your use of subset(), the new\n> dataframe, y, *does* include a row where V2 = 'color'.\n>\n> But I have a guess at what your problem may be.\n>\n> In your original dataframe (\"x\") the first and second columns are\n> factors, because that is the default behavior of read.delim().\n>\n> Factors have levels. The second column has 5 levels. Try\n>    levels(x$V2)\n> to see.\n>\n> When you use subset(), you get fewer rows, but the fact that there\n> were five levels is retained.\n>\n> Then, the plot function sees that that there are five levels, and\n> includes an empty place-holder for the level(s) with no data.\n>\n> Try something like\n>     y <- data.frame(subset(x, V1 == \"shirt\"))\n>     y$V2 <- factor(unique(format(y$V2)))\n> to force it to get rid of the now-empty factor levels.\n>\n> There are other ways to do this, I just don't happen to remember any\n> of them at the moment.\n>\n> If I'm right this is a question that comes up fairly often. Might\n> even be in the FAQs.\n>\n> -Don\n>\n>\n> At 12:15 PM -0700 6/16/07, Michelle Wynn wrote:\n> >I have read the R online help and wiki and I cannot seem to get something\n> to\n> >work the way I need it to.\n> >\n> >I want to create a new data frame from an subset of an existing data\n> frame\n> >which has no reference to the original superset.  If you following this\n> >example, what I am trying to do may make more sense.\n> >\n> >I have a file with values like this:\n> >\n> >shirt,size,40\n> >shirt,color,10\n> >shirt,length,10\n> >shirt,brand, 1\n> >shoes,style,5\n> >shoes,brand,4\n> >shoes,color,1\n> >\n> >and I read it into a dataframe like:\n> >x <- data.frame(read.delim(\"temp2.txt\", sep=\",\", header=FALSE))\n> >\n> >I then want to plot just a subset of this data (say shirts only)...\n> >y <- data.frame(subset(x, V1 == \"shirt\"))\n> >plot(x2[,2:3])\n> >\n> >when I do, the resulting plot contains an empty value for 'color' even\n> >though my subset has no value in column V2 that equals 'color' anymore.\n> >\n> >Is it possible create a new data.frame that truly deletes the rows from\n> the\n> >original data frame that I am excluding with the subset parameter?\n> >\n> >Thanks,\n> >Michelle\n> >\n> >       [[alternative HTML version deleted]]\n> >\n> >______________________________________________\n> >R-help@stat.math.ethz.ch mailing list\n> >https://stat.ethz.ch/mailman/listinfo/r-help\n> >PLEASE do read the posting guide\n> http://www.R-project.org/posting-guide.html\n> >and provide commented, minimal, self-contained, reproducible code.\n>\n>\n> --\n> ---------------------------------\n> Don MacQueen\n> Lawrence Livermore National Laboratory\n> Livermore, CA, USA\n> 925-423-1062\n> macq@llnl.gov\n> ---------------------------------\n>\n\n\t[[alternative HTML version deleted]]\n\n______________________________________________\nR-help@stat.math.ethz.ch mailing list\nhttps://stat.ethz.ch/mailman/listinfo/r-help\nPLEASE do read the posting guide http://www.R-project.org/posting-guide.html\nand provide commented, minimal, self-contained, reproducible code.\n\n"}