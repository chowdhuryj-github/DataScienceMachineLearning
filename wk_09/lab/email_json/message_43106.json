{"category": "ham", "to_address": "samba-cvs@samba.org", "from_address": "jra@samba.org", "subject": "svn commit: samba r23357 - in branches: SAMBA_3_0/source/lib\n\tSAMBA_3_0_25/source/lib SAMBA_3_0_26/source/lib", "body": "Author: jra\nDate: 2007-06-05 19:17:05 +0000 (Tue, 05 Jun 2007)\nNew Revision: 23357\n\nWebSVN: http://websvn.samba.org/cgi-bin/viewcvs.cgi?view=rev&root=samba&rev=23357\n\nLog:\ntimespec_current() was returning the wrong ns time\n(multiplying tv_sec, not tv_usec).\nJeremy.\n\nModified:\n   branches/SAMBA_3_0/source/lib/time.c\n   branches/SAMBA_3_0_25/source/lib/time.c\n   branches/SAMBA_3_0_26/source/lib/time.c\n\n\nChangeset:\nModified: branches/SAMBA_3_0/source/lib/time.c\n===================================================================\n--- branches/SAMBA_3_0/source/lib/time.c\t2007-06-05 12:58:18 UTC (rev 23356)\n+++ branches/SAMBA_3_0/source/lib/time.c\t2007-06-05 19:17:05 UTC (rev 23357)\n@@ -1111,7 +1111,7 @@\n \tstruct timespec ts;\n \tGetTimeOfDay(&tv);\n \tts.tv_sec = tv.tv_sec;\n-\tts.tv_nsec = tv.tv_sec * 1000;\n+\tts.tv_nsec = tv.tv_usec * 1000;\n \treturn ts;\n }\n \n\nModified: branches/SAMBA_3_0_25/source/lib/time.c\n===================================================================\n--- branches/SAMBA_3_0_25/source/lib/time.c\t2007-06-05 12:58:18 UTC (rev 23356)\n+++ branches/SAMBA_3_0_25/source/lib/time.c\t2007-06-05 19:17:05 UTC (rev 23357)\n@@ -1111,7 +1111,7 @@\n \tstruct timespec ts;\n \tGetTimeOfDay(&tv);\n \tts.tv_sec = tv.tv_sec;\n-\tts.tv_nsec = tv.tv_sec * 1000;\n+\tts.tv_nsec = tv.tv_usec * 1000;\n \treturn ts;\n }\n \n\nModified: branches/SAMBA_3_0_26/source/lib/time.c\n===================================================================\n--- branches/SAMBA_3_0_26/source/lib/time.c\t2007-06-05 12:58:18 UTC (rev 23356)\n+++ branches/SAMBA_3_0_26/source/lib/time.c\t2007-06-05 19:17:05 UTC (rev 23357)\n@@ -1111,7 +1111,7 @@\n \tstruct timespec ts;\n \tGetTimeOfDay(&tv);\n \tts.tv_sec = tv.tv_sec;\n-\tts.tv_nsec = tv.tv_sec * 1000;\n+\tts.tv_nsec = tv.tv_usec * 1000;\n \treturn ts;\n }\n \n\n"}