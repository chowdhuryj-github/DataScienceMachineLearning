{"category": "ham", "to_address": "Jen mlists <practicalperl@gmail.com>", "from_address": "Steve Finkelstein <sf@stevefink.net>", "subject": "Re: hellp improve efficiency", "body": "Perhaps I'm misunderstanding what you're ultimately trying to\naccomplish. However, if you're doing what I think you're doing and\nyou're using Apache, look into mod_rewrite:\nhttp://httpd.apache.org/docs/2.0/mod/mod_rewrite.html\n\n- sf\n\nJen mlists wrote:\n> Hello members,\n> \n> I wrote a perl script for url redirect,shown as below,\n> \n> $|=1;\n> my $uri = '';\n> \n> while (<>) {\n> \n>    $uri = (split)[0];\n> \n>    if ($uri =~ /\\.html?\\?/ or $uri =~ /\\.js\\?/ or $uri =~ /\\.css\\?/ or\n>        $uri =~ /\\.jpg\\?/ or $uri =~ /\\.gif\\?/ or $uri =~ /\\.swf\\?/) {\n>        $uri =~ s/\\?.*$//;\n>    }\n> \n>    if ($uri =~ m|www\\.example\\.com/v/|o) {\n>        $uri =~ s|www\\.example\\.com/v/|v.example.com/|;\n> \n>    }elsif ($uri =~ m|www\\.example\\.com/v2/|o) {\n>        $uri =~ s|www\\.example\\.com/v2/|v2.example.com/|;\n> \n>    }elsif ($uri =~ m|www\\.example\\.com/v3/|o) {\n>        $uri =~ s|www\\.example\\.com/v3/|v3.example.com/|;\n> \n>    }elsif ($uri =~ m|www\\.example\\.com/so/|o) {\n>        $uri =~ s|www\\.example\\.com/so/|so.example.com/|;\n> \n>    }elsif ($uri =~ m|www\\.example\\.com/admin/\\?.*|o) {\n>        $uri =~ s|www\\.example\\.com/admin/\\?.*|www.example.com/admin/|;\n> \n>    }elsif ($uri =~ m|www\\.example\\.com/w\\?v=|o) {\n>        $uri =~ s|www\\.example\\.com/w\\?v=|v2.example.com/v_|;\n> \n>    }elsif ($uri =~ m|www\\.example\\.com/([wulp])(\\d+)/|o) {\n>        $uri =~ s|www\\.example\\.com/([wulp])(\\d+)/|$2.$1.example.com/|;\n> \n>    }elsif ($uri =~ m|www\\.example\\.com/([wulp])/|o) {\n>        $uri =~ s|www\\.example\\.com/([wulp])/|$1.example.com/|;\n>    }\n> \n> } continue {\n> \n>    print \"$uri\\n\";\n> \n> }\n> \n> __END__\n> \n> As you see,for each regex match,I've tested it twice.\n> Maybe it's going with low-efficiency.How can improve it?Thanks.\n> \n\n-- \nTo unsubscribe, e-mail: beginners-unsubscribe@perl.org\nFor additional commands, e-mail: beginners-help@perl.org\nhttp://learn.perl.org/\n\n\n"}