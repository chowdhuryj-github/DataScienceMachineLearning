{"category": "ham", "to_address": "samba-cvs@samba.org", "from_address": "obnox@samba.org", "subject": "svn commit: samba r23287 - in branches: SAMBA_3_0/source/nsswitch\n\tSAMBA_3_0_26/source/nsswitch", "body": "Author: obnox\nDate: 2007-06-01 10:10:57 +0000 (Fri, 01 Jun 2007)\nNew Revision: 23287\n\nWebSVN: http://websvn.samba.org/cgi-bin/viewcvs.cgi?view=rev&root=samba&rev=23287\n\nLog:\nUse talloc_move instead of talloc_steal as this is what I really\nwanted to do.\n\nMichael\n\n\nModified:\n   branches/SAMBA_3_0/source/nsswitch/winbindd_ads.c\n   branches/SAMBA_3_0_26/source/nsswitch/winbindd_ads.c\n\n\nChangeset:\nModified: branches/SAMBA_3_0/source/nsswitch/winbindd_ads.c\n===================================================================\n--- branches/SAMBA_3_0/source/nsswitch/winbindd_ads.c\t2007-06-01 03:47:35 UTC (rev 23286)\n+++ branches/SAMBA_3_0/source/nsswitch/winbindd_ads.c\t2007-06-01 10:10:57 UTC (rev 23287)\n@@ -1054,7 +1054,7 @@\n \t\t\t\t{\n \t\t\t\t\tsid_copy(&(*sid_mem)[*num_names],\n \t\t\t\t\t\t &sid_mem_nocache[i]);\n-\t\t\t\t\t(*names)[*num_names] = talloc_steal(names, names_nocache[i]);\n+\t\t\t\t\t(*names)[*num_names] = talloc_move(names, &names_nocache[i]);\n \t\t\t\t\t(*name_types)[*num_names] = name_types_nocache[i];\n \t\t\t\t\t(*num_names)++;\n \t\t\t\t}\n\nModified: branches/SAMBA_3_0_26/source/nsswitch/winbindd_ads.c\n===================================================================\n--- branches/SAMBA_3_0_26/source/nsswitch/winbindd_ads.c\t2007-06-01 03:47:35 UTC (rev 23286)\n+++ branches/SAMBA_3_0_26/source/nsswitch/winbindd_ads.c\t2007-06-01 10:10:57 UTC (rev 23287)\n@@ -1054,7 +1054,7 @@\n \t\t\t\t{\n \t\t\t\t\tsid_copy(&(*sid_mem)[*num_names],\n \t\t\t\t\t\t &sid_mem_nocache[i]);\n-\t\t\t\t\t(*names)[*num_names] = talloc_steal(names, names_nocache[i]);\n+\t\t\t\t\t(*names)[*num_names] = talloc_move(names, &names_nocache[i]);\n \t\t\t\t\t(*name_types)[*num_names] = name_types_nocache[i];\n \t\t\t\t\t(*num_names)++;\n \t\t\t\t}\n\n"}