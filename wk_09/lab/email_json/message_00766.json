{"category": "ham", "to_address": "Dafydd Harries <dafydd.harries@collabora.co.uk>", "from_address": "Marco Pesenti Gritti <mpg@redhat.com>", "subject": "Re: [sugar] A place to point new developers", "body": "On Mon, 2007-04-09 at 16:14 +0100, Dafydd Harries wrote:\n> I've written a new chat activity based on Telepathy. I've made it as simple as\n> possible: when you launch it, it joins the Jabber multi-user chat\n> chat@conference.olpc.collabora.co.uk.\n> \n> Right now, it's hard-coded to use Gabble (the XMPP backed for Telepathy), but\n> it should be pretty easy to make it use Salut (for local network Jabber). If\n> you want to run this, you'll need to have the telepathy-gabble binary and its\n> .service file installed.\n> \n> Git repository is here:\n> \n> http://projects.collabora.co.uk/~daf/chat-activity.git/\n> \n\nCool! Can we move this on dev.laptop.org and add it to jhbuild?\n\n> (This is my first time with git, so I'm not sure if I got that right.)\n> \n> There's one really annoying bug I couldn't work out: the conversation is\n> inside a Gtk scroll area, using a hack I lifted from the journal code. The UI\n> structure looks like this:\n> \n>  - hippo.Canvas\n>    - hippo.CanvasWidget\n>      - gtk.ScrolledWindow\n>        - gtk.Viewport\n>          - hippo.Canvas (*)\n>            - hippo.CanvasBox\n>              - (conversation items)\n>    - sugar.graphics.entry.Entry\n> \n> It seems that the inner hippo.Canvas gets allocated more space than it wants,\n> which messes up the vertical adjustment of the ScrolledWindow. It turns out\n> that the allocation is always 804 pixels larger than the request, which I'm\n> guess is 844 (screen height) - 40 pixels for the Entry. This is annoying\n> because I want to scroll the conversation down when somebody says something,\n> but it ends up showing a mass of empty space if I scroll to what should be the\n> bottom. Hence this gross hack which makes it kinda work:\n> \n>         adj.set_value(adj.upper - adj.page_size - 804)\n> \n> If somebody can shed some light on this, I'd be very happy.\n> \n\nI can have a look at it once it's added to the build.\n\nBtw please do not use raw pixels to specify margin, padding etc. You can\nuse the sugar/graphics/units.py helpers to do conversion from points. A\nlittle annoying but it ensure stuff looks good both in the emulator and\non the XO.\n\nAt some point we want to add support for units to HippoCanvas (and a way\nto set the canvas zoom factor) to avoid the extra typing.\n\nMarco\n\n_______________________________________________\nSugar mailing list\nSugar@laptop.org\nhttp://mailman.laptop.org/mailman/listinfo/sugar\n\n"}