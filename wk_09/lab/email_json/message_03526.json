{"category": "ham", "to_address": "\"Felix Wave\" <felix-wave@vr-web.de>", "from_address": "\"Gabor Grothendieck\" <ggrothendieck@gmail.com>", "subject": "Re: [R] data file import - numbers and letters in a matrix(!)", "body": "Try pasting this into an R session:\n\n\nLines.raw <- \"FILEDATE:02.02.2007\n...\n\nSTART OF HEIGHT DATA\nS= 0 y=0.0 x=0.00000000\nS= 0 y=0.1 x=0.00055643\n...\nS= 9 y=4.9 x=1.67278117\nS= 9 y=5.0 x=1.74873257\nS=10 y=0.0 x=0.00000000\nS=10 y=0.1 x=0.00075557\n...\nS=99 y=5.3 x=1.94719490\nEND OF HEIGHT DATA\n...\n\nSTART OF HEIGHT DATA\nS= 0 y=0.0 x=0.00000000\nS= 0 y=0.1 x=0.00055643\n\"\n\n# next line would be replaced by\n#  somthing like: Lines <- readLines(\"myfile.dat\")\nLines <- readLines(textConnection(Lines.raw))\n\n# extract those lines that contain an =\nLines <- grep(\"=\", Lines, value = TRUE)\n\n# get col names by removing all but letters & spaces from line 1\ncn <- gsub(\"[^a-zA-Z ]\", \"\", Lines[1])\ncn <- scan(textConnection(cn), what = \"\")\n\n# remove anything that is not a number, dot or space and read in\nLines <- gsub(\"[^ .0-9]\", \"\", Lines)\nDF <- read.table(textConnection(Lines), col.names = cn)\ncloseAllConnections()\nDF\n\n\n\n\nOn 4/12/07, Felix Wave  wrote:\n> Hello,\n> I have a problem with the import of a date file. I seems verry tricky.\n> I have a text file (end of the mail). Every file has a different number of measurments\n> witch start with \"START OF HEIGHT DATA\" and ende with \"END OF HEIGHT DATA\".\n>\n> I imported the file in a matrix but the letters before the numbers are my problem\n> (S= ,S=,x=,y=).\n> Because through the letters and the space after \"S=\" I got a different number\n> of columns in my matrix and with letters in my matrix I can't count.\n>\n>\n> My question. Is it possible to import the file to got 3 columns only with numbers and\n> no letters like x=, y=?\n>\n> Thank's a lot\n> Felix\n>\n>\n>\n>\n> My R Code:\n> ----------\n>\n> # na.strings = \"S=\"\n>\n> Measure1 <- matrix(scan(\"data.dat\", n= 5063 * 4, skip =   20, what = character() ), 5063, 3, byrow = TRUE)\n> Measure2 <- matrix(scan(\"data.dat\", n= 5063 * 4, skip = 5220, what = character() ), 5063, 3, byrow = TRUE)\n>\n>\n>\n> My data file:\n> -----------\n>\n> FILEDATE:02.02.2007\n> ...\n>\n> START OF HEIGHT DATA\n> S= 0 y=0.0 x=0.00000000\n> S= 0 y=0.1 x=0.00055643\n> ...\n> S= 9 y=4.9 x=1.67278117\n> S= 9 y=5.0 x=1.74873257\n> S=10 y=0.0 x=0.00000000\n> S=10 y=0.1 x=0.00075557\n> ...\n> S=99 y=5.3 x=1.94719490\n> END OF HEIGHT DATA\n> ...\n>\n> START OF HEIGHT DATA\n> S= 0 y=0.0 x=0.00000000\n> S= 0 y=0.1 x=0.00055643\n>\n>\n>\n> The imported matrix:\n> >\n>      [,1]           [,2]           [,3]           [,4]\n>  [6,] \"S=\"           \"9\"            \"y=4.9\"        \"x=1.67278117\"\n>  [7,] \"S=\"           \"9\"            \"y=5.0\"        \"x=1.74873257\"\n>  [8,] \"S=10\"         \"y=0.0\"        \"x=0.00000000\" \"S=10\"\n>  [9,] \"y=0.1\"        \"x=0.00075557\" \"S=10\"         \"y=0.2\"\n> [10,] \"x=0.00277444\" \"S=10\"         \"y=0.3\"        \"x=0.00605958\"\n>\n> ______________________________________________\n> R-help@stat.math.ethz.ch mailing list\n> https://stat.ethz.ch/mailman/listinfo/r-help\n> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html\n> and provide commented, minimal, self-contained, reproducible code.\n>\n\n______________________________________________\nR-help@stat.math.ethz.ch mailing list\nhttps://stat.ethz.ch/mailman/listinfo/r-help\nPLEASE do read the posting guide http://www.R-project.org/posting-guide.html\nand provide commented, minimal, self-contained, reproducible code.\n\n"}