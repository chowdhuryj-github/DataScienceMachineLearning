{"category": "ham", "to_address": "samba-cvs@samba.org", "from_address": "tridge@samba.org", "subject": "svn commit: samba r22813 - in\n\tbranches/SAMBA_4_0/source/torture/raw: .", "body": "Author: tridge\nDate: 2007-05-12 07:44:09 +0000 (Sat, 12 May 2007)\nNew Revision: 22813\n\nWebSVN: http://websvn.samba.org/cgi-bin/viewcvs.cgi?view=rev&root=samba&rev=22813\n\nLog:\n\nimprove error messages in RAW-NOTIFY test\n\nModified:\n   branches/SAMBA_4_0/source/torture/raw/notify.c\n\n\nChangeset:\nModified: branches/SAMBA_4_0/source/torture/raw/notify.c\n===================================================================\n--- branches/SAMBA_4_0/source/torture/raw/notify.c\t2007-05-12 01:08:09 UTC (rev 22812)\n+++ branches/SAMBA_4_0/source/torture/raw/notify.c\t2007-05-12 07:44:09 UTC (rev 22813)\n@@ -489,14 +489,27 @@\n \t\t    ((expected) & FILE_NOTIFY_CHANGE_ATTRIBUTES) && \\\n \t\t    Action == NOTIFY_ACTION_OLD_NAME) { \\\n \t\t\tprintf(\"(rename file special handling OK)\\n\"); \\\n-\t\t} else if (nchanges != notify.nttrans.out.num_changes || \\\n-\t\t    notify.nttrans.out.changes[0].action != Action || \\\n-\t\t    strcmp(notify.nttrans.out.changes[0].name.s, \"tname1\") != 0) { \\\n-\t\t\tprintf(\"ERROR: nchanges=%d action=%d filter=0x%08x\\n\", \\\n+\t\t} else if (nchanges != notify.nttrans.out.num_changes) { \\\n+\t\t\tprintf(\"ERROR: nchanges=%d expected=%d action=%d filter=0x%08x\\n\", \\\n \t\t\t       notify.nttrans.out.num_changes, \\\n+\t\t\t       nchanges, \\\n \t\t\t       notify.nttrans.out.changes[0].action, \\\n \t\t\t       notify.nttrans.in.completion_filter); \\\n \t\t\tret = False; \\\n+\t\t} else if (notify.nttrans.out.changes[0].action != Action) { \\\n+\t\t\tprintf(\"ERROR: nchanges=%d action=%d expectedAction=%d filter=0x%08x\\n\", \\\n+\t\t\t       notify.nttrans.out.num_changes, \\\n+\t\t\t       notify.nttrans.out.changes[0].action, \\\n+\t\t\t       Action, \\\n+\t\t\t       notify.nttrans.in.completion_filter); \\\n+\t\t\tret = False; \\\n+\t\t} else if (strcmp(notify.nttrans.out.changes[0].name.s, \"tname1\") != 0) { \\\n+\t\t\tprintf(\"ERROR: nchanges=%d action=%d filter=0x%08x name=%s\\n\", \\\n+\t\t\t       notify.nttrans.out.num_changes, \\\n+\t\t\t       notify.nttrans.out.changes[0].action, \\\n+\t\t\t       notify.nttrans.in.completion_filter, \\\n+\t\t\t       notify.nttrans.out.changes[0].name.s);\t\\\n+\t\t\tret = False; \\\n \t\t} \\\n \t\tmask |= (1<<i); \\\n \t} \\\n\n"}