{"category": "ham", "to_address": "samba-cvs@samba.org", "from_address": "idra@samba.org", "subject": "svn commit: samba r22482 - in branches/SAMBA_3_0_25/source: .", "body": "Author: idra\nDate: 2007-04-23 09:46:06 +0000 (Mon, 23 Apr 2007)\nNew Revision: 22482\n\nWebSVN: http://websvn.samba.org/cgi-bin/viewcvs.cgi?view=rev&root=samba&rev=22482\n\nLog:\n\nFix our brokeness in building shared libraries.\nMixing -shared and -pie is not sane.\n\nJerry this should be in 3.0.25 final, it fixed building on IA64\nand works ok on F7 (test using libsmbclient)\n\n\nModified:\n   branches/SAMBA_3_0_25/source/Makefile.in\n\n\nChangeset:\nModified: branches/SAMBA_3_0_25/source/Makefile.in\n===================================================================\n--- branches/SAMBA_3_0_25/source/Makefile.in\t2007-04-23 09:19:35 UTC (rev 22481)\n+++ branches/SAMBA_3_0_25/source/Makefile.in\t2007-04-23 09:46:06 UTC (rev 22482)\n@@ -23,10 +23,10 @@\n CFLAGS=@CFLAGS@\n CPPFLAGS=-DHAVE_CONFIG_H @CPPFLAGS@\n EXEEXT=@EXEEXT@\n-LDFLAGS=@PIE_LDFLAGS@ @LDFLAGS@\n AR=@AR@\n LDSHFLAGS=@LDSHFLAGS@ @LDFLAGS@\n WINBIND_NSS_LDSHFLAGS=@WINBIND_NSS_LDSHFLAGS@ @LDFLAGS@\n+LDFLAGS=@PIE_LDFLAGS@ @LDFLAGS@\n AWK=@AWK@\n PICFLAG=@PICFLAG@\n DYNEXP=@DYNEXP@\n@@ -1144,7 +1144,7 @@\n \n bin/libaddns.@SHLIBEXT@: proto_exists $(LIBADDNS_OBJ)\n \t@echo Linking libaddns shared library $@\n-\t@$(SHLD) $(LDSHFLAGS) -o $@ $(LIBADDNS_OBJ) $(LDFLAGS) $(LIBS) \\\n+\t@$(SHLD) $(LDSHFLAGS) -o $@ $(LIBADDNS_OBJ) $(LIBS) \\\n \t\t$(KRB5LIBS) $(UUID_LIBS)\\\n \t\t@SONAMEFLAG@`basename $@`.$(LIBADDNS_MAJOR)\n \n@@ -1154,7 +1154,7 @@\n \n bin/libsmbclient.@SHLIBEXT@: proto_exists $(LIBSMBCLIENT_OBJ)\n \t@echo Linking libsmbclient shared library $@\n-\t@$(SHLD) $(LDSHFLAGS) -o $@ $(LIBSMBCLIENT_OBJ) $(LDFLAGS) $(LIBS) \\\n+\t@$(SHLD) $(LDSHFLAGS) -o $@ $(LIBSMBCLIENT_OBJ) $(LIBS) \\\n \t\t$(KRB5LIBS) $(LDAP_LIBS) $(NSCD_LIBS) \\\n \t\t@SONAMEFLAG@`basename $@`.$(LIBSMBCLIENT_MAJOR)\n \n@@ -1164,7 +1164,7 @@\n \n bin/libsmbsharemodes.@SHLIBEXT@: proto_exists $(LIBSMBSHAREMODES_OBJ)\n \t@echo Linking libsmbsharemodes shared library $@\n-\t@$(SHLD) $(LDSHFLAGS) -o $@ $(LIBSMBSHAREMODES_OBJ) $(LDFLAGS) $(LIBS) \\\n+\t@$(SHLD) $(LDSHFLAGS) -o $@ $(LIBSMBSHAREMODES_OBJ) $(LIBS) \\\n \t\t$(KRB5LIBS) $(LDAP_LIBS) \\\n \t\t@SONAMEFLAG@`basename $@`.$(LIBSMBSHAREMODES_MAJOR)\n \n@@ -1174,7 +1174,7 @@\n \n bin/libmsrpc.@SHLIBEXT@: proto_exists $(CAC_OBJ)\n \t@echo Linking libmsrpc shared library $@\n-\t@$(SHLD) $(LDSHFLAGS) -o $@ $(CAC_OBJ) $(LDFLAGS) $(LIBS) \\\n+\t@$(SHLD) $(LDSHFLAGS) -o $@ $(CAC_OBJ) $(LIBS) \\\n \t@SONAMEFLAG@`basename $@`.$(LIBMSRPC_MAJOR)\n \n bin/libmsrpc.a: proto_exists $(CAC_OBJ)\n\n"}