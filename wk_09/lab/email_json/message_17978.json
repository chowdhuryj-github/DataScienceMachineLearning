{"category": "ham", "to_address": "Deepayan Sarkar <deepayan.sarkar@gmail.com>", "from_address": "Michael Kubovy <kubovy@virginia.edu>", "subject": "Re: [R] xyplot() and controlling panel.polygon()", "body": "Hi Deepayan,\n\nThanks for your advice. This is moving along, however:\nThe following is drawing the same polygons in each panel. I'm trying  \nto get a different polygon (confidence band) for each group in each  \npanel. That's why I thought I would need to pass groups and  \nsubscripts to the panel.groups\n\nest <- c(1:4, 3:6, 7, 9, 11, 13, 12, 15, 18, 21)\ncond <- rep(c('a','b'), each = 8)\ngrp <- rep(c('I', 'II'), each = 4, 2)\nx <- rep(c(.5, .7, .9, 1.1), 4)\nupper <- est + 1\nlower = est - 1\ndata <- data.frame(est = est, x = x, cond = cond, grp = grp, upper =\nupper, lower = lower)\n\nmy.panel.polygon <- function(..., font, fontface)\n{\n    panel.polygon(...)\n}\n\nxyplot(est ~ x | cond, group = grp, data = data, type = 'b',\n     panel = function(x, y, ...){\n         panel.superpose(c(x, rev(x)), c(upper, rev(lower)),\n             panel.groups = 'my.panel.polygon', default.units =  \n'native', ...)\n         panel.xyplot(x, y, ...)\n     }\n)\n\nIt's pretty clear that panel.superpose is not getting its x and y  \nvalues after they are split by group and panel.\n\n_____________________________\nProfessor Michael Kubovy\nUniversity of Virginia\nDepartment of Psychology\nUSPS:     P.O.Box 400400    Charlottesville, VA 22904-4400\nParcels:    Room 102        Gilmer Hall\n         McCormick Road    Charlottesville, VA 22903\nOffice:    B011    +1-434-982-4729\nLab:        B019    +1-434-982-4751\nFax:        +1-434-982-4766\nWWW:    http://www.people.virginia.edu/~mk9y/\n\n______________________________________________\nR-help@stat.math.ethz.ch mailing list\nhttps://stat.ethz.ch/mailman/listinfo/r-help\nPLEASE do read the posting guide http://www.R-project.org/posting-guide.html\nand provide commented, minimal, self-contained, reproducible code.\n\n"}