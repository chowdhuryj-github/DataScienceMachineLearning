{"category": "ham", "to_address": "beginners@perl.org", "from_address": "Andreas Karlsson <andreas_k_se@yahoo.com>", "subject": "Problem using $1 in substitution command", "body": "Hi guys,\nI'm doing a script to search through a lot of files and doing some replacements.\nIt is a lot of different replacements that has to be done so I list them in a .txt\ninstruction file in two columns representing the strings to be matched and replaced\nand the new text.\nA problem arise when doing some more complex substitution, wanting to keep certain\nparts of a string while replacing others. To be specific in this case I want to\nremove the '' surrounding a string. The string between '' will change.\n\nThe problem comes from that I want to use the \\1 (or $1) variable but since the\nsubstitution command looks like \n$line=~ s/$subst_from/$subst_to/ig;\n\nand the $1 is incorporated into the $subst_to variable it is being populated when\nthe replecement string is assinged to $subst_to. \nHow can I keep the substitution command as general as I have it, always taking the\nsame to variables but still making use of the $1,...,$9 feature of Perl?\nI post you a test-program which shows my problem. \nList.\\1 being printed after 'Result:' is the problem.\n\nIt's developed in an cygwin-environment and executes using the command \nperl PerlSubstituteProblem.pl\n\nThe printouts looks like this when I run it:\n\nScript started.\nsubst_to: List.\\1\n'' should be removed in List.'123_KeepThis_123'\n$1_1: 123_KeepThis_123\n$1_2: 123_KeepThis_123\nResult:\n'' should be removed in List.\\1\nSame thing but non-general s//:\n'' should be removed in List.123_KeepThis_123\nChanged in 1 places\n\n\n________Program_______________\n#!/usr/local/bin/perl\nuse strict;\nuse strict 'refs';\n$|=1; #Flush ON\nprint \"Script started.\\n\";\n\nmy($nr_of_changes,$line,$line_copy, $subst_from,$subst_to)=0;\n\n\n$subst_from=\"List\\\\.'(\\\\w*)'\";\n$subst_to=\"List.\\\\1\";\nprint \"subst_to: $subst_to \\n\";\n\n$line=\"'' should be removed in List.'123_KeepThis_123' \\n\";\nprint \"$line\";\n\nif($line =~/$subst_from/i)\n{\t\n\t$line_copy=$line;\t\n\tprint \"\\$1_1: $1 \\n\";\n\t$nr_of_changes++;\n\t$line=~ s/$subst_from/$subst_to/ig;\n\tprint \"\\$1_2: $1 \\n\";\n\tprint \"Result: \\n\";\n\tprint \"$line\";\n\n\tprint \"Same thing but non-general s//: \\n\";\n\t$line_copy=~ s/$subst_from/List.\\1/ig;\n\tprint \"$line_copy\";\n\n}\n\nprint\"Changed in $nr_of_changes places\\n\";\n\nexit(0);\n\n\n\n\n__________________________________________________\nDo You Yahoo!?\nTired of spam?  Yahoo! Mail has the best spam protection around \nhttp://mail.yahoo.com \n\n-- \nTo unsubscribe, e-mail: beginners-unsubscribe@perl.org\nFor additional commands, e-mail: beginners-help@perl.org\nhttp://learn.perl.org/\n\n\n"}