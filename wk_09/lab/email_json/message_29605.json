{"category": "ham", "to_address": "Perl6 Compiler <perl6-compiler@perl.org>", "from_address": "Cosimo Streppone <cstrep@satelgroup.net>", "subject": "Re: Parrot trunk: \"The submitted smoke has an invalid format\"", "body": "Gaal Yahas wrote:\n\n> On 5/14/07, Cosimo Streppone  wrote:\n>>    # svn co https://svn.perl.org/parrot/trunk parrot\n>>    # cd parrot; perl Makefile.PL\n>>    # make smoke\n>> [...]\n>> * Sending data to smokeserver \"http://smoke.parrotcode.org/smoke/\"... \n>> error: The submitted smoke has an invalid format!\n>\n> Try the same command again (smokeserv-client.pl smoke.html), just to\n> see if this isn't a transient network failure.\n\nNo way.\n\n> Also, make sure you aren't running YAML::Syck 0.84, which contained a\n> bug. If this is the case, remove your smoke and try again (simply\n> \"make smoke\" again should do the trick).\n\nThis wasn't the case. I didn't even have it installed.\nTried installing, but failed again.\n\n > If the error stays the same, parrot's smoke server may have gone out\n > of sync with the client.\n\nI installed the server part on my workstation.\nI think the problem is with 'revision: 0' in my smoke.html file.\n\nThe smokeserv-server.pl script lines that say:\n\n     if ( grep { not $smoke{$_} } qw ) {\n         print \"The submitted smoke has an invalid format!\";\n         exit;\n     }\n\nmake the smoke upload process fail, because revision is zero.\nEven change it to 'grep { not exists $smoke{$_} }' or change\nrevision value to something else than zero.\n\nChanging 'revision: 0' to 'revision: 1' solved the problem,\nbut it's not so correct, I think.\n\n-- \nCosimo\n\n"}