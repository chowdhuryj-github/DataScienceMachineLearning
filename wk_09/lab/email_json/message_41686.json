{"category": "ham", "to_address": "\"Gerald (Jerry) Carter\" <jerry@samba.org>", "from_address": "James Peach <jpeach@samba.org>", "subject": "Re: svn commit: samba r23312 - in branches:\n\tSAMBA_3_0/source/nsswitch SAMBA_3_0_26/source/nsswitch", "body": "On 03/06/2007, at 6:02 AM, Gerald (Jerry) Carter wrote:\n\n> -----BEGIN PGP SIGNED MESSAGE-----\n> Hash: SHA1\n>\n> jpeach@samba.org wrote:\n>\n>> Author: jpeach\n>> Date: 2007-06-02 21:12:47 +0000 (Sat, 02 Jun 2007)\n>> New Revision: 23312\n>>\n>> WebSVN: http://websvn.samba.org/cgi-bin/viewcvs.cgi? \n>> view=rev&root=samba&rev=23312\n>>\n>> Log:\n>> As per Volker, rename the \"windbind:ads\" parameter \"winbind:rpc  \n>> only\".\n> ...\n>> @@ -171,7 +170,7 @@\n>>\n>>  \t\tif ((our_domain->active_directory || IS_DC)\n>>  \t\t    && domain->active_directory\n>> -\t\t    && lp_parm_bool(-1, \"winbind\", \"ads\", True)) {\n>> +\t\t    && !lp_parm_bool(-1, \"winbind\", \"rpc only\", False)) {\n>>  \t\t\tDEBUG(5,(\"get_cache: Setting ADS methods for domain %s\\n\",  \n>> domain->name));\n>>  \t\t\tdomain->backend = &ads_methods;\n>\n>\n> James,\n>\n> I know that I've only had one cup of coffee but this\n> logic looks wrong.  Looks double negated to me.\n\nI might have misunderstood this. The sense of \"winbind: rpc only\" is  \nthe opposite of the sense of \"winbind:ads\", hence the negation. So  \n\"winbind: rpc only = yes\" should force LDAP off, which means that not \n(\"winbind:rpc only = yes\") should let us do LDAP if we were already  \nplanning on doing it.\n\nThis sense of the parameter makes the login of the code a little  \nharder, but IMHO it's a lot more obvious for admins. We can probably  \nrefactor the conditional her to make the code more obvious as well.\n\n--\nJames Peach | jpeach@samba.org\n\n\n"}