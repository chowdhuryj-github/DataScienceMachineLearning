{"category": "ham", "to_address": "r-help@stat.math.ethz.ch", "from_address": "Mark Lyman <mark.lyman@gmail.com>", "subject": "Re: [R] Adding points to a wireframe with conditioning variable", "body": "Deepayan Sarkar  gmail.com> writes:\n\n> \n> On 7/5/07, Mark Lyman  gmail.com> wrote:\n> > I would like to add points to a wireframe but with a conditioning \nvariable. I\n> > found a solution for this without a conditioning variable here,\n> > http://finzi.psych.upenn.edu/R/Rhelp02a/archive/65321.html. Does anyone \nknow\n> > how to plot a wireframe conditioned on a variable and add the points\n> > conditioned on the same variable, similar to the solution at the link \nabove?\n> \n> Depends on what form you have your points in. Inside a panel function,\n> packet.number() will give you the packet number in sequential order\n> (column major order if you think of the conditioning variables as\n> defining a multiway cross-tabulation), and which.packet() will give\n> you a vector with the current level of each conditioning variable. You\n> can use these to extract the appropriate subset of points.\n> \n> -Deepayan\n\nThank you Deepayan. I modified the panel function you wrote in the post \nreferenced above according to your suggestion. Here is the panel function, I \ncame up with\n\n\npanel.3dwire.points <- function(x, y, z, xlim, ylim, zlim, xlim.scaled,\n\tylim.scaled, zlim.scaled, pts, ...)\n{\n\tpanel.3dwire(x=x, y=y, z=z, xlim=xlim, ylim=ylim, zlim=zlim,\n\t\txlim.scaled=xlim.scaled, ylim.scaled=ylim.scaled,\n\t\tzlim.scaled=zlim.scaled, ...)\n\tpts.sub <- subset(pts, g==levels(g)[which.packet()])\n\txx <- xlim.scaled[1] + diff(xlim.scaled)*(pts.sub$x - xlim[1])/diff\n(xlim)\n\tyy <- ylim.scaled[1] + diff(ylim.scaled)*(pts.sub$y - ylim[1])/diff\n(ylim)\n\tzz <- zlim.scaled[1] + diff(zlim.scaled)*(pts.sub$z - zlim[1])/diff\n(zlim)\n\tpanel.3dscatter(x=xx, y=yy, z=zz, xlim=xlim, ylim=ylim, zlim=zlim,\n\t\txlim.scaled=xlim.scaled, ylim.scaled=ylim.scaled,\n\t\tzlim.scaled=zlim.scaled, ...)\n}\n\nwhere pts is a dataframe with the three dimensional points (x,y,z) and the \nconditioning variable g.\n\nMark\n\n______________________________________________\nR-help@stat.math.ethz.ch mailing list\nhttps://stat.ethz.ch/mailman/listinfo/r-help\nPLEASE do read the posting guide http://www.R-project.org/posting-guide.html\nand provide commented, minimal, self-contained, reproducible code.\n\n"}