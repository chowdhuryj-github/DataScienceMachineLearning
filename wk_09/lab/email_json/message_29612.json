{"category": "ham", "to_address": "samba-cvs@samba.org", "from_address": "jra@samba.org", "subject": "svn commit: samba r22862 - in branches/SAMBA_3_0_25/source/libsmb: .", "body": "Author: jra\nDate: 2007-05-14 17:40:55 +0000 (Mon, 14 May 2007)\nNew Revision: 22862\n\nWebSVN: http://websvn.samba.org/cgi-bin/viewcvs.cgi?view=rev&root=samba&rev=22862\n\nLog:\nFix from derrell for bug #4601.\n- Fixes bug 4601.  smbc_getxattr() would not, in one case, properly return the\n  required size of a buffer needed to contain the extended attributes.\nJeremy.\n\nModified:\n   branches/SAMBA_3_0_25/source/libsmb/libsmbclient.c\n\n\nChangeset:\nModified: branches/SAMBA_3_0_25/source/libsmb/libsmbclient.c\n===================================================================\n--- branches/SAMBA_3_0_25/source/libsmb/libsmbclient.c\t2007-05-14 17:34:02 UTC (rev 22861)\n+++ branches/SAMBA_3_0_25/source/libsmb/libsmbclient.c\t2007-05-14 17:40:55 UTC (rev 22862)\n@@ -4709,7 +4709,7 @@\n                                                              ace->access_mask);\n                                         }\n                                 }\n-                                if (n > bufsize) {\n+                                if (!determine_size && n > bufsize) {\n                                         errno = ERANGE;\n                                         return -1;\n                                 }\n\n"}