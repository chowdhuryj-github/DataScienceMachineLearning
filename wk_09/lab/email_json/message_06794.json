{"category": "ham", "to_address": "samba-cvs@samba.org", "from_address": "psomogyi@gamax.hu", "subject": "Rev 73: merged tridge's branch  in\n http://samba.org/~tridge/psomogyi/", "body": "------------------------------------------------------------\nrevno: 73\nrevision-id: psomogyi@gamax.hu-20070416142829-iglfqwwgka38risg\nparent: psomogyi@gamax.hu-20070329164602-mvke1cynxguwrpyu\nparent: tridge@samba.org-20070416130336-89ba103e570a8324\ncommitter: Peter Somogyi \nbranch nick: ctdb\ntimestamp: Mon 2007-04-16 16:28:29 +0200\nmessage:\n  merged tridge's branch \nadded:\n  common/ctdb_client.c           ctdb_client.c-20070411010216-3kd8v37k61steeya-1\n  common/ctdb_daemon.c           ctdb_daemon.c-20070409200331-3el1kqgdb9m4ib0g-1\n  common/ctdb_io.c               ctdb_io.c-20070409200335-dzfc7f3rra5rcf60-1\n  config.mk                      config.mk-20070416041303-xql6zaaq90w8kovl-1\n  direct/                        direct-20070411085038-phusiewluwzyqjpc-1\n  direct/README                  readme-20070411085353-evbh8j3q762w3azh-1\n  direct/ctdbd.c                 ctdbd.c-20070411085044-dqmhr6mfeexnyt4m-1\n  direct/ctdbd.sh                ctdbd.sh-20070411085038-phusiewluwzyqjpc-2\n  direct/ctdbd_test.c            ctdbd_test.c-20070411085057-17kgjzfktsh28g99-1\n  direct/nodes.txt               nodes.txt-20070411085104-tprj7cr1u6o5i7xm-1\n  tests/bench1.sh                bench1.sh-20070405031753-caneu8tv5v8e93ws-1\n  tests/cmdline.c                cmdline.c-20070416041216-w1zvz91bkdsgjckw-1\n  tests/cmdline.h                cmdline.h-20070416041216-w1zvz91bkdsgjckw-2\n  tests/ctdb_fetch.c             ctdb_fetch.c-20070405031748-f7gslozfj3rwh5ie-1\n  tests/ctdb_fetch1.c            ctdb_fetch1.c-20070412111848-xawz6wqk9r0v8jdk-1\n  tests/ctdb_messaging.c         ctdb_messaging.c-20070411034205-6d6vne56pbih2x1p-1\n  tests/fetch.sh                 fetch.sh-20070405031756-lomzqpjyqg3xd1kv-1\n  tests/fetch1.sh                fetch1.sh-20070412111854-6s84l3myac9ncl79-1\n  tests/lockwait.c               lockwait.c-20070416055753-3ztnb4cxqgamfudx-1\n  tests/messaging.sh             messaging.sh-20070411034158-e1c175kqm9vzasb6-1\nrenamed:\n  ctdb_bench.c => tests/ctdb_bench.c ctdb_bench.c-20061219052637-2liagoglohxb6p7s-1\n  ctdb_test.c => tests/ctdb_test.c ctdb_test.c-20061117234101-o3qt14umlg9en8z0-16\n  nodes.txt => tests/nodes.txt nodes.txt-20061118043428-8lz9unytgcsndgia-1\nmodified:\n  Makefile.in                    makefile.in-20061117234101-o3qt14umlg9en8z0-1\n  common/ctdb.c                  ctdb.c-20061127094323-t50f58d65iaao5of-2\n  common/ctdb_call.c             ctdb_call.c-20061128065342-to93h6eejj5kon81-1\n  common/ctdb_ltdb.c             ctdb_ltdb.c-20061128065342-to93h6eejj5kon81-2\n  common/ctdb_message.c          ctdb_message.c-20070208224107-9dnio7x7z33prrmt-1\n  common/ctdb_util.c             ctdb_util.c-20061128065342-to93h6eejj5kon81-3\n  common/util.c                  util.c-20061117234101-o3qt14umlg9en8z0-20\n  configure.ac                   configure.ac-20061117234101-o3qt14umlg9en8z0-10\n  ib/ibw_ctdb.c                  ibw_ctdb.c-20070102171255-7krov7858dqza466-1\n  ib/ibw_ctdb.h                  ibw_ctdb.h-20070102171259-nmuvtzt98aqzg7xp-1\n  ib/ibw_ctdb_init.c             ibw_ctdb_init.c-20070102171305-cn2z4k7ibx8141d5-1\n  ib/ibwrapper_test.c            ibwrapper_test.c-20061214171730-h11a2z5ed6pt66hj-1\n  include/ctdb.h                 ctdb.h-20061117234101-o3qt14umlg9en8z0-11\n  include/ctdb_private.h         ctdb_private.h-20061117234101-o3qt14umlg9en8z0-13\n  include/includes.h             includes.h-20061117234101-o3qt14umlg9en8z0-17\n  lib/tdb/autogen.sh             autogen.sh-20070125040949-7t3f5zdl1q4z9hyv-61\n  lib/tdb/common/dump.c          dump.c-20070220022425-m1wibgjq7n5hahs6-2\n  lib/tdb/common/freelistcheck.c freelistcheck.c-20070220022425-m1wibgjq7n5hahs6-5\n  lib/tdb/common/io.c            io.c-20070220022425-m1wibgjq7n5hahs6-6\n  lib/tdb/common/lock.c          lock.c-20070220022425-m1wibgjq7n5hahs6-7\n  lib/tdb/common/open.c          open.c-20070220022425-m1wibgjq7n5hahs6-8\n  lib/tdb/common/tdb.c           tdb.c-20070220022425-m1wibgjq7n5hahs6-9\n  lib/tdb/common/tdb_private.h   tdb_private.h-20070220022425-m1wibgjq7n5hahs6-10\n  lib/tdb/common/transaction.c   transaction.c-20070220022425-m1wibgjq7n5hahs6-11\n  lib/tdb/config.mk              config.mk-20070125040949-7t3f5zdl1q4z9hyv-63\n  lib/tdb/include/config.h.in    config.h.in-20070125040949-7t3f5zdl1q4z9hyv-100\n  lib/tdb/include/tdb.h          tdb.h-20070125040949-7t3f5zdl1q4z9hyv-101\n  lib/tdb/tdb.pc                 tdb.pc-20070125040949-7t3f5zdl1q4z9hyv-71\n  lib/tdb/tools/tdbtest.c        tdbtest.c-20070125040949-7t3f5zdl1q4z9hyv-107\n  lib/tdb/tools/tdbtool.c        tdbtool.c-20070125040949-7t3f5zdl1q4z9hyv-108\n  tcp/ctdb_tcp.h                 ctdb_tcp.h-20061127103747-l8xeniwiapbydehq-3\n  tcp/tcp_connect.c              tcp_connect.c-20061128004937-x70q1cu5xzg5g2tm-1\n  tcp/tcp_init.c                 tcp_init.c-20061128004937-x70q1cu5xzg5g2tm-2\n  tcp/tcp_io.c                   tcp_io.c-20061128004937-x70q1cu5xzg5g2tm-3\n  tests/bench.sh                 bench.sh-20070209014602-vdolpr6esqsa58s7-1\n  tests/test.sh                  test.sh-20061128065333-cla80zaxd9eb4o4a-2\n  tests/test1.sh                 test1.sh-20061130223403-jednzcvm60m0j75c-1\n  tests/ctdb_bench.c             ctdb_bench.c-20061219052637-2liagoglohxb6p7s-1\n  tests/ctdb_test.c              ctdb_test.c-20061117234101-o3qt14umlg9en8z0-16\n    ------------------------------------------------------------\n    revno: 44.1.70\n    merged: tridge@samba.org-20070416130336-89ba103e570a8324\n    parent: tridge@samba.org-20070416125258-ea015571e2818a42\n    committer: Andrew Tridgell \n    branch nick: tridge\n    timestamp: Mon 2007-04-16 23:03:36 +1000\n    message:\n      added a tdb_chainlock_nonblock() call to tdb\n    ------------------------------------------------------------\n    revno: 44.1.69\n    merged: tridge@samba.org-20070416125258-ea015571e2818a42\n    parent: tridge@samba.org-20070416124937-1a78f1fe8ec2719f\n    committer: Andrew Tridgell \n    branch nick: tridge\n    timestamp: Mon 2007-04-16 22:52:58 +1000\n    message:\n      merge local copy of tdb from samba4 tdb\n    ------------------------------------------------------------\n    revno: 44.1.68\n    merged: tridge@samba.org-20070416124937-1a78f1fe8ec2719f\n    parent: tridge@samba.org-20070416060137-6d90f720fec05ba5\n    committer: Andrew Tridgell \n    branch nick: tridge\n    timestamp: Mon 2007-04-16 22:49:37 +1000\n    message:\n      fixed a fd bug (thanks volker)\n    ------------------------------------------------------------\n    revno: 44.1.67\n    merged: tridge@samba.org-20070416060137-6d90f720fec05ba5\n    parent: tridge@samba.org-20070416041310-3f6200073a57aeff\n    committer: Andrew Tridgell \n    branch nick: tridge\n    timestamp: Mon 2007-04-16 16:01:37 +1000\n    message:\n      this is a demonstration of an idea for handling locks in ctdb.\n      \n      The problem we have is this:\n      \n        - we want the client smbd processes to be able to 'shortcut' access\n          to the ltdb, by directly accessing the ltdb, and if the header of\n          the record shows we are the dmaster then process immediately, with\n          no overhead of talking across the unix domain socket\n      \n        - a client doing a shortcut will use tdb_chainlock() to lock the\n          record while processing\n      \n        - we want the main ctdb daemon to be able to set locks on the\n          record, and when those locks collide with a 'shortcut' fcntl lock,\n          we want the ctdb daemon to keep processing other operations\n      \n        - we don't want to have to send a message from a smbd client to the\n          ctdbd each time it releases a lock\n      \n      The solution is shown in this example. Note that the expensive fork()\n      and blocking lock is only paid in case of contention, so in the median\n      case I think this is zero cost.\n    ------------------------------------------------------------\n    revno: 44.1.66\n    merged: tridge@samba.org-20070416041310-3f6200073a57aeff\n    parent: tridge@samba.org-20070416041250-3144d3c129a02c39\n    committer: Andrew Tridgell \n    branch nick: tridge\n    timestamp: Mon 2007-04-16 14:13:10 +1000\n    message:\n      merged from samba4\n    ------------------------------------------------------------\n    revno: 44.1.65\n    merged: tridge@samba.org-20070416041250-3144d3c129a02c39\n    parent: tridge@samba.org-20070416003139-ac731d5336e759e3\n    committer: Andrew Tridgell \n    branch nick: tridge\n    timestamp: Mon 2007-04-16 14:12:50 +1000\n    message:\n      pull out common command line code for tests into tests/cmdline.c\n    ------------------------------------------------------------\n    revno: 44.1.64\n    merged: tridge@samba.org-20070416003139-ac731d5336e759e3\n    parent: tridge@samba.org-20070416002144-34daa28d0f1d01db\n    committer: Andrew Tridgell \n    branch nick: tridge\n    timestamp: Mon 2007-04-16 10:31:39 +1000\n    message:\n      merge CTDB_SRVID_ALL patch from Samba4\n    ------------------------------------------------------------\n    revno: 44.1.63\n    merged: tridge@samba.org-20070416002144-34daa28d0f1d01db\n    parent: tridge@samba.org-20070415232910-a604c82b6945e169\n    committer: Andrew Tridgell \n    branch nick: tridge\n    timestamp: Mon 2007-04-16 10:21:44 +1000\n    message:\n      - fix includes to work in both samba4 and ctdb standalone\n      - when we do a store_unlock the lock record becomes unlocked, so we\n        must destroy it (or we leak memory)\n    ------------------------------------------------------------\n    revno: 44.1.62\n    merged: tridge@samba.org-20070415232910-a604c82b6945e169\n    parent: tridge@samba.org-20070415225857-c848786395133f34\n    committer: Andrew Tridgell \n    branch nick: tridge\n    timestamp: Mon 2007-04-16 09:29:10 +1000\n    message:\n      added --dblist option to ctdbd, to allow list of databases to be specified on the command line\n    ------------------------------------------------------------\n    revno: 44.1.61\n    merged: tridge@samba.org-20070415225857-c848786395133f34\n    parent: tridge@samba.org-20070414104443-0b90a6105ca1c1d5\n    parent: ronniesahlberg@gmail.com-20070415223727-ps2603m9yf67eprd\n    committer: Andrew Tridgell \n    branch nick: tridge\n    timestamp: Mon 2007-04-16 08:58:57 +1000\n    message:\n      merge from ronnie\n        ------------------------------------------------------------\n        revno: 44.1.22.1.3.1.21.2.20\n        merged: ronniesahlberg@gmail.com-20070415223727-ps2603m9yf67eprd\n        parent: ronniesahlberg@gmail.com-20070415043923-xyrm8hzk0cttscdk\n        committer: Ronnie sahlberg \n        branch nick: ctdb\n        timestamp: Mon 2007-04-16 08:37:27 +1000\n        message:\n          add code to fetch1 test to tell the two child processes one at a time to fetch_lock the same record\n          \n          they both successfully fetch and lock the same record at this stage  but when the actual locking works properly  the second child will block.\n          \n          this test allows us to verify the blocking once we have implemented it\n        ------------------------------------------------------------\n        revno: 44.1.22.1.3.1.21.2.19\n        merged: ronniesahlberg@gmail.com-20070415043923-xyrm8hzk0cttscdk\n        parent: ronniesahlberg@gmail.com-20070415040239-383gb8czso022sql\n        committer: Ronnie sahlberg \n        branch nick: ctdb\n        timestamp: Sun 2007-04-15 14:39:23 +1000\n        message:\n          add examples for volker on how to do fetchlock/storeunlock\n          \n          \n          note that the actual locking/unl;ocking does not still work\n        ------------------------------------------------------------\n        revno: 44.1.22.1.3.1.21.2.18\n        merged: ronniesahlberg@gmail.com-20070415040239-383gb8czso022sql\n        parent: ronniesahlberg@gmail.com-20070414214135-l3f8z7kruoc30wiv\n        committer: Ronnie sahlberg \n        branch nick: ctdb\n        timestamp: Sun 2007-04-15 14:02:39 +1000\n        message:\n          update to fetch1.sh test\n          \n          there is still a bug in the ctdb code in that the children no longer receive messages from the parent for unknown reasons\n        ------------------------------------------------------------\n        revno: 44.1.22.1.3.1.21.2.17\n        merged: ronniesahlberg@gmail.com-20070414214135-l3f8z7kruoc30wiv\n        parent: ronniesahlberg@gmail.com-20070413111020-b1h85vmf9a931fkn\n        parent: tridge@samba.org-20070414104443-0b90a6105ca1c1d5\n        committer: Ronnie sahlberg \n        branch nick: ctdb\n        timestamp: Sun 2007-04-15 07:41:35 +1000\n        message:\n          merge from tridge\n        ------------------------------------------------------------\n        revno: 44.1.22.1.3.1.21.2.16\n        merged: ronniesahlberg@gmail.com-20070413111020-b1h85vmf9a931fkn\n        parent: ronniesahlberg@gmail.com-20070413103741-t7jc7c48i2rl2v1d\n        parent: tridge@samba.org-20070413103824-0c5e1dbd679c73bd\n        committer: Ronnie sahlberg \n        branch nick: ctdb\n        timestamp: Fri 2007-04-13 21:10:20 +1000\n        message:\n          merge from tridge\n    ------------------------------------------------------------\n    revno: 44.1.60\n    merged: tridge@samba.org-20070414104443-0b90a6105ca1c1d5\n    parent: tridge@samba.org-20070413103824-0c5e1dbd679c73bd\n    parent: ronniesahlberg@gmail.com-20070413103741-t7jc7c48i2rl2v1d\n    committer: Andrew Tridgell \n    branch nick: tridge\n    timestamp: Sat 2007-04-14 20:44:43 +1000\n    message:\n      merge from ronnie\n        ------------------------------------------------------------\n        revno: 44.1.22.1.3.1.21.2.15\n        merged: ronniesahlberg@gmail.com-20070413103741-t7jc7c48i2rl2v1d\n        parent: ronniesahlberg@gmail.com-20070412234456-b80kjt2dz2213ijc\n        committer: Ronnie sahlberg \n        branch nick: ctdb\n        timestamp: Fri 2007-04-13 20:37:41 +1000\n        message:\n          add missing code to store_unlock so that the data that a client writes is stored in ltdb\n          \n          this makes it possible to do fetch_lock and store_unlock across a domain socket to read/write data.\n          \n          \n          note that the actual locking is NOT implemented yet\n    ------------------------------------------------------------\n    revno: 44.1.59\n    merged: tridge@samba.org-20070413103824-0c5e1dbd679c73bd\n    parent: tridge@samba.org-20070413054933-80991e4c45e8d3ec\n    committer: Andrew Tridgell \n    branch nick: tridge\n    timestamp: Fri 2007-04-13 20:38:24 +1000\n    message:\n      private -> private_data for samba3\n    ------------------------------------------------------------\n    revno: 44.1.58\n    merged: tridge@samba.org-20070413054933-80991e4c45e8d3ec\n    parent: tridge@samba.org-20070412113216-fee7ab5e7b68876e\n    parent: ronniesahlberg@gmail.com-20070412234456-b80kjt2dz2213ijc\n    committer: Andrew Tridgell \n    branch nick: tridge\n    timestamp: Fri 2007-04-13 15:49:33 +1000\n    message:\n      merge store_unlock code from ronnie\n        ------------------------------------------------------------\n        revno: 44.1.22.1.3.1.21.2.14\n        merged: ronniesahlberg@gmail.com-20070412234456-b80kjt2dz2213ijc\n        parent: ronniesahlberg@gmail.com-20070412234115-kwtfpjz5mfbc6m9y\n        committer: Ronnie sahlberg \n        branch nick: ctdb\n        timestamp: Fri 2007-04-13 09:44:56 +1000\n        message:\n          add more elaborate test to fetch1 test\n          \n          for now:\n          fetch a record\n          store a known entry for this record\n          fetch the record again  (and later verify we got the same record)\n          store it back again\n          \n          this will not work right now since we dont yet store the record inside the daemon\n        ------------------------------------------------------------\n        revno: 44.1.22.1.3.1.21.2.13\n        merged: ronniesahlberg@gmail.com-20070412234115-kwtfpjz5mfbc6m9y\n        parent: ronniesahlberg@gmail.com-20070412113516-3ndq3txmcox96hun\n        committer: Ronnie sahlberg \n        branch nick: ctdb\n        timestamp: Fri 2007-04-13 09:41:15 +1000\n        message:\n          add store_unlock pdu's for the domain socket.\n          \n          note that the store_unlock does not actually do anything yet apart from passing the pdu from client to daemon   and daemon responds.\n          \n          next is to make sure the daemon actually stores the data in a database\n        ------------------------------------------------------------\n        revno: 44.1.22.1.3.1.21.2.12\n        merged: ronniesahlberg@gmail.com-20070412113516-3ndq3txmcox96hun\n        parent: ronniesahlberg@gmail.com-20070412111900-wepo4bxsice2f80b\n        parent: tridge@samba.org-20070412113216-fee7ab5e7b68876e\n        committer: Ronnie sahlberg \n        branch nick: ctdb\n        timestamp: Thu 2007-04-12 21:35:16 +1000\n        message:\n          merge from tridge\n    ------------------------------------------------------------\n    revno: 44.1.57\n    merged: tridge@samba.org-20070412113216-fee7ab5e7b68876e\n    parent: tridge@samba.org-20070412065133-99dc26f997d078f8\n    parent: ronniesahlberg@gmail.com-20070412111900-wepo4bxsice2f80b\n    committer: Andrew Tridgell \n    branch nick: tridge\n    timestamp: Thu 2007-04-12 21:32:16 +1000\n    message:\n      merge from ronnie\n        ------------------------------------------------------------\n        revno: 44.1.22.1.3.1.21.2.11\n        merged: ronniesahlberg@gmail.com-20070412111900-wepo4bxsice2f80b\n        parent: ronniesahlberg@gmail.com-20070412111710-8p7hdtwnxkj7s961\n        committer: Ronnie sahlberg \n        branch nick: ctdb\n        timestamp: Thu 2007-04-12 21:19:00 +1000\n        message:\n          add the two missing file from the previous commit\n        ------------------------------------------------------------\n        revno: 44.1.22.1.3.1.21.2.10\n        merged: ronniesahlberg@gmail.com-20070412111710-8p7hdtwnxkj7s961\n        parent: ronniesahlberg@gmail.com-20070412111441-z2cmbj9xi2tnv9q3\n        committer: Ronnie sahlberg \n        branch nick: ctdb\n        timestamp: Thu 2007-04-12 21:17:10 +1000\n        message:\n          add a beginning of a new test\n          \n          right now this test only does one fetch lock   but this will be enhanced as more code is added to ctdb to handle fetch_lock and store_unlock\n        ------------------------------------------------------------\n        revno: 44.1.22.1.3.1.21.2.9\n        merged: ronniesahlberg@gmail.com-20070412111441-z2cmbj9xi2tnv9q3\n        parent: ronniesahlberg@gmail.com-20070412071348-ihjz6gkbzfphsmv3\n        committer: Ronnie sahlberg \n        branch nick: ctdb\n        timestamp: Thu 2007-04-12 21:14:41 +1000\n        message:\n          when sending back a fetch lock reply to a client \n          we cant peek in state->c since this is uninitialized \n          and even if it were not it would be wrong\n          \n          create a new structure to pass BOTH client and also the reqid to respond back to\n          the client with\n        ------------------------------------------------------------\n        revno: 44.1.22.1.3.1.21.2.8\n        merged: ronniesahlberg@gmail.com-20070412071348-ihjz6gkbzfphsmv3\n        parent: ronniesahlberg@gmail.com-20070412064937-g01hesz6aocdbc5l\n        parent: tridge@samba.org-20070412065133-99dc26f997d078f8\n        committer: Ronnie sahlberg \n        branch nick: ctdb\n        timestamp: Thu 2007-04-12 17:13:48 +1000\n        message:\n          merge from tridges tree\n    ------------------------------------------------------------\n    revno: 44.1.56\n    merged: tridge@samba.org-20070412065133-99dc26f997d078f8\n    parent: tridge@samba.org-20070412005155-1411dc471326a713\n    parent: ronniesahlberg@gmail.com-20070412064937-g01hesz6aocdbc5l\n    committer: Andrew Tridgell \n    branch nick: tridge\n    timestamp: Thu 2007-04-12 16:51:33 +1000\n    message:\n      merge from ronnie\n        ------------------------------------------------------------\n        revno: 44.1.22.1.3.1.21.2.7\n        merged: ronniesahlberg@gmail.com-20070412064937-g01hesz6aocdbc5l\n        parent: ronniesahlberg@gmail.com-20070412054650-ry0vg3kqxomin29t\n        committer: Ronnie sahlberg \n        branch nick: ctdb\n        timestamp: Thu 2007-04-12 16:49:37 +1000\n        message:\n          dont hardcode gdb in the test script.     ooops\n        ------------------------------------------------------------\n        revno: 44.1.22.1.3.1.21.2.6\n        merged: ronniesahlberg@gmail.com-20070412054650-ry0vg3kqxomin29t\n        parent: ronniesahlberg@gmail.com-20070412005219-6r0ulesm1wh1ivoh\n        committer: Ronnie sahlberg \n        branch nick: ctdb\n        timestamp: Thu 2007-04-12 15:46:50 +1000\n        message:\n          initial support for two new pdus for the domain socket to do fetch_lock\n          \n          no locking is yet done and the store_unlock call is still missing\n          \n          \n          the ./tests/fetch.sh --daemon  test fails with parent process dying which needs to be investigated.\n        ------------------------------------------------------------\n        revno: 44.1.22.1.3.1.21.2.5\n        merged: ronniesahlberg@gmail.com-20070412005219-6r0ulesm1wh1ivoh\n        parent: ronniesahlberg@gmail.com-20070411230927-88foctkqh1hqr8ab\n        parent: tridge@samba.org-20070412004418-85381cc96b73ebe8\n        parent: tridge@samba.org-20070412004418-85381cc96b73ebe8\n        parent: tridge@samba.org-20070412004418-85381cc96b73ebe8\n        parent: tridge@samba.org-20070412004418-85381cc96b73ebe8\n        parent: tridge@samba.org-20070412004418-85381cc96b73ebe8\n        parent: tridge@samba.org-20070412005155-1411dc471326a713\n        committer: Ronnie sahlberg \n        branch nick: ctdb\n        timestamp: Thu 2007-04-12 10:52:19 +1000\n        message:\n          merge from volker\n    ------------------------------------------------------------\n    revno: 44.1.55\n    merged: tridge@samba.org-20070412005155-1411dc471326a713\n    parent: tridge@samba.org-20070412004418-85381cc96b73ebe8\n    parent: vl@samba.org-20070411181215-rnhs93mcorxy9urf\n    committer: Andrew Tridgell \n    branch nick: tridge\n    timestamp: Thu 2007-04-12 10:51:55 +1000\n    message:\n      merge from vl\n        ------------------------------------------------------------\n        revno: 44.1.22.1.3.1.25\n        merged: vl@samba.org-20070411181215-rnhs93mcorxy9urf\n        parent: vl@samba.org-20070411145206-wwrw1bsq7fkshp2o\n        committer: Volker Lendecke \n        branch nick: ctdb-vl\n        timestamp: Wed 2007-04-11 20:12:15 +0200\n        message:\n          Rename \"private\" to \"private_data\"\n        ------------------------------------------------------------\n        revno: 44.1.22.1.3.1.24\n        merged: vl@samba.org-20070411145206-wwrw1bsq7fkshp2o\n        parent: vl@samba.org-20070411145125-2zvvrv3zw3nvn83s\n        parent: tridge@samba.org-20070411122143-e0d0192ca901c6f9\n        committer: Volker Lendecke \n        branch nick: ctdb-vl\n        timestamp: Wed 2007-04-11 16:52:06 +0200\n        message:\n          Merge tridge's tree\n        ------------------------------------------------------------\n        revno: 44.1.22.1.3.1.23\n        merged: vl@samba.org-20070411145125-2zvvrv3zw3nvn83s\n        parent: vl@samba.org-20070411115758-oua7f39sry0tw1z9\n        committer: Volker Lendecke \n        branch nick: ctdb-vl\n        timestamp: Wed 2007-04-11 16:51:25 +0200\n        message:\n          Add a test to read back the message\n          \n          Volker\n    ------------------------------------------------------------\n    revno: 44.1.54\n    merged: tridge@samba.org-20070412004418-85381cc96b73ebe8\n    parent: tridge@samba.org-20070411122143-e0d0192ca901c6f9\n    parent: ronniesahlberg@gmail.com-20070411230927-88foctkqh1hqr8ab\n    committer: Andrew Tridgell \n    branch nick: tridge\n    timestamp: Thu 2007-04-12 10:44:18 +1000\n    message:\n      merge from ronnie\n        ------------------------------------------------------------\n        revno: 44.1.22.1.3.1.21.2.4\n        merged: ronniesahlberg@gmail.com-20070411230927-88foctkqh1hqr8ab\n        parent: ronniesahlberg@gmail.com-20070411224415-ix25hyi4thd8ydoe\n        committer: Ronnie sahlberg \n        branch nick: ctdb\n        timestamp: Thu 2007-04-12 09:09:27 +1000\n        message:\n          add an example on how to read a message from the domain socket\n        ------------------------------------------------------------\n        revno: 44.1.22.1.3.1.21.2.3\n        merged: ronniesahlberg@gmail.com-20070411224415-ix25hyi4thd8ydoe\n        parent: ronniesahlberg@gmail.com-20070411222854-5k8oj8f10kqzasro\n        committer: Ronnie sahlberg \n        branch nick: ctdb\n        timestamp: Thu 2007-04-12 08:44:15 +1000\n        message:\n          do an infinite loop calling event_loop_once() in the ctdbd parent process instead of event_loop_wait()  since the latter will return and thus take down the daemon\n        ------------------------------------------------------------\n        revno: 44.1.22.1.3.1.21.2.2\n        merged: ronniesahlberg@gmail.com-20070411222854-5k8oj8f10kqzasro\n        parent: ronniesahlberg@gmail.com-20070411214928-pizt3e0yiw8ehql2\n        committer: Ronnie sahlberg \n        branch nick: ctdb\n        timestamp: Thu 2007-04-12 08:28:54 +1000\n        message:\n          add a test message to the messaging test so we can see that the message data is also passed from originator to receiver\n        ------------------------------------------------------------\n        revno: 44.1.22.1.3.1.21.2.1\n        merged: ronniesahlberg@gmail.com-20070411214928-pizt3e0yiw8ehql2\n        parent: ronniesahlberg@gmail.com-20070411103224-hvqzewjcfhpxcgbg\n        parent: tridge@samba.org-20070411122143-e0d0192ca901c6f9\n        committer: Ronnie sahlberg \n        branch nick: ctdb\n        timestamp: Thu 2007-04-12 07:49:28 +1000\n        message:\n          merge from ridge and vl\n    ------------------------------------------------------------\n    revno: 44.1.53\n    merged: tridge@samba.org-20070411122143-e0d0192ca901c6f9\n    parent: tridge@samba.org-20070411121946-c5d80408a49dda5b\n    committer: Andrew Tridgell \n    branch nick: tridge\n    timestamp: Wed 2007-04-11 22:21:43 +1000\n    message:\n      use event_loop_wait instead of while(1)\n    ------------------------------------------------------------\n    revno: 44.1.52\n    merged: tridge@samba.org-20070411121946-c5d80408a49dda5b\n    parent: tridge@samba.org-20070411121724-5e763a4a0a3fc6ac\n    committer: Andrew Tridgell \n    branch nick: tridge\n    timestamp: Wed 2007-04-11 22:19:46 +1000\n    message:\n      use lib/replace for signal.h\n    ------------------------------------------------------------\n    revno: 44.1.51\n    merged: tridge@samba.org-20070411121724-5e763a4a0a3fc6ac\n    parent: tridge@samba.org-20070411121107-b9d7c18f685f344f\n    parent: vl@samba.org-20070411115758-oua7f39sry0tw1z9\n    committer: Andrew Tridgell \n    branch nick: tridge\n    timestamp: Wed 2007-04-11 22:17:24 +1000\n    message:\n      merge from volker\n        ------------------------------------------------------------\n        revno: 44.1.22.1.3.1.22\n        merged: vl@samba.org-20070411115758-oua7f39sry0tw1z9\n        parent: ronniesahlberg@gmail.com-20070411103224-hvqzewjcfhpxcgbg\n        parent: vl@samba.org-20070411111736-rllo7o2u3tnzq0pg\n        committer: Volker Lendecke \n        branch nick: ctdb-vl\n        timestamp: Wed 2007-04-11 13:57:58 +0200\n        message:\n          merge\n        ------------------------------------------------------------\n        revno: 44.1.22.1.3.1.21.1.2\n        merged: vl@samba.org-20070411111736-rllo7o2u3tnzq0pg\n        parent: vl@samba.org-20070411104910-78d551d2qsfxpytz\n        committer: Volker Lendecke \n        branch nick: ctdb\n        timestamp: Wed 2007-04-11 13:17:36 +0200\n        message:\n          Handle a client that exited correctly: We need to ignore SIGPIPE and when the\n          read returns 0 bytes this means the client has exited. Close the connection\n          then.\n        ------------------------------------------------------------\n        revno: 44.1.22.1.3.1.21.1.1\n        merged: vl@samba.org-20070411104910-78d551d2qsfxpytz\n        parent: ronniesahlberg@gmail.com-20070411103224-hvqzewjcfhpxcgbg\n        committer: Volker Lendecke \n        branch nick: ctdb\n        timestamp: Wed 2007-04-11 12:49:10 +0200\n        message:\n          Fix uninitialized variable warnings\n    ------------------------------------------------------------\n    revno: 44.1.50\n    merged: tridge@samba.org-20070411121107-b9d7c18f685f344f\n    parent: tridge@samba.org-20070411052350-eb4fe86cc87ea5ed\n    parent: ronniesahlberg@gmail.com-20070411103224-hvqzewjcfhpxcgbg\n    committer: Andrew Tridgell \n    branch nick: tridge\n    timestamp: Wed 2007-04-11 22:11:07 +1000\n    message:\n      merge from ronnie\n        ------------------------------------------------------------\n        revno: 44.1.22.1.3.1.21\n        merged: ronniesahlberg@gmail.com-20070411103224-hvqzewjcfhpxcgbg\n        parent: ronniesahlberg@gmail.com-20070411092719-nozq5vqjqueshjnp\n        committer: Ronnie sahlberg \n        branch nick: ctdb\n        timestamp: Wed 2007-04-11 20:32:24 +1000\n        message:\n          add an example on how to send a message to the daemon\n          (send a message to ourself)\n          \n          this unfortunately terminates the ctdb daemon when running   but im too tired right now to debug it.\n          checkin so that nothing gets lost overnight.\n        ------------------------------------------------------------\n        revno: 44.1.22.1.3.1.20\n        merged: ronniesahlberg@gmail.com-20070411092719-nozq5vqjqueshjnp\n        parent: ronniesahlberg@gmail.com-20070411090409-ah3bxg5j23a5t12u\n        committer: Ronnie sahlberg \n        branch nick: ctdb\n        timestamp: Wed 2007-04-11 19:27:19 +1000\n        message:\n          add call/reply parsing of the cluster connect-wait call to the test daemon.\n        ------------------------------------------------------------\n        revno: 44.1.22.1.3.1.19\n        merged: ronniesahlberg@gmail.com-20070411090409-ah3bxg5j23a5t12u\n        parent: ronniesahlberg@gmail.com-20070411085422-urfmy9oq2pnts1j8\n        committer: Ronnie sahlberg \n        branch nick: ctdb\n        timestamp: Wed 2007-04-11 19:04:09 +1000\n        message:\n          add a vnn field to the ctdb_reply_connect_wait pdu so that we can tell\n          non-ctdb-linked clients what the vnn of the local cluster daemon is\n        ------------------------------------------------------------\n        revno: 44.1.22.1.3.1.18\n        merged: ronniesahlberg@gmail.com-20070411085422-urfmy9oq2pnts1j8\n        parent: ronniesahlberg@gmail.com-20070411054003-6lfat5jujxfmkmgs\n        committer: Ronnie sahlberg \n        branch nick: ctdb\n        timestamp: Wed 2007-04-11 18:54:22 +1000\n        message:\n          create a standalone ctdb daemon and a script ./direct/ctdbd.sh to start two such daemons in a 2 node cluster.\n          \n          create a small test application that connects to the ctdb daemon at /tmp/ctdb.socket.127.0.0.1 and do some commands to the daemon.\n          currently this test tool only opens the socket and registers its pid with the daemon\n          (the daemon needs to know the pid so that it can forward messages to the correct client)\n          \n          the test will be extended with additional ctdb commands\n        ------------------------------------------------------------\n        revno: 44.1.22.1.3.1.17\n        merged: ronniesahlberg@gmail.com-20070411054003-6lfat5jujxfmkmgs\n        parent: ronniesahlberg@gmail.com-20070411034315-806oyqbe9sf33dd9\n        parent: tridge@samba.org-20070411052350-eb4fe86cc87ea5ed\n        committer: Ronnie sahlberg \n        branch nick: ctdb\n        timestamp: Wed 2007-04-11 15:40:03 +1000\n        message:\n          merge from tridge\n    ------------------------------------------------------------\n    revno: 44.1.49\n    merged: tridge@samba.org-20070411052350-eb4fe86cc87ea5ed\n    parent: tridge@samba.org-20070411050922-59469f0a8a24cf4b\n    committer: Andrew Tridgell \n    branch nick: tridge\n    timestamp: Wed 2007-04-11 15:23:50 +1000\n    message:\n      added --num-clients option to ctdb_messaging test\n    ------------------------------------------------------------\n    revno: 44.1.48\n    merged: tridge@samba.org-20070411050922-59469f0a8a24cf4b\n    parent: tridge@samba.org-20070411045447-b201f3449504949a\n    committer: Andrew Tridgell \n    branch nick: tridge\n    timestamp: Wed 2007-04-11 15:09:22 +1000\n    message:\n      use the new connect_wait code in the ctdb_messaging test\n    ------------------------------------------------------------\n    revno: 44.1.47\n    merged: tridge@samba.org-20070411045447-b201f3449504949a\n    parent: tridge@samba.org-20070411042614-eada54e55ac13cf8\n    committer: Andrew Tridgell \n    branch nick: tridge\n    timestamp: Wed 2007-04-11 14:54:47 +1000\n    message:\n      add proper support for ctdb_connect_wait in daemon mode\n    ------------------------------------------------------------\n    revno: 44.1.46\n    merged: tridge@samba.org-20070411042614-eada54e55ac13cf8\n    parent: tridge@samba.org-20070411040501-043570f3088576d6\n    committer: Andrew Tridgell \n    branch nick: tridge\n    timestamp: Wed 2007-04-11 14:26:14 +1000\n    message:\n      fixed sending messages to ourselves in non-daemon mode\n    ------------------------------------------------------------\n    revno: 44.1.45\n    merged: tridge@samba.org-20070411040501-043570f3088576d6\n    parent: tridge@samba.org-20070411015828-e253a2891120b563\n    parent: ronniesahlberg@gmail.com-20070411034315-806oyqbe9sf33dd9\n    committer: Andrew Tridgell \n    branch nick: tridge\n    timestamp: Wed 2007-04-11 14:05:01 +1000\n    message:\n      merge from ronnie, plus complete the client side of inter-node messaging\n        ------------------------------------------------------------\n        revno: 44.1.22.1.3.1.16\n        merged: ronniesahlberg@gmail.com-20070411034315-806oyqbe9sf33dd9\n        parent: ronniesahlberg@gmail.com-20070411010820-8dldbhtoz9oeps1a\n        parent: tridge@samba.org-20070411015828-e253a2891120b563\n        committer: Ronnie sahlberg \n        branch nick: ctdb\n        timestamp: Wed 2007-04-11 13:43:15 +1000\n        message:\n          add a test that sends messages between clients connected to the same ctdb\n          \n          add code to actually pass the messages between clients and ctdb\n    ------------------------------------------------------------\n    revno: 44.1.44\n    merged: tridge@samba.org-20070411015828-e253a2891120b563\n    parent: tridge@samba.org-20070411011144-6595072619c53c52\n    committer: Andrew Tridgell \n    branch nick: tridge\n    timestamp: Wed 2007-04-11 11:58:28 +1000\n    message:\n      partially completed work towards full messaging system which will work in both daemon and standalone mode. Does not compile\\! committing so ronnie can continue while I'm out\n    ------------------------------------------------------------\n    revno: 44.1.43\n    merged: tridge@samba.org-20070411011144-6595072619c53c52\n    parent: tridge@samba.org-20070411010226-3f2b9b5bcdffa4d2\n    parent: ronniesahlberg@gmail.com-20070411010820-8dldbhtoz9oeps1a\n    committer: Andrew Tridgell \n    branch nick: tridge\n    timestamp: Wed 2007-04-11 11:11:44 +1000\n    message:\n      merge from ronnie\n        ------------------------------------------------------------\n        revno: 44.1.22.1.3.1.15\n        merged: ronniesahlberg@gmail.com-20070411010820-8dldbhtoz9oeps1a\n        parent: ronniesahlberg@gmail.com-20070410111455-rbavt7l9afkyze4p\n        parent: tridge@samba.org-20070411010226-3f2b9b5bcdffa4d2\n        committer: Ronnie sahlberg \n        branch nick: ctdb\n        timestamp: Wed 2007-04-11 11:08:20 +1000\n        message:\n          merge from tridge\n        ------------------------------------------------------------\n        revno: 44.1.22.1.3.1.14\n        merged: ronniesahlberg@gmail.com-20070410111455-rbavt7l9afkyze4p\n        parent: ronniesahlberg@gmail.com-20070410110529-ocrxhoa0xp5b3s3v\n        committer: Ronnie sahlberg \n        branch nick: ctdb\n        timestamp: Tue 2007-04-10 21:14:55 +1000\n        message:\n          rename client.id to client.messenger_id to make the purpose of the field more obvious\n        ------------------------------------------------------------\n        revno: 44.1.22.1.3.1.13\n        merged: ronniesahlberg@gmail.com-20070410110529-ocrxhoa0xp5b3s3v\n        parent: ronniesahlberg@gmail.com-20070410102511-sxaua0csi2ia1234\n        committer: Ronnie sahlberg \n        branch nick: ctdb\n        timestamp: Tue 2007-04-10 21:05:29 +1000\n        message:\n          add a call to register the pid for a messengin service\n          \n          store this pid inside the client structure in the ctdb daemon\n        ------------------------------------------------------------\n        revno: 44.1.22.1.3.1.12\n        merged: ronniesahlberg@gmail.com-20070410102511-sxaua0csi2ia1234\n        parent: ronniesahlberg@gmail.com-20070410045323-893gitfaif8bmigt\n        parent: tridge@samba.org-20070410094029-2b9561032c749c8a\n        committer: Ronnie sahlberg \n        branch nick: ctdb\n        timestamp: Tue 2007-04-10 20:25:11 +1000\n        message:\n          updates from tridges tree\n    ------------------------------------------------------------\n    revno: 44.1.42\n    merged: tridge@samba.org-20070411010226-3f2b9b5bcdffa4d2\n    parent: tridge@samba.org-20070411010142-79dd71bdf0bed79f\n    committer: Andrew Tridgell \n    branch nick: tridge\n    timestamp: Wed 2007-04-11 11:02:26 +1000\n    message:\n      forgot to add ctdb_client.c\n    ------------------------------------------------------------\n    revno: 44.1.41\n    merged: tridge@samba.org-20070411010142-79dd71bdf0bed79f\n    parent: tridge@samba.org-20070410104831-d956235aa1d7329f\n    committer: Andrew Tridgell \n    branch nick: tridge\n    timestamp: Wed 2007-04-11 11:01:42 +1000\n    message:\n       - add --daemon flag to ctdb_fetch test code\n       - split client specific routines out of ctdb_daemon.c\n       - use ctdb_queue code in message send from client to daemon\n       - use clearer names in client/daemon functions\n       - use talloc autofree context to avoid global for unlink of socket on\n         exit\n       - start on API change for message handler, to allow ctdb messaging to\n         handle daemon mode with multiple clients\n    ------------------------------------------------------------\n    revno: 44.1.40\n    merged: tridge@samba.org-20070410104831-d956235aa1d7329f\n    parent: tridge@samba.org-20070410094029-2b9561032c749c8a\n    committer: Andrew Tridgell \n    branch nick: tridge\n    timestamp: Tue 2007-04-10 20:48:31 +1000\n    message:\n      fix the queueing for partially connected tcp sockets\n    ------------------------------------------------------------\n    revno: 44.1.39\n    merged: tridge@samba.org-20070410094029-2b9561032c749c8a\n    parent: tridge@samba.org-20070410093521-faf87738c5a369a7\n    committer: Andrew Tridgell \n    branch nick: tridge\n    timestamp: Tue 2007-04-10 19:40:29 +1000\n    message:\n      make some functions static, and remove an unused structure\n    ------------------------------------------------------------\n    revno: 44.1.38\n    merged: tridge@samba.org-20070410093521-faf87738c5a369a7\n    parent: tridge@samba.org-20070410093321-3dfc6368f2d792c8\n    parent: ronniesahlberg@gmail.com-20070410045323-893gitfaif8bmigt\n    committer: Andrew Tridgell \n    branch nick: tridge\n    timestamp: Tue 2007-04-10 19:35:21 +1000\n    message:\n      merge from ronnie\n        ------------------------------------------------------------\n        revno: 44.1.22.1.3.1.11\n        merged: ronniesahlberg@gmail.com-20070410045323-893gitfaif8bmigt\n        parent: ronniesahlberg@gmail.com-20070410031715-9ec894cesu1zghs4\n        committer: Ronnie sahlberg \n        branch nick: ctdb\n        timestamp: Tue 2007-04-10 14:53:23 +1000\n        message:\n          remove old ifdef that remained from when this was a header file\n    ------------------------------------------------------------\n    revno: 44.1.37\n    merged: tridge@samba.org-20070410093321-3dfc6368f2d792c8\n    parent: tridge@samba.org-20070410044813-b5c4d10a223f32dd\n    committer: Andrew Tridgell \n    branch nick: tridge\n    timestamp: Tue 2007-04-10 19:33:21 +1000\n    message:\n      made all sockets handle partial IO\n      abstract IO via ctdb_queue_*() functions\n    ------------------------------------------------------------\n    revno: 44.1.36\n    merged: tridge@samba.org-20070410044813-b5c4d10a223f32dd\n    parent: tridge@samba.org-20070410044632-78db5388490c3d40\n    parent: ronniesahlberg@gmail.com-20070410031715-9ec894cesu1zghs4\n    committer: Andrew Tridgell \n    branch nick: tridge\n    timestamp: Tue 2007-04-10 14:48:13 +1000\n    message:\n      merge tcp changes from ronnie\n        ------------------------------------------------------------\n        revno: 44.1.22.1.3.1.10\n        merged: ronniesahlberg@gmail.com-20070410031715-9ec894cesu1zghs4\n        parent: ronniesahlberg@gmail.com-20070410023925-skzpy7ls4t4z5lzp\n        committer: Ronnie sahlberg \n        branch nick: ctdb\n        timestamp: Tue 2007-04-10 13:17:15 +1000\n        message:\n          change the tcp code to call ctdb_read_pdu() instead of doing the partial read thing explicitely\n    ------------------------------------------------------------\n    revno: 44.1.35\n    merged: tridge@samba.org-20070410044632-78db5388490c3d40\n    parent: tridge@samba.org-20070410030647-42fc31cb19982f18\n    committer: Andrew Tridgell \n    branch nick: tridge\n    timestamp: Tue 2007-04-10 14:46:32 +1000\n    message:\n      added daemon mode to ctdb_bench\n    ------------------------------------------------------------\n    revno: 44.1.34\n    merged: tridge@samba.org-20070410030647-42fc31cb19982f18\n    parent: tridge@samba.org-20070410030523-6999e1796946bdfe\n    parent: ronniesahlberg@gmail.com-20070410023925-skzpy7ls4t4z5lzp\n    committer: Andrew Tridgell \n    branch nick: tridge\n    timestamp: Tue 2007-04-10 13:06:47 +1000\n    message:\n      merge from ronnie\n        ------------------------------------------------------------\n        revno: 44.1.22.1.3.1.9\n        merged: ronniesahlberg@gmail.com-20070410023925-skzpy7ls4t4z5lzp\n        parent: ronniesahlberg@gmail.com-20070410022310-vg2sqat3nfcrxvh1\n        committer: Ronnie sahlberg \n        branch nick: ctdb\n        timestamp: Tue 2007-04-10 12:39:25 +1000\n        message:\n          move the checking of the CONNECT_WAIT flag into the start method for tcp\n        ------------------------------------------------------------\n        revno: 44.1.22.1.3.1.8\n        merged: ronniesahlberg@gmail.com-20070410022310-vg2sqat3nfcrxvh1\n        parent: ronniesahlberg@gmail.com-20070410021858-cnk4wlf2s612ue5i\n        committer: Ronnie sahlberg \n        branch nick: ctdb\n        timestamp: Tue 2007-04-10 12:23:10 +1000\n        message:\n          restore the test script that was updated by mistake in the previous checkin\n        ------------------------------------------------------------\n        revno: 44.1.22.1.3.1.7\n        merged: ronniesahlberg@gmail.com-20070410021858-cnk4wlf2s612ue5i\n        parent: ronniesahlberg@gmail.com-20070409224739-vqgs0b5pvexdf0xu\n        committer: Ronnie sahlberg \n        branch nick: ctdb\n        timestamp: Tue 2007-04-10 12:18:58 +1000\n        message:\n          add a CONNECT_WAIT flag to replace the call ctdb_connect_wait() since \n          we can no longer use this function from the application if we are in daemon mode.\n          \n          \n          add a horrible \"sleep()\" to ctdb_test.c   to prevent the daemon from dissapearing (parent process died) when the application exits which may happen before the other nodes in the test have finished talking to our daemon\n        ------------------------------------------------------------\n        revno: 44.1.22.1.3.1.6\n        merged: ronniesahlberg@gmail.com-20070409224739-vqgs0b5pvexdf0xu\n        parent: ronniesahlberg@gmail.com-20070409223829-80dgr2d4m33gant8\n        committer: Ronnie sahlberg \n        branch nick: ctdb\n        timestamp: Tue 2007-04-10 08:47:39 +1000\n        message:\n          add a atexit() call to remove the domain socket when the daemon exits\n        ------------------------------------------------------------\n        revno: 44.1.22.1.3.1.5\n        merged: ronniesahlberg@gmail.com-20070409223829-80dgr2d4m33gant8\n        parent: ronniesahlberg@gmail.com-20070409200339-jng2tmd7iz7pbl5k\n        committer: Ronnie sahlberg \n        branch nick: ctdb\n        timestamp: Tue 2007-04-10 08:38:29 +1000\n        message:\n          change ctdb_client_read() to use the ctdb_read_pdu() helper\n        ------------------------------------------------------------\n        revno: 44.1.22.1.3.1.4\n        merged: ronniesahlberg@gmail.com-20070409200339-jng2tmd7iz7pbl5k\n        parent: ronniesahlberg@gmail.com-20070409015127-ptae8qdwajxjk4nq\n        committer: Ronnie sahlberg \n        branch nick: ctdb\n        timestamp: Tue 2007-04-10 06:03:39 +1000\n        message:\n          make normal/deamon mode controllable by a ctdb flag so that the api looks the same in both modes to a client.\n          \n          send the correct structure back to a client\n          \n          assorted other cleanups\n          \n          (tests/test1.sh now works in daemon mode)\n        ------------------------------------------------------------\n        revno: 44.1.22.1.3.1.3\n        merged: ronniesahlberg@gmail.com-20070409015127-ptae8qdwajxjk4nq\n        parent: ronniesahlberg@gmail.com-20070408021148-2sa1cwikee5mfaki\n        committer: Ronnie sahlberg \n        branch nick: ctdb\n        timestamp: Mon 2007-04-09 11:51:27 +1000\n        message:\n          dispatcher daemon   first try.\n          \n          does not yet work\n        ------------------------------------------------------------\n        revno: 44.1.22.1.3.1.2\n        merged: ronniesahlberg@gmail.com-20070408021148-2sa1cwikee5mfaki\n        parent: ronniesahlberg@gmail.com-20070405230841-qvbelakbhbpl1za4\n        parent: tridge@samba.org-20070407005814-c83829906f25bead\n        committer: Ronnie sahlberg \n        branch nick: ctdb\n        timestamp: Sun 2007-04-08 12:11:48 +1000\n        message:\n          merge from tridge\n    ------------------------------------------------------------\n    revno: 44.1.33\n    merged: tridge@samba.org-20070410030523-6999e1796946bdfe\n    parent: tridge@samba.org-20070410025154-12ddbf5dc4ff7bf6\n    committer: Andrew Tridgell \n    branch nick: tridge\n    timestamp: Tue 2007-04-10 13:05:23 +1000\n    message:\n      fix a possible free after use\n    ------------------------------------------------------------\n    revno: 44.1.32\n    merged: tridge@samba.org-20070410025154-12ddbf5dc4ff7bf6\n    parent: tridge@samba.org-20070407005814-c83829906f25bead\n    committer: Andrew Tridgell \n    branch nick: tridge\n    timestamp: Tue 2007-04-10 12:51:54 +1000\n    message:\n      fix configure for new test location\n    ------------------------------------------------------------\n    revno: 44.1.31\n    merged: tridge@samba.org-20070407005814-c83829906f25bead\n    parent: tridge@samba.org-20070407004647-519ee025508125c0\n    committer: Andrew Tridgell \n    branch nick: tridge\n    timestamp: Sat 2007-04-07 10:58:14 +1000\n    message:\n      another memory leak\n    ------------------------------------------------------------\n    revno: 44.1.30\n    merged: tridge@samba.org-20070407004647-519ee025508125c0\n    parent: tridge@samba.org-20070407004500-6449e11ba1e7ed71\n    committer: Andrew Tridgell \n    branch nick: tridge\n    timestamp: Sat 2007-04-07 10:46:47 +1000\n    message:\n      remove talloc debug code\n    ------------------------------------------------------------\n    revno: 44.1.29\n    merged: tridge@samba.org-20070407004500-6449e11ba1e7ed71\n    parent: tridge@samba.org-20070407000109-7dc6d89d41a3c8e9\n    committer: Andrew Tridgell \n    branch nick: tridge\n    timestamp: Sat 2007-04-07 10:45:00 +1000\n    message:\n      fixed a bunch of memory leaks\n    ------------------------------------------------------------\n    revno: 44.1.28\n    merged: tridge@samba.org-20070407000109-7dc6d89d41a3c8e9\n    parent: tridge@samba.org-20070406044105-4dcf971d05626846\n    committer: Andrew Tridgell \n    branch nick: tridge\n    timestamp: Sat 2007-04-07 10:01:09 +1000\n    message:\n      put test code in tests/ directory\n    ------------------------------------------------------------\n    revno: 44.1.27\n    merged: tridge@samba.org-20070406044105-4dcf971d05626846\n    parent: tridge@samba.org-20070405234645-d4e331dc0077c3ed\n    committer: Andrew Tridgell \n    branch nick: tridge\n    timestamp: Fri 2007-04-06 14:41:05 +1000\n    message:\n      added a magic header for wireshark and packet version info\n    ------------------------------------------------------------\n    revno: 44.1.26\n    merged: tridge@samba.org-20070405234645-d4e331dc0077c3ed\n    parent: tridge@samba.org-20070405031906-a9920c6dd34b2138\n    parent: ronniesahlberg@gmail.com-20070405230841-qvbelakbhbpl1za4\n    committer: Andrew Tridgell \n    branch nick: tridge\n    timestamp: Fri 2007-04-06 09:46:45 +1000\n    message:\n      merge from ronnie\n        ------------------------------------------------------------\n        revno: 44.1.22.1.3.1.1\n        merged: ronniesahlberg@gmail.com-20070405230841-qvbelakbhbpl1za4\n        parent: ronniesahlberg@gmail.com-20070404111556-vc1hky229by8leu1\n        committer: Ronnie sahlberg \n        branch nick: ctdb\n        timestamp: Fri 2007-04-06 09:08:41 +1000\n        message:\n          When we create a tcp connection to a remote ctdb node  do an explicit bind() to set our source side to the same ip address as we use to listen to ctdb traffic.\n          \n          We need this since there is no guarantee that INADDR_ANY (which would be defaulted to if we dont bind) would be routable from the remote host.\n          This is entirely possible to happen since CTDB traffic is likely to be isolated to a private non-routable network.\n    ------------------------------------------------------------\n    revno: 44.1.25\n    merged: tridge@samba.org-20070405031906-a9920c6dd34b2138\n    parent: tridge@samba.org-20070404050249-9ca53bdf68db13d5\n    parent: tridge@samba.org-20070405031831-2f35efdda08ec847\n    committer: Andrew Tridgell \n    branch nick: tridge\n    timestamp: Thu 2007-04-05 13:19:06 +1000\n    message:\n      merge from ronnies branch\n        ------------------------------------------------------------\n        revno: 44.1.22.1.4\n        merged: tridge@samba.org-20070405031831-2f35efdda08ec847\n        parent: ronniesahlberg@gmail.com-20070404111556-vc1hky229by8leu1\n        parent: ronniesahlberg@gmail.com-20070404111556-vc1hky229by8leu1\n        committer: Andrew Tridgell \n        branch nick: ronnie\n        timestamp: Thu 2007-04-05 13:18:31 +1000\n        message:\n          merge fetch code from ronnie, and add a simple fetch test\n        ------------------------------------------------------------\n        revno: 44.1.22.1.3\n        merged: ronniesahlberg@gmail.com-20070404111556-vc1hky229by8leu1\n        parent: ronniesahlberg@gmail.com-20070404050535-5ut2sw0jrtixt4gf\n        committer: Ronnie sahlberg \n        branch nick: ctdb\n        timestamp: Wed 2007-04-04 21:15:56 +1000\n        message:\n          first test of forced migration of records.  compiles but not tested.\n        ------------------------------------------------------------\n        revno: 44.1.22.1.2\n        merged: ronniesahlberg@gmail.com-20070404050535-5ut2sw0jrtixt4gf\n        parent: ronniesahlberg@gmail.com-20070403094100-fh6h6ry98gxqof24\n        parent: tridge@samba.org-20070404050249-9ca53bdf68db13d5\n        committer: Ronnie sahlberg \n        branch nick: ctdb\n        timestamp: Wed 2007-04-04 15:05:35 +1000\n        message:\n          tridge\n    ------------------------------------------------------------\n    revno: 44.1.24\n    merged: tridge@samba.org-20070404050249-9ca53bdf68db13d5\n    parent: tridge@samba.org-20070403101350-2b6ff2679f75aa06\n    committer: Andrew Tridgell \n    branch nick: tridge\n    timestamp: Wed 2007-04-04 15:02:49 +1000\n    message:\n      merge back some changes from Samba4\n    ------------------------------------------------------------\n    revno: 44.1.23\n    merged: tridge@samba.org-20070403101350-2b6ff2679f75aa06\n    parent: tridge@samba.org-20070308002715-7gx6puojgyup2dv2\n    parent: ronniesahlberg@gmail.com-20070403094100-fh6h6ry98gxqof24\n    committer: Andrew Tridgell \n    branch nick: tridge\n    timestamp: Tue 2007-04-03 20:13:50 +1000\n    message:\n      merge multi-database support from ronnie\n        ------------------------------------------------------------\n        revno: 44.1.22.1.1\n        merged: ronniesahlberg@gmail.com-20070403094100-fh6h6ry98gxqof24\n        parent: tridge@samba.org-20070308002715-7gx6puojgyup2dv2\n        committer: Ronnie sahlberg \n        branch nick: ctdb\n        timestamp: Tue 2007-04-03 19:41:00 +1000\n        message:\n          Split CTDB into sub contexts to handle multiple concurrent databases within the same context.\n    ------------------------------------------------------------\n    revno: 44.1.22\n    merged: tridge@samba.org-20070308002715-7gx6puojgyup2dv2\n    parent: tridge@samba.org-20070220035713-jeodfq36sfuzodbs\n    parent: psomogyi@gamax.hu-20070226105920-dlootykwymain6s1\n    committer: Andrew Tridgell \n    branch nick: tridge\n    timestamp: Thu 2007-03-08 11:27:15 +1100\n    message:\n      merged changes from peter\n\nDiff too large for email (7810, the limit is 1000).\n\n"}