{"category": "ham", "to_address": "Volker Lendecke <Volker.Lendecke@SerNet.DE>", "from_address": "Jeremy Allison <jra@samba.org>", "subject": "Re: rename_internals and rename_internals_fsp consolidated", "body": "On Fri, Jun 15, 2007 at 12:07:51AM +0200, Volker Lendecke wrote:\n> \n> Attached find a patch with lots of \"-\" inside: It changes\n> rename_internals to open the file and then calls\n> rename_internals_fsp. This then does not open the file a\n> second time via can_delete, we already checked the share\n> modes in the first open.\n> \n> It does not survive the wildcard part of RAW-RENAME yet and\n> something in RAW-NOTIFY is broken, but I think that can be\n> fixed.\n> \n> This is done with the same intention in mind I had with\n> consolidating the unlink calls a bit, code simplification\n> and reducing races.\n> \n> What do you think, assuming I can fix it to pass the torture\n> tests?\n\nI *really* like patches with lots of '-' :-) :-).\n\nIf you can make it pass the torture tests I'd be\nreally happy to review it and let's get it in !\n\nJeremy.\n\n"}