{"category": "ham", "to_address": "\"new ruser\" <newruser@yahoo.com>", "from_address": "\"Gabor Grothendieck\" <ggrothendieck@gmail.com>", "subject": "Re: [R] substitute \"x\" for \"pattern\" in a list,\n\twhile preservign list \"structure\". lapply, gsub, list...?", "body": "Here is a recursive function you could try.  Here f has been defined only to\nconvert character variables.  Modify to suit.\n\nrecurse <- function(x, f) {\n   if (length(x) == 0) return(x)\n   if (is.list(x)) for(i in seq_along(x)) x[[i]] <- recurse(x[[i]], f)\n   else x <- f(x)\n   x\n}\nf <- function(x) if (mode(x) == \"character\") gsub(\"red\", \"green\", x) else x\nlist4 <- recurse(list1, f)\n\n\nOn 5/16/07, new ruser  wrote:\n> I am experimenting with some of the common r functions.\n> I had a question re:using \"gsub\" (or some similar functions) on the contents of a list.\n>\n> I want to design a function that looks at \"everything\" contained din a list, and anytime it finds the text string \"pattern\" replace it with \"x\".  I also wish to preserve the \"structure\" of the original list.  What is a good way to accomplish this?\n>\n> I tried :\n>\n> a = matrix(data=c(23,45,'red',78),nrow=2)\n> b = c('red','green',1,2,3)\n> d = data.frame( test1=c(223,445,'red',78,56) , test2= c('red',NA,NA,NA,NA) )\n> e= list(a,b,d)\n> list1 = list(a,b,d,e)\n>\n> list2 = lapply(list1,function(list)(gsub(\"red\",\"green\",list)))\n>\n> str(list1)\n> str(list2)\n>\n> but the structue fo the list changed.\n>\n>\n> ---------------------------------\n> Give spam the boot. Take control with tough spam protection\n>\n>        [[alternative HTML version deleted]]\n>\n> ______________________________________________\n> R-help@stat.math.ethz.ch mailing list\n> https://stat.ethz.ch/mailman/listinfo/r-help\n> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html\n> and provide commented, minimal, self-contained, reproducible code.\n>\n\n______________________________________________\nR-help@stat.math.ethz.ch mailing list\nhttps://stat.ethz.ch/mailman/listinfo/r-help\nPLEASE do read the posting guide http://www.R-project.org/posting-guide.html\nand provide commented, minimal, self-contained, reproducible code.\n\n"}