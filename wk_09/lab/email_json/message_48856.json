{"category": "ham", "to_address": "r-help@stat.math.ethz.ch", "from_address": "owenman <solberg@speakeasy.net>", "subject": "Re: [R] Stacked barchart color", "body": "\nHi Hadley,\nI tried your suggestion, using ggplot2, but I am still having a problem. The\nfinal plot lacks the figure legend -- which it had before I added the \nscale_fill_identity()  bit.  Can  you see what I am doing wrong?  \n(By the way, all I am trying to do is make the figure monochrome friendly. \nIs there an easy way to prepare ggplot graphics for a monochrom device?)\nThanks,Owen\n\n> y$color = factor(y$Fnd)\n> y$color = c(\"black\",\"darkgray\",\"lightgray\",\"white\") \n> y\n      Fnd locus        Freq color\n1  signeg     A 0.087248322     black\n2     neg     A 0.711409396  darkgray\n3     pos     A 0.201342282 lightgray\n4  sigpos     A 0.000000000     white\n5  signeg     C 0.320754717     black\n6     neg     C 0.603773585  darkgray\n7     pos     C 0.075471698 lightgray\n8  sigpos     C 0.000000000     white\n9  signeg     B 0.157534247     black\n10    neg     B 0.732876712  darkgray\n11    pos     B 0.109589041 lightgray\n12 sigpos     B 0.000000000     white\n\n> p = ggplot(y, aes(x=locus, y=Freq, fill=color)) +\n> geom_bar(position=\"fill\") + scale_fill_identity() \n> p\n\n\n\nhadley wrote:\n> \n> \n> Hi Dieter,\n> \n> You can do this with ggplot2 (http://had.co.nz/ggplot2) as follows:\n> \n> library(ggplot2)\n> \n> barley1 <- subset(barley, site==\"Grand Rapids\" & variety %in%\n> c(\"Velvet\",\"Peatland\"))\n> barley1[] <- lapply(barley1, \"[\", drop=TRUE)\n> \n> qplot(variety, yield, data=barley1, geom=\"bar\", stat=\"identity\",\n> fill=factor(year))\n> \n> barley1$fill <- c(\"red\",\"green\",\"blue\",\"gray\")\n> qplot(variety, yield, data=barley1, geom=\"bar\", stat=\"identity\",\n> fill=fill) + scale_fill_identity()\n> \n> See http://had.co.nz/ggplot2/scale_identity.html and\n> http://had.co.nz/ggplot2/position_stack.html for more details.\n> \n> Hadley\n> \n> \n\n-- \nView this message in context: http://www.nabble.com/Stacked-barchart-color-tf3909162.html#a11149419\nSent from the R help mailing list archive at Nabble.com.\n\n______________________________________________\nR-help@stat.math.ethz.ch mailing list\nhttps://stat.ethz.ch/mailman/listinfo/r-help\nPLEASE do read the posting guide http://www.R-project.org/posting-guide.html\nand provide commented, minimal, self-contained, reproducible code.\n\n"}