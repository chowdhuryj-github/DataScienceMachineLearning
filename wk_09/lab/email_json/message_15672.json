{"category": "ham", "to_address": "Prof Brian Ripley <ripley@stats.ox.ac.uk>", "from_address": "Frank E Harrell Jr <f.harrell@vanderbilt.edu>", "subject": "Re: [R] Coercing data types for use in model.frame", "body": "Prof Brian Ripley wrote:\n> Moved to R-devel ....\n> \n> What is the 'data class'?  In particular what is its underlying type? \n> And where in model.frame[.default] are you trying to use it (in the \n> formula, data, in ..., etc).\n> \n> This is an example of where some reproducible code and the error \n> messages would be very helpful indeed.\n> \n> Brian\n\nBrian,\n\nSorry - this was one of those \"too late in the day\" errors.  The problem \nwas in a function called just before model.frame.  model.frame seems to \nwork fine with an object of class c('mChoice', 'labelled').  It keeps \nmChoice variables as mChoice.  After model.frame is finished I'll change \nsuch variables to factors or matrices.\n\nFrank\n\n\n> \n> On Tue, 24 Apr 2007, Frank E Harrell Jr wrote:\n> \n>> In the Hmisc package there is a new data class 'mChoice' for multiple\n>> choice variables.  There are format and as.numeric methods (the latter\n>> creates a matrix of dummy variables).  mChoice variables are not allowed\n>> by model.frame.  Is there a way to specify a conversion function that\n>> model.frame will use automatically?  I would use as.factor here.\n>> model.frame does not seem to use as.data.frame.foo for individual \n>> variables.\n>>\n>> Thanks\n>> Frank\n>>\n> \n\n\n-- \nFrank E Harrell Jr   Professor and Chair           School of Medicine\n                      Department of Biostatistics   Vanderbilt University\n\n______________________________________________\nR-help@stat.math.ethz.ch mailing list\nhttps://stat.ethz.ch/mailman/listinfo/r-help\nPLEASE do read the posting guide http://www.R-project.org/posting-guide.html\nand provide commented, minimal, self-contained, reproducible code.\n\n"}