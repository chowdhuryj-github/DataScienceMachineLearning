{"category": "ham", "to_address": "r-help@stat.math.ethz.ch", "from_address": "Tavpritesh <tavpritesh@gmail.com>", "subject": "Re: [R] @ Mike warning in a loop", "body": "\nHi Mike,\nThanks for the help, but I want to conduct tests, not between column 1 & 2\nof the data but between the values of column two itself which have been\ncategorized into 3 classes, and indexed in column 1 as 1,2 and 3. Also if\nyou could help me with the commands for ANOVA for the same purpose, for\nthree classes.\nThanks.\n\n\nMike Meredith wrote:\n> \n> \n> You can investigate what's gone wrong after the loop has failed by looking\n> at the values of i, k, p, and t. Although d[(d[,(i+1)]%in%1),1] produces a\n> vector, k has only one element. Same with p. Should then be obvious why\n> the t.test produces an error.\n> \n> The problem is with the [i] index for k and p; take those away and it\n> works. If you want to keep the values generated in the loop, make k and p\n> lists and index with k[[i]] and p[[i]].\n> \n> \n> A better way to do this would be to use 'sample' to randomize the measured\n> values in d[,1] and then use d[,2] to group them for testing. You can then\n> use hundreds of iterations:\n> \n> t <- rep(NA, 999) \n> for(i in 1:999) {\n>    samp <- sample(d[,1])\n>    t <- t.test(samp[d[,2]==1], samp[d[,2]==2])$p.value\n> }\n> sum(t < 0.05)  # How many were 'significant'?\n> \n> Note that I prefer to use t <- rep(NA,...) to allocate space, rather than\n> 1:999, so that NA appears as the result if there's a problem.\n> \n> Why not just do a randomization test?\n> \n> t <- rep(NA, 1000)\n> t[1] <- mean(d[d[,2]==1,1]) - mean(d[d[,2]==2,1]) # This is the observed\n> difference in means\n> for(i in 2:1000) {\n>    samp <- sample(d[,1])\n>    t[i] <- mean(samp[d[,2]==1]) - mean(samp[d[,2]==2])\n> }\n> t <- abs(t)   # Skip this line if you want a 1-sided test\n> sum(t >= t[1])/1000  # This is the 'p-value'\n> \n> HTH, Mike.\n> \n> \n> Tavpritesh Sethi wrote:\n>> \n>> hi all,\n>> I have a matrix with first column having some measurable values, these\n>> are\n>> indexed by the numerals 1,2 and 3 in the other columns of the data and\n>> may\n>> be interpreted as values for categories 1,2 and 3.\n>> I have written the following loop\n>> t<-1:10\n>>  for(i in 1:10)\n>> + {\n>> + k[i]<-d[(d[,(i+1)]%in%1),1]\n>> + p[i]<-d[(d[,(i+1)]%in%2),1]\n>> + t[i]<-t.test(k[i],p[i])$p.value\n>> + }\n>> Error in t.test.default(k[i], p[i]) : not enough 'x' observations\n>> In addition: Warning messages:\n>> 1: number of items to replace is not a multiple of replacement length\n>> 2: number of items to replace is not a multiple of replacement length\n>> \n>> As you might have understood, I want to test for difference between the\n>> two\n>> cagories: \"k\" and \"v\". the second column of the data is the original\n>> categorization and the rest columns(3:10) are a matrix of randomized\n>> values\n>> between 1 to 3. (I have three categories)\n>> My purpose of doing so is to check whether significant difference comes\n>> up\n>> in the randomized data also. This is to check the effect of the small\n>> sample\n>> size of my data.\n>> Please suggest a way or an alternative to the above approach.\n>> \n>> \t[[alternative HTML version deleted]]\n>> \n>> ______________________________________________\n>> R-help@stat.math.ethz.ch mailing list\n>> https://stat.ethz.ch/mailman/listinfo/r-help\n>> PLEASE do read the posting guide\n>> http://www.R-project.org/posting-guide.html\n>> and provide commented, minimal, self-contained, reproducible code.\n>> \n>> \n> \n> \n\n-- \nView this message in context: http://www.nabble.com/warning-in-a-loop-tf3969850.html#a11278677\nSent from the R help mailing list archive at Nabble.com.\n\n______________________________________________\nR-help@stat.math.ethz.ch mailing list\nhttps://stat.ethz.ch/mailman/listinfo/r-help\nPLEASE do read the posting guide http://www.R-project.org/posting-guide.html\nand provide commented, minimal, self-contained, reproducible code.\n\n"}