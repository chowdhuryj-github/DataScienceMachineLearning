{"category": "ham", "to_address": "Arun Kumar Saha <arun.kumar.saha@gmail.com>", "from_address": "Chuck Cleland <ccleland@optonline.net>", "subject": "Re: [R] Problem while working with SPSS data", "body": "Arun Kumar Saha wrote:\n> Dear all R users,\n> \n> I got a strange problem while working with SPSS data :\n> \n> I wrote following :\n> \n> library(foreign)\n> data.original = as.data.frame(read.spss(file=\"c:/Program Files/SPSS/Employee\n> data.sav\"))\n> \n> data = as.data.frame(cbind(data.original$MINORITY, data.original$EDUC,\n> data.original$PREVEXP, data.original$JOBCAT, data.original$GENDER))\n> colnames(data) = c('MINORITY', 'EDUC', 'PREVEXP', 'JOBCAT', 'GENDER')\n> \n> head( data.original)\n> \n>   ID GENDER       BDATE EDUC   JOBCAT SALARY SALBEGIN JOBTIME PREVEXP\n> MINORITY\n> 1  1    11654150400   15  Manager  57000    27000      98     144\n> No\n> 2  2    11852956800   16 Clerical  40200    18750      98      36\n> No\n> 3  3    10943337600   12 Clerical  21450    12000      98     381\n> No\n> 4  4    11502518400    8 Clerical  21900    13200      98     190\n> No\n> 5  5    11749363200   15 Clerical  45000    21000      98     138\n> No\n> 6  6    11860819200   15 Clerical  32100    13500      98      67\n> No\n> \n>  head( data)\n>   V1 V2  V3 V4 V5\n> 1  1  5 144  4 NA\n> 2  1  6  36  2 NA\n> 3  1  3 381  2 NA\n> 4  1  2 190  2 NA\n> 5  1  5 138  2 NA\n> 6  1  5  67  2 NA\n> \n> \n> here I got the values of variable \"V2\" as 5,6,3,...........etc which should\n> be 15,16,12,....................\n\n> can anyone tell me why I got that?\n\n  Your use of cbind() converted the factors to numeric.\n\n> And my second question is that in my \"data.original\" why I got the values of\n> \"GENDER\" as NA? Is there any way to get the actual values i.e. \"m\", and \"f\"?\n\n  Gender is of type \"string\" in the SPSS file, which seems to cause some\nproblem when you try to use the SPSS value labels.  You might set the\nuse.value.labels argument to FALSE.\n\ndf <- read.spss(file=\"c:/Program Files/SPSS/Employee data.sav\",\n                to.data.frame=TRUE, use.value.labels=FALSE)\n\nsummary(df)\n       ID        GENDER      BDATE                EDUC\n Min.   :  1.0   f:216   Min.   :1.093e+10   Min.   : 8.00\n 1st Qu.:119.3   m:258   1st Qu.:1.153e+10   1st Qu.:12.00\n Median :237.5           Median :1.197e+10   Median :12.00\n Mean   :237.5           Mean   :1.180e+10   Mean   :13.49\n 3rd Qu.:355.8           3rd Qu.:1.208e+10   3rd Qu.:15.00\n Max.   :474.0           Max.   :1.225e+10   Max.   :21.00\n                         NA's   :1.000e+00\n\n     JOBCAT          SALARY          SALBEGIN        JOBTIME\n Min.   :1.000   Min.   : 15750   Min.   : 9000   Min.   :63.00\n 1st Qu.:1.000   1st Qu.: 24000   1st Qu.:12488   1st Qu.:72.00\n Median :1.000   Median : 28875   Median :15000   Median :81.00\n Mean   :1.411   Mean   : 34420   Mean   :17016   Mean   :81.11\n 3rd Qu.:1.000   3rd Qu.: 36938   3rd Qu.:17490   3rd Qu.:90.00\n Max.   :3.000   Max.   :135000   Max.   :79980   Max.   :98.00\n\n    PREVEXP          MINORITY\n Min.   :  0.00   Min.   :0.0000\n 1st Qu.: 19.25   1st Qu.:0.0000\n Median : 55.00   Median :0.0000\n Mean   : 95.86   Mean   :0.2194\n 3rd Qu.:138.75   3rd Qu.:0.0000\n Max.   :476.00   Max.   :1.0000\n\n  If you want to retain the labels for all of the variables and get\naround the problem with gender, you might do this:\n\ndf1 <- read.spss(file=\"c:/Program Files/SPSS/Employee data.sav\",\nto.data.frame=TRUE, use.value.labels=TRUE)\n\ndf2 <- read.spss(file=\"c:/Program Files/SPSS/Employee data.sav\",\nto.data.frame=TRUE, use.value.labels=FALSE)\n\nnew.df <- merge(df1[,!names(df1) %in% \"GENDER\"], df2[,c(\"ID\",\"GENDER\")])\n\nhead(new.df)\n  ID       BDATE EDUC   JOBCAT SALARY SALBEGIN JOBTIME PREVEXP\n1  1 11654150400   15  Manager  57000    27000      98     144\n2  2 11852956800   16 Clerical  40200    18750      98      36\n3  3 10943337600   12 Clerical  21450    12000      98     381\n4  4 11502518400    8 Clerical  21900    13200      98     190\n5  5 11749363200   15 Clerical  45000    21000      98     138\n6  6 11860819200   15 Clerical  32100    13500      98      67\n  MINORITY GENDER\n1       No      m\n2       No      m\n3       No      f\n4       No      f\n5       No      m\n6       No      m\n\n> Thanks\n> Arun\n\n> \t[[alternative HTML version deleted]]\n> \n> ______________________________________________\n> R-help@stat.math.ethz.ch mailing list\n> https://stat.ethz.ch/mailman/listinfo/r-help\n> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html\n> and provide commented, minimal, self-contained, reproducible code. \n\n-- \nChuck Cleland, Ph.D.\nNDRI, Inc.\n71 West 23rd Street, 8th floor\nNew York, NY 10010\ntel: (212) 845-4495 (Tu, Th)\ntel: (732) 512-0171 (M, W, F)\nfax: (917) 438-0894\n\n______________________________________________\nR-help@stat.math.ethz.ch mailing list\nhttps://stat.ethz.ch/mailman/listinfo/r-help\nPLEASE do read the posting guide http://www.R-project.org/posting-guide.html\nand provide commented, minimal, self-contained, reproducible code.\n\n"}