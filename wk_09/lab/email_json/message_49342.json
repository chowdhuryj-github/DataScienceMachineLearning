{"category": "ham", "to_address": "Economics Guy <economics.guy@gmail.com>", "from_address": "Chuck Cleland <ccleland@optonline.net>", "subject": "Re: [R] Use of the \"by\" command (clarification)", "body": "Economics Guy wrote:\n> Well apparently this has nothing to do with the gini() command.\n> \n> I cannot get it to work for something as simple as sum()\n> \n> Here is the little example I am playing with, maybe someone can help me find\n> my error:\n> \n> a<-c(\"A\",\"B\",\"C\",\"A\",\"B\",\"C\",\"A\",\"A\",\"C\",\"B\")\n> \n> b<-c(23,6534,456,234,7,567,345,9,565,345)\n> \n> c<-cbind(a,b)\n> \n> by(c, a, function(x) sum(b))\n> \n> and I get the output\n> \n> INDICES: A\n> [1] 9085\n> ------------\n> INDICES: B\n> [1] 9085\n> --------------\n> INDICES: C\n> [1] 9085\n> \n> \n> Same problem as before. It is summing over the whole b vector rather than by\n> the groups.\n> \n> Anybody have any ideas on what I am doing wrong?\n\n  Try this:\n\na <- c(\"A\",\"B\",\"C\",\"A\",\"B\",\"C\",\"A\",\"A\",\"C\",\"B\")\n\nb <- c(23,6534,456,234,7,567,345,9,565,345)\n\nc <- data.frame(a,b)\n\nby(c, a, function(x) sum(x$b))\n\na: A\n[1] 611\n---------------------------------------------------------------------------------------------------------------------\n\na: B\n[1] 6886\n---------------------------------------------------------------------------------------------------------------------\n\na: C\n[1] 1588\n\n  Also, consider this:\n\n> with(c, tapply(b, list(a), sum))\n   A    B    C\n 611 6886 1588\n\n> Thanks,\n> \n> EG\n> \n> On 6/16/07, Economics Guy  wrote:\n>> I have a data set that contains income data and a group identifier. Sort\n>> of like:\n>>\n>>\n>>        DATA\n>>\n>> Group,Income\n>> A,2300\n>> B,6776\n>> A,6668\n>> A,6768\n>> B,9879\n>> C,5577\n>> A,7867\n>> (etc),(etc)\n>>\n>> I am trying to compute the gini coefficient for each group.\n>>\n>> I have tried the following and none seem to do the trick:\n>>\n>> 1)\n>>\n>> attach(DATA)\n>>\n>> by(DATA, group, function(x) gini(income))\n>>\n>>\n>> 2)\n>>\n>> attach(data)\n>>\n>> tapply(income, group, function(x) gini(income))\n>>\n>> Both of these return the same value for all groups. Like:\n>>\n>> group: A\n>> [1] 0.2422496\n>> ------------------------------------------------------------\n>> group: B\n>> [1] 0.2422496\n>> ------------------------------------------------------------\n>> group: C\n>> [1] 0.2422496\n>> ------------------------------------------------------------\n>> group: D\n>> [1] 0.2422496\n>>\n>> Any ideas on how I can make this work? I need the fastest way since I am\n>> gonna run a monte carlo based on this routine once I get the basics working.\n>>\n>>\n>> Thanks,\n>>\n>> EG\n> \n> \t[[alternative HTML version deleted]]\n> \n> ______________________________________________\n> R-help@stat.math.ethz.ch mailing list\n> https://stat.ethz.ch/mailman/listinfo/r-help\n> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html\n> and provide commented, minimal, self-contained, reproducible code. \n\n-- \nChuck Cleland, Ph.D.\nNDRI, Inc.\n71 West 23rd Street, 8th floor\nNew York, NY 10010\ntel: (212) 845-4495 (Tu, Th)\ntel: (732) 512-0171 (M, W, F)\nfax: (917) 438-0894\n\n______________________________________________\nR-help@stat.math.ethz.ch mailing list\nhttps://stat.ethz.ch/mailman/listinfo/r-help\nPLEASE do read the posting guide http://www.R-project.org/posting-guide.html\nand provide commented, minimal, self-contained, reproducible code.\n\n"}