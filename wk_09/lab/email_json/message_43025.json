{"category": "ham", "to_address": "\"Stefan (metze) Metzmacher\" <metze@samba.org>", "from_address": "Jeremy Allison <jra@samba.org>", "subject": "Re: samba3 crash", "body": "On Tue, Jun 05, 2007 at 02:30:30PM +0200, Stefan (metze) Metzmacher wrote:\n> -----BEGIN PGP SIGNED MESSAGE-----\n> Hash: SHA1\n> \n> >> home/build/build_farm/samba_3_0.metze/source/bin/smbd\"\n> >>         result = 1696625253\n> >> #5  0x374ecc in byte_range_lock_destructor (br_lck=0x40164868) at\n> >> locking/brlock.c:1578\n> >>         data = {dptr = 0x401b90c8 \"\", dsize = 8832}\n> >>         status = {v = 3221225473}\n> >>         key = {dptr = 0x40164878 \"\", dsize = 16}\n> >> #6  0x3c862c in _talloc_free (ptr=0x40164868) at lib/talloc/talloc.c:0\n> >> No locals.\n> >> #7  0x3c9630 in talloc_free (ptr=0x40164868) at lib/talloc/talloc.c:0\n> \n> I just found the difference between LOCK3 and BASE-LOCK-LOCK3\n> samba has torture_numops=100 and samba4 has torture_numops=10\n> \n> when I change it to 10 in samba3 it also doesn't appear...\n> \n> should we change samba4 to 100 again?\n\nOh, is this on HPUX ? HPUX is one of the insane\nsystems that has a hard coded limit on the number\nof allowable fcntl locks. You have to change a\nkernel tunable and reboot to fix this.\n\nIf it's running out of fcntl locks on HPUX this\nis a known HPUX bug - we tell people to up the\nnumber of allowable locks and reboot.\n\nJeremy.\n\n"}