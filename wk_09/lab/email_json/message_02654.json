{"category": "ham", "to_address": "tridge@samba.org", "from_address": "simo <idra@samba.org>", "subject": "Re: wrt inotify problem", "body": "On Wed, 2007-04-11 at 09:03 +1000, tridge@samba.org wrote:\n> Volker,\n> \n>  > Ok, this is really broken. SELinux allows us to set up\n>  > everything necessary for inotify but then when something\n>  > happens gives us an access denied? Very weird. Trying to\n>  > find a fix.\n> \n> Just a wild guess, but I would not be surprised if the problem is our\n> security context. If we setup the notify as one euid and try to handle\n> the notify as a different euid then maybe selinux refuses it.\n\nNo, SELinux do not know anything about UIDs and does not care about UIDs\nat all.\n\n> Might we worth writing a bit of test code, and if this guess does turn\n> out to be right, we can fix with some euid hacks on -1/EACCES.\n\nNo, the problem is that inotifyfs has its own label and the policies\nwere not allowing smbd to access objects labeled that way.\nThe first time that label is met is when smbd calls the ioctl, and\nthat's where SELinux blocks it.\n\nNo workaround, except disabling SELinux or updating the policies.\nNew policy packages for FC6/F7 are on the way.\n\nSimo.\n\n-- \nSimo Sorce\nSamba Team GPL Compliance Officer\nemail: idra@samba.org\nhttp://samba.org\n\n"}