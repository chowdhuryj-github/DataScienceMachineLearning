{"category": "ham", "to_address": "samba-cvs@samba.org", "from_address": "abartlet@samba.org", "subject": "svn commit: samba r23233 - in branches/SAMBA_4_0/source/selftest: .", "body": "Author: abartlet\nDate: 2007-05-30 00:36:23 +0000 (Wed, 30 May 2007)\nNew Revision: 23233\n\nWebSVN: http://websvn.samba.org/cgi-bin/viewcvs.cgi?view=rev&root=samba&rev=23233\n\nLog:\nUse the schema and basedn files generated by the provision-backend script.\n\n(Moving towards using only the script's output, one step at a time).\n\nAndrew Bartlett\n\nModified:\n   branches/SAMBA_4_0/source/selftest/Samba4.pm\n\n\nChangeset:\nModified: branches/SAMBA_4_0/source/selftest/Samba4.pm\n===================================================================\n--- branches/SAMBA_4_0/source/selftest/Samba4.pm\t2007-05-29 23:24:42 UTC (rev 23232)\n+++ branches/SAMBA_4_0/source/selftest/Samba4.pm\t2007-05-30 00:36:23 UTC (rev 23233)\n@@ -332,12 +332,9 @@\n \twrite_openldap_dbconfig(\"$ldapdir/db/config\");\n \twrite_openldap_dbconfig(\"$ldapdir/db/schema\");\n \n-\t#This uses the provision we just did, to read out the schema\n-\tsystem(\"$self->{bindir}/ad2oLschema $configuration -H $privatedir/sam.ldb -I $self->{setupdir}/schema-map-openldap-2.3 -O $ldapdir/ad.schema >&2\") == 0 or die(\"schema conversion for OpenLDAP failed\");\n+\t#This uses the provision-backend we just did, to read out the schema\n+\tsystem(\"$self->{bindir}/ad2oLschema $configuration -H $ldapdir/schema-tmp.ldb -I $self->{setupdir}/schema-map-openldap-2.3 -O $ldapdir/ad.schema >&2\") == 0 or die(\"schema conversion for OpenLDAP failed\");\n \n-\t#Now create an LDAP baseDN\n-\tsystem(\"$self->{bindir}/smbscript $self->{setupdir}/provision $provision_options --ldap-base >&2\") == 0 or die(\"creating an OpenLDAP basedn failed\");\n-\n \tmy $oldpath = $ENV{PATH};\n \t$ENV{PATH} = \"/usr/local/sbin:/usr/sbin:/sbin:$ENV{PATH}\";\n \n\n"}