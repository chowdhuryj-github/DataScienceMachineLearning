{"category": "ham", "to_address": "\"Afshartous, David\" <afshart@exchange.sba.miami.edu>", "from_address": "\"Gabor Grothendieck\" <ggrothendieck@gmail.com>", "subject": "Re: [R] xyplot and autokey,\n\tmaintaining colors specified via \"col\" in key", "body": "Don't know what you did regarding par.settings to not get the desired\nresult but that is, in fact, the way to go since both the key and the plot\nlines will get their colors from that:\n\nxyplot(outcome ~ time, dat.ex, groups=drug, type=c(\"g\", \"smooth\"),\nauto.key = list(space = \"top\",  text = levels(dat.ex$drug),\npoints=FALSE, lines=TRUE ),\npar.settings = list(superpose.line = list(col = rainbow(3))))\n\n\nOn 7/3/07, Afshartous, David  wrote:\n>\n> All,\n>\n> When specifying colors to xyplot w/ a groups argument, using\n> auto.key no longer maintains the colors properly.  I've searched\n> the docs and help but haven't found exactly what I need ... I saw\n> a few examples in the archives involving par.settings but that doesn't\n> seem to do it. I also saw some people using key instead of auto.key, but\n> that didn't seem consistent.  Is there a quick fix to the example code\n> below?\n>\n> cheers,\n> Dave\n>\n> dat.ex = data.frame(  rep(c(1:6), each=6), c(rnorm(12), rnorm(12, 1),\n> rnorm(12, 2)), rep(c(1:6), 6),\n> rep(c(\"Drug1\", \"Drug2\", \"Placebo\"), each=12) )\n> names(dat.ex) = c(\"patient.no\", \"outcome\", \"time\", \"drug\")\n>\n>\n> ## colors in xyplot agree w/ colors in key, colors not specified:\n> xyplot(outcome ~ time, dat.ex, groups=drug, type=c(\"g\", \"smooth\"),\n> auto.key = list(space = \"top\",  text = levels(dat.ex$drug),\n> points=FALSE, lines=TRUE ) )\n>\n> ## colors in xyplot do NOT agree w/ colors in key when colors changed:\n> xyplot(outcome ~ time, dat.ex, groups=drug, type=c(\"g\", \"smooth\"),\n> auto.key = list(space = \"top\",  text = levels(dat.ex$drug),\n> points=FALSE, lines=TRUE ),\n> col = c(1,2,3)  )\n>\n> i.e., the key is still generated w/ the \"old\" colors.\n>\n> ______________________________________________\n> R-help@stat.math.ethz.ch mailing list\n> https://stat.ethz.ch/mailman/listinfo/r-help\n> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html\n> and provide commented, minimal, self-contained, reproducible code.\n>\n\n______________________________________________\nR-help@stat.math.ethz.ch mailing list\nhttps://stat.ethz.ch/mailman/listinfo/r-help\nPLEASE do read the posting guide http://www.R-project.org/posting-guide.html\nand provide commented, minimal, self-contained, reproducible code.\n\n"}