{"category": "ham", "to_address": "Jeremy Allison <jra@samba.org>", "from_address": "James Peach <jpeach@samba.org>", "subject": "Re: [Samba] Support for multiple file streams?", "body": "On Jul 2, 2007, at 9:53 AM, Jeremy Allison wrote:\n\n> On Mon, Jul 02, 2007 at 04:50:54PM +0000, simo wrote:\n>\n>> I was thinking if it couldn't be better to use just one directory  \n>> in the\n>> root of the filesystem and within it create a directory for each file\n>> where we want to write an alternate stream. The idea would be to  \n>> use the\n>> files inode as the dir name 0x123456 and inside it the stream name as\n>> file name for the stream. This way renaming or moving the file  \n>> wouldn't\n>> loose the streams. Does it make sense?\n\nTed T'so presented a very similar streams implementation at  \nlinux.conf.au in 2006:\n\thttp://www.linux.org.au/conf/2006/abstract1f24.html?id=384\n\n> That's a pretty good idea - we'd have to do some recursing up the\n> tree to find the filesystem root of each share - maybe we could\n> do this at share connection time....\n\nA variation on this would be to store the streams metadata in a Samba- \nprivate EA. This would give you something analogous to the streaminfo  \ndata link back to the hidden streams data files. You would be able to  \nquickly determine the stream status for a file and you'd have a lot of  \nflexibility in evolving the implementation. You'd also be able to  \nreconstruct the EA metadata from the hidden streams data (slowly), and  \nverify the hidden streams data from the EA (quickly). If you  \nstandardised the EA format, you would be able to add non-Samba tools  \nto manipulate streams.\n\n--\nJames Peach | jpeach@samba.org\n\n"}