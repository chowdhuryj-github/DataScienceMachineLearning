{"category": "ham", "to_address": "samba-technical@lists.samba.org", "from_address": "hagai yaffe <hagaiy@yahoo.com>", "subject": "winbind panic on RedHat es3 samba 3.14a", "body": "\nHello, \n\nI am using samba 3.14a on RedHat es3. \n\nAbout every day the winbind panics, i think that it is related to the\nkerberos ticket expiration. \nthis is the winbind log: \n\n  ads_try_connect: trying ldap server '11.9.13.235' port 389 \n[2007/06/13 06:59:26.581501, 3, pid=18850] libads/ldap.c:ads_connect(285) \n  Connected to LDAP server 11.9.13.235 \n[2007/06/13 06:59:26.582007, 3, pid=18850]\nlibads/ldap.c:ads_server_info(2469) \n  got ldap server name corpdcdns5@CORP.COMP.COM, using bind path:\ndc=CORP,dc=COMP,dc=COM \n[2007/06/13 06:59:26.582051, 4, pid=18850]\nlibads/ldap.c:ads_server_info(2475) \n  time offset is 593 seconds \n[2007/06/13 06:59:26.582353, 4, pid=18850] libads/sasl.c:ads_sasl_bind(447) \n  Found SASL mechanism GSS-SPNEGO \n[2007/06/13 06:59:26.582744, 3, pid=18850]\nlibads/sasl.c:ads_sasl_spnego_bind(204) \n  ads_sasl_spnego_bind: got OID=1 2 840 48018 1 2 2 \n[2007/06/13 06:59:26.582774, 3, pid=18850]\nlibads/sasl.c:ads_sasl_spnego_bind(204) \n  ads_sasl_spnego_bind: got OID=1 2 840 113554 1 2 2 \n[2007/06/13 06:59:26.582802, 3, pid=18850]\nlibads/sasl.c:ads_sasl_spnego_bind(204) \n  ads_sasl_spnego_bind: got OID=1 2 840 113554 1 2 2 3 \n[2007/06/13 06:59:26.582828, 3, pid=18850]\nlibads/sasl.c:ads_sasl_spnego_bind(204) \n  ads_sasl_spnego_bind: got OID=1 3 6 1 4 1 311 2 2 10 \n[2007/06/13 06:59:26.582856, 3, pid=18850]\nlibads/sasl.c:ads_sasl_spnego_bind(211) \n  ads_sasl_spnego_bind: got server principal name =corpdcdns5$@CORP.COMP.COM \n[2007/06/13 06:59:26.583036, 3, pid=18850]\nlibsmb/clikrb5.c:ads_cleanup_expired_creds(318) \n  Ticket in ccache[MEMORY:winbind_ccache] expiration Wed, 13 Jun 2007\n06:58:18 GMT \n[2007/06/13 06:59:26.583106, 0, pid=18850] lib/fault.c:fault_report(36) \n  =============================================================== \n[2007/06/13 06:59:26.583163, 0, pid=18850] lib/fault.c:fault_report(37) \n  INTERNAL ERROR: Signal 6 in pid 18850 (3.0.14a) \n  Please read the appendix Bugs of the Samba HOWTO collection \n[2007/06/13 06:59:26.583202, 0, pid=18850] lib/fault.c:fault_report(39) \n  =============================================================== \n[2007/06/13 06:59:26.583232, 0, pid=18850] lib/util.c:smb_panic2(1495) \n  PANIC: internal error \n[2007/06/13 06:59:26.583679, 0, pid=18850] lib/util.c:smb_panic2(1503) \n  BACKTRACE: 27 stack frames: \n   #0 winbindd(smb_panic2+0x18c) [0x80c074f] \n   #1 winbindd(smb_panic+0x10) [0x80c05c1] \n   #2 winbindd [0x80b0572] \n   #3 winbindd [0x80b05c7] \n   #4 /lib/tls/libc.so.6 [0x138eb8] \n   #5 /lib/tls/libc.so.6(abort+0x1d5) [0x13a4e5] \n   #6 winbindd [0x80dddf7] \n   #7 winbindd [0x80de145] \n   #8 winbindd(cli_krb5_get_ticket+0x1c6) [0x80de456] \n   #9 winbindd(spnego_gen_negTokenTarg+0x2f) [0x80def66] \n   #10 winbindd [0x814d663] \n   #11 winbindd [0x814d902] \n   #12 winbindd(ads_sasl_bind+0xfe) [0x814dec6] \n   #13 winbindd(ads_connect+0x218) [0x8148bda] \n   #14 winbindd [0x808222d] \n   #15 winbindd [0x80840da] \n   #16 winbindd [0x807758b] \n   #17 winbindd [0x807776a] \n   #18 winbindd [0x8078952] \n   #19 winbindd(winbindd_lookup_sid_by_name+0x46) [0x80756a8] \n   #20 winbindd(winbindd_getpwnam+0x236) [0x80708ab] \n   #21 winbindd(strftime+0x1320) [0x806f314] \n   #22 winbindd(winbind_process_packet+0x1d) [0x806f5d0] \n   #23 winbindd(strftime+0x19c2) [0x806f9b6] \n   #24 winbindd(main+0x4df) [0x80703cf] \n   #25 /lib/tls/libc.so.6(__libc_start_main+0xda) [0x12678a] \n   #26 winbindd(chroot+0x31) [0x806ece5] \n[2007/06/13 06:59:26.585660, 10, pid=18851]\nnsswitch/winbindd.c:winbind_client_read(470) \n  client_read: read 0 bytes. Need 1824 more for a full request. \n[2007/06/13 06:59:26.585731, 5, pid=18851]\nnsswitch/winbindd.c:winbind_client_read(477) \n  read failed on sock 9, pid 23236: EOF \n\n\nAfter winbind restart it works ok for about 24 hours and then panics again\n(when the kerberos ticket expires). I have seen similiar posts on the net\nbut with no asnwers. \n\n\nAny ideas? Need more info? \ncheers, \nHagai. \n-- \nView this message in context: http://www.nabble.com/winbind-panic-on-RedHat-es3-samba-3.14a-tf3935549.html#a11161897\nSent from the Samba - samba-technical mailing list archive at Nabble.com.\n\n"}