{"category": "ham", "to_address": "samba-cvs@samba.org", "from_address": "vlendec@samba.org", "subject": "svn commit: samba r23376 - in branches:\n\tSAMBA_3_0/source/librpc/tools SAMBA_3_0_26/source/librpc/tools", "body": "Author: vlendec\nDate: 2007-06-07 07:53:33 +0000 (Thu, 07 Jun 2007)\nNew Revision: 23376\n\nWebSVN: http://websvn.samba.org/cgi-bin/viewcvs.cgi?view=rev&root=samba&rev=23376\n\nLog:\nMore warnings\nModified:\n   branches/SAMBA_3_0/source/librpc/tools/ndrdump.c\n   branches/SAMBA_3_0_26/source/librpc/tools/ndrdump.c\n\n\nChangeset:\nModified: branches/SAMBA_3_0/source/librpc/tools/ndrdump.c\n===================================================================\n--- branches/SAMBA_3_0/source/librpc/tools/ndrdump.c\t2007-06-07 07:49:43 UTC (rev 23375)\n+++ branches/SAMBA_3_0/source/librpc/tools/ndrdump.c\t2007-06-07 07:53:33 UTC (rev 23376)\n@@ -91,7 +91,7 @@\n \t\t\tresult = (char *) talloc_realloc(\n \t\t\t\tmem_ctx, result, char *, total_len + num_read);\n \t\t} else {\n-\t\t\tresult = talloc_size(mem_ctx, num_read);\n+\t\t\tresult = (char *) talloc_size(mem_ctx, num_read);\n \t\t}\n \n \t\tmemcpy(result + total_len, buf, num_read);\n@@ -105,7 +105,7 @@\n \treturn result;\n }\n \n-const struct dcerpc_interface_table *load_iface_from_plugin(const char *plugin, const char *pipe_name)\n+static const struct dcerpc_interface_table *load_iface_from_plugin(const char *plugin, const char *pipe_name)\n {\n \tconst struct dcerpc_interface_table *p;\n \tvoid *handle;\n@@ -118,7 +118,7 @@\n \t}\n \n \tsymbol = talloc_asprintf(NULL, \"dcerpc_table_%s\", pipe_name);\n-\tp = dlsym(handle, symbol);\n+\tp = (const struct dcerpc_interface_table *)dlsym(handle, symbol);\n \n \tif (!p) {\n \t\tprintf(\"%s: Unable to find DCE/RPC interface table for '%s': %s\\n\", plugin, pipe_name, dlerror());\n@@ -403,7 +403,9 @@\n \t\tf->ndr_print(ndr_v_print, function, flags, v_st);\n \n \t\tif (blob.length != v_blob.length) {\n-\t\t\tprintf(\"WARNING! orig bytes:%u validated pushed bytes:%u\\n\", blob.length, v_blob.length);\n+\t\t\tprintf(\"WARNING! orig bytes:%u validated pushed \"\n+\t\t\t       \"bytes:%u\\n\", (unsigned int)blob.length,\n+\t\t\t       (unsigned int)v_blob.length);\n \t\t}\n \n \t\tif (ndr_pull->offset != ndr_v_pull->offset) {\n\nModified: branches/SAMBA_3_0_26/source/librpc/tools/ndrdump.c\n===================================================================\n--- branches/SAMBA_3_0_26/source/librpc/tools/ndrdump.c\t2007-06-07 07:49:43 UTC (rev 23375)\n+++ branches/SAMBA_3_0_26/source/librpc/tools/ndrdump.c\t2007-06-07 07:53:33 UTC (rev 23376)\n@@ -91,7 +91,7 @@\n \t\t\tresult = (char *) talloc_realloc(\n \t\t\t\tmem_ctx, result, char *, total_len + num_read);\n \t\t} else {\n-\t\t\tresult = talloc_size(mem_ctx, num_read);\n+\t\t\tresult = (char *) talloc_size(mem_ctx, num_read);\n \t\t}\n \n \t\tmemcpy(result + total_len, buf, num_read);\n@@ -105,7 +105,7 @@\n \treturn result;\n }\n \n-const struct dcerpc_interface_table *load_iface_from_plugin(const char *plugin, const char *pipe_name)\n+static const struct dcerpc_interface_table *load_iface_from_plugin(const char *plugin, const char *pipe_name)\n {\n \tconst struct dcerpc_interface_table *p;\n \tvoid *handle;\n@@ -118,7 +118,7 @@\n \t}\n \n \tsymbol = talloc_asprintf(NULL, \"dcerpc_table_%s\", pipe_name);\n-\tp = dlsym(handle, symbol);\n+\tp = (const struct dcerpc_interface_table *)dlsym(handle, symbol);\n \n \tif (!p) {\n \t\tprintf(\"%s: Unable to find DCE/RPC interface table for '%s': %s\\n\", plugin, pipe_name, dlerror());\n@@ -403,7 +403,9 @@\n \t\tf->ndr_print(ndr_v_print, function, flags, v_st);\n \n \t\tif (blob.length != v_blob.length) {\n-\t\t\tprintf(\"WARNING! orig bytes:%u validated pushed bytes:%u\\n\", blob.length, v_blob.length);\n+\t\t\tprintf(\"WARNING! orig bytes:%u validated pushed \"\n+\t\t\t       \"bytes:%u\\n\", (unsigned int)blob.length,\n+\t\t\t       (unsigned int)v_blob.length);\n \t\t}\n \n \t\tif (ndr_pull->offset != ndr_v_pull->offset) {\n\n"}