{"category": "ham", "to_address": "Deepayan Sarkar <deepayan.sarkar@gmail.com>", "from_address": "Sundar Dorai-Raj <sundar.dorai-raj@pdf.com>", "subject": "Re: [R] xyplot: Combining 'subscripts' and 'allow.multiple=T'", "body": "Deepayan Sarkar said the following on 4/20/2007 11:42 AM:> On 4/20/07, Sundar Dorai-Raj  wrote:>>>>>> S\u00f8ren H\u00f8jsgaard said the following on 4/20/2007 3:57 AM:>> > Dear all, Consider this plot>> >>> > xyplot(Sepal.Length + Sepal.Width ~ Petal.Length | Species,>> >        data = iris, allow.multiple=T,  outer=F,>> >        panel = function(x,y,...) {>> >             panel.xyplot(x,y,...)>> >        }>> > )>> >>> > I want to *add* some things to each panel and what I want to add >> involves using the data for each panel, so I try to take this subset >> of data out with subscripts:>> >>> > xyplot(Sepal.Length + Sepal.Width ~ Petal.Length | Species,>> >        data = iris, allow.multiple=T, outer=F,>> >        panel = function(x,y,subscripts,...) {>> >             panel.xyplot(x,y,...)>> >             subiris <- iris[subscripts,] # Something using this ...>> >        }>> > )>> >>> > and then I get>> > Error in NextMethod(\"[\") : argument \"subscripts\" is missing, with no >> default> > Interesting. I get> > Error in panel.superpose(x, y, type = type, groups = groups, pch = pch,  :>        argument \"subscripts\" is missing, with no default> > which is somewhat more informative.\nHi, Deepayan,\nNeither S\u00f8ren nor I mentioned sessionInfo, which may be the reason our error messages differ from yours:\n > sessionInfo()R version 2.4.1 (2006-12-18)i386-pc-mingw32\nlocale:LC_COLLATE=English_United States.1252;LC_CTYPE=English_United States.1252;LC_MONETARY=English_United States.1252;LC_NUMERIC=C;LC_TIME=English_United States.1252\nattached base packages:[1] \"grid\"      \"stats\"     \"graphics\"  \"grDevices\" \"utils\"     \"datasets\"[7] \"methods\"   \"base\"\nother attached packages:   lattice\"0.14-17\"\n--sundar\n> >> > Does anyone know how to obtain this??>> >>> > By the way: The doc on xyplot says:  \"The value of subscripts >> becomes slightly more complicated when allow.multiple is in effect. >> Details can be found in the source code of the function >> latticeParseFormula.\". Sure.>> >> > Maybe a better thing to say would be:> >    \"The documented value of 'subscripts' does not hold when>     using an extended formula (with terms separated by '+').\"> > which while entirely useless, is completely accurate and at least> wouldn't give you anything to complain about. Would you prefer that?> > In any case, you can always do something like> > panel = function(x, y, subscripts, ...) {>    print(subscripts) ## debug> },> > R is a programming language after all, and if you are not prepared to> use it as such, may be you shouldn't be writing complicated panel> functions.> > -Deepayan> >> > Best regards>> > S\u00f8ren>> >>> >       [[alternative HTML version deleted]]>> >>> >>> >>> > >> ------------------------------------------------------------------------>> >>> > ______________________________________________>> > R-help@stat.math.ethz.ch mailing list>> > https://stat.ethz.ch/mailman/listinfo/r-help>> > PLEASE do read the posting guide >> http://www.R-project.org/posting-guide.html>> > and provide commented, minimal, self-contained, reproducible code.>>>>>> Hi, S\u00f8ren,>>>> Since you add \"subscripts\" to your panel arguments, you now need to>> explicitly pass it on to panel.xyplot. Try:>>>>   xyplot(Sepal.Length + Sepal.Width ~ Petal.Length | Species,>>         data = iris, allow.multiple=T, outer=F,>>         panel = function(x,y,subscripts,...) {>>              panel.xyplot(x,y,subscripts=subscripts,...)>>              subiris <- iris[subscripts,] # Something using this ...>> })>>>> HTH,>>>> --sundar>>>> ______________________________________________>> R-help@stat.math.ethz.ch mailing list>> https://stat.ethz.ch/mailman/listinfo/r-help>> PLEASE do read the posting guide >> http://www.R-project.org/posting-guide.html>> and provide commented, minimal, self-contained, reproducible code.>>\n______________________________________________R-help@stat.math.ethz.ch mailing listhttps://stat.ethz.ch/mailman/listinfo/r-helpPLEASE do read the posting guide http://www.R-project.org/posting-guide.htmland provide commented, minimal, self-contained, reproducible code.\n\n"}