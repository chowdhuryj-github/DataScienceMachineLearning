{"category": "ham", "to_address": "samba-cvs@samba.org", "from_address": "jra@samba.org", "subject": "svn commit: samba r23555 - in branches: SAMBA_3_0/source/rpcclient\n\tSAMBA_3_0_26/source/rpcclient", "body": "Author: jra\nDate: 2007-06-20 18:05:48 +0000 (Wed, 20 Jun 2007)\nNew Revision: 23555\n\nWebSVN: http://websvn.samba.org/cgi-bin/viewcvs.cgi?view=rev&root=samba&rev=23555\n\nLog:\nFix some uninitialiazed variable uses.\nJeremy\n\nModified:\n   branches/SAMBA_3_0/source/rpcclient/cmd_echo.c\n   branches/SAMBA_3_0_26/source/rpcclient/cmd_dfs.c\n   branches/SAMBA_3_0_26/source/rpcclient/cmd_echo.c\n\n\nChangeset:\nModified: branches/SAMBA_3_0/source/rpcclient/cmd_echo.c\n===================================================================\n--- branches/SAMBA_3_0/source/rpcclient/cmd_echo.c\t2007-06-20 17:38:42 UTC (rev 23554)\n+++ branches/SAMBA_3_0/source/rpcclient/cmd_echo.c\t2007-06-20 18:05:48 UTC (rev 23555)\n@@ -63,12 +63,14 @@\n \tif ( (in_data = (uint8_t*)SMB_MALLOC(size)) == NULL ) {\n \t\tprintf(\"Failure to allocate buff of %d bytes\\n\",\n \t\t       size);\n-\t\tgoto done;\t\t\n+\t\tresult = NT_STATUS_NO_MEMORY;\n+\t\tgoto done;\n \t}\n \tif ( (out_data = (uint8_t*)SMB_MALLOC(size)) == NULL ) {\n \t\tprintf(\"Failure to allocate buff of %d bytes\\n\",\n \t\t       size);\n-\t\tgoto done;\t\t\n+\t\tresult = NT_STATUS_NO_MEMORY;\n+\t\tgoto done;\n \t}\n \n \tfor (i = 0; i < size; i++)\n@@ -111,6 +113,7 @@\n \tif ( (out_data = (uint8_t*)SMB_MALLOC(size)) == NULL ) {\n \t\tprintf(\"Failure to allocate buff of %d bytes\\n\",\n \t\t       size);\n+\t\tresult = NT_STATUS_NO_MEMORY;\n \t\tgoto done;\t\t\n \t}\n \t\n@@ -148,6 +151,7 @@\n \tif ( (in_data = (uint8_t*)SMB_MALLOC(size)) == NULL ) {\n \t\tprintf(\"Failure to allocate buff of %d bytes\\n\",\n \t\t       size);\n+\t\tresult = NT_STATUS_NO_MEMORY;\n \t\tgoto done;\t\t\n \t}\n \n\nModified: branches/SAMBA_3_0_26/source/rpcclient/cmd_dfs.c\n===================================================================\n--- branches/SAMBA_3_0_26/source/rpcclient/cmd_dfs.c\t2007-06-20 17:38:42 UTC (rev 23554)\n+++ branches/SAMBA_3_0_26/source/rpcclient/cmd_dfs.c\t2007-06-20 18:05:48 UTC (rev 23555)\n@@ -36,7 +36,7 @@\n \t\treturn NT_STATUS_OK;\n \t}\n \n-\trpccli_dfs_GetManagerVersion(cli, mem_ctx, &dfs_exists);\n+\tresult = rpccli_dfs_GetManagerVersion(cli, mem_ctx, &dfs_exists);\n \n \tprintf(\"dfs is %spresent\\n\", dfs_exists ? \"\" : \"not \");\n \n\nModified: branches/SAMBA_3_0_26/source/rpcclient/cmd_echo.c\n===================================================================\n--- branches/SAMBA_3_0_26/source/rpcclient/cmd_echo.c\t2007-06-20 17:38:42 UTC (rev 23554)\n+++ branches/SAMBA_3_0_26/source/rpcclient/cmd_echo.c\t2007-06-20 18:05:48 UTC (rev 23555)\n@@ -63,12 +63,14 @@\n \tif ( (in_data = (uint8_t*)SMB_MALLOC(size)) == NULL ) {\n \t\tprintf(\"Failure to allocate buff of %d bytes\\n\",\n \t\t       size);\n-\t\tgoto done;\t\t\n+\t\tresult = NT_STATUS_NO_MEMORY;\n+\t\tgoto done;\n \t}\n \tif ( (out_data = (uint8_t*)SMB_MALLOC(size)) == NULL ) {\n \t\tprintf(\"Failure to allocate buff of %d bytes\\n\",\n \t\t       size);\n-\t\tgoto done;\t\t\n+\t\tresult = NT_STATUS_NO_MEMORY;\n+\t\tgoto done;\n \t}\n \n \tfor (i = 0; i < size; i++)\n@@ -111,6 +113,7 @@\n \tif ( (out_data = (uint8_t*)SMB_MALLOC(size)) == NULL ) {\n \t\tprintf(\"Failure to allocate buff of %d bytes\\n\",\n \t\t       size);\n+\t\tresult = NT_STATUS_NO_MEMORY;\n \t\tgoto done;\t\t\n \t}\n \t\n@@ -148,6 +151,7 @@\n \tif ( (in_data = (uint8_t*)SMB_MALLOC(size)) == NULL ) {\n \t\tprintf(\"Failure to allocate buff of %d bytes\\n\",\n \t\t       size);\n+\t\tresult = NT_STATUS_NO_MEMORY;\n \t\tgoto done;\t\t\n \t}\n \n\n"}