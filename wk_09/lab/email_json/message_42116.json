{"category": "ham", "to_address": "r-help@stat.math.ethz.ch", "from_address": "Tim Bergsma <timb@metrumrg.com>", "subject": "[R] test for nested factors", "body": "Is there a conventional way to test for nested factors?  I.e., if 'a' \nand 'b' are lists of same-length factors, does each level specified by \n'a' correspond to exactly one level specified by 'b'?\n\nThe function below seems to suffice, but I'd be happy to know of a more \nsuccinct solution, if it already exists.\n\nThanks,\n\nTim.\n\n---\n\n\"%nested.in%\" <- function(x,f,...){\n\t#coerce to list\n\tif(!is.list(x))x<-list(x)\n\tif(!is.list(f))f<-list(f)\n\t#collapse to vector\n\tx <- tapply(x[[1]],x)\n\tf <- tapply(f[[1]],f)\n\t#analyse\n\treturn(all(sapply(lapply(split(f,x),unique),length)==1))\n}\n\nCO2$Plant %nested.in% CO2[,c(\"Type\",\"Treatment\")] #TRUE\nCO2$Plant %nested.in% (CO2$uptake < mean(CO2$uptake)) #FALSE\n\n______________________________________________\nR-help@stat.math.ethz.ch mailing list\nhttps://stat.ethz.ch/mailman/listinfo/r-help\nPLEASE do read the posting guide http://www.R-project.org/posting-guide.html\nand provide commented, minimal, self-contained, reproducible code.\n\n"}