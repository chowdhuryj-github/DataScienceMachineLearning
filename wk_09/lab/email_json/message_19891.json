{"category": "ham", "to_address": "samba-cvs@samba.org", "from_address": "jra@samba.org", "subject": "svn commit: samba r22591 - in branches: SAMBA_3_0/examples/VFS\n\tSAMBA_3_0_25/examples/VFS", "body": "Author: jra\nDate: 2007-04-30 03:38:19 +0000 (Mon, 30 Apr 2007)\nNew Revision: 22591\n\nWebSVN: http://websvn.samba.org/cgi-bin/viewcvs.cgi?view=rev&root=samba&rev=22591\n\nLog:\nFix up the examples also.\nJeremy.\n\nModified:\n   branches/SAMBA_3_0/examples/VFS/shadow_copy_test.c\n   branches/SAMBA_3_0_25/examples/VFS/shadow_copy_test.c\n\n\nChangeset:\nModified: branches/SAMBA_3_0/examples/VFS/shadow_copy_test.c\n===================================================================\n--- branches/SAMBA_3_0/examples/VFS/shadow_copy_test.c\t2007-04-30 02:51:26 UTC (rev 22590)\n+++ branches/SAMBA_3_0/examples/VFS/shadow_copy_test.c\t2007-04-30 03:38:19 UTC (rev 22591)\n@@ -58,7 +58,11 @@\n \tshadow_copy_data->num_volumes = num;\n \t\n \tif (labels) {\t\n-\t\tshadow_copy_data->labels = TALLOC_ZERO_ARRAY(shadow_copy_data->mem_ctx,SHADOW_COPY_LABEL,num);\n+\t\tif (num) {\n+\t\t\tshadow_copy_data->labels = TALLOC_ZERO_ARRAY(shadow_copy_data->mem_ctx,SHADOW_COPY_LABEL,num);\n+\t\t} else {\n+\t\t\tshadow_copy_data->labels = NULL;\n+\t\t}\n \t\tfor (i=0;ilabels[i], sizeof(SHADOW_COPY_LABEL), \"@GMT-2003.08.05-12.%02u.00\",i);\n \t\t}\n\nModified: branches/SAMBA_3_0_25/examples/VFS/shadow_copy_test.c\n===================================================================\n--- branches/SAMBA_3_0_25/examples/VFS/shadow_copy_test.c\t2007-04-30 02:51:26 UTC (rev 22590)\n+++ branches/SAMBA_3_0_25/examples/VFS/shadow_copy_test.c\t2007-04-30 03:38:19 UTC (rev 22591)\n@@ -58,7 +58,11 @@\n \tshadow_copy_data->num_volumes = num;\n \t\n \tif (labels) {\t\n-\t\tshadow_copy_data->labels = TALLOC_ZERO_ARRAY(shadow_copy_data->mem_ctx,SHADOW_COPY_LABEL,num);\n+\t\tif (num) {\n+\t\t\tshadow_copy_data->labels = TALLOC_ZERO_ARRAY(shadow_copy_data->mem_ctx,SHADOW_COPY_LABEL,num);\n+\t\t} else {\n+\t\t\tshadow_copy_data->labels = NULL;\n+\t\t}\n \t\tfor (i=0;ilabels[i], sizeof(SHADOW_COPY_LABEL), \"@GMT-2003.08.05-12.%02u.00\",i);\n \t\t}\n\n"}