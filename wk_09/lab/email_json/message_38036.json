{"category": "ham", "to_address": "samba-cvs@samba.org", "from_address": "tridge@samba.org", "subject": "Rev 386: - ignore blank lines at end of lists in\n\thttp://samba.org/~tridge/ctdb", "body": "------------------------------------------------------------\nrevno: 386\nrevision-id: tridge@samba.org-20070529062347-6zqhcauyt2y25nvz\nparent: tridge@samba.org-20070529060202-b5d16t238ncw2x2q\ncommitter: Andrew Tridgell \nbranch nick: tridge\ntimestamp: Tue 2007-05-29 16:23:47 +1000\nmessage:\n  - ignore blank lines at end of lists\n  - rpm tweaks\nmodified:\n  common/ctdb.c                  ctdb.c-20061127094323-t50f58d65iaao5of-2\n  packaging/RHEL/ctdb.spec       ctdb.spec-20070527204758-biuh7znabuwan3zn-3\n  takeover/ctdb_takeover.c       ctdb_takeover.c-20070525071636-a5n1ihghjtppy08r-2\n=== modified file 'common/ctdb.c'\n--- a/common/ctdb.c\t2007-05-29 02:49:25 +0000\n+++ b/common/ctdb.c\t2007-05-29 06:23:47 +0000\n@@ -151,6 +151,9 @@\n \t\tctdb_set_error(ctdb, \"Failed to load nlist '%s'\\n\", nlist);\n \t\treturn -1;\n \t}\n+\twhile (nlines > 0 && strcmp(lines[nlines-1], \"\") == 0) {\n+\t\tnlines--;\n+\t}\n \n \tfor (i=0;i 0 && strcmp(lines[nlines-1], \"\") == 0) {\n+\t\tnlines--;\n+\t}\n \n \tif (nlines != ctdb->num_nodes) {\n \t\tDEBUG(0,(\"Number of lines in %s does not match number of nodes!\\n\", alist));\n\n"}