{"category": "ham", "to_address": "samba-technical@lists.samba.org", "from_address": "\"Mikhail T.\" <mi+metlife@aldan.algebra.com>", "subject": "prs_uint32 applied to pointers?", "body": "Hello!\n\nTrying to build Samba on my FreeBSD/amd64 machine, I noticed a scary \nwarning about a pointer getting cast to an integer of lesser width.\n\nIndeed, the following code seems to stick the file path /pointer/ into a \n32-bit number:\n\n        uni_p = fl3->path ? (uint32)fl3->path : 0;\n        if(!prs_uint32(\"ptr\", ps, depth, &uni_p))\n                return False;\n\nAlthough the 32-bit systems will not notice, the code does not seem \nright for 64-bit ones, where pointers are 64-bit wide. Can someone, \nplease, comment? Silencing the warning is easy, but there may be a \ngenuine problem pointed out here.\n\nThe file in question is samba-3.0.25rc3/source/rpc_parse/parse_srv.c.\n\nThanks!\n\n    -mi\n\n"}