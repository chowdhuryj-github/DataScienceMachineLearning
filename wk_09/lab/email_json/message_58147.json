{"category": "ham", "to_address": "samba-cvs@samba.org", "from_address": "obnox@samba.org", "subject": "svn commit: samba r23652 - in branches: SAMBA_3_0/source/utils\n\tSAMBA_3_0_26/source/utils", "body": "Author: obnox\nDate: 2007-06-29 10:22:18 +0000 (Fri, 29 Jun 2007)\nNew Revision: 23652\n\nWebSVN: http://websvn.samba.org/cgi-bin/viewcvs.cgi?view=rev&root=samba&rev=23652\n\nLog:\nUse the recursive delete function instead of the original one\nwhen deleting a share. Just to be sure...\n\nMichael\n\n\nModified:\n   branches/SAMBA_3_0/source/utils/net_conf.c\n   branches/SAMBA_3_0_26/source/utils/net_conf.c\n\n\nChangeset:\nModified: branches/SAMBA_3_0/source/utils/net_conf.c\n===================================================================\n--- branches/SAMBA_3_0/source/utils/net_conf.c\t2007-06-29 09:58:11 UTC (rev 23651)\n+++ branches/SAMBA_3_0/source/utils/net_conf.c\t2007-06-29 10:22:18 UTC (rev 23652)\n@@ -256,7 +256,7 @@\n \t\tgoto done;\n \t}\n \n-\twerr = reg_deletekey(key, keyname);\n+\twerr = reg_deletekey_recursive(key, key, keyname);\n \tif (!W_ERROR_IS_OK(werr)) {\n \t\td_fprintf(stderr, \"Error deleting registry key %s\\\\%s: %s\\n\",\n \t\t\t  KEY_SMBCONF, keyname, dos_errstr(werr));\n\nModified: branches/SAMBA_3_0_26/source/utils/net_conf.c\n===================================================================\n--- branches/SAMBA_3_0_26/source/utils/net_conf.c\t2007-06-29 09:58:11 UTC (rev 23651)\n+++ branches/SAMBA_3_0_26/source/utils/net_conf.c\t2007-06-29 10:22:18 UTC (rev 23652)\n@@ -256,7 +256,7 @@\n \t\tgoto done;\n \t}\n \n-\twerr = reg_deletekey(key, keyname);\n+\twerr = reg_deletekey_recursive(key, key, keyname);\n \tif (!W_ERROR_IS_OK(werr)) {\n \t\td_fprintf(stderr, \"Error deleting registry key %s\\\\%s: %s\\n\",\n \t\t\t  KEY_SMBCONF, keyname, dos_errstr(werr));\n\n"}