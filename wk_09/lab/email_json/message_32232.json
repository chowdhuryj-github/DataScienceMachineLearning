{"category": "ham", "to_address": "Lauri Nikkinen <lauri.nikkinen@iki.fi>", "from_address": "Adaikalavan Ramasamy <ramasamy@cancer.org.uk>", "subject": "Re: [R] Simple programming question", "body": "According to your post you are assuming that there are only 3 unique \nvalues for var3 within each category. But category C and D have 4 unique \nvalues for var3.\n\n    split(dfr, dfr$categ)\n    ...\n    $C\n       id categ var3 score\n    3   3     C    6  high\n    7   7     C    5   mid\n    11 11     C    3   low\n    15 15     C    1   low\n    ...\n\nIf you meant something different, then just change myfun() below\n\n\n  gmax <- function(x, rnk=1){\n   ## generalized maximum with rnk=1 being the bigest value (i.e. max)\n   return( sort( unique(x), decreasing=T )[rnk] )\n  }\n\n  myfun <- function(x){ ifelse( x==gmax(x,1), \"high\",\n                                ifelse( x==gmax(x,2), \"med\", \"low\" ) ) }\n\n  out   <- lapply( split(dfr$var3, dfr$categ), myfun )\n\n  data.frame( dfr, my.score = unsplit(out, dfr$categ) )\n\nRegards, Adai\n\n\n\nLauri Nikkinen wrote:\n> Hi R-users,\n> \n> I have a simple question for R heavy users. If I have a data frame like this\n> \n> \n> dfr <- data.frame(id=1:16, categ=rep(LETTERS[1:4], 4),\n> var3=c(8,7,6,6,5,4,5,4,3,4,3,2,3,2,1,1))\n> dfr <- dfr[order(dfr$categ),]\n> \n> and I want to score values or points in variable named \"var3\" following this\n> kind of logic:\n> \n> 1. the highest value of var3 within category (variable named \"categ\") ->\n> \"high\"\n> 2. the second highest value -> \"mid\"\n> 3. lowest value -> \"low\"\n> \n> This would be the output of this reasoning:\n> \n> dfr$score <-\n> factor(c(\"high\",\"mid\",\"low\",\"low\",\"high\",\"mid\",\"mid\",\"low\",\"high\",\"mid\",\"low\",\"low\",\"high\",\"mid\",\"low\",\"low\"))\n> dfr\n> \n> The question is how I do this programmatically in R (i.e. if I have 2000\n> rows in my dfr)?\n> \n> I appreciate your help!\n> \n> Cheers,\n> Lauri\n> \n> \t[[alternative HTML version deleted]]\n> \n> ______________________________________________\n> R-help@stat.math.ethz.ch mailing list\n> https://stat.ethz.ch/mailman/listinfo/r-help\n> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html\n> and provide commented, minimal, self-contained, reproducible code.\n> \n> \n>\n\n______________________________________________\nR-help@stat.math.ethz.ch mailing list\nhttps://stat.ethz.ch/mailman/listinfo/r-help\nPLEASE do read the posting guide http://www.R-project.org/posting-guide.html\nand provide commented, minimal, self-contained, reproducible code.\n\n"}