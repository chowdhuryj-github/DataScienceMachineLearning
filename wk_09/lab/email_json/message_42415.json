{"category": "ham", "to_address": "Seth Falcon <sfalcon@fhcrc.org>", "from_address": "johan Faux <johanfaux@yahoo.com>", "subject": "Re: [R] locked environment and inheritance", "body": "Thanks for your reply.\n\nExperimenting a little further, I was able to learn a bit more and find what is the real problem of mine what the real question is.\n\nI could create my S4 extended class by adding these two lines in my namespace file\nimportClassesFrom(Matrix,Matrix)\nimportClassesFrom(Matrix,dMatrix)\n\nand then creating my new class in another R file\n\nlibrary(Matrix)\nsetClass(\"myMatClass\", representation(\"dMatrix\",myslot=\"numeric\"))\n\n\nwhich creates the new S4 class when my package is loaded. \n\nThe problem is that I would like to create the class inside a function of mine:\n\ncreateMyS4Class() {\n    library(Matrix)\n\n    setClass(\"myMatClass\", representation(\"dMatrix\",myslot=\"numeric\"))\n}\n\nso that, at some point (after my package is loaded ), I can do something like:\n\nif (cond)\n    createMyS4Class()\n\nNow, I understand that at this point, my package environment is locked.  So the question become: \nIs there any way that I can unlock my package environment, create my new S4 class and lock it back or something?\n\nPlease let me know if that makes sense ? \nI appreciate your comments.\n\n\n\n\n\n-importing the foreign S4 class in my  namespace file\n\n----- Original Message ----\nFrom: Seth Falcon \nTo: johan Faux \nCc: r-help@stat.math.ethz.ch\nSent: Monday, June 4, 2007 2:40:21 PM\nSubject: Re: [R] locked environment and inheritance\n\njohan Faux  writes:\n\n> Hi,\n>\n> I have a S3 package with namespace called \"myS3Pkg\". Inside my package\n> I would like to create a S4 class which extends (adds 2 slots) another\n> S4 class from some other package. The class should be created in\n> \"myPkg\" environment (and not global environment).\n>\n> Using:\n>\n>\n> setClass(\"myS4class\", representation(\"otherS4class\", mydata =\n> \"numeric\"), where = topenv())\n\nhave you tried just omitting the where argument?  Classes will get\ndefined in the package environment and I think that's what you want.\n\n+ seth\n-- \nSeth Falcon | Computational Biology | Fred Hutchinson Cancer Research Center\nhttp://bioconductor.org\n\n\n\n\n\n\n\n\n \n____________________________________________________________________________________\n\n\n\n\t[[alternative HTML version deleted]]\n\n______________________________________________\nR-help@stat.math.ethz.ch mailing list\nhttps://stat.ethz.ch/mailman/listinfo/r-help\nPLEASE do read the posting guide http://www.R-project.org/posting-guide.html\nand provide commented, minimal, self-contained, reproducible code.\n\n"}