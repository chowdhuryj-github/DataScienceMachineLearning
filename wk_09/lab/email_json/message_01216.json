{"category": "ham", "to_address": "samba-cvs@samba.org", "from_address": "tridge@samba.org", "subject": "Rev 77: fix a possible free after use in\n\thttp://samba.org/~tridge/ctdb", "body": "------------------------------------------------------------\nrevno: 77\nrevision-id: tridge@samba.org-20070410030523-6999e1796946bdfe\nparent: tridge@samba.org-20070410025154-12ddbf5dc4ff7bf6\ncommitter: Andrew Tridgell \nbranch nick: tridge\ntimestamp: Tue 2007-04-10 13:05:23 +1000\nmessage:\n  fix a possible free after use\nmodified:\n  common/ctdb_call.c             ctdb_call.c-20061128065342-to93h6eejj5kon81-1\n=== modified file 'common/ctdb_call.c'\n--- a/common/ctdb_call.c\t2007-04-07 00:58:14 +0000\n+++ b/common/ctdb_call.c\t2007-04-10 03:05:23 +0000\n@@ -418,6 +418,10 @@\n \n \ttalloc_steal(state, c);\n \n+\t/* get an extra reference here - this prevents the free in ctdb_recv_pkt()\n+\t   from freeing the data */\n+\t(void)talloc_reference(state, c);\n+\n \tstate->state = CTDB_CALL_DONE;\n }\n \n\n"}