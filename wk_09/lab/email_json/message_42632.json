{"category": "ham", "to_address": "samba-cvs@samba.org", "from_address": "tridge@samba.org", "subject": "Rev 467: more unused code in http://samba.org/~tridge/ctdb", "body": "------------------------------------------------------------\nrevno: 467\nrevision-id: tridge@samba.org-20070605051753-8zmbmalk19r44hqw\nparent: tridge@samba.org-20070605051724-z3962fd9tv3i8pw2\ncommitter: Andrew Tridgell \nbranch nick: tridge\ntimestamp: Tue 2007-06-05 15:17:53 +1000\nmessage:\n  more unused code\nmodified:\n  common/ctdb_daemon.c           ctdb_daemon.c-20070409200331-3el1kqgdb9m4ib0g-1\n=== modified file 'common/ctdb_daemon.c'\n--- a/common/ctdb_daemon.c\t2007-06-05 05:17:24 +0000\n+++ b/common/ctdb_daemon.c\t2007-06-05 05:17:53 +0000\n@@ -511,26 +511,6 @@\n \n \n \n-static void ctdb_read_from_parent(struct event_context *ev, struct fd_event *fde, \n-\t\t\t uint16_t flags, void *private_data)\n-{\n-\tint *fd = private_data;\n-\tint cnt;\n-\tchar buf;\n-\n-\t/* XXX this is a good place to try doing some cleaning up before exiting */\n-\tcnt = read(*fd, &buf, 1);\n-\tif (cnt==0) {\n-\t\tDEBUG(2,(__location__ \" parent process exited. filedescriptor dissappeared\\n\"));\n-\t\texit(1);\n-\t} else {\n-\t\tDEBUG(0,(__location__ \" ctdb: did not expect data from parent process\\n\"));\n-\t\texit(1);\n-\t}\n-}\n-\n-\n-\n /*\n   create a unix domain socket and bind it\n   return a file descriptor open on the socket \n\n"}