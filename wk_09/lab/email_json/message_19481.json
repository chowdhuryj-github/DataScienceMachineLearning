{"category": "ham", "to_address": "samba-cvs@samba.org", "from_address": "tridge@samba.org", "subject": "Rev 221: yay! finally fixed the bug that volker,\n\tronnie and I have been chasing in http://samba.org/~tridge/ctdb", "body": "------------------------------------------------------------\nrevno: 221\nrevision-id: tridge@samba.org-20070429141940-kxbij0fq3pj33qvn\nparent: tridge@samba.org-20070428171336-4yw1gh5qfslqan73\ncommitter: Andrew Tridgell \nbranch nick: tridge\ntimestamp: Sun 2007-04-29 16:19:40 +0200\nmessage:\n  yay! finally fixed the bug that volker, ronnie and I have been chasing\n  for 2 days.\n  \n  The main bug was in smbd, but there was a secondary (and more subtle)\n  bug in ctdb that the bug in smbd exposed. When we get send a dmaster\n  reply, we have to correctly update the dmaster in the recipient even\n  if the original requst has timed out, otherwise ctdbd can get into a\n  loop fighting over who will handle a key.\n  \n  This patch also cleans up the packet allocation, and makes ctdbd\n  become a real daemon.\nmodified:\n  common/ctdb_call.c             ctdb_call.c-20061128065342-to93h6eejj5kon81-1\n  common/ctdb_client.c           ctdb_client.c-20070411010216-3kd8v37k61steeya-1\n  common/ctdb_control.c          ctdb_control.c-20070426122724-j6gkpiofhbwdin63-1\n  common/ctdb_daemon.c           ctdb_daemon.c-20070409200331-3el1kqgdb9m4ib0g-1\n  common/ctdb_io.c               ctdb_io.c-20070409200335-dzfc7f3rra5rcf60-1\n  common/ctdb_util.c             ctdb_util.c-20061128065342-to93h6eejj5kon81-3\n  direct/ctdbd.c                 ctdbd.c-20070411085044-dqmhr6mfeexnyt4m-1\n  include/ctdb.h                 ctdb.h-20061117234101-o3qt14umlg9en8z0-11\n  include/ctdb_private.h         ctdb_private.h-20061117234101-o3qt14umlg9en8z0-13\n\nDiff too large for email (559, the limit is 200).\n\n"}