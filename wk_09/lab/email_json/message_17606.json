{"category": "ham", "to_address": "James Peach <jpeach@apple.com>", "from_address": "\"Gerald (Jerry) Carter\" <jerry@samba.org>", "subject": "Re: svn commit: samba r22509 - in branches:\tSAMBA_3_0/source/groupdb\n SAMBA_3_0_25/source/groupdb", "body": "-----BEGIN PGP SIGNED MESSAGE-----\nHash: SHA1\n\nJames,\n\n>> WebSVN:\n>> http://websvn.samba.org/cgi-bin/viewcvs.cgi?view=rev&root=samba&rev=22509\n>>\n>> Log:\n>> Fix some memory corruption caused by calling free()\n>> on talloc()'d memory when adding/removing members\n>> from Local Groups.\n> \n> How about changing SAFE_FREE to prevent this sort of thing? eg.\n> \n> #define SAFE_FREE(x) do { if ((x) != NULL) { \\\n>     SMB_ASSERT(!talloc_is_talloc_pointer(free)); free(x); x=NULL;} }\n> while(0)\n\nThat will not crash but will potentially leak memory.  I'd rather\nhave the crash.\n-----BEGIN PGP SIGNATURE-----\nVersion: GnuPG v1.4.3 (GNU/Linux)\nComment: Using GnuPG with Mozilla - http://enigmail.mozdev.org\n\niD8DBQFGMfNFIR7qMdg1EfYRAjNQAJwLAyYHeu+6iubvw1nqEIj4uWfZ2QCglsGG\nyH81xtsiMjvO6oXwU1BDsew=\n=Xbq9\n-----END PGP SIGNATURE-----\n\n"}