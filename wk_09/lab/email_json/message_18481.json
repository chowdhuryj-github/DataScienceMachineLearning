{"category": "ham", "to_address": "samba-cvs@samba.org", "from_address": "tridge@samba.org", "subject": "Rev 209: added make test and make valgrindtest targets in\n\thttp://samba.org/~tridge/ctdb", "body": "------------------------------------------------------------\nrevno: 209\nrevision-id: tridge@samba.org-20070428085758-hq0l44zjdfogmk23\nparent: tridge@samba.org-20070428085032-9ny107w9wqvh7jnl\ncommitter: Andrew Tridgell \nbranch nick: tridge\ntimestamp: Sat 2007-04-28 10:57:58 +0200\nmessage:\n  added make test and make valgrindtest targets\nadded:\n  tests/run_tests.sh             run_tests.sh-20070428085745-ec2w6vybjf07vtvg-1\nrenamed:\n  lib/replace/test => lib/replace/tests test-20070125040949-7t3f5zdl1q4z9hyv-33\nmodified:\n  Makefile.in                    makefile.in-20061117234101-o3qt14umlg9en8z0-1\n=== added file 'tests/run_tests.sh'\n--- a/tests/run_tests.sh\t1970-01-01 00:00:00 +0000\n+++ b/tests/run_tests.sh\t2007-04-28 08:57:58 +0000\n@@ -0,0 +1,8 @@\n+#!/bin/sh\n+\n+tests/fetch.sh || exit 1\n+tests/bench.sh || exit 1\n+tests/test.sh || exit 1\n+\n+echo \"All OK\"\n+exit 0\n\n=== renamed directory 'lib/replace/test' => 'lib/replace/tests'\n=== modified file 'Makefile.in'\n--- a/Makefile.in\t2007-04-27 15:24:10 +0000\n+++ b/Makefile.in\t2007-04-28 08:57:58 +0000\n@@ -105,12 +105,18 @@\n \trm -f config.log config.status config.cache config.h\n \trm -f Makefile\n \n-install:\n+install: all\n \tmkdir -p $(bindir)\n \tmkdir -p $(includedir)\n \tcp $(BINS) $(bindir)\n \tcp $(srcdir)/include/ctdb.h $(includedir)\n \n+test:\n+\ttests/run_tests.sh\n+\n+valgrindtest:\n+\tVALGRIND=\"valgrind -q --trace-children=yes\" tests/run_tests.sh\n+\n \n realdistclean: distclean\n \trm -f configure config.h.in\n\n"}