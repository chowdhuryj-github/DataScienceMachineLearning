{"category": "ham", "to_address": "samba-cvs@samba.org", "from_address": "gd@samba.org", "subject": "svn commit: samba r22643 - in branches: SAMBA_3_0/source/nsswitch\n\tSAMBA_3_0_25/source/nsswitch", "body": "Author: gd\nDate: 2007-05-03 11:44:18 +0000 (Thu, 03 May 2007)\nNew Revision: 22643\n\nWebSVN: http://websvn.samba.org/cgi-bin/viewcvs.cgi?view=rev&root=samba&rev=22643\n\nLog:\nDon't clear cached U/SID and UG/SID entries when we want to logon offline.\n\nGuenther\n\nModified:\n   branches/SAMBA_3_0/source/nsswitch/winbindd_cache.c\n   branches/SAMBA_3_0_25/source/nsswitch/winbindd_cache.c\n\n\nChangeset:\nModified: branches/SAMBA_3_0/source/nsswitch/winbindd_cache.c\n===================================================================\n--- branches/SAMBA_3_0/source/nsswitch/winbindd_cache.c\t2007-05-02 22:05:48 UTC (rev 22642)\n+++ branches/SAMBA_3_0/source/nsswitch/winbindd_cache.c\t2007-05-03 11:44:18 UTC (rev 22643)\n@@ -2162,7 +2162,14 @@\n \t\t\t\tNET_USER_INFO_3 *info3)\n {\n \tstruct winbind_cache *cache;\n-\t\n+\n+\t/* dont clear cached U/SID and UG/SID entries when we want to logon\n+\t * offline - gd */\n+\n+\tif (lp_winbind_offline_logon()) {\n+\t\treturn;\n+\t}\n+\n \tif (!domain)\n \t\treturn;\n \n\nModified: branches/SAMBA_3_0_25/source/nsswitch/winbindd_cache.c\n===================================================================\n--- branches/SAMBA_3_0_25/source/nsswitch/winbindd_cache.c\t2007-05-02 22:05:48 UTC (rev 22642)\n+++ branches/SAMBA_3_0_25/source/nsswitch/winbindd_cache.c\t2007-05-03 11:44:18 UTC (rev 22643)\n@@ -2140,7 +2140,14 @@\n \t\t\t\tNET_USER_INFO_3 *info3)\n {\n \tstruct winbind_cache *cache;\n-\t\n+\n+\t/* dont clear cached U/SID and UG/SID entries when we want to logon\n+\t * offline - gd */\n+\n+\tif (lp_winbind_offline_logon()) {\n+\t\treturn;\n+\t}\n+\n \tif (!domain)\n \t\treturn;\n \n\n"}