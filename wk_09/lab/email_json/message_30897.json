{"category": "ham", "to_address": "samba-cvs@samba.org", "from_address": "obnox@samba.org", "subject": "svn commit: samba r22933 - in branches/SAMBA_3_0_26/source: .", "body": "Author: obnox\nDate: 2007-05-16 12:13:58 +0000 (Wed, 16 May 2007)\nNew Revision: 22933\n\nWebSVN: http://websvn.samba.org/cgi-bin/viewcvs.cgi?view=rev&root=samba&rev=22933\n\nLog:\nRemove precompiled headers on clean.\n(This ports r22416 from 3_0)\n\n\nModified:\n   branches/SAMBA_3_0_26/source/Makefile.in\n\n\nChangeset:\nModified: branches/SAMBA_3_0_26/source/Makefile.in\n===================================================================\n--- branches/SAMBA_3_0_26/source/Makefile.in\t2007-05-16 11:57:37 UTC (rev 22932)\n+++ branches/SAMBA_3_0_26/source/Makefile.in\t2007-05-16 12:13:58 UTC (rev 22933)\n@@ -930,11 +930,13 @@\n \t\t$(CC) -I. -I$(srcdir) $(FLAGS) $(PICFLAG) -c $< -o $@ >/dev/null 2>&1\n @BROKEN_CC@\t-mv `echo $@ | sed 's%^.*/%%g'` $@\n \n+PRECOMPILED_HEADER = $(builddir)/include/includes.h.gch\n+\n # this adds support for precompiled headers. To use it, install a snapshot\n # of gcc-3.4 and run 'make pch' before you do the main build.\n pch: proto_exists\n-\trm -f $(builddir)/include/includes.h.gch\n-\t$(CC) -I. -I$(srcdir) $(FLAGS) $(PICFLAG) -c $(srcdir)/include/includes.h -o $(builddir)/include/includes.h.gch\n+\trm -f $(PRECOMPILED_HEADER)\n+\t$(CC) -I. -I$(srcdir) $(FLAGS) $(PICFLAG) -c $(srcdir)/include/includes.h -o $(PRECOMPILED_HEADER)\n \n # These dependencies are only approximately correct: we want to make\n # sure Samba's paths are updated if ./configure is re-run.  Really it\n@@ -1793,6 +1795,7 @@\n TOPFILES=dynconfig.o\n \n clean: delheaders python_clean\n+\t-rm -f $(PRECOMPILED_HEADER)\n \t-rm -f core */*~ *~ */*.o */*/*.o */*/*/*.o \\\n \t\t*/*.@SHLIBEXT@ */*/*.@SHLIBEXT@ */*/*/*.@SHLIBEXT@ \\\n \t\t$(TOPFILES) $(BIN_PROGS) $(SBIN_PROGS) $(ROOT_SBIN_PROGS) \\\n\n"}