{"category": "ham", "to_address": "r-help@stat.math.ethz.ch", "from_address": "\"Young Cho\" <young.stat@gmail.com>", "subject": "[R] summing up colum values for unique IDs when multiple ID's exist\n\tin data frame", "body": "I have data.frame's with IDs and multiple columns. B/c some of IDs showed up\nmore than once, I need sum up colum values to creat a new dataframe with\nunique ids.\n\nI hope there are some cheaper ways of doing it...  Because the dataframe is\nhuge, it takes almost an hour to do the task.  Thanks so much in advance!\n\nYoung\n\n# -------------------------  examples are here and sum.dup.r is at the\nbottom.\n\n> x = data.frame(ID = c('A','B','C','A'), val=c(0.1,0.001,-0.1,0.2))\n> x\n  ID    val\n1  A  0.100\n2  B  0.001\n3  C -0.100\n4  A  0.200\n> sum.dup(x)\n  ID    val\n1  A  0.300\n2  B  0.001\n3  C -0.100\n\n\n\nsum.dup <- function( x ){\n\n        d.row = which(duplicated(x$ID))\n        if( length(d.row) > 0){\n                id = x$ID[d.row]\n                com.val = x[-d.row,]\n                for(i in 1:length(id)){\n                        s = sum(x$val[ x$ID == id[i] ])\n                        com.val$val[ com.val$ID == id[i] ] = s\n                }\n                ix = sort(as.character(com.val[,1]),index.return=T)\n                return(com.val[ix$ix,])\n        }else{\n                ix = sort(as.character(x[,1]),index.return=T)\n                return(x[ix$ix,])\n        }\n\n}\n\n\t[[alternative HTML version deleted]]\n\n______________________________________________\nR-help@stat.math.ethz.ch mailing list\nhttps://stat.ethz.ch/mailman/listinfo/r-help\nPLEASE do read the posting guide http://www.R-project.org/posting-guide.html\nand provide commented, minimal, self-contained, reproducible code.\n\n"}