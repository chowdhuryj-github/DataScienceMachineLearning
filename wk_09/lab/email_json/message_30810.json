{"category": "ham", "to_address": "Andrew Bartlett <abartlet@samba.org>", "from_address": "Jelmer Vernooij <jelmer@samba.org>", "subject": "Re: How to add this test to Samba4?", "body": "Hi Andrew,\n\nAndrew Bartlett wrote:\n> I would like to add the RAW-QFILEINFO-IPC test to Samba4.  This test\n> runs against IPC$, but is picked up in the --list of all RAW tests, so I\n> have to add a 'skip' entry for it in the samba4-skip file (as it will\n> fail against a file share, as it opens /pipe/lsass).\n> \n> I tried to do this, but the skip entry is overriding this too. \n> \n> Index: selftest/test_posix.sh\n> ===================================================================\n> --- selftest/test_posix.sh      (revision 22837)\n> +++ selftest/test_posix.sh      (working copy)\n> @@ -20,3 +20,4 @@\n>      start=\"\"\n>      plantest \"$t\" dc $VALGRIND bin/smbtorture $TORTURE_OPTIONS\n> $ADDARGS //\\$SERVER/tmp -U\"\\$USERNAME\"%\"\\$PASSWORD\" $t\n>  done\n> +plantest \"RAW-QFILEINFO-IPC on IPC$\" dc $VALGRIND bin/smbtorture\n> $TORTURE_OPTIONS $ADDARGS //\\$SERVER/ipc$ -U\"\\$USERNAME\"%\"\\$PASSWORD\"\n> RAW-QFILEINFO-IPC\n> \n> The other option is the fold it into the RAW-QFILEINFO test, and detect\n> that the share is IPC$ somehow.  \n> \n> Thoughts?\nWe try to match the elements in the skip list as regular expressions. \nHave you tried using something like ^foo$ ?\nCheers,\n\nJelmer\n\n"}