{"category": "ham", "to_address": "debian-mirrors@lists.debian.org", "from_address": "carlos@fisica.ufpr.br (Carlos Carvalho)", "subject": "Re: ..weeding out bad debs off mirrors, was: Can I get some help,\n please?", "body": "Arnt Karlsen (arnt@c2i.net) wrote on 22 May 2007 14:54:\n >On Tue, 22 May 2007 07:01:39 +0200, Klaus wrote in message \n ><46527933.6020207@gmx.de>:\n >\n >> Arnt Karlsen wrote:\n >> > ..one thing I haven't found, is an easy way to weed out bad files off\n >> > my (big bad disk, replacement ordered) mirror after fsck's, my plan is\n >> > use md5sum down the debian/tree and weed out all the bad files, instead\n >> > of wasting another week re-downloading all the good stuff (right now\n >> > I have 71GB of i386 and source) to build a full mirror.  Pointers?\n >> \n >> Isn't that what debmirror does anyhow to verify the integrity of the mirror?\n >> \n >> At least I seem to remember that bad or missing files were fixed with the next remirror of my mirror.\n >> \n >> Cheers,\n >> Klaus\n >> \n >On Tue, 22 May 2007 08:25:38 +0100, Jonathan wrote in message \n >:\n >\n >> doesn't rsyncing take care fo this by itself updating the mirror?\n >> \n >> mirror.ac3bf1.org\n >> John\n >\n >..IME no (but I use the anonftpsync script), as long as the file names \n >matches, all files are accepted as good, I see no md5sum kinda check\n >done. I appreciate the \"do not dump that load upstream\", so I'm looking\n >for some kinda find *.md5sum* ->xarg md5sum-c -> rm -vf baaad.debs\n >oneliner or somesuch to verify my mirror update, pointers?\n\nrsync will check the integrity of existing files if used with option -c.\nHowever this puts a high load on the server so many of them disable\nits use. A debian mirror does not need to allow it.\n\nThe default is to not use -c; in this case only the date and length\nare used to decide if a file should be updated.\n\nOne can use the checksums in indices/md5sums.gz to verify the files\nlocally. Very useful indeed... I do it periodically, because a mirror\nis a significant responsibility.\n\n\n-- \nTo UNSUBSCRIBE, email to debian-mirrors-REQUEST@lists.debian.org\nwith a subject of \"unsubscribe\". Trouble? Contact listmaster@lists.debian.org\n\n"}