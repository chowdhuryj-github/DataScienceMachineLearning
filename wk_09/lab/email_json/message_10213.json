{"category": "ham", "to_address": "Tyler Smith <tyler.smith@mail.mcgill.ca>, r-help@stat.math.ethz.ch", "from_address": "John Kane <jrkrideau@yahoo.ca>", "subject": "Re: [R] Character coerced to factor and I cannot get it back", "body": "\n--- Tyler Smith  wrote:\n\n> I really need to sit down with the manual and sort\n> factors and classes\n> properly. In your case, I think the problem has\n> something to do with\n> the way a list behaves?  I'm not sure, but if you\n> convert your list to\n> a dataframe it seems to work ok:\n> \n> > dd3 <- as.data.frame(dd1)\n> > typeof(dd3$st)\n> [1] \"integer\"\n> > class(dd3$st)\n> [1] \"factor\"\n> > dd3$st <- as.character(dd3$st)\n> > typeof(dd3$st)\n> [1] \"character\"\n> > class(dd3$st)\n> [1] \"character\"\n> \n> HTH,\n> \n> Tyler\n\nSeems to work nicely. I had forgotten about\n'as.data.frame.\n\nI originally thought that it might be a list problem\ntoo but I don't think so. I set up the example as a\nlist since that is the way my real data is being\nimported from csv. However after my original posting I\nwent back and tried it with just a dataframe and I'm\ngetting the same results. See below.\n\nI even shut down R , reloaded it and detached the two\nextra packages I usually load. Everything is working\nfine but I am doing some things with factors that I\nhave never done before and this just makes me a bit\nparanoid.  \n\nThanks very much for the help.\n\n\nEXAMPLE\ndd  <- data.frame(aa <- 1:4, bb <-  letters[1:4],\n         cc <- c(12345, 123456, 45678, 456789))\n         \nid  <-  as.character(dd[,3]) ; id\n\nst  <- substring(id, 1,nchar(id)-4 ) ; st\ntypeof (st)  ; class(st)\n\ndd1  <-  cbind(dd, st)\n    names(dd1)  <- c(\"aa\",\"bb\",\"cc\",\"st\")\n    dd1\n    typeof(dd1$st); class(dd1$st)\n\ndd2  <-  cbind(dd, as.character(st))\n    names(dd2)  <- c(\"aa\",\"bb\",\"cc\",\"st\")\n    dd2\n    typeof(dd2$st) ;   class(dd2$st)\n\n______________________________________________\nR-help@stat.math.ethz.ch mailing list\nhttps://stat.ethz.ch/mailman/listinfo/r-help\nPLEASE do read the posting guide http://www.R-project.org/posting-guide.html\nand provide commented, minimal, self-contained, reproducible code.\n\n"}