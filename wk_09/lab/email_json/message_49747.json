{"category": "ham", "to_address": "samba-cvs@samba.org", "from_address": "tridge@samba.org", "subject": "Rev 600: don't display dead share mode entries in smbstatus in\n\thttp://samba.org/~tridge/3_0-ctdb", "body": "------------------------------------------------------------\nrevno: 600\nrevision-id: tridge@samba.org-20070617210000-tq41u51ojd7f7erk\nparent: tridge@samba.org-20070617163600-hvcm2thc6nw756ha\ncommitter: Andrew Tridgell \nbranch nick: s3-ctdb-tridge\ntimestamp: Mon 2007-06-18 07:00:00 +1000\nmessage:\n  don't display dead share mode entries in smbstatus\nmodified:\n  source/utils/status.c          status.c-20070210173807-1wjifrbwaz6xnmgl-1163\n=== modified file 'source/utils/status.c'\n--- a/source/utils/status.c\t2007-06-17 16:36:00 +0000\n+++ b/source/utils/status.c\t2007-06-17 21:00:00 +0000\n@@ -112,6 +112,10 @@\n \t\treturn;\n \t}\n \n+\tif (!process_exists(e->pid)) {\n+\t\treturn;\n+\t}\n+\n \tif (count==0) {\n \t\td_printf(\"Locked files:\\n\");\n \t\td_printf(\"Pid          Uid        DenyMode   Access      R/W        Oplock           SharePath   Name   Time\\n\");\n\n"}