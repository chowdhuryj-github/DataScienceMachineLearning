{"category": "ham", "to_address": "samba-cvs@samba.org", "from_address": "obnox@samba.org", "subject": "svn commit: samba r23454 - in\n\tbranches/SAMBA_3_0_26/source/registry: .", "body": "Author: obnox\nDate: 2007-06-12 23:29:53 +0000 (Tue, 12 Jun 2007)\nNew Revision: 23454\n\nWebSVN: http://websvn.samba.org/cgi-bin/viewcvs.cgi?view=rev&root=samba&rev=23454\n\nLog:\nMerge r20018 from 3_0:\n\nFix a memleak in reg_createkey\n\n\nModified:\n   branches/SAMBA_3_0_26/source/registry/reg_api.c\n\n\nChangeset:\nModified: branches/SAMBA_3_0_26/source/registry/reg_api.c\n===================================================================\n--- branches/SAMBA_3_0_26/source/registry/reg_api.c\t2007-06-12 23:23:01 UTC (rev 23453)\n+++ branches/SAMBA_3_0_26/source/registry/reg_api.c\t2007-06-12 23:29:53 UTC (rev 23454)\n@@ -320,8 +320,10 @@\n \n \terr = reg_openkey(ctx, key, path, desired_access, pkey);\n \tif (W_ERROR_IS_OK(err)) {\n-\t\t*paction = REG_OPENED_EXISTING_KEY;\n-\t\treturn WERR_OK;\n+\t\tif (paction != NULL) {\n+\t\t\t*paction = REG_OPENED_EXISTING_KEY;\n+\t\t}\n+\t\tgoto done;\n \t}\n \n \tif (!W_ERROR_EQUAL(err, WERR_BADFILE)) {\n\n"}