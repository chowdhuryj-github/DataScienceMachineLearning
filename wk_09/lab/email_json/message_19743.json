{"category": "ham", "to_address": "Johann Hanne <jhml@gmx.net>", "from_address": "\"Gerald (Jerry) Carter\" <jerry@samba.org>", "subject": "Re: \"valid users = domain_user\" without specifying domain", "body": "-----BEGIN PGP SIGNED MESSAGE-----\nHash: SHA1\n\nJohann Hanne wrote:\n> Hi,\n> \n> I've got a long time configuration wish where I was never sure if it's \n> actually doable. Maybe somebody can give me some hint...\n> \n> My samba configuration is rather simple: It's a Windows ADS domain member with \n> a www share that's mainly accessed by Windows users:\n> ---\n> [global]\n> \n> netbios name = MYSERVER\n> workgroup = MYDOMAIN\n> realm = MYDOMAIN.DE\n> security = ADS\n> \n> idmap domains = MYDOMAIN\n> \n> idmap config MYDOMAIN:default = yes\n> idmap config MYDOMAIN:backend = ad\n> idmap config MYDOMAIN:range = 500 - 999\n> idmap config MYDOMAIN:schema_mode = rfc2307\n> \n> winbind uid = 500 - 999\n> winbind gid = 500 - 999\n> winbind use default domain = yes\n> --\n> \n> So far, everything is working fine, but the share configuration is not how I'd \n> like:\n> --\n> [www]\n>   comment = Web\n>   path = /var/www\n>   valid users = MYDOMAIN/user1 MYDOMAIN/user2 MYDOMAIN/user3\n>   ; does NOT work:\n>   ;valid users = user1 user2 user3\n>   ; what I'd like to put in is:\n>   ;valid users = +apache\n> --\n> \n> My problem is that I have to specify the domain (\"MYDOMAIN/\") \n> in front of each  user, otherwise it won't work (Permission denied).\n\nI'm pretty sure this behavior is described in the release notes for\nthe 3.0.23 release series.  It is by deisgn.  DOMAION\\group1 and\n(local) group1 have different SIDs.\n\n> Shouldn't this be a configuration that works? user1, \n> user2 and user3 are actually winbind/nss mapped users, so why\n> do I have to specify the domain name here?\n\nJust make MACHINE\\Apache and add domain users to that.\n\n\n\n\n\n\n\ncheers, jerry\n=====================================================================\nSamba                                    ------- http://www.samba.org\nCenteris                         -----------  http://www.centeris.com\n\"What man is a man who does not make the world better?\"      --Balian\n-----BEGIN PGP SIGNATURE-----\nVersion: GnuPG v1.4.2.2 (Darwin)\nComment: Using GnuPG with Mozilla - http://enigmail.mozdev.org\n\niD8DBQFGNR49IR7qMdg1EfYRAn7CAJ47Y4Y57NSnN2CTZcDOon5r75M2ZQCfWy0j\n5vAjUdqFfAcuY08+dvFYlsM=\n=X6Rg\n-----END PGP SIGNATURE-----\n\n"}