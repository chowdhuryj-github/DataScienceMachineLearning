{"category": "ham", "to_address": "samba-cvs@samba.org", "from_address": "jra@samba.org", "subject": "svn commit: samba r22859 - in branches: SAMBA_3_0_25/source\n\tSAMBA_3_0_26/source", "body": "Author: jra\nDate: 2007-05-14 17:24:55 +0000 (Mon, 14 May 2007)\nNew Revision: 22859\n\nWebSVN: http://websvn.samba.org/cgi-bin/viewcvs.cgi?view=rev&root=samba&rev=22859\n\nLog:\nJanitor for James Peach for rev. 22820\n\"Move FAM libraries from smbd to vfs_fam_notify. Should fix bugzilla #4426.\"\nPlease keep all branches in order.\nJeremy.\n\nModified:\n   branches/SAMBA_3_0_25/source/Makefile.in\n   branches/SAMBA_3_0_25/source/configure.in\n   branches/SAMBA_3_0_26/source/Makefile.in\n   branches/SAMBA_3_0_26/source/configure.in\n\n\nChangeset:\nModified: branches/SAMBA_3_0_25/source/Makefile.in\n===================================================================\n--- branches/SAMBA_3_0_25/source/Makefile.in\t2007-05-14 17:08:18 UTC (rev 22858)\n+++ branches/SAMBA_3_0_25/source/Makefile.in\t2007-05-14 17:24:55 UTC (rev 22859)\n@@ -1500,7 +1500,7 @@\n bin/notify_fam.@SHLIBEXT@: $(VFS_NOTIFY_FAM_OBJ)\n \t@echo \"Building plugin $@\"\n \t@$(SHLD) $(LDSHFLAGS) -o $@ $(VFS_NOTIFY_FAM_OBJ) \\\n-\t\t@SONAMEFLAG@`basename $@`\n+\t\t@SONAMEFLAG@`basename $@` @SMB_FAM_LIBS@\n \n bin/readahead.@SHLIBEXT@: $(VFS_READAHEAD_OBJ)\n \t@echo \"Building plugin $@\"\n\nModified: branches/SAMBA_3_0_25/source/configure.in\n===================================================================\n--- branches/SAMBA_3_0_25/source/configure.in\t2007-05-14 17:08:18 UTC (rev 22858)\n+++ branches/SAMBA_3_0_25/source/configure.in\t2007-05-14 17:24:55 UTC (rev 22859)\n@@ -2538,13 +2538,13 @@\n         # On IRIX, libfam requires libC, but other FAM implementations\n \t# might not need it.\n         AC_CHECK_LIB(fam, FAMOpen2,\n-            [samba_cv_HAVE_LIBFAM=yes; samba_fam_libs=\"-lfam\"],\n+            [samba_cv_HAVE_LIBFAM=yes; SMB_FAM_LIBS=\"-lfam\"],\n             [samba_cv_HAVE_LIBFAM=no])\n \n         if test x\"$samba_cv_HAVE_LIBFAM\" = x\"no\" ; then\n             samba_fam_xtra=-lC\n             AC_CHECK_LIB_EXT(fam, samba_fam_xtra, FAMOpen2,\n-                [samba_cv_HAVE_LIBFAM=yes; samba_fam_libs=\"-lfam -lC\"],\n+                [samba_cv_HAVE_LIBFAM=yes; SMB_FAM_LIBS=\"-lfam -lC\"],\n                 [samba_cv_HAVE_LIBFAM=no])\n             unset samba_fam_xtra\n         fi\n@@ -2564,6 +2564,8 @@\n     fi\n fi\n \n+AC_SUBST(SMB_FAM_LIBS)\n+\n #################################################\n # Check for DMAPI interfaces in libdm/libjfsdm/libxsdm\n \n@@ -6204,7 +6206,7 @@\n \n # Stuff the smbd-only libraries at the end of the smbd link\n # path (if we have them).\n-SMBD_LIBS=\"$samba_fam_libs $samba_dmapi_libs\"\n+SMBD_LIBS=\"$samba_dmapi_libs\"\n AC_SUBST(SMBD_LIBS)\n \n AC_OUTPUT(include/stamp-h Makefile script/findsmb smbadduser script/gen-8bit-gap.sh script/installbin.sh script/uninstallbin.sh)\n\nModified: branches/SAMBA_3_0_26/source/Makefile.in\n===================================================================\n--- branches/SAMBA_3_0_26/source/Makefile.in\t2007-05-14 17:08:18 UTC (rev 22858)\n+++ branches/SAMBA_3_0_26/source/Makefile.in\t2007-05-14 17:24:55 UTC (rev 22859)\n@@ -1501,7 +1501,7 @@\n bin/notify_fam.@SHLIBEXT@: $(VFS_NOTIFY_FAM_OBJ)\n \t@echo \"Building plugin $@\"\n \t@$(SHLD) $(LDSHFLAGS) -o $@ $(VFS_NOTIFY_FAM_OBJ) \\\n-\t\t@SONAMEFLAG@`basename $@`\n+\t\t@SONAMEFLAG@`basename $@` @SMB_FAM_LIBS@\n \n bin/readahead.@SHLIBEXT@: $(VFS_READAHEAD_OBJ)\n \t@echo \"Building plugin $@\"\n\nModified: branches/SAMBA_3_0_26/source/configure.in\n===================================================================\n--- branches/SAMBA_3_0_26/source/configure.in\t2007-05-14 17:08:18 UTC (rev 22858)\n+++ branches/SAMBA_3_0_26/source/configure.in\t2007-05-14 17:24:55 UTC (rev 22859)\n@@ -2538,13 +2538,13 @@\n         # On IRIX, libfam requires libC, but other FAM implementations\n \t# might not need it.\n         AC_CHECK_LIB(fam, FAMOpen2,\n-            [samba_cv_HAVE_LIBFAM=yes; samba_fam_libs=\"-lfam\"],\n+            [samba_cv_HAVE_LIBFAM=yes; SMB_FAM_LIBS=\"-lfam\"],\n             [samba_cv_HAVE_LIBFAM=no])\n \n         if test x\"$samba_cv_HAVE_LIBFAM\" = x\"no\" ; then\n             samba_fam_xtra=-lC\n             AC_CHECK_LIB_EXT(fam, samba_fam_xtra, FAMOpen2,\n-                [samba_cv_HAVE_LIBFAM=yes; samba_fam_libs=\"-lfam -lC\"],\n+                [samba_cv_HAVE_LIBFAM=yes; SMB_FAM_LIBS=\"-lfam -lC\"],\n                 [samba_cv_HAVE_LIBFAM=no])\n             unset samba_fam_xtra\n         fi\n@@ -2564,6 +2564,8 @@\n     fi\n fi\n \n+AC_SUBST(SMB_FAM_LIBS)\n+\n #################################################\n # Check for DMAPI interfaces in libdm/libjfsdm/libxsdm\n \n@@ -6245,7 +6247,7 @@\n \n # Stuff the smbd-only libraries at the end of the smbd link\n # path (if we have them).\n-SMBD_LIBS=\"$samba_fam_libs $samba_dmapi_libs\"\n+SMBD_LIBS=\"$samba_dmapi_libs\"\n AC_SUBST(SMBD_LIBS)\n \n AC_OUTPUT(include/stamp-h Makefile script/findsmb smbadduser script/gen-8bit-gap.sh script/installbin.sh script/uninstallbin.sh)\n\n"}