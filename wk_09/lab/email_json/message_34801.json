{"category": "ham", "to_address": "Erin Hodgess <hodgess@gator.dt.uh.edu>", "from_address": "Duncan Murdoch <murdoch@stats.uwo.ca>", "subject": "Re: [R] Possible ld.exe problem when building", "body": "On 23/05/2007 2:13 AM, Erin Hodgess wrote:\n> Dear R People:\n> \n> \n> I am trying to build R-2.5.0 from source on a Windows machinee.\n> \n> I downloaded the tools and such, and started things off.\n\nCould you give the details on what you downloaded?  As Brian said, it \nlooks like you found obsolete copies.  Did you get them from my page? \nWhat URL?\n\nDuncan Murdoch\n\n> \n> I received some odd errors messages, looked on the R Search\n> and found a similar problem.  The suggestion was to re-load\n> \"ld.exe\".\n> \n> I downloaded and installed everything again.  Same problem.\n> \n> I am including my output.  \n> c:\\esr\\R-2.5.0\\src\\gnuwin32>make all recommended\n> make all recommended\n> make[1]: `Rpwd.exe' is up to date.\n> make[4]: Nothing to be done for `svnonly'.\n> installing C headers\n> make[2]: `all' is up to date.\n> make[2]: `libRblas.dll.a' is up to date.\n> make[5]: Nothing to be done for `svnonly'.\n> installing C headers\n> make --no-print-directory -C ../extra/intl OPTFLAGS='-O3 -Wall -pedantic -std=gnu99' -f Makefile.win\n> make --no-print-directory -C ../appl OPTFLAGS='-O3 -Wall -pedantic -std=gnu99' FOPTFLAGS='-O3 -Wall' -f Makefile.win\n> make --no-print-directory -C ../nmath OPTFLAGS='-O3 -Wall -pedantic -std=gnu99' -f Makefile.win\n> make --no-print-directory -C ../main OPTFLAGS='-O3 -Wall -pedantic -std=gnu99' FFLAGS='-O3 -Wall' -f Makefile.win\n> make --no-print-directory -C ./graphapp OPTFLAGS='-O3 -Wall -pedantic -std=gnu99'\n> make --no-print-directory -C ./getline OPTFLAGS='-O3 -Wall -pedantic -std=gnu99'\n> make[4]: `gl.a' is up to date.\n> make -f Makefile.win chartables.h\n> make[5]: `chartables.h' is up to date.\n> make -f Makefile.win makeMakedeps\n> make -f Makefile.win libpcre.a\n> make[5]: `libpcre.a' is up to date.\n> make[4]: Nothing to be done for `all'.\n> make[4]: Nothing to be done for `all'.\n> gcc  -shared -s -mwindows -o R.dll R.def console.o dataentry.o dynload.o edit.o editor.o embeddedR.o extra.o opt.o pager.o preferences.o psignal.o rhome.o rt_complete.o rui.o run.o shext.o sys-win32.o system.o dos_glob.o e_pow.o ../main/libmain.a ../appl/libappl.a ../nmath/libnmath.a graphapp/ga.a getline/gl.a ../extra/xdr/libxdr.a ../extra/zlib/libz.a ../extra/pcre/libpcre.a ../extra/bzip2/libbz2.a ../extra/intl/libintl.a ../extra/trio/libtrio.a dllversion.o -L. -lg2c -lRblas -lcomctl32 -lversion  \n> console.o:console.c:(.text+0x44): undefined reference to `mbrtowc'\n> console.o:console.c:(.text+0x9d): undefined reference to `mbrtowc'\n> console.o:console.c:(.text+0x14f): undefined reference to `mbrtowc'\n> console.o:console.c:(.text+0x6b1): undefined reference to `mbrtowc'\n> console.o:console.c:(.text+0xc7c): undefined reference to `mbrtowc'\n> console.o:console.c:(.text+0xcff): more undefined references to `mbrtowc' follow\n> extra.o:extra.c:(.text+0x2240): undefined reference to `mallinfo'\n> extra.o:extra.c:(.text+0x226f): undefined reference to `mallinfo'\n> ../main/libmain.a(memory.o):memory.c:(.text+0x260): undefined reference to `Rm_free'\n> ../main/libmain.a(memory.o):memory.c:(.text+0xa80): undefined reference to `Rm_malloc'\n> ../main/libmain.a(memory.o):memory.c:(.text+0xbde): undefined reference to `Rm_malloc'\n> ../main/libmain.a(memory.o):memory.c:(.text+0xc3d): undefined reference to `Rm_malloc'\n> ../main/libmain.a(memory.o):memory.c:(.text+0xf4d): undefined reference to `Rm_calloc'\n> ../main/libmain.a(memory.o):memory.c:(.text+0xfae): undefined reference to `Rm_realloc'\n> ../main/libmain.a(memory.o):memory.c:(.text+0xfc8): undefined reference to `Rm_malloc'\n> ../main/libmain.a(memory.o):memory.c:(.text+0x2cbc): undefined reference to `Rm_free'\n> ../main/libmain.a(memory.o):memory.c:(.text+0x35e0): undefined reference to `Rm_malloc'\n> ../main/libmain.a(memory.o):memory.c:(.text+0x38ef): undefined reference to `Rm_malloc'\n> ../main/libmain.a(memory.o):memory.c:(.text+0x3d3c): undefined reference to `Rm_malloc'\n> ../main/libmain.a(memory.o):memory.c:(.text+0x403f): undefined reference to `Rm_malloc'\n> ../main/libmain.a(memory.o):memory.c:(.text+0x462d): undefined reference to `Rm_malloc'\n> ../main/libmain.a(memory.o):memory.c:(.text+0x4649): more undefined references to `Rm_malloc' follow\n> ../main/libmain.a(memory.o):memory.c:(.text+0xffc): undefined reference to `Rm_free'\n> ../main/libmain.a(printutils.o):printutils.c:(.text+0x6bd): undefined reference to `mbrtowc'\n> ../main/libmain.a(printutils.o):printutils.c:(.text+0x9ce): undefined reference to `mbrtowc'\n> ../main/libmain.a(engine.o):engine.c:(.text+0x7d6f): undefined reference to `mbrtowc'\n> ../main/libmain.a(engine.o):engine.c:(.text+0x8016): undefined reference to `wcrtomb'\n> ../main/libmain.a(plotmath.o):plotmath.c:(.text+0xfe7): undefined reference to `wcrtomb'\n> ../main/libmain.a(plotmath.o):plotmath.c:(.text+0x1c11): undefined reference to `mbrtowc'\n> ../main/libmain.a(plotmath.o):plotmath.c:(.text+0x24d0): undefined reference to `wcrtomb'\n> ../main/libmain.a(arithmetic.o):arithmetic.c:(.text+0x2e7a): undefined reference to `expm1'\n> ../main/libmain.a(gram.o):gram.c:(.text+0x7d): undefined reference to `mbrtowc'\n> ../main/libmain.a(gram.o):gram.c:(.text+0x392): undefined reference to `mbrtowc'\n> ../main/libmain.a(plot.o):plot.c:(.text+0x910): undefined reference to `mbrtowc'\n> ../main/libmain.a(util.o):util.c:(.text+0x3806): undefined reference to `mbrtowc'\n> ../main/libmain.a(util.o):util.c:(.text+0x387c): undefined reference to `mbrtowc'\n> ../main/libmain.a(util.o):util.c:(.text+0x39df): more undefined references to `mbrtowc' follow\n> ../main/libmain.a(regex.o):regex.c:(.text+0x25b): undefined reference to `wcrtomb'\n> ../main/libmain.a(regex.o):regex.c:(.text+0x37a): undefined reference to `mbrtowc'\n> ../main/libmain.a(regex.o):regex.c:(.text+0x3dd): undefined reference to `wcrtomb'\n> ../main/libmain.a(regex.o):regex.c:(.text+0xd3c): undefined reference to `mbrtowc'\n> ../main/libmain.a(regex.o):regex.c:(.text+0xe39): undefined reference to `mbrtowc'\n> ../main/libmain.a(regex.o):regex.c:(.text+0x220d): undefined reference to `mbrtowc'\n> ../main/libmain.a(regex.o):regex.c:(.text+0x22fd): undefined reference to `btowc'\n> ../main/libmain.a(regex.o):regex.c:(.text+0x2388): undefined reference to `wcrtomb'\n> ../main/libmain.a(regex.o):regex.c:(.text+0x23e1): undefined reference to `wcrtomb'\n> ../main/libmain.a(regex.o):regex.c:(.text+0x247d): undefined reference to `wcrtomb'\n> ../main/libmain.a(regex.o):regex.c:(.text+0x5a6b): undefined reference to `btowc'\n> ../main/libmain.a(regex.o):regex.c:(.text+0x5a91): undefined reference to `btowc'\n> ../main/libmain.a(regex.o):regex.c:(.text+0x95f4): undefined reference to `btowc'\n> ../main/libmain.a(scan.o):scan.c:(.text+0xb5b): undefined reference to `btowc'\n> ../main/libmain.a(scan.o):scan.c:(.text+0xd12): undefined reference to `btowc'\n> ../main/libmain.a(scan.o):scan.c:(.text+0xe45): more undefined references to `btowc' follow\n> ../main/libmain.a(character.o):character.c:(.text+0x1dcf): undefined reference to `mbrtowc'\n> ../main/libmain.a(character.o):character.c:(.text+0x528e): undefined reference to `wctrans'\n> ../main/libmain.a(character.o):character.c:(.text+0x533f): undefined reference to `towctrans'\n> ../nmath/libnmath.a(signrank.o):signrank.c:(.text+0xa3a): undefined reference to `expm1'\n> ../nmath/libnmath.a(wilcox.o):wilcox.c:(.text+0xc0d): undefined reference to `expm1'\n> ../nmath/libnmath.a(pgamma.o):pgamma.c:(.text+0x909): undefined reference to `expm1'\n> ../nmath/libnmath.a(pgamma.o):pgamma.c:(.text+0xdc6): undefined reference to `expm1'\n> ../nmath/libnmath.a(pexp.o):pexp.c:(.text+0x99): undefined reference to `expm1'\n> ../nmath/libnmath.a(pexp.o):pexp.c:(.text+0xe6): more undefined references to `expm1' follow\n> getline/gl.a(getline.o):getline.c:(.text+0x13f5): undefined reference to `mbrtowc'\n> getline/gl.a(getline.o):getline.c:(.text+0x1acb): undefined reference to `mbrlen'\n> getline/gl.a(getline.o):getline.c:(.text+0x1b02): undefined reference to `mbrlen'\n> getline/gl.a(getline.o):getline.c:(.text+0x2160): undefined reference to `mbrtowc'\n> getline/gl.a(getline.o):getline.c:(.text+0x2700): undefined reference to `mbrtowc'\n> getline/gl.a(getline.o):getline.c:(.text+0x27f7): undefined reference to `mbrtowc'\n> getline/gl.a(getline.o):getline.c:(.text+0x2fe9): undefined reference to `mbrtowc'\n> getline/gl.a(getline.o):getline.c:(.text+0x319d): undefined reference to `mbrtowc'\n> collect2: ld returned 1 exit status\n> make[3]: *** [R.dll] Error 1\n> make[2]: *** [../../bin/R.dll] Error 2\n> make[1]: *** [rbuild] Error 2\n> make: *** [all] Error 2\n> \n> c:\\esr\\R-2.5.0\\src\\gnuwin32>\n> \n> \n> Any suggestions would be much appreciated.  Yes, I know that I\n> should just use the binaries.  Other than that one, please.\n> \n> thanks,\n> Sincerely,\n> Erin Hodgess\n> Associate Professor\n> Department of Computer and Mathematical Sciences\n> University of Houston - Downtown\n> mailto: hodgess@gator.uhd.edu\n> \n> ______________________________________________\n> R-help@stat.math.ethz.ch mailing list\n> https://stat.ethz.ch/mailman/listinfo/r-help\n> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html\n> and provide commented, minimal, self-contained, reproducible code.\n\n______________________________________________\nR-help@stat.math.ethz.ch mailing list\nhttps://stat.ethz.ch/mailman/listinfo/r-help\nPLEASE do read the posting guide http://www.R-project.org/posting-guide.html\nand provide commented, minimal, self-contained, reproducible code.\n\n"}