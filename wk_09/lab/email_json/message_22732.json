{"category": "ham", "to_address": "samba-cvs@samba.org", "from_address": "tridge@samba.org", "subject": "Rev 248: added a tdb_enable_seqnum() function in\n\thttp://samba.org/~tridge/ctdb", "body": "------------------------------------------------------------\nrevno: 248\nrevision-id: tridge@samba.org-20070504052910-297ykux8e77ka6p0\nparent: tridge@samba.org-20070504032530-ni45j80aucjdgxfe\ncommitter: Andrew Tridgell \nbranch nick: tridge\ntimestamp: Fri 2007-05-04 15:29:10 +1000\nmessage:\n  added a tdb_enable_seqnum() function\nmodified:\n  lib/tdb/common/tdb.c           tdb.c-20070220022425-m1wibgjq7n5hahs6-9\n  lib/tdb/include/tdb.h          tdb.h-20070125040949-7t3f5zdl1q4z9hyv-101\n=== modified file 'lib/tdb/common/tdb.c'\n--- a/lib/tdb/common/tdb.c\t2007-04-16 12:52:58 +0000\n+++ b/lib/tdb/common/tdb.c\t2007-05-04 05:29:10 +0000\n@@ -649,3 +649,11 @@\n \treturn tdb->flags;\n }\n \n+\n+/*\n+  enable sequence number handling on an open tdb\n+*/\n+void tdb_enable_seqnum(struct tdb_context *tdb)\n+{\n+\ttdb->flags |= TDB_SEQNUM;\n+}\n\n=== modified file 'lib/tdb/include/tdb.h'\n--- a/lib/tdb/include/tdb.h\t2007-04-16 13:03:36 +0000\n+++ b/lib/tdb/include/tdb.h\t2007-05-04 05:29:10 +0000\n@@ -131,6 +131,7 @@\n int tdb_hash_size(struct tdb_context *tdb);\n size_t tdb_map_size(struct tdb_context *tdb);\n int tdb_get_flags(struct tdb_context *tdb);\n+void tdb_enable_seqnum(struct tdb_context *tdb);\n \n /* Low level locking functions: use with care */\n int tdb_chainlock(struct tdb_context *tdb, TDB_DATA key);\n\n"}