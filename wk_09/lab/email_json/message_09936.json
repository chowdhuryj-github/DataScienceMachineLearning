{"category": "ham", "to_address": "samba-cvs@samba.org", "from_address": "metze@samba.org", "subject": "svn commit: samba r22373 - in branches/SAMBA_4_0/source/lib/util: .", "body": "Author: metze\nDate: 2007-04-19 14:21:56 +0000 (Thu, 19 Apr 2007)\nNew Revision: 22373\n\nWebSVN: http://websvn.samba.org/cgi-bin/viewcvs.cgi?view=rev&root=samba&rev=22373\n\nLog:\nmove in_list() to util_strlist.c to remove the dependency\nfrom util.o to next_token() and strcasecmp_m()\n\nwith this the pidl tests link better on some hosts\n\nmetze\nModified:\n   branches/SAMBA_4_0/source/lib/util/util_str.c\n   branches/SAMBA_4_0/source/lib/util/util_strlist.c\n\n\nChangeset:\nModified: branches/SAMBA_4_0/source/lib/util/util_str.c\n===================================================================\n--- branches/SAMBA_4_0/source/lib/util/util_str.c\t2007-04-19 14:14:11 UTC (rev 22372)\n+++ branches/SAMBA_4_0/source/lib/util/util_str.c\t2007-04-19 14:21:56 UTC (rev 22373)\n@@ -25,7 +25,6 @@\n #include \"includes.h\"\n #include \"libcli/raw/smb.h\"\n #include \"pstring.h\"\n-#include \"lib/ldb/include/ldb.h\"\n #include \"system/locale.h\"\n \n /**\n@@ -247,29 +246,6 @@\n }\n \n /**\n- Check if a string is part of a list.\n-**/\n-_PUBLIC_ BOOL in_list(const char *s, const char *list, BOOL casesensitive)\n-{\n-\tpstring tok;\n-\tconst char *p=list;\n-\n-\tif (!list)\n-\t\treturn(False);\n-\n-\twhile (next_token(&p,tok,LIST_SEP,sizeof(tok))) {\n-\t\tif (casesensitive) {\n-\t\t\tif (strcmp(tok,s) == 0)\n-\t\t\t\treturn(True);\n-\t\t} else {\n-\t\t\tif (strcasecmp_m(tok,s) == 0)\n-\t\t\t\treturn(True);\n-\t\t}\n-\t}\n-\treturn(False);\n-}\n-\n-/**\n  Set a string value, allocing the space for the string\n **/\n static BOOL string_init(char **dest,const char *src)\n\nModified: branches/SAMBA_4_0/source/lib/util/util_strlist.c\n===================================================================\n--- branches/SAMBA_4_0/source/lib/util/util_strlist.c\t2007-04-19 14:14:11 UTC (rev 22372)\n+++ branches/SAMBA_4_0/source/lib/util/util_strlist.c\t2007-04-19 14:21:56 UTC (rev 22373)\n@@ -20,6 +20,8 @@\n */\n \n #include \"includes.h\"\n+#include \"pstring.h\"\n+#include \"system/locale.h\"\n \n /**\n  * @file\n@@ -298,3 +300,26 @@\n \t}\n \treturn False;\n }\n+\n+/**\n+ Check if a string is part of a list.\n+**/\n+_PUBLIC_ BOOL in_list(const char *s, const char *list, BOOL casesensitive)\n+{\n+\tpstring tok;\n+\tconst char *p=list;\n+\n+\tif (!list)\n+\t\treturn(False);\n+\n+\twhile (next_token(&p,tok,LIST_SEP,sizeof(tok))) {\n+\t\tif (casesensitive) {\n+\t\t\tif (strcmp(tok,s) == 0)\n+\t\t\t\treturn(True);\n+\t\t} else {\n+\t\t\tif (strcasecmp_m(tok,s) == 0)\n+\t\t\t\treturn(True);\n+\t\t}\n+\t}\n+\treturn(False);\n+}\n\n"}