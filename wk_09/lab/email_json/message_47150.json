{"category": "ham", "to_address": "Vladimir Eremeev <wl2776@gmail.com>", "from_address": "Uwe Ligges <ligges@statistik.uni-dortmund.de>", "subject": "Re: [R] Read Windows-like .INI files into R data structure?", "body": "\n\nVladimir Eremeev wrote:\n> \n> Christophe Pallier wrote:\n>>> \"var1=value1\", \"A=value3\" is almost pure R code.\n>>> Is it possible to use this feature to solve the problem?\n>> Along the same lines: you may write a short script that converts the ini\n>> file into R code that can be sourced.\n>>\n>> >From your example, you can generate  the  following R code:\n>>\n>> Section1 <- list()\n>> Section1['var1'] <- value1\n>> Section1['var2'] <- value2\n>> Section2 <- list()\n>> Section2['A'] <- value3\n>> Section2['B'] <- value4\n>>\n>>\n>> with the following awk script (using awk -F'=' -f conv.awk example.ini >\n>> example.R)\n>>\n>> ### conv.awk\n>> $1 ~ /\\[/ { gsub(/[\\[\\]]/,\"\"); # remove the brackets\n>>        listname = $1;\n>>        print $1 \" <- list()\";\n>>        next }\n>> { print listname \"['\" $1 \"'] <- \" $2 }\n>>\n>> (I know, it looks cryptic... so I am shooting myself in the foot after\n>> claiming that awk scripts are typically quite readable ;-)\n>>\n>> Christophe Pallier (http://www.pallier.org)\n>>\n> \n> It's sufficiently readable, but using something besides R is not sporty. ;)\n\n\nOK, I try to be sporty, at least that is what my family doctor asks me \nto do all the time ;-)\nCertainly there is much space for improvements...\n\n\nX <- readLines(file)\nvalue1 <- 1\nvalue2 <- 2\nvalue3 <- 3\nvalue4 <- 4\nsections <- grep(\"^\\\\[.*\\\\]$\", X)\nstarts <- sections + 1\nends <- c(sections[-1] - 1, length(X))\nL <- vector(mode=\"list\", length=length(sections))\nnames(L) <- gsub(\"\\\\[|\\\\]\", \"\", X[sections])\nfor(i in seq(along = sections)){\n     env <- new.env()\n     eval(parse(text=X[seq(starts[i], ends[i])]), env = env)\n     L[[i]] <- as.list(env)\n}\n\n______________________________________________\nR-help@stat.math.ethz.ch mailing list\nhttps://stat.ethz.ch/mailman/listinfo/r-help\nPLEASE do read the posting guide http://www.R-project.org/posting-guide.html\nand provide commented, minimal, self-contained, reproducible code.\n\n"}