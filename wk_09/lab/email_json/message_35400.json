{"category": "ham", "to_address": "sugar@laptop.org", "from_address": "Simon McVittie <simon.mcvittie@collabora.co.uk>", "subject": "[sugar] [PATCH] services/presence/server_plugin: make\n\tbytes_to_string() unnecessary by requesting a dbus.ByteArray", "body": "-----BEGIN PGP SIGNED MESSAGE-----\nHash: SHA1\n\n- ---\n services/presence/server_plugin.py |    4 +---\n 1 files changed, 1 insertions(+), 3 deletions(-)\n\ndiff --git a/services/presence/server_plugin.py b/services/presence/server_plugin.py\nindex cfa1819..97f06a8 100644\n- --- a/services/presence/server_plugin.py\n+++ b/services/presence/server_plugin.py\n@@ -739,15 +739,13 @@ class ServerPlugin(gobject.GObject):\n             self._contact_offline(handle)\n             return\n \n- -        # Convert key from dbus byte array to python string\n- -        props[\"key\"] = psutils.bytes_to_string(props[\"key\"])\n- -\n         self._conn[CONN_INTERFACE_ALIASING].RequestAliases([handle],\n             reply_handler=lambda *args: self._contact_online_aliases_cb(handle, props, *args),\n             error_handler=lambda e: self._contact_online_aliases_error_cb(handle, props, True, e))\n \n     def _contact_online_request_properties(self, handle, tries):\n         self._conn[CONN_INTERFACE_BUDDY_INFO].GetProperties(handle,\n+            byte_arrays=True,\n             reply_handler=lambda *args: self._contact_online_properties_cb(handle, *args),\n             error_handler=lambda e: self._contact_online_properties_error_cb(handle, tries, e))\n         return False\n- -- \n1.5.2-rc3.GIT\n\n-----BEGIN PGP SIGNATURE-----\nVersion: GnuPG v1.4.6 (GNU/Linux)\nComment: OpenPGP key: http://www.pseudorandom.co.uk/2003/contact/ or pgp.net\n\niD8DBQFGVXuLWSc8zVUw7HYRAjKrAKCZYtxTKTLLNqS7qZTfzcBdDsTjvACgwi+H\nMTjvx8OaMRHfSk5ISt6CBgc=\n=7ypw\n-----END PGP SIGNATURE-----\n_______________________________________________\nSugar mailing list\nSugar@laptop.org\nhttp://mailman.laptop.org/mailman/listinfo/sugar\n\n"}