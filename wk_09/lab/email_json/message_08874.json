{"category": "ham", "to_address": "samba-cvs@samba.org", "from_address": "jelmer@samba.org", "subject": "svn commit: samba r22338 - in branches/SAMBA_4_0: .\n\tsource/script/tests", "body": "Author: jelmer\nDate: 2007-04-18 14:18:33 +0000 (Wed, 18 Apr 2007)\nNew Revision: 22338\n\nWebSVN: http://websvn.samba.org/cgi-bin/viewcvs.cgi?view=rev&root=samba&rev=22338\n\nLog:\nAllow regexes in known-failures file\nModified:\n   branches/SAMBA_4_0/\n   branches/SAMBA_4_0/source/script/tests/selftest.pl\n\n\nChangeset:\n\nProperty changes on: branches/SAMBA_4_0\n___________________________________________________________________\nName: bzr:merge\n...skipped...\n\nModified: branches/SAMBA_4_0/source/script/tests/selftest.pl\n===================================================================\n--- branches/SAMBA_4_0/source/script/tests/selftest.pl\t2007-04-18 14:02:26 UTC (rev 22337)\n+++ branches/SAMBA_4_0/source/script/tests/selftest.pl\t2007-04-18 14:18:33 UTC (rev 22338)\n@@ -161,7 +161,9 @@\n {\n \tmy $fullname = shift;\n \n-\treturn 1 if (grep(/^$fullname$/, @expected_failures));\n+\tforeach (@expected_failures) {\n+\t\treturn 1 if ($fullname =~ /$_/);\n+\t}\n \n \treturn 0;\n }\n@@ -317,6 +319,7 @@\n \t\t\t\t\t$statistics->{TESTS_EXPECTED_FAIL}++;\n \t\t\t\t\t$expected_ret = 0;\n \t\t\t\t} else {\n+\t\t\t\t\tprint \"n:$name/$2l\\n\";\n \t\t\t\t\t$statistics->{TESTS_UNEXPECTED_FAIL}++;\n \t\t\t\t}\n \t\t\t} elsif ($1 eq \"skip\") {\n\n"}