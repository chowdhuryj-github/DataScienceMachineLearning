{"category": "ham", "to_address": "samba-cvs@samba.org", "from_address": "metze@samba.org", "subject": "svn commit: samba r22265 - in\n\tbranches/SAMBA_3_0_25/source/lib/replace: .", "body": "Author: metze\nDate: 2007-04-16 12:44:13 +0000 (Mon, 16 Apr 2007)\nNew Revision: 22265\n\nWebSVN: http://websvn.samba.org/cgi-bin/viewcvs.cgi?view=rev&root=samba&rev=22265\n\nLog:\nmerge from samba4:\n\nuse AC_HAVE_DECL() because AC_CHECK_DECLS() defines to 1 or 0\nand #ifndef doesn't work.\n\nmetze\nModified:\n   branches/SAMBA_3_0_25/source/lib/replace/libreplace.m4\n   branches/SAMBA_3_0_25/source/lib/replace/replace.h\n\n\nChangeset:\nModified: branches/SAMBA_3_0_25/source/lib/replace/libreplace.m4\n===================================================================\n--- branches/SAMBA_3_0_25/source/lib/replace/libreplace.m4\t2007-04-16 12:43:54 UTC (rev 22264)\n+++ branches/SAMBA_3_0_25/source/lib/replace/libreplace.m4\t2007-04-16 12:44:13 UTC (rev 22265)\n@@ -263,7 +263,7 @@\n AC_CHECK_TYPE(comparison_fn_t, \n [AC_DEFINE(HAVE_COMPARISON_FN_T, 1,[Whether or not we have comparison_fn_t])])\n \n-AC_CHECK_DECLS([setenv, unsetenv])\n+AC_HAVE_DECL(setenv, [#include ])\n AC_CHECK_FUNCS(setenv unsetenv)\n \n AC_CHECK_FUNCS(strnlen)\n\nModified: branches/SAMBA_3_0_25/source/lib/replace/replace.h\n===================================================================\n--- branches/SAMBA_3_0_25/source/lib/replace/replace.h\t2007-04-16 12:43:54 UTC (rev 22264)\n+++ branches/SAMBA_3_0_25/source/lib/replace/replace.h\t2007-04-16 12:44:13 UTC (rev 22265)\n@@ -162,7 +162,7 @@\n #define setenv rep_setenv\n int rep_setenv(const char *name, const char *value, int overwrite);\n #else\n-#ifndef HAVE_DECL_SETENV\n+#ifndef HAVE_SETENV_DECL\n int setenv(const char *name, const char *value, int overwrite);\n #endif\n #endif\n\n"}