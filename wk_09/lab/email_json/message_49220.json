{"category": "ham", "to_address": "samba-technical@lists.samba.org", "from_address": "Jeremy Allison <jra@samba.org>", "subject": "Re: svn commit: samba r23522 - in branches/SAMBA_3_0/source/smbd: .", "body": "On Sat, Jun 16, 2007 at 06:07:45PM +0000, vlendec@samba.org wrote:\n> Author: vlendec\n> Date: 2007-06-16 18:07:44 +0000 (Sat, 16 Jun 2007)\n> New Revision: 23522\n> \n> WebSVN: http://websvn.samba.org/cgi-bin/viewcvs.cgi?view=rev&root=samba&rev=23522\n> \n> Log:\n> Save us a kilobyte stack space in a hot code path: I can't see a reason\n> why check_path_syntax should not be able to run in-line. The destination\n> pointer either walks side by side with the source pointer or is\n> decremented. So as far as I can see s>=d is true throughout the whole\n> routine.\n> \n> Jeremy, I'm checking this only into 3_0 for now. Please review and ack\n> or directly merge this to 3_0_26.\n\nWow - you're on a roll today :-).\n\nThe key was noticing that s>=d is always true. Well\ndone for spotting that. Very sharp change. I might\nadd a comment in the code that explains this, so we\ndon't ever break that assumption going forward.\n\nI'll merge this for 3.0.26 - great change.\n\nI wonder what effect this has on micro-benchamarks ?\n\nJeremy.\n\n"}