{"category": "ham", "to_address": "\"Inman, Brant A. M.D.\" <Inman.Brant@mayo.edu>", "from_address": "Chuck Cleland <ccleland@optonline.net>", "subject": "Re: [R] Using power.t.test over a range of conditions", "body": "Inman, Brant A. M.D. wrote:\n> R-Helpers:\n> \n> I would like to perform sample size calculations for an experiment.  As\n> part of this process, I would like to know how various assumptions\n> affect the sample size calculation.  For instance, one thing that I\n> would like to know is how the calculated sample size changes as I vary\n> the difference that I would like to detect.  I tried the following\n> first, but got the associated error message.\n> \n> -----------------\n> \n>> power.t.test(delta=seq(500,2000,100), sd=1000, sig.level=0.05,\n> power=0.8,\n> + type='two.sample', alt='two.sided')\n> \n> Error in uniroot(function(n) eval(p.body) - power, c(2, 1e+07)) : \n>         invalid function value in 'zeroin'\n> In addition: Warning message:\n> the condition has length > 1 and only the first element will be used in:\n> if (f(lower, ...) \n> * f(upper, ...) >= 0) stop(\"f() values at end points not of opposite\n> sign\") \n> \n> -----------------\n> \n>>From the error message I suspected that the function did not handle\n> vectors as arguments.  I therefore tried the following looping structure\n> to solve the problem:\n> \n> -----------------\n> \n> \n> DELTA  <- seq(500,2000,250)\n> SD\t <- seq(1000,2500,250)\n> result <- matrix(nrow=length(DELTA), ncol=length(SD))\n> \tcolnames(result) <- paste('SD=',SD, sep='')\n> \trownames(result) <- paste('Delta=',DELTA, sep='')\n> \n> for(i in 1:length(DELTA)){\n> \tfor(j in 1:length(SD)){\n> \t\tresult[i,j] <- power.t.test(delta=DELTA[i], sd=SD[j],\n> sig.level=0.05, power=0.8,\n> \t\t\ttype='two.sample', alt='two.sided')\n> \t}\n> }\n> \n> Error in result[i, j] <- power.t.test(delta = DELTA[i], sd = SD[j],\n> sig.level = 0.05,  : \n>         number of items to replace is not a multiple of replacement\n> length\n> \n> -----------------\n> \n> Can some one tell me what I am doing wrong here?\n\n  I think one problem you are having is that power.t.test() returns a\nlist with multiple components.\n  Perhaps you could go about it like this:\n\ndf <- data.frame(expand.grid(DELTA = seq(500,2000,250),\n                             SD = seq(1000,2500,250)))\n\ndf$N <- NA\n\nfor(i in 1:dim(df)[1]){\ndf$N[i] <- power.t.test(delta=df$DELTA[i], sd=df$SD[i],\n                        sig.level=0.05, power=0.8,\n                        type='two.sample', alt='two.sided')$n\n}\n\n> Thanks in advance for your help,\n> \n> Brant Inman\n> \n> ______________________________________________\n> R-help@stat.math.ethz.ch mailing list\n> https://stat.ethz.ch/mailman/listinfo/r-help\n> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html\n> and provide commented, minimal, self-contained, reproducible code.\n\n-- \nChuck Cleland, Ph.D.\nNDRI, Inc.\n71 West 23rd Street, 8th floor\nNew York, NY 10010\ntel: (212) 845-4495 (Tu, Th)\ntel: (732) 512-0171 (M, W, F)\nfax: (917) 438-0894\n\n______________________________________________\nR-help@stat.math.ethz.ch mailing list\nhttps://stat.ethz.ch/mailman/listinfo/r-help\nPLEASE do read the posting guide http://www.R-project.org/posting-guide.html\nand provide commented, minimal, self-contained, reproducible code.\n\n"}