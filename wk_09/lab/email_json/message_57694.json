{"category": "ham", "to_address": "Milis CPAN-Perl-Beginners <beginners@perl.org>", "from_address": "Patrik Hasibuan <patrikh@penguin-teknologi.com>", "subject": "Need idea for doing automatic iteration, please.", "body": "Dear my friends...\n\nI want my code does an action if it find a directory or file, namely: storing the url/path of a file or a directory onto mysql database.\n\nI am meaning, my code should look up every file/directory name resides under the \"$rootdir\" iteratively for doing storing onto mysql on each find.\n\nThe algorithm For doing find from beginning to the end of the 1 level under $rootdir is still simple, it's only a \"while{..}{...}\". \nBut the problem comes when the directory has a/some directory/-es whereas my code should also find them and stores them onto the mysql. \nIf every directory has a limited level (for instance maximum only 3 level subdirectories below to the bottom) then all I have to do is simply creating nested \"while(...)[..] \" for 3 level. But in this case of course each directory may unpredictably has hundreds or thousands subdirectories/files in hundreds or thousands levels below to the bottom.\n\nPlease suggest me some ideas where I can implement into my codes in order to enable my code to find all subdirectories and files where placed under $rootdir.\nA very simple code-sample is very......very.......welcomed.\n\nHere is my current code under below. This code still only can find 1 level, only exactly 1 level under $rootdir.\n---------------------\npackage iterdir;\nuse kueri;\n\nsub baru{\n  my $kelas = shift if @_;\n  print \"Nama superkelas: $kelas \\n\";\n  return( bless{} );\n}\n\nsub bukadir{\n  my $kelas = shift;\n  $rootdir=\"/home/patrikh/sementara/tes\";\n  opendir(\"dirku\", \"$rootdir\");\n  $statusp=chdir($rootdir);\n  if ($statusp){\n    print \"berhasil membuka direktori-->$rootdir\\n\";\n    while ($entridir=readdir(\"dirku\")){\n      print \"entridir: $entridir\\n\";\n      $sqlku=kueri->baru;\n      $sqlku->konek;\n      if (($entridir ne '.') and ($entridir ne '..')){\n\tmy $strsql = \"insert into tblarsip (location) values ('\".$entridir.\"')\";\n\tprint \"strsql: $strsql\\n\";\n\t$sth=$kueri::dbh->prepare($strsql);\n\t$sth->execute;\n\t$sth->finish;\n      }\n    }\n  } else{\n    print \"gagal membuka direktori yang diinginkan: $rootdir\\n\";\n    exit 1;\n  }\n}\n\n1;\n\n-- \nPatrik Hasibuan \nJunior Programmer\n\n-- \nTo unsubscribe, e-mail: beginners-unsubscribe@perl.org\nFor additional commands, e-mail: beginners-help@perl.org\nhttp://learn.perl.org/\n\n\n"}