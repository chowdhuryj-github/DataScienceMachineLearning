{"category": "ham", "to_address": "samba-cvs@samba.org", "from_address": "derrell@samba.org", "subject": "svn commit: samba r22773 - in branches/SAMBA_3_0/source: .", "body": "Author: derrell\nDate: 2007-05-10 02:48:22 +0000 (Thu, 10 May 2007)\nNew Revision: 22773\n\nWebSVN: http://websvn.samba.org/cgi-bin/viewcvs.cgi?view=rev&root=samba&rev=22773\n\nLog:\n\n- Clean up the the rest of the cruft from my earlier work on the readahead()\n  missing declaration problem.\n\nModified:\n   branches/SAMBA_3_0/source/configure.in\n\n\nChangeset:\nModified: branches/SAMBA_3_0/source/configure.in\n===================================================================\n--- branches/SAMBA_3_0/source/configure.in\t2007-05-10 01:27:18 UTC (rev 22772)\n+++ branches/SAMBA_3_0/source/configure.in\t2007-05-10 02:48:22 UTC (rev 22773)\n@@ -1333,10 +1333,6 @@\n AC_CHECK_FUNCS(backtrace_symbols)\n AC_CHECK_LIB(exc, trace_back_stack)\n \n-# Save the original CFLAGS for a few tests that we want to allow\n-# implicit declaration warnings without failing the test (in developer mode)\n-ac_no_error_on_warning_CFLAGS=\"${CFLAGS}\"\n-\n echo -n \"checking for GPFS GPL libs... \"\n save_LIBS=\"$LIBS\"\n LIBS=\"$LIBS -lgpfs_gpl\"\n@@ -4728,8 +4724,6 @@\n AC_CACHE_CHECK([whether the sys_quota interface works],samba_cv_SYSQUOTA_WORKS,[\n SAVE_CPPFLAGS=\"$CPPFLAGS\"\n CPPFLAGS=\"$CPPFLAGS ${SAMBA_CONFIGURE_CPPFLAGS}\"\n-SAVE_CFLAGS=\"$CFLAGS\"\n-CFLAGS=\"${ac_no_error_on_warning_CFLAGS}\"\n AC_TRY_COMPILE([\n #include \"confdefs.h\"\n #define NO_PROTO_H 1\n@@ -4739,7 +4733,6 @@\n #include \"${srcdir-.}/lib/sysquotas.c\"\n ],[],samba_cv_SYSQUOTA_WORKS=yes,samba_cv_SYSQUOTA_WORKS=no)\n CPPFLAGS=\"$SAVE_CPPFLAGS\"\n-CFLAGS=\"$SAVE_CFLAGS\"\n ])\n if test x\"$samba_cv_SYSQUOTA_WORKS\" = x\"yes\"; then\n AC_MSG_CHECKING(whether to use the new lib/sysquotas.c interface)\n@@ -4778,8 +4771,6 @@\n AC_CACHE_CHECK([whether the old quota support works],samba_cv_QUOTA_WORKS,[\n SAVE_CPPFLAGS=\"$CPPFLAGS\"\n CPPFLAGS=\"$CPPFLAGS ${SAMBA_CONFIGURE_CPPFLAGS}\"\n-SAVE_CFLAGS=\"$CFLAGS\"\n-CFLAGS=\"${ac_no_error_on_warning_CFLAGS}\"\n AC_TRY_COMPILE([\n #include \"confdefs.h\"\n #define NO_PROTO_H 1\n@@ -4787,7 +4778,6 @@\n #include \"${srcdir-.}/smbd/quotas.c\"\n ],[],samba_cv_QUOTA_WORKS=yes,samba_cv_QUOTA_WORKS=no)\n CPPFLAGS=\"$SAVE_CPPFLAGS\"\n-CFLAGS=\"$SAVE_CFLAGS\"\n ])\n if test x\"$samba_cv_QUOTA_WORKS\" = x\"yes\"; then\n AC_MSG_CHECKING(whether to use the old quota support)\n@@ -6377,7 +6367,7 @@\n \n dnl Merge in developer cflags from now on\n if test x\"$developer\" = x\"yes\"; then\n-    CFLAGS=\"${ac_no_error_on_warning_CFLAGS} ${DEVELOPER_CFLAGS}\"\n+    CFLAGS=\"${CFLAGS} ${DEVELOPER_CFLAGS}\"\n fi\n \n builddir=`pwd`\n\n"}