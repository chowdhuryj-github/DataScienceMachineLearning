{"category": "ham", "to_address": "samba-technical@samba.org, Volker Lendecke <Volker.Lendecke@SerNet.DE>", "from_address": "\"Gerald (Jerry) Carter\" <jerry@samba.org>", "subject": "smbstatus hanging in SAMBA_3_0_26", "body": "-----BEGIN PGP SIGNED MESSAGE-----\nHash: SHA1\n\nVolker,\n\nI'm guessing this is your bug.\n\n\n\n\ncheers, jerry\n\n\n\n(gdb) bt\n#0  0xffffe410 in __kernel_vsyscall ()\n#1  0xb7de95f3 in fcntl () from /lib/tls/i686/cmov/libc.so.6\n#2  0x080c48cf in tdb_brlock (tdb=0x8193ef0, offset=,\nrw_type=0, lck_type=14, probe=0,\n    len=) at\n/home/drizzt/jerry/src/samba/samba-3.0.26/source/lib/tdb/common/lock.c:61\n#3  0x080c4c5c in tdb_lock (tdb=0x8193ef0, list=86, ltype=0)\n    at\n/home/drizzt/jerry/src/samba/samba-3.0.26/source/lib/tdb/common/lock.c:161\n#4  0x080c8b49 in tdb_next_lock (tdb=0x8193ef0, tlock=0xbffb47e0,\nrec=0xbffb4774)\n    at\n/home/drizzt/jerry/src/samba/samba-3.0.26/source/lib/tdb/common/traverse.c:74\n#5  0x080c8fbd in tdb_traverse_internal (tdb=0x8193ef0, fn=0x80cc4e3\n,\n    private_data=0xbffb4814, tl=0xbffb47e0)\n    at\n/home/drizzt/jerry/src/samba/samba-3.0.26/source/lib/tdb/common/traverse.c:156\n#6  0x080c90cd in tdb_traverse_read (tdb=0x8193ef0, fn=0x80cc4e3\n,\n    private_data=0xbffb4814)\n    at\n/home/drizzt/jerry/src/samba/samba-3.0.26/source/lib/tdb/common/traverse.c:218\n#7  0x080cc5ab in db_tdb_traverse_read (db=0x8193ed0, f=0x806580b\n,\n    private_data=0x0) at\n/home/drizzt/jerry/src/samba/samba-3.0.26/source/lib/dbwrap_tdb.c:212\n#8  0x08065fd1 in main (argc=-1074050440, argv=0xb7d3eebc)\n    at /home/drizzt/jerry/src/samba/samba-3.0.26/source/utils/status.c:348\n\n\nstat64(\"/var/lib/samba\", {st_mode=S_IFDIR|0755, st_size=4096, ...}) = 0\nopen(\"/var/lib/samba/sessionid.tdb\", O_RDWR|O_LARGEFILE) = 3\nfcntl64(3, F_SETLKW64, {type=F_WRLCK, whence=SEEK_SET, start=0, len=1},\n0xbf9b48a4) = 0\nread(3, \"TDB file\\n\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\"...,\n168) = 168\nfstat64(3, {st_mode=S_IFREG|0644, st_size=20480, ...}) = 0\nmmap2(NULL, 20480, PROT_READ|PROT_WRITE, MAP_SHARED, 3, 0) = 0xb7aa0000\nfcntl64(3, F_SETLKW64, {type=F_UNLCK, whence=SEEK_SET, start=0, len=1},\n0xbf9b48a4) = 0\nstat64(\"/opt/samba/lib/en_US.UTF-8.msg\", 0xbf9b4914) = -1 ENOENT (No\nsuch file or directory)\nfstat64(1, {st_mode=S_IFCHR|0600, st_rdev=makedev(136, 1), ...}) = 0\nmmap2(NULL, 4096, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1,\n0) = 0xb7a9f000\nwrite(1, \"\\n\", 1\n)                       = 1\nwrite(1, \"Samba version 3.0.26pre1-SVN-bui\"..., 48Samba version\n3.0.26pre1-SVN-build-23230-test-1\n) = 48\nwrite(1, \"PID     Username      Group     \"..., 68PID     Username\nGroup         Machine\n) = 68\nwrite(1, \"--------------------------------\"...,\n68-------------------------------------------------------------------\n) = 68\nfcntl64(3, F_SETLKW64, {type=F_RDLCK, whence=SEEK_SET, start=8, len=1},\n0xbf9b49b4) = 0\nfcntl64(3, F_SETLKW64, {type=F_RDLCK, whence=SEEK_SET, start=168,\nlen=1}, 0xbf9b48e4) = 0\nfcntl64(3, F_SETLKW64, {type=F_UNLCK, whence=SEEK_SET, start=168,\nlen=1}, 0xbf9b48e4) = 0\nfcntl64(3, F_SETLKW64, {type=F_RDLCK, whence=SEEK_SET, start=512, len=1}\n\n- --\n=====================================================================\nSamba                                    ------- http://www.samba.org\nCenteris                         -----------  http://www.centeris.com\n\"What man is a man who does not make the world better?\"      --Balian\n-----BEGIN PGP SIGNATURE-----\nVersion: GnuPG v1.4.6 (GNU/Linux)\nComment: Using GnuPG with Mozilla - http://enigmail.mozdev.org\n\niD8DBQFGXJb7IR7qMdg1EfYRAhKmAKCGD/yeYv3n8QhHD5pKN/dQR6yUNwCgwFPO\n5PJoP5pdTqKuYP3hpLKOe68=\n=zK69\n-----END PGP SIGNATURE-----\n\n"}