{"category": "ham", "to_address": "Yong Wang <wangyong1@gmail.com>", "from_address": "Prof Brian Ripley <ripley@stats.ox.ac.uk>", "subject": "Re: [R] rewrite a data file use write.table(),\n count.fields() show different pattern, any suggestion appreciated.", "body": "On Tue, 22 May 2007, Yong Wang wrote:\n\n> Thank you for the suggestion, Dr. Ripley\n\nI made no suggestion: I asked a question you have not answered.\n\n> However, I am a little bit confused. My understanding is that you\n> suspect the should-be-quoted fields (factor or character fields)\n> contains tabs.\n>\n> if this is the case,  count.fields()  should detect the tab,\n> read.table(sep=\"t\\\") should read with the same awareness, and if\n> write.table(sep\"\\t\") write and seperate with tab those fields as\n> acknowldged by read.table(sep=\"t\\\"), the two field counts should be\n> the same.\n\nThere are too many 'shoulds' in that sentence, and one of them is \nincorrect. Consider:\n\n> count.fields(\"test.dat\", sep=\"\\t\")\n[1] 3\n> A <- read.table(\"test.dat\", sep=\"\\t\")\n> ncol(A)\n[1] 3\n> write.table(A,\"test2.dat\", eol=\"\\n\",sep=\"\\t\",quote=F,row.names=F,\n               col.names=F)\n> count.fields(\"test2.dat\", sep=\"\\t\")\n[1] 4\n> write.table(A,\"test3.dat\", eol=\"\\n\",sep=\"\\t\",row.names=F, col.names=F)\n> count.fields(\"test3.dat\", sep=\"\\t\")\n[1] 3\n\nand I'll leave you to reconstruct test.dat to ensure you understand.\n(BTW, you didn't show us even a sample of your dataset.)\n\n\n> anyway, I will try to redo it per your suggestion.\n>\n> Regards\n> yong\n>\n>\n> On 5/22/07, Prof Brian Ripley  wrote:\n>> If you write out unquoted fields, how do you know they do not contain\n>> tabs?\n>> \n>> The default is quote=TRUE for a good reason.\n>> \n>> On Tue, 22 May 2007, Yong Wang wrote:\n>> \n>> > Dear all:\n>> >\n>> > I read in a tab delimited dataset, and then write it out as another\n>> > file as following: I did this simply to make sure I understand the\n>> > behavior of this command.\n>> >\n>> > data<-read.table(file,header=F,sep=\"\\t\",fill=T,colClasses=\"character\");\n>> > \n>> write.table(data,file=\"newdata.txt\",eol=\"\\n\",sep=\"\\t\",quote=F,row.names=F);\n>> >\n>> >\n>> > cf1 <- count.fields(newdata.txt, sep=\"\\t\")\n>> > table(cf1)\n>> > 13   17       23\n>> > 10   126   5445\n>> >\n>> > # is different to\n>> >\n>> > cf2 <- count.fields(file,sep=\"\\t\")\n>> > 13   17       23        33\n>> > 10   106   5433      32\n>> >\n>> > the worst problem is the maximal value of cf1 (33) is larger than the\n>> > maximal value of cf2 (23) which is the right number of fields for most\n>> > rows in the original file.\n>> >\n>> > I need to use write.table for some important data manipulation work,\n>> > your suggestion is\n>> > highly appreciated.\n>> >\n>> > Best Regards\n>> >\n>> > ______________________________________________\n>> > R-help@stat.math.ethz.ch mailing list\n>> > https://stat.ethz.ch/mailman/listinfo/r-help\n>> > PLEASE do read the posting guide \n>> http://www.R-project.org/posting-guide.html\n>> > and provide commented, minimal, self-contained, reproducible code.\n>> >\n>> \n>> --\n>> Brian D. Ripley,                  ripley@stats.ox.ac.uk\n>> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/\n>> University of Oxford,             Tel:  +44 1865 272861 (self)\n>> 1 South Parks Road,                     +44 1865 272866 (PA)\n>> Oxford OX1 3TG, UK                Fax:  +44 1865 272595\n>> \n>\n\n-- \nBrian D. Ripley,                  ripley@stats.ox.ac.uk\nProfessor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/\nUniversity of Oxford,             Tel:  +44 1865 272861 (self)\n1 South Parks Road,                     +44 1865 272866 (PA)\nOxford OX1 3TG, UK                Fax:  +44 1865 272595\n\n______________________________________________\nR-help@stat.math.ethz.ch mailing list\nhttps://stat.ethz.ch/mailman/listinfo/r-help\nPLEASE do read the posting guide http://www.R-project.org/posting-guide.html\nand provide commented, minimal, self-contained, reproducible code.\n\n"}