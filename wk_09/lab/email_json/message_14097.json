{"category": "ham", "to_address": "beginners@perl.org", "from_address": "\"Beau E. Cox\" <beaucox@hawaii.rr.com>", "subject": "iso-8859-1 to unicode problem", "body": "Hi -\n\nI am new to international character encoding and how the various\nencodings are handled in perl. After a day of reading, I'm asking for help.\n\nI am downloading data from an international (French) web site. The\nHTTP headers show that the pages I am downloading are encoded\nin iso-8859-1. Most characters (all the accented letters) are fine,\nbut some (i.e. the trade mark) are incorrect. Here is a working sample\nscript:\n\n#!/usr/bin/perl\n\nuse strict;\nuse warnings FATAL => 'all';\n\nuse LWP::Simple;\nuse Encode;\n\nbinmode STDOUT, \":utf8\";\n\nmy $content = get( \"http://www.formula1.com/race/circuitdetail/773.html\" ) or\n    die \"get failed.\\n\";\nmy( $name ) = $content =~ /(.+?)<\\/td>/s;\nprint \"name w/o decode:\\n\";\nprint $name, \"\\n\";\n\nmy $name1 = decode( 'iso-8859-1', $name );\nprint \"name w/decode:\\n\";\nprint $name1, \"\\n\";\n\n$name =~ s/\\x{99}/\\x{2122}/g;\nprint \"name manually converted:\\n\";\nprint $name, \"\\n\";\n\nThe output is:\n\nname w/o decode:\nFORMULA 1 Gran Premio de Espa\u00f1a Telef\u00f3nica 2007\nname w/decode:\nFORMULA 1 Gran Premio de Espa\u00f1a Telef\u00f3nica 2007\nname manually converted:\nFORMULA 1\\u2122 Gran Premio de Espa\u00f1a Telef\u00f3nica 2007\n\nHow do I get a proper conversion from iso-8859-1 to perl's internal utf8?\nIs there a way to ask LWP:: to do this based on the character encoding\nspecified in the HTTP headers?\n\nI am using:\nThis is perl, v5.8.8 built for x86_64-linux-gnu-thread-multi\n\non Debian unstable:\nLinux hanako 2.6.18-4-amd64 #1 SMP Mon Mar 26 11:36:53 CEST 2007 x86_64 \nGNU/Linux\n\n\n\n\n-- \nTo unsubscribe, e-mail: beginners-unsubscribe@perl.org\nFor additional commands, e-mail: beginners-help@perl.org\nhttp://learn.perl.org/\n\n\n\n"}