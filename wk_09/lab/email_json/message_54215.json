{"category": "ham", "to_address": "Milis CPAN-Perl-Beginners <beginners@perl.org>", "from_address": "Patrik Hasibuan <patrikh@penguin-teknologi.com>", "subject": "Inherit a database connection object", "body": "Dear all,\n\nI am still new in Perl especially in its OOP concept.\n\nI want to write once a script as a part of building a connection to my MySQL DB server. The parts only use a kind of vabiable such as \"$dbh\". Is it possible?\n\n================\nmain.pl\n================\n#!/usr/bin/perl -w\nuse iterdir;\n\n$namadir=iterdir->baru;\n$namadir=iterdir->bukadir;\n================\n================\npackage kueri;\nuse DBI;\n\nsub baru{\n  my $kelas = shift;\n}\n\nsub konek{\n  $dbh=DBI->connect(\"DBI:mysql:arsipan;localhost:3306\",\"root\",\"dearest\") or die \"gagal konek ke mysql\";\n}\n\n1;\n================\npackage iterdir;\n\nuse kueri;\n\nsub baru{\n  my $kelas = shift;\n}\n\nsub bukadir{\n  my $kelas = shift;\n  $rootdir=\"/home/patrikh/sementara/tes\";\n  opendir(\"dirku\", \"$rootdir\");\n  $statusp=chdir($rootdir);\n  if ($statusp){\n    print \"berhasil membuka direktori-->$rootdir\\n\";\n    while ($entridir=readdir(\"dirku\")){\n    print \"$entridir\\n\";\n    $sqlku=kueri->baru;\n    $sqlku=kueri->konek;\n    $sth=$dbh->prepare(\"insert into tblarsip (location, informasi) values ('$entridir', '')\");\n    $sth->execute;\n    $sth->finish;\n    }\n  } else{\n    print \"gagal membuka direktori yang diinginkan: $rootdir\\n\";\n    exit 1;\n  }\n}\n\n1;\n================\n\nThe error message is:\n\"\nCan't call method \"prepare\" on an undefined value at iterdir.pm line 22.\n\"\n\nPlease tell me how a class inherits connection object to the another class.\n\nThank you very much in advance.\n-- \nPatrik Hasibuan \nJunior Programmer\n\n-- \nTo unsubscribe, e-mail: beginners-unsubscribe@perl.org\nFor additional commands, e-mail: beginners-help@perl.org\nhttp://learn.perl.org/\n\n\n"}