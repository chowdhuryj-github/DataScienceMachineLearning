{"category": "ham", "to_address": "Henrik Zagerholm <henke@mac.se>", "from_address": "derrell@samba.org", "subject": "Re: Detect Vista symlinks with libsmbclient", "body": "Henrik Zagerholm  writes:\n\n> 25 apr 2007 kl. 18:43 skrev derrell@samba.org:\n>\n>> Henrik Zagerholm  writes:\n>>\n>>> I've just started to experiment with Vista and I wonder if I can  somehow\n>>> tell if a file object is an ordinary file or a symlink/junction?\n>>>\n>>> As I understand it I will not be able to follow symlinks until the\n>>> implementation of SMB2 so in the meantime I would like to ignore   those\n>>> files\n>>> (instead of throwing a bunch of EBADF).\n>>>\n>>> Any ideas?\n>>\n>> Henrik, have you tried calling smbc_stat() on a symlink to see what  it gives\n>> you?  There may be some useful bit set in the mode field.\n>>\n>> If that doesn't provide any useful information, please post a  bugzilla\n>> ticket\n>> for this.  I expect to have a Vista environment available to me  fairly soon,\n>> at which time I'll be able to look into this.\n>>\n>\n> I've now tried both smbc_stat and smbc_getxattr and can't see any  difference\n> in the mode bits.\n> I've opened up a bug at https://bugzilla.samba.org/show_bug.cgi?id=4557\n\nThanks.\n\n> As I understand it we will be able to handle these things better with SMB\n> 2.0 or? :)\n\nGiven my very limited experience with Vista, I can't give you an answer right\nnow.  Once I get a Vista environment installed, I'll be able to look into\nthis.  I expect that it'll still be a number of weeks before I get that set\nup, though.  If you want to experiment with packet traces between (a) two\nVista machines and (b) from an older Windows system to Vista to see whether\nany useful information can be gleaned by comparing, I'd certainly be\ninterested in your results.  In case (a) I expect a purely SMB2 conversation.\nThe real question will be if case (b) yields any useful ability with original\nSMB to retrieve the information in question.\n\nCheers,\n\nDerrell\n\n"}