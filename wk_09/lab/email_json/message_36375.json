{"category": "ham", "to_address": "samba-cvs@samba.org", "from_address": "jra@samba.org", "subject": "svn commit: samba r23148 - in branches: SAMBA_3_0/source/libsmb\n\tSAMBA_3_0_25/source/libsmb SAMBA_3_0_26/source/libsmb", "body": "Author: jra\nDate: 2007-05-25 23:50:35 +0000 (Fri, 25 May 2007)\nNew Revision: 23148\n\nWebSVN: http://websvn.samba.org/cgi-bin/viewcvs.cgi?view=rev&root=samba&rev=23148\n\nLog:\nFix old old bug in cli_smbwrite() (not incrementing\ndata being sent). Patch from mnix@wanm.com.au.\nJeremy.\n\nModified:\n   branches/SAMBA_3_0/source/libsmb/clireadwrite.c\n   branches/SAMBA_3_0_25/source/libsmb/clireadwrite.c\n   branches/SAMBA_3_0_26/source/libsmb/clireadwrite.c\n\n\nChangeset:\nModified: branches/SAMBA_3_0/source/libsmb/clireadwrite.c\n===================================================================\n--- branches/SAMBA_3_0/source/libsmb/clireadwrite.c\t2007-05-25 22:04:03 UTC (rev 23147)\n+++ branches/SAMBA_3_0/source/libsmb/clireadwrite.c\t2007-05-25 23:50:35 UTC (rev 23148)\n@@ -443,7 +443,7 @@\n \t\tp = smb_buf(cli->outbuf);\n \t\t*p++ = 1;\n \t\tSSVAL(p, 0, size); p += 2;\n-\t\tmemcpy(p, buf, size); p += size;\n+\t\tmemcpy(p, buf + total, size); p += size;\n \n \t\tcli_setup_bcc(cli, p);\n \t\t\n\nModified: branches/SAMBA_3_0_25/source/libsmb/clireadwrite.c\n===================================================================\n--- branches/SAMBA_3_0_25/source/libsmb/clireadwrite.c\t2007-05-25 22:04:03 UTC (rev 23147)\n+++ branches/SAMBA_3_0_25/source/libsmb/clireadwrite.c\t2007-05-25 23:50:35 UTC (rev 23148)\n@@ -413,7 +413,7 @@\n \t\tp = smb_buf(cli->outbuf);\n \t\t*p++ = 1;\n \t\tSSVAL(p, 0, size); p += 2;\n-\t\tmemcpy(p, buf, size); p += size;\n+\t\tmemcpy(p, buf + total, size); p += size;\n \n \t\tcli_setup_bcc(cli, p);\n \t\t\n\nModified: branches/SAMBA_3_0_26/source/libsmb/clireadwrite.c\n===================================================================\n--- branches/SAMBA_3_0_26/source/libsmb/clireadwrite.c\t2007-05-25 22:04:03 UTC (rev 23147)\n+++ branches/SAMBA_3_0_26/source/libsmb/clireadwrite.c\t2007-05-25 23:50:35 UTC (rev 23148)\n@@ -441,7 +441,7 @@\n \t\tp = smb_buf(cli->outbuf);\n \t\t*p++ = 1;\n \t\tSSVAL(p, 0, size); p += 2;\n-\t\tmemcpy(p, buf, size); p += size;\n+\t\tmemcpy(p, buf + total, size); p += size;\n \n \t\tcli_setup_bcc(cli, p);\n \t\t\n\n"}