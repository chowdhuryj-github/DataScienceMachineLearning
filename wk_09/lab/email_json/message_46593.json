{"category": "ham", "to_address": "samba-cvs@samba.org", "from_address": "tridge@samba.org", "subject": "Rev 543: on startup release all IPs,\n\tin case we have any left over from a previous run in\n\thttp://samba.org/~tridge/ctdb", "body": "------------------------------------------------------------\nrevno: 543\nrevision-id: tridge@samba.org-20070612094454-jtmr17z42ko4x7bn\nparent: tridge@samba.org-20070612045030-5dfn2g0w78u4djg4\ncommitter: Andrew Tridgell \nbranch nick: tridge\ntimestamp: Tue 2007-06-12 19:44:54 +1000\nmessage:\n  on startup release all IPs, in case we have any left over from a previous run\nmodified:\n  server/ctdb_daemon.c           ctdb_daemon.c-20070409200331-3el1kqgdb9m4ib0g-1\n=== modified file 'server/ctdb_daemon.c'\n--- a/server/ctdb_daemon.c\t2007-06-09 22:46:33 +0000\n+++ b/server/ctdb_daemon.c\t2007-06-12 09:44:54 +0000\n@@ -122,6 +122,9 @@\n \t\t\t\t CTDB_CTRL_FLAG_NOREPLY,\n \t\t\t\t tdb_null, NULL, NULL);\n \n+\t/* release any IPs we hold from previous runs of the daemon */\n+\tctdb_release_all_ips(ctdb);\n+\n \tret = ctdb_event_script_callback(ctdb, timeval_zero(), ctdb, \n \t\t\t\t\t ctdb_start_transport, NULL, \"startup\");\n \tif (ret != 0) {\n\n"}