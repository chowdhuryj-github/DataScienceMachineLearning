{"category": "ham", "to_address": "\"r-help\" <r-help@stat.math.ethz.ch>", "from_address": "Heinz Tuechler <tuechler@gmx.at>", "subject": "[R] How to check for existence url from within a function?", "body": "Dear All,\n\nTo check if an url exists, I can use try(). This works, as I expected, if I\ndo it directly, as in the first part of the following example, but I could\nnot find a way to do it from within a function, as in the second part.\n\nWhere could I find information on how to do this?\n\nThanks,\nHeinz\n\n\n## set nonexisting url\nurl.string <- 'http://www.google.at/nonexist.html'\n\n## first part\n1 # to start with defined .Last.value\ntry(con.url <- url(url.string, open='rb'))\nclass.try.res <- class(.Last.value)\ntry.error <- class.try.res== 'try-error'\nprint(try.error)      # TRUE\ntry(close(con.url))\n\n## try() within a function\nurl.error <- function(url.string) {\n  1 # to start with defined .Last.value\n  try(con.url <- url(url.string, open='rb'))\n  class.try.res <- class(.Last.value)\n  try.error <- class.try.res== 'try-error'\n  print(try.error)\n  try(close(con.url))\n  invisible(try.error)\n}\n\n## call the function\nurl.error(url.string)   # result -> FALSE\n\n______________________________________________\nR-help@stat.math.ethz.ch mailing list\nhttps://stat.ethz.ch/mailman/listinfo/r-help\nPLEASE do read the posting guide http://www.R-project.org/posting-guide.html\nand provide commented, minimal, self-contained, reproducible code.\n\n"}