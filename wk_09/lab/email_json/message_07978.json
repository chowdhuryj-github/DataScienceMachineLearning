{"category": "ham", "to_address": "samba-cvs@samba.org", "from_address": "metze@samba.org", "subject": "svn commit: samba r22317 - in\n\tbranches/SAMBA_3_0/source/lib/tdb/common: .", "body": "Author: metze\nDate: 2007-04-17 17:07:14 +0000 (Tue, 17 Apr 2007)\nNew Revision: 22317\n\nWebSVN: http://websvn.samba.org/cgi-bin/viewcvs.cgi?view=rev&root=samba&rev=22317\n\nLog:\nadd tdb_ prefix to non static function\n\nmetze\nModified:\n   branches/SAMBA_3_0/source/lib/tdb/common/freelist.c\n   branches/SAMBA_3_0/source/lib/tdb/common/freelistcheck.c\n   branches/SAMBA_3_0/source/lib/tdb/common/tdb_private.h\n\n\nChangeset:\nModified: branches/SAMBA_3_0/source/lib/tdb/common/freelist.c\n===================================================================\n--- branches/SAMBA_3_0/source/lib/tdb/common/freelist.c\t2007-04-17 17:03:38 UTC (rev 22316)\n+++ branches/SAMBA_3_0/source/lib/tdb/common/freelist.c\t2007-04-17 17:07:14 UTC (rev 22317)\n@@ -29,7 +29,7 @@\n #include \"tdb_private.h\"\n \n /* read a freelist record and check for simple errors */\n-int rec_free_read(struct tdb_context *tdb, tdb_off_t off, struct list_struct *rec)\n+int tdb_rec_free_read(struct tdb_context *tdb, tdb_off_t off, struct list_struct *rec)\n {\n \tif (tdb->methods->tdb_read(tdb, off, rec, sizeof(*rec),DOCONV()) == -1)\n \t\treturn -1;\n@@ -37,7 +37,7 @@\n \tif (rec->magic == TDB_MAGIC) {\n \t\t/* this happens when a app is showdown while deleting a record - we should\n \t\t   not completely fail when this happens */\n-\t\tTDB_LOG((tdb, TDB_DEBUG_WARNING, \"rec_free_read non-free magic 0x%x at offset=%d - fixing\\n\", \n+\t\tTDB_LOG((tdb, TDB_DEBUG_WARNING, \"tdb_rec_free_read non-free magic 0x%x at offset=%d - fixing\\n\", \n \t\t\t rec->magic, off));\n \t\trec->magic = TDB_FREE_MAGIC;\n \t\tif (tdb->methods->tdb_write(tdb, off, rec, sizeof(*rec)) == -1)\n@@ -47,7 +47,7 @@\n \tif (rec->magic != TDB_FREE_MAGIC) {\n \t\t/* Ensure ecode is set for log fn. */\n \t\ttdb->ecode = TDB_ERR_CORRUPT;\n-\t\tTDB_LOG((tdb, TDB_DEBUG_WARNING, \"rec_free_read bad magic 0x%x at offset=%d\\n\", \n+\t\tTDB_LOG((tdb, TDB_DEBUG_WARNING, \"tdb_rec_free_read bad magic 0x%x at offset=%d\\n\", \n \t\t\t   rec->magic, off));\n \t\treturn TDB_ERRCODE(TDB_ERR_CORRUPT, -1);\n \t}\n@@ -286,7 +286,7 @@\n \t   issues when faced with a slowly increasing record size.\n \t */\n \twhile (rec_ptr) {\n-\t\tif (rec_free_read(tdb, rec_ptr, rec) == -1) {\n+\t\tif (tdb_rec_free_read(tdb, rec_ptr, rec) == -1) {\n \t\t\tgoto fail;\n \t\t}\n \n@@ -311,7 +311,7 @@\n \t}\n \n \tif (bestfit.rec_ptr != 0) {\n-\t\tif (rec_free_read(tdb, bestfit.rec_ptr, rec) == -1) {\n+\t\tif (tdb_rec_free_read(tdb, bestfit.rec_ptr, rec) == -1) {\n \t\t\tgoto fail;\n \t\t}\n \n\nModified: branches/SAMBA_3_0/source/lib/tdb/common/freelistcheck.c\n===================================================================\n--- branches/SAMBA_3_0/source/lib/tdb/common/freelistcheck.c\t2007-04-17 17:03:38 UTC (rev 22316)\n+++ branches/SAMBA_3_0/source/lib/tdb/common/freelistcheck.c\t2007-04-17 17:07:14 UTC (rev 22317)\n@@ -88,7 +88,7 @@\n \t\t\tgoto fail;\n \t\t}\n \n-\t\tif (rec_free_read(tdb, rec_ptr, &rec) == -1) {\n+\t\tif (tdb_rec_free_read(tdb, rec_ptr, &rec) == -1) {\n \t\t\tgoto fail;\n \t\t}\n \n\nModified: branches/SAMBA_3_0/source/lib/tdb/common/tdb_private.h\n===================================================================\n--- branches/SAMBA_3_0/source/lib/tdb/common/tdb_private.h\t2007-04-17 17:03:38 UTC (rev 22316)\n+++ branches/SAMBA_3_0/source/lib/tdb/common/tdb_private.h\t2007-04-17 17:07:14 UTC (rev 22317)\n@@ -206,7 +206,7 @@\n \t\t\t   struct list_struct *rec);\n void tdb_io_init(struct tdb_context *tdb);\n int tdb_expand(struct tdb_context *tdb, tdb_off_t size);\n-int rec_free_read(struct tdb_context *tdb, tdb_off_t off,\n-\t\t  struct list_struct *rec);\n+int tdb_rec_free_read(struct tdb_context *tdb, tdb_off_t off,\n+\t\t      struct list_struct *rec);\n \n \n\n"}