{"category": "ham", "to_address": "samba-cvs@samba.org", "from_address": "metze@samba.org", "subject": "svn commit: samba r22251 - in\n\tbranches/SAMBA_3_0_25/source/lib/replace: .", "body": "Author: metze\nDate: 2007-04-16 09:20:39 +0000 (Mon, 16 Apr 2007)\nNew Revision: 22251\n\nWebSVN: http://websvn.samba.org/cgi-bin/viewcvs.cgi?view=rev&root=samba&rev=22251\n\nLog:\nmerge from samba4:\n\nadd prototype of setenv\n\nmetze\nModified:\n   branches/SAMBA_3_0_25/source/lib/replace/libreplace.m4\n   branches/SAMBA_3_0_25/source/lib/replace/replace.h\n\n\nChangeset:\nModified: branches/SAMBA_3_0_25/source/lib/replace/libreplace.m4\n===================================================================\n--- branches/SAMBA_3_0_25/source/lib/replace/libreplace.m4\t2007-04-16 09:19:35 UTC (rev 22250)\n+++ branches/SAMBA_3_0_25/source/lib/replace/libreplace.m4\t2007-04-16 09:20:39 UTC (rev 22251)\n@@ -263,7 +263,9 @@\n AC_CHECK_TYPE(comparison_fn_t, \n [AC_DEFINE(HAVE_COMPARISON_FN_T, 1,[Whether or not we have comparison_fn_t])])\n \n+AC_CHECK_DECLS([setenv, unsetenv])\n AC_CHECK_FUNCS(setenv unsetenv)\n+\n AC_CHECK_FUNCS(strnlen)\n AC_CHECK_FUNCS(strtoull __strtoull strtouq strtoll __strtoll strtoq)\n \n\nModified: branches/SAMBA_3_0_25/source/lib/replace/replace.h\n===================================================================\n--- branches/SAMBA_3_0_25/source/lib/replace/replace.h\t2007-04-16 09:19:35 UTC (rev 22250)\n+++ branches/SAMBA_3_0_25/source/lib/replace/replace.h\t2007-04-16 09:20:39 UTC (rev 22251)\n@@ -160,8 +160,12 @@\n \n #ifndef HAVE_SETENV\n #define setenv rep_setenv\n-int rep_setenv(const char *name, const char *value, int overwrite); \n+int rep_setenv(const char *name, const char *value, int overwrite);\n+#else\n+#ifndef HAVE_DECL_SETENV\n+int setenv(const char *name, const char *value, int overwrite);\n #endif\n+#endif\n \n #ifndef HAVE_UNSETENV\n #define unsetenv rep_unsetenv\n\n"}