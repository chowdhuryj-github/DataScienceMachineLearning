{"category": "ham", "to_address": "samba-cvs@samba.org", "from_address": "jra@samba.org", "subject": "svn commit: samba r22956 - in branches: SAMBA_3_0/source/auth\n\tSAMBA_3_0_25/source/auth SAMBA_3_0_26/source/auth", "body": "Author: jra\nDate: 2007-05-16 22:52:17 +0000 (Wed, 16 May 2007)\nNew Revision: 22956\n\nWebSVN: http://websvn.samba.org/cgi-bin/viewcvs.cgi?view=rev&root=samba&rev=22956\n\nLog:\nFix security=server (bug #4622). Volker's patch\n(slightly truncated by me). Will be in 3.0.25a.\nJeremy.\n\nModified:\n   branches/SAMBA_3_0/source/auth/auth_server.c\n   branches/SAMBA_3_0_25/source/auth/auth_server.c\n   branches/SAMBA_3_0_26/source/auth/auth_server.c\n\n\nChangeset:\nModified: branches/SAMBA_3_0/source/auth/auth_server.c\n===================================================================\n--- branches/SAMBA_3_0/source/auth/auth_server.c\t2007-05-16 22:34:58 UTC (rev 22955)\n+++ branches/SAMBA_3_0/source/auth/auth_server.c\t2007-05-16 22:52:17 UTC (rev 22956)\n@@ -268,12 +268,6 @@\n \tBOOL locally_made_cli = False;\n \tstruct server_security_state *state;\n \n-\t/* \n-\t * Check that the requested domain is not our own machine name.\n-\t * If it is, we should never check the PDC here, we use our own local\n-\t * password file.\n-\t */\n-\n \tstate = talloc_get_type_abort(\n \t\tprivate_data, struct server_security_state);\n \n\nModified: branches/SAMBA_3_0_25/source/auth/auth_server.c\n===================================================================\n--- branches/SAMBA_3_0_25/source/auth/auth_server.c\t2007-05-16 22:34:58 UTC (rev 22955)\n+++ branches/SAMBA_3_0_25/source/auth/auth_server.c\t2007-05-16 22:52:17 UTC (rev 22956)\n@@ -230,17 +230,6 @@\n \tNTSTATUS nt_status = NT_STATUS_NOT_IMPLEMENTED;\n \tBOOL locally_made_cli = False;\n \n-\t/* \n-\t * Check that the requested domain is not our own machine name.\n-\t * If it is, we should never check the PDC here, we use our own local\n-\t * password file.\n-\t */\n-\n-\tif(is_myname(user_info->domain)) {\n-\t\tDEBUG(3,(\"check_smbserver_security: Requested domain was for this machine.\\n\"));\n-\t\treturn nt_status;\n-\t}\n-\n \tcli = (struct cli_state *)my_private_data;\n \t\n \tif (cli) {\n\nModified: branches/SAMBA_3_0_26/source/auth/auth_server.c\n===================================================================\n--- branches/SAMBA_3_0_26/source/auth/auth_server.c\t2007-05-16 22:34:58 UTC (rev 22955)\n+++ branches/SAMBA_3_0_26/source/auth/auth_server.c\t2007-05-16 22:52:17 UTC (rev 22956)\n@@ -230,17 +230,6 @@\n \tNTSTATUS nt_status = NT_STATUS_NOT_IMPLEMENTED;\n \tBOOL locally_made_cli = False;\n \n-\t/* \n-\t * Check that the requested domain is not our own machine name.\n-\t * If it is, we should never check the PDC here, we use our own local\n-\t * password file.\n-\t */\n-\n-\tif(is_myname(user_info->domain)) {\n-\t\tDEBUG(3,(\"check_smbserver_security: Requested domain was for this machine.\\n\"));\n-\t\treturn nt_status;\n-\t}\n-\n \tcli = (struct cli_state *)my_private_data;\n \t\n \tif (cli) {\n\n"}