{"category": "ham", "to_address": "<STELAD01@glo.regionh.dk>, <r-help@stat.math.ethz.ch>", "from_address": "<Bill.Venables@csiro.au>", "subject": "Re: [R] Factor function: odd behavior when labels argument\n\tcontainsduplicates?", "body": "There is a difference between levels and labels.  I think this is what\nyou want.\n\n> x <- factor(rep(0:5, 2))\n> x\n [1] 0 1 2 3 4 5 0 1 2 3 4 5\nLevels: 0 1 2 3 4 5\n> levels(x) <- c(1,1:5)\n> x\n [1] 1 1 2 3 4 5 1 1 2 3 4 5\nLevels: 1 2 3 4 5\n> table(x)\nx\n1 2 3 4 5 \n4 2 2 2 2 \n\n \n\n\nBill Venables\nCSIRO Laboratories\nPO Box 120, Cleveland, 4163\nAUSTRALIA\nOffice Phone (email preferred): +61 7 3826 7251\nFax (if absolutely necessary):  +61 7 3826 7304\nMobile:                (I don't have one!)\nHome Phone:                     +61 7 3286 7700\nmailto:Bill.Venables@csiro.au\nhttp://www.cmis.csiro.au/bill.venables/ \n\n-----Original Message-----\nFrom: r-help-bounces@stat.math.ethz.ch\n[mailto:r-help-bounces@stat.math.ethz.ch] On Behalf Of Steen Ladelund\nSent: Wednesday, 30 May 2007 6:27 PM\nTo: r-help@stat.math.ethz.ch\nSubject: [R] Factor function: odd behavior when labels argument\ncontainsduplicates?\n\nHi all.\n\nI think it would be nice to be able to combine levels of a factor on\ncreation a la\n\n x <- rep(0:5,5)\n\n y <- factor(x,levels=0:5,labels=c('1','1',2:5))  ## (1)\n\n y\n [1] 1 1 2 3 4 5 1 1 2 3 4 5 1 1 2 3 4 5 1 1 2 3 4 5 1 1 2 3 4 5\nLevels: 1 1 2 3 4 5\n\nI thougt this would (should?) create a factor with 5 levels, ie\ncombining 0 and 1 in x into one level in y.\n\nI find it hard to predict the behavior of the following lines:\n\n table(factor(y))          ## Odd ?\n 1  1  2  3  4  5 \n10  0  5  5  5  5 \n table(factor(factor(y)))  ## This is what I want\n 1  2  3  4  5 \n10  5  5  5  5 \n\nIt also seems strange that this should be the way to go:\n levels(y) <- levels(y)   ## Does what I want following (1) even tough\nit appear to be a void statement?\n y\ny\n [1] 1 1 2 3 4 5 1 1 2 3 4 5 1 1 2 3 4 5 1 1 2 3 4 5 1 1 2 3 4 5\nLevels: 1 2 3 4 5\n\nAm I missing an important point about factors or the factor function?\n\nsteen\n\nSteen Ladelund, statistician\n+4543233275 stelad01@glostruphosp.kbhamt.dk\nResearch Center for Prevention and Health\nGlostrup University Hospital, Denmark\nwww.fcfs.kbhamt.dk\n\n______________________________________________\nR-help@stat.math.ethz.ch mailing list\nhttps://stat.ethz.ch/mailman/listinfo/r-help\nPLEASE do read the posting guide\nhttp://www.R-project.org/posting-guide.html\nand provide commented, minimal, self-contained, reproducible code.\n\n______________________________________________\nR-help@stat.math.ethz.ch mailing list\nhttps://stat.ethz.ch/mailman/listinfo/r-help\nPLEASE do read the posting guide http://www.R-project.org/posting-guide.html\nand provide commented, minimal, self-contained, reproducible code.\n\n"}