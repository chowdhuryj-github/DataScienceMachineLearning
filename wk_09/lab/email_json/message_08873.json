{"category": "ham", "to_address": "samba-cvs@samba.org", "from_address": "Jelmer Vernooij <jelmer@samba.org>", "subject": "Rev 11917: Allow regexes in known-failures file in\n\tfile:///home/jelmer/bzr.samba/SAMBA_4_0/", "body": "At file:///home/jelmer/bzr.samba/SAMBA_4_0/\n\n------------------------------------------------------------\nrevno: 11917\nrevision-id: jelmer@samba.org-20070418151801-s6bqskdnjns1z3n3\nparent: svn-v2:22337@0c0555d6-39d7-0310-84fc-f1cc0bd64818-branches%2fSAMBA_4_0\ncommitter: Jelmer Vernooij \nbranch nick: SAMBA_4_0\ntimestamp: Wed 2007-04-18 17:18:01 +0200\nmessage:\n  Allow regexes in known-failures file\nmodified:\n  source/script/tests/selftest.pl svn-v2:20693@0c0555d6-39d7-0310-84fc-f1cc0bd64818-branches%2fSAMBA_4_0-source%2fscript%2ftests%2fselftest.pl\n=== modified file 'source/script/tests/selftest.pl'\n--- a/source/script/tests/selftest.pl\t2007-04-18 14:02:26 +0000\n+++ b/source/script/tests/selftest.pl\t2007-04-18 15:18:01 +0000\n@@ -161,7 +161,9 @@\n {\n \tmy $fullname = shift;\n \n-\treturn 1 if (grep(/^$fullname$/, @expected_failures));\n+\tforeach (@expected_failures) {\n+\t\treturn 1 if ($fullname =~ /$_/);\n+\t}\n \n \treturn 0;\n }\n@@ -317,6 +319,7 @@\n \t\t\t\t\t$statistics->{TESTS_EXPECTED_FAIL}++;\n \t\t\t\t\t$expected_ret = 0;\n \t\t\t\t} else {\n+\t\t\t\t\tprint \"n:$name/$2l\\n\";\n \t\t\t\t\t$statistics->{TESTS_UNEXPECTED_FAIL}++;\n \t\t\t\t}\n \t\t\t} elsif ($1 eq \"skip\") {\n\n"}