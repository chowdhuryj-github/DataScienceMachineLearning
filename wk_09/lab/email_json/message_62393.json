{"category": "ham", "to_address": "Edna Bell <edna.bell01@gmail.com>", "from_address": "Duncan Murdoch <murdoch@stats.uwo.ca>", "subject": "Re: [R] Newbie creating package with compiled code", "body": "On 04/07/2007 6:43 PM, Edna Bell wrote:\n> Hi R Gurus!\n> \n> I'm trying to create a test package using the package.skeleton function.\n> I wanted to  add some compiled code too.\n> In the src library, I put together a baby subroutine, compiled it and created\n> a test.dll\n> \n> When I use the R cmd build, it works fine.  But I get into trouble\n> with the R CMD check section.\n> \n> \n> /home/Desktop/R-2.5.1/bin # ./R CMD check mypkg\n> * checking for working latex ... OK\n> * using log directory '/home/Desktop/R-2.5.1/bin/mypkg.Rcheck'\n> * using R version 2.5.1 (2007-06-27)\n> * checking for file 'mypkg/DESCRIPTION' ... OK\n> * checking extension type ... Package\n> * this is package 'mypkg' version '1.0'\n> * checking package dependencies ... OK\n> * checking if this is a source package ... OK\n> * checking whether package 'mypkg' can be installed ... OK\n> * checking package directory ... OK\n> * checking for portable file names ... OK\n> * checking for sufficient/correct file permissions ... OK\n> * checking DESCRIPTION meta-information ... OK\n> * checking top-level files ... OK\n> * checking index information ... OK\n> * checking package subdirectories ... OK\n> * checking R files for non-ASCII characters ... OK\n> * checking R files for syntax errors ... OK\n> * checking whether the package can be loaded ... ERROR\n> Error in .find.package(package, lib.loc, verbose = verbose) :\n>         there are no packages called 'mypkg', 'stats', 'graphics',\n> 'grDevices', 'utils', 'datasets', 'methods', 'base'\n> Error in library(mypkg) : .First.lib failed for 'mypkg'\n> Execution halted\n> \n> It looks like this package has a loading problem: see the messages for\n> details.\n> \n> Here is the mypkg.R file\n> sss <- \"/home/hodgesse/Desktop/R-2.5.1\"\n> .First.lib <- function(lib=sss,pkg=\"mypkg\")\n> \t   library.dynam(\"mypkg.so\",pkg=\"mypkg\",lib=sss)\n\nThat's a very strange .First.lib.  I think you'll have more success with \na simpler one:\n\n.First.lib <- function(libname, pkgname)\n   library.dynam(\"mypkg\", package=pkgname, lib.loc=libname)\n\n(and sss is not needed at all).\n\nDuncan Murdoch\n\n> \n> \n> f <- function(x,y) x+y\n> \n> g <-function(x,y) x-y\n> \n> \n> Thanks for any help\n> \n> Edna\n> mailto: edna.bell01@gmail.com\n> \n> ______________________________________________\n> R-help@stat.math.ethz.ch mailing list\n> https://stat.ethz.ch/mailman/listinfo/r-help\n> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html\n> and provide commented, minimal, self-contained, reproducible code.\n\n______________________________________________\nR-help@stat.math.ethz.ch mailing list\nhttps://stat.ethz.ch/mailman/listinfo/r-help\nPLEASE do read the posting guide http://www.R-project.org/posting-guide.html\nand provide commented, minimal, self-contained, reproducible code.\n\n"}