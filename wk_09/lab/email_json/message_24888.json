{"category": "ham", "to_address": "vlendec@samba.org", "from_address": "Jeremy Allison <jra@samba.org>", "subject": "Re: svn commit: samba r22744 - in branches:\n\tSAMBA_3_0/source/nsswitch SAMBA_3_0_25/source/nsswitch\n\tSAMBA_3_0_26/source/nsswitch", "body": "On Mon, May 07, 2007 at 01:39:26PM +0000, vlendec@samba.org wrote:\n> Author: vlendec\n> Date: 2007-05-07 13:39:25 +0000 (Mon, 07 May 2007)\n> New Revision: 22744\n> \n> WebSVN: http://websvn.samba.org/cgi-bin/viewcvs.cgi?view=rev&root=samba&rev=22744\n> \n> Log:\n> Fix a valgrind error. parse_domain_username does not necessarily fill in\n> the domain.\n> \n> \n> Modified:\n>    branches/SAMBA_3_0/source/nsswitch/winbindd_group.c\n>    branches/SAMBA_3_0_25/source/nsswitch/winbindd_group.c\n>    branches/SAMBA_3_0_26/source/nsswitch/winbindd_group.c\n> \n> \n> Changeset:\n> Modified: branches/SAMBA_3_0/source/nsswitch/winbindd_group.c\n> ===================================================================\n> --- branches/SAMBA_3_0/source/nsswitch/winbindd_group.c\t2007-05-07 13:32:34 UTC (rev 22743)\n> +++ branches/SAMBA_3_0/source/nsswitch/winbindd_group.c\t2007-05-07 13:39:25 UTC (rev 22744)\n> @@ -494,6 +494,9 @@\n>  \tmemset(name_group, 0, sizeof(fstring));\n>  \n>  \ttmp = state->request.data.groupname;\n> +\n> +\tname_domain[0] = '\\0';\n> +\tname_group[0] = '\\0';\n>  \t\n>  \tparse_domain_user(tmp, name_domain, name_group);\n\nWouldn't it be better to fix parse_domain_user to always\nfill in a valid string for domain and group, even if it's\njust [0] = '\\0'' ?\n\nJeremy.\n\n"}