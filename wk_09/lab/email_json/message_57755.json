{"category": "ham", "to_address": "r-help@stat.math.ethz.ch", "from_address": "Jim Price <price_ja@hotmail.com>", "subject": "[R] Changing graphics height when using grid and lattice", "body": "\nHi,\n\nI have recently been playing with the grid package in an attempt to create\nsome pages containing multiple lattice plots on the same page. However, when\nI specify a grid layout with different widths, such as:\n\npushViewport(viewport(layout = grid.layout(1, 2, unit(c(2, 1), \"null\"))))\n\nthe individual graphs do not end up as the same height - which is a feature\nI would prefer to have. \n\nA complete example is as follows:\n\n### Start of example\n\nlibrary(lattice)\nlibrary(Hmisc)\nlibrary(grid)\n\n\n# Incidence data\ntestData <- data.frame(\n\tstrata = rep(c(\"CHF : Yes\", \"CHF : No\"), each = 20),\n\tae = rep(paste(\"Adverse Event\", 1:10), each = 2),\n\ttrt = rep(c(\"Active\", \"Placebo\"), 20),\n\tpct = runif(40, 1, 30)\n)\n\n# RR data\ntestData2 <- data.frame(\n\tstrata = rep(c(\"CHF : Yes\", \"CHF : No\"), each = 10),\n\tae = paste(\"Adverse Event\", 1:10),\n\trr = runif(20, 0.5, 5)\n)\ntestData2$lower = testData2$rr / 2\ntestData2$upper = testData2$rr * 2\n\t\n\n# Combined plot\ntestPlots <- function(relativeWidth)\n{\n\nplot1<- dotplot(\n\tae ~ pct | strata, \n\tgroups = trt, \n\tdata = testData,  \n\tlayout = c(1, 2),\n\txlab = \"Percent\",\n\tauto.key = list(space = \"top\", columns = 2)\n)\n\n\nplot2 <- Dotplot(\n\tae ~ Cbind(rr, log10(lower), log10(upper)) | strata,\n\tdata = testData2,\n\tpanel = function(...)\n\t{\n\t\tpanel.Dotplot(...)\n\t\tpanel.abline(v = 0, col = 'red', lty = 2)\n\t},\n\tlayout = c(1, 2), \n\tscales = list(\n\t\tx = list(log = T, at = c(0.125, 0.25, 0.5, 1, 2, 4, 8, 16, 32)),\n\t\ty = list(draw = F)\n\t),\n\txlab = \"Relative Risk with 95% CI\",\n\tylab = \"\",\n\tkey = list(text = list(\"\"))\n)\n\n\ngrid.newpage()\n\npushViewport(viewport(layout = grid.layout(2, 1, heights = unit(c(1, 6),\n\"null\"))))\n\npushViewport(viewport(layout.pos.col = 1, layout.pos.row = 1))\ngrid.text(\"Analysis of Relative Risks of various Adverse Events\")\nupViewport()\n\npushViewport(viewport(layout.pos.col = 1, layout.pos.row = 2))\n\n\n### Change the relative width of the 2 presented graphics\npushViewport(viewport(layout = grid.layout(1, 2, unit(c(relativeWidth, 1),\n\"null\"))))\n\npushViewport(viewport(layout.pos.col = 1, layout.pos.row = 1))\nprint(plot1, newpage = F)\nupViewport()\n\npushViewport(viewport(layout.pos.col = 2, layout.pos.row = 1))\nprint(plot2, newpage = F)\nupViewport()\n\n}\n\n\n# Everything is fine, both graphs maintain the same y-axis\ntestPlots(1)\n\n# The second graph is now \"taller\" than the first one\nwin.graph()\ntestPlots(3)\n\n##### End of example\n\nI've been through the documentation of both lattice and grid, and I have not\nbeen able to find the answer. I would appreciate any solution!\n\nRegards,\n\nJames Price.\n-- \nView this message in context: http://www.nabble.com/Changing-graphics-height-when-using-grid-and-lattice-tf3996724.html#a11350733\nSent from the R help mailing list archive at Nabble.com.\n\n______________________________________________\nR-help@stat.math.ethz.ch mailing list\nhttps://stat.ethz.ch/mailman/listinfo/r-help\nPLEASE do read the posting guide http://www.R-project.org/posting-guide.html\nand provide commented, minimal, self-contained, reproducible code.\n\n"}