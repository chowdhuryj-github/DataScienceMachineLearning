{"category": "ham", "to_address": "samba-cvs@samba.org", "from_address": "metze@samba.org", "subject": "svn commit: samba r23187 - in\n\tbranches/SAMBA_4_0/source/heimdal_build: .", "body": "Author: metze\nDate: 2007-05-29 11:03:07 +0000 (Tue, 29 May 2007)\nNew Revision: 23187\n\nWebSVN: http://websvn.samba.org/cgi-bin/viewcvs.cgi?view=rev&root=samba&rev=23187\n\nLog:\nrevert 23145 and 23135 to fix the build on solaris...\n\nmetze\n\nModified:\n   branches/SAMBA_4_0/source/heimdal_build/config.m4\n   branches/SAMBA_4_0/source/heimdal_build/config.mk\n\n\nChangeset:\nModified: branches/SAMBA_4_0/source/heimdal_build/config.m4\n===================================================================\n--- branches/SAMBA_4_0/source/heimdal_build/config.m4\t2007-05-29 10:50:25 UTC (rev 23186)\n+++ branches/SAMBA_4_0/source/heimdal_build/config.m4\t2007-05-29 11:03:07 UTC (rev 23187)\n@@ -70,7 +70,9 @@\n \tatexit\t\t\t\t\t\\\n \tcgetent\t\t\t\t\t\\\n \tgetprogname\t\t\t\t\\\n+\tinet_ntop\t\t\t\t\\\n \tinet_aton\t\t\t\t\\\n+\tinet_pton\t\t\t\t\\\n \tgethostname\t\t\t\t\\\n \tgetnameinfo\t\t\t\t\\\n \tiruserok\t\t\t\t\\\n@@ -239,6 +241,18 @@\n \tSMB_ENABLE(HEIMDAL_ROKEN_INET_ATON, YES)\n fi\n \n+if test x\"$ac_cv_func_inet_pton\" = x\"no\"; then\n+    AC_CHECK_LIB_EXT(nsl_s, NSL_LIBS, inet_pton)\n+    AC_CHECK_LIB_EXT(nsl, NSL_LIBS, inet_pton)\n+    SMB_ENABLE(NSL,YES)\n+    if test x\"$ac_cv_lib_ext_nsl_s_inet_pton\" != x\"yes\" &&\n+       test x\"$ac_cv_lib_ext_nsl_inet_pton\" != x\"yes\"; then\n+\tAC_MSG_ERROR([no inet_pton() function available!])\n+    fi\n+fi\n+\n+SMB_EXT_LIB(NSL,[${NSL_LIBS}],[],[],[])\n+\n # only add closefrom if needed\n SMB_ENABLE(HEIMDAL_ROKEN_CLOSEFROM, NO)\n if test t$ac_cv_func_closefrom != tyes; then\n\nModified: branches/SAMBA_4_0/source/heimdal_build/config.mk\n===================================================================\n--- branches/SAMBA_4_0/source/heimdal_build/config.mk\t2007-05-29 10:50:25 UTC (rev 23186)\n+++ branches/SAMBA_4_0/source/heimdal_build/config.mk\t2007-05-29 11:03:07 UTC (rev 23187)\n@@ -439,9 +439,9 @@\n \t\t\tHEIMDAL_ROKEN_GETPROGNAME \\\n \t\t\tHEIMDAL_ROKEN_CLOSEFROM \\\n \t\t\tGAI \\\n+\t\t\tNSL \\\n \t\t\tRESOLV \\\n-\t\t\tEXT_SOCKET \\\n-\t\t\tEXT_NSL\n+\t\t\tEXT_SOCKET\n # End SUBSYSTEM HEIMDAL_ROKEN\n #######################\n \n\n"}