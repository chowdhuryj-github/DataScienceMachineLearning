{"category": "ham", "to_address": "r-help@stat.math.ethz.ch", "from_address": "Eric <rmailbox@justemail.net>", "subject": "Re: [R] Getting the last day of the month.", "body": "\nFor 2007:\n\nseq(as.Date('2007-02-01'), length = 12, by = \"mon\") - 1\n\nCurrent month:\nseq( as.Date( format( Sys.Date(), \"%Y-%m-01\")), length = 2, by = \n\"mon\")[2] - 1\n\nEric\n\n\n\nPatnaik, Tirthankar wrote:\n> Hi,\n> \tGiven a date, how do I get the last date of that month? I have\n> data in the form YYYYMM, that I've read as a date using\n>\n>   \n>> x$Date <-\n>>     \n> as.Date(ISOdate(substr(x$YearEnd,1,4),substr(x$YearEnd,5,6),1))\n>\n> But this gives the first day of the month. To get the last day of the\n> month, I tried \n>\n>   \n>> as.Date(as.yearmon(x$Date,frac=0))\n>>     \n>\n> But I don't get the last day of the month here. (Tried frac=1 too.)\n>\n> I then add a month to the date, substract one day from the resultant\n> date. But this wouldn't work for December.\n>\n>   \n>> x$YearEnd\n>>     \n>  [1] 200203 200303 200403 200503 200603 200603 200312 200503 200603\n> 200203 200303\n> [12] 200403 200503 200512 200612 200203 200303 200403 200503 200603\n>   \n>> x$Date <- as.Date(ISOdate(substr(x$YearEnd,1,4),\n>>     \n> + as.integer(substr(x$YearEnd,5,6))+1,\n> + 1))-1\n>   \n>> x$Date\n>>     \n>  [1] \"2002-03-31\" \"2003-03-31\" \"2004-03-31\" \"2005-03-31\" \"2006-03-31\"\n> \"2006-03-31\"\n>  [7] NA           \"2005-03-31\" \"2006-03-31\" \"2002-03-31\" \"2003-03-31\"\n> \"2004-03-31\"\n> [13] \"2005-03-31\" NA           NA           \"2002-03-31\" \"2003-03-31\"\n> \"2004-03-31\"\n> [19] \"2005-03-31\" \"2006-03-31\"\n>\n> So I add a year, and set the month to 1 in a quick function.\n>\n>   \n>> GetEOM <- function(yyyymm=200406){\n>>     \n> \tyear <- as.integer(substr(yyyymm,1,4))\n> \tmonth <- as.integer(substr(yyyymm,5,6))\n> \tif (month==12){\n> \t\tdate <- as.Date(ISOdate(year+1,1,1))-1\n> \t}else{\n> \t\tdate <- as.Date(ISOdate(year,month+1,1))-1\n> \t}\n> \tprint(date)\n> }\n>\n> x$Date <- as.vector(sapply(x$YearEnd,GetEOM))\n>\n> str(x$Date)\n>\n>\n> Is there a simpler way to do this please?\n>\n>\n> TIA and best,\n> -Tir\n>\n> Tirthankar Patnaik\n> India Strategy\n> Citigroup Investment Research\n> +91-22-6631 9887\n>\n> ______________________________________________\n> R-help@stat.math.ethz.ch mailing list\n> https://stat.ethz.ch/mailman/listinfo/r-help\n> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html\n> and provide commented, minimal, self-contained, reproducible code.\n>\n\n______________________________________________\nR-help@stat.math.ethz.ch mailing list\nhttps://stat.ethz.ch/mailman/listinfo/r-help\nPLEASE do read the posting guide http://www.R-project.org/posting-guide.html\nand provide commented, minimal, self-contained, reproducible code.\n\n"}