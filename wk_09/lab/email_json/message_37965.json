{"category": "ham", "to_address": "samba-cvs@samba.org", "from_address": "tridge@samba.org", "subject": "Rev 372: added an example ctdb event script in\n\thttp://samba.org/~tridge/ctdb", "body": "------------------------------------------------------------\nrevno: 372\nrevision-id: tridge@samba.org-20070529030131-ibtgvkg6agfa0yyj\nparent: tridge@samba.org-20070529025524-2xj1fw64ggc9iw9u\ncommitter: Andrew Tridgell \nbranch nick: tridge\ntimestamp: Tue 2007-05-29 13:01:31 +1000\nmessage:\n  added an example ctdb event script\nadded:\n  tools/events                   events-20070529030121-04fjh63cxfh8v1pj-1\n=== added file 'tools/events'\n--- a/tools/events\t1970-01-01 00:00:00 +0000\n+++ b/tools/events\t2007-05-29 03:01:31 +0000\n@@ -0,0 +1,39 @@\n+#!/bin/sh\n+# sample event script for ctdb\n+\n+cmd=\"$1\"\n+shift\n+\n+case $cmd in \n+     takeip)\n+\tif [ $# != 3 ]; then\n+\t   echo \"must supply interface, IP and maskbits\"\n+\t   exit 1\n+\tfi\n+\tiface=$1\n+\tip=$2\n+\tmaskbits=$3\n+\texec /sbin/ip add $ip/$maskbits dev $iface\n+\texit 1\n+\t;;\n+\n+     releaseip)\n+\tif [ $# != 3 ]; then\n+\t   echo \"must supply interface, IP and maskbits\"\n+\t   exit 1\n+\tfi\n+\tiface=$1\n+\tip=$2\n+\tmaskbits=$3\n+\texec /sbin/ip del $ip/$maskbits dev $iface\n+\texit 1\n+\t;;\n+\n+     recovered)\n+        # restart any services as necessary, like NFS\n+\texit 0\n+\t;;\n+esac\n+\n+echo \"Invalid command $cmd\"\n+exit 1\n\n"}