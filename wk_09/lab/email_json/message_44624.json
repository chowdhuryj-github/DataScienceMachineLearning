{"category": "ham", "to_address": "samba-technical@lists.samba.org", "from_address": "James Peach <jpeach@samba.org>", "subject": "[PATCH 0/4] improve group membership support for FreeBSD and Darwin", "body": "Hi all,\n\nThe following patch series alters the Samba3 security context  \nhandling to better support group semantics in FreeBSD and Darwin.\n\nIn FreeBSD (and I believe most BSD flavours), the first gid_t in the  \nkernel credential's groups array is the effective group ID. This is  \nalways returned by getgroups(2) and is assumed to be the first gid_t  \nin the groups array passed in via setgroups(2). Some BSD systems will  \nset the effective group ID to be group[0] from setgroups(2), others  \nwill simply ignore groups[0]. Either way, the right thing to do is to  \nguarantee that the effective group ID we want is in groups[0] when we  \ncall setgroups(2).\n\nThis patch series also alters the order of operations used to make a  \nsecurity context current in order to obey the rather unique rules  \nthat Darwin has WRT it's dynamic group membership implementation (see  \npatch 3).\n\nSince this alters the security context handling, please review  \ncarefully. I'd like to apply these patches to SAMBA_3_026 and SAMBA_3_0.\n\n--\nJames Peach | jpeach@samba.org\n\n\n"}