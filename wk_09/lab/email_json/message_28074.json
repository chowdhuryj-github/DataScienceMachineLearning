{"category": "ham", "to_address": "Perl Beginners <beginners@perl.org>, Rob Dixon <rob.dixon@350.com>,\n   merlyn@stonehenge.com", "from_address": "Goksie <myklass@gmail.com>", "subject": "Kindly help to separate my records from the file", "body": "I know i have been repeating this for a while now.\nI want to separate each record of this log file so that at i can print a\nkey and put the values under each key in preparation for insertion into\nthe database.\n\nIf I run the code below, it gives me the whole record as one but I need\nto separate them.\nplease assist.\n\nGoksie\n\n#!/usr/bin/perl\nuse strict;\nuse warnings;\n\n$/ = \"\\n\\n\"; # Specify the record separator as 2 new lines..\nmy $fn = 'detail-20070423_1.txt';\nopen my $fh, '<', $fn or die $!;\nmy %h;\nwhile(<$fh>){\n   if(/^\\s+$/){\n     s/^\\s+$/==================/;\n   }else{\n      act();\n    }\n   }\nsub act{\n  my %h;\n   foreach (split /\\n/){\n   my ($key, $val) = split /=/;\n   $h{$key} = $val;\n   print $h{$key};\n }\n}\n\n\nExtract from the detail-20070423_1.txt\n\nMon Apr 23 00:00:24 2007\n    NAS-IP-Address = 10.220.42.41\n    Quintum-NAS-Port = \"0 0/0/c1dc2a26\"\n    NAS-Port-Type = Async\n    User-Name = \"10.220.42.38\"\n    Called-Station-Id = \"8613508208079\"\n    Calling-Station-Id = \"\"\n    Acct-Status-Type = Stop\n    Acct-Delay-Time = 0\n    Acct-Input-Octets = 0\n    Acct-Output-Octets = 0\n    Acct-Session-Id = \"000000C0000012F5\"\n    Acct-Session-Time = 0\n    Acct-Input-Packets = 0\n    Acct-Output-Packets = 0\n    Service-Type = Login-User\n    Quintum-AVPair = \"h323-ivr-out=ACCESSCODE:8613508208079\"\n    Quintum-h323-conf-id = \"34363262 65383833 32656366 00340000\"\n    Quintum-AVPair = \"h323-incoming-conf-id=34363262 65383833 32656366\n00340000\"\n    Quintum-h323-gw-id = \"mygate\"\n    Quintum-h323-call-origin = \"answer\"\n    Quintum-h323-call-type = \"VoIP\"\n    Quintum-h323-setup-time = \"22:58:10.220 UTC Sun Apr 22 2007\"\n    Quintum-h323-connect-time = \"22:59:09.550 UTC Sun Apr 22 2007\"\n    Quintum-h323-disconnect-time = \"22:59:09.550 UTC Sun Apr 22 2007\"\n    Quintum-h323-remote-address = \"10.220.42.38\"\n    Quintum-h323-disconnect-cause = \"1f\"\n    Quintum-h323-voice-quality = \"0\"\n    Quintum-Trunkid-In = \"10.220.42.38\"\n    Quintum-Trunkid-Out = \"10.15.115.79\"\n    h323-incoming-conf-id = \"34363262 65383833 32656366 00340000\"\n    Client-IP-Address = 10.220.42.41\n    Acct-Unique-Session-Id = \"87d380e1881d226c\"\n    Timestamp = 1177282824\n\nMon Apr 23 00:00:39 2007\n    NAS-IP-Address = 10.220.42.41\n    Quintum-NAS-Port = \"0 0/0/c1dc2a26\"\n    NAS-Port-Type = Async\n    User-Name = \"10.220.42.38\"\n    Called-Station-Id = \"12508632152\"\n    Calling-Station-Id = \"\"\n    Acct-Status-Type = Stop\n    Acct-Delay-Time = 0\n    Acct-Input-Octets = 0\n    Acct-Output-Octets = 0\n    Acct-Session-Id = \"000000C0000012F4\"\n    Acct-Session-Time = 0\n    Acct-Input-Packets = 0\n    Acct-Output-Packets = 0\n    Service-Type = Login-User\n    Quintum-AVPair = \"h323-ivr-out=ACCESSCODE:12508632152\"\n    Quintum-h323-conf-id = \"34363262 65383765 32656364 00000000\"\n    Quintum-AVPair = \"h323-incoming-conf-id=34363262 65383765 32656364\n00000000\"\n    Quintum-h323-gw-id = \"mygate\"\n    Quintum-h323-call-origin = \"answer\"\n    Quintum-h323-call-type = \"VoIP\"\n    Quintum-h323-setup-time = \"22:58:05.000 UTC Sun Apr 22 2007\"\n    Quintum-h323-connect-time = \"22:59:24.910 UTC Sun Apr 22 2007\"\n    Quintum-h323-disconnect-time = \"22:59:24.910 UTC Sun Apr 22 2007\"\n    Quintum-h323-remote-address = \"10.220.42.38\"\n    Quintum-h323-disconnect-cause = \"1f\"\n    Quintum-h323-voice-quality = \"0\"\n    Quintum-Trunkid-In = \"10.220.42.38\"\n    Quintum-Trunkid-Out = \"10.128.75.204\"\n    h323-incoming-conf-id = \"34363262 65383765 32656364 00000000\"\n    Client-IP-Address = 10.220.42.41\n    Acct-Unique-Session-Id = \"2f13e58684844468\"\n    Timestamp = 1177282839\n\nMon Apr 23 00:00:41 2007\n    User-Name = \"\"\n    NAS-IP-Address = 10.220.42.41\n    Service-Type = Login-User\n    Quintum-AVPair = \"h323-incoming-conf-id=34363262 65386430 32656431\n00000000\"\n    Quintum-AVPair = \"h323-ivr-out=ACCESSCODE:13013393338\"\n    Quintum-NAS-Port = \"0 0/0/c1dc2a26\"\n    Quintum-h323-conf-id = \"34363262 65386430 32656431 00000000\"\n    Quintum-h323-setup-time = \"22:59:26.975 UTC Sun Apr 22 2007\"\n    Quintum-h323-call-origin = \"answer\"\n    Quintum-h323-call-type = \"VoIP\"\n    Quintum-h323-gw-id = \"mygate\"\n    Called-Station-Id = \"13013393338\"\n    Calling-Station-Id = \"\"\n    Acct-Status-Type = Start\n    Acct-Delay-Time = 0\n    Acct-Session-Id = \"000000C0000012F6\"\n    NAS-Port-Type = Async\n    h323-incoming-conf-id = \"34363262 65386430 32656431 00000000\"\n    Client-IP-Address = 10.220.42.41\n    Acct-Unique-Session-Id = \"e0f0037503ecd771\"\n    Timestamp = 1177282841\n\nMon Apr 23 00:00:50 2007\n    User-Name = \"\"\n    NAS-IP-Address = 10.220.42.41\n    Service-Type = Login-User\n    Quintum-AVPair = \"h323-incoming-conf-id=34363262 65386438 32656433\n00340000\"\n    Quintum-AVPair = \"h323-ivr-out=ACCESSCODE:12508632152\"\n    Quintum-NAS-Port = \"0 0/0/c1dc2a26\"\n    Quintum-h323-conf-id = \"34363262 65386438 32656433 00340000\"\n    Quintum-h323-setup-time = \"22:59:35.665 UTC Sun Apr 22 2007\"\n    Quintum-h323-call-origin = \"answer\"\n    Quintum-h323-call-type = \"VoIP\"\n    Quintum-h323-gw-id = \"mygate\"\n    Called-Station-Id = \"12508632152\"\n    Calling-Station-Id = \"\"\n    Acct-Status-Type = Start\n    Acct-Delay-Time = 0\n    Acct-Session-Id = \"000000C0000012F7\"\n    NAS-Port-Type = Async\n    h323-incoming-conf-id = \"34363262 65386438 32656433 00340000\"\n    Client-IP-Address = 10.220.42.41\n    Acct-Unique-Session-Id = \"a93366b14fa83a3e\"\n    Timestamp = 1177282850\n\nMon Apr 23 00:01:26 2007\n    NAS-IP-Address = 10.220.42.41\n    Quintum-NAS-Port = \"0 0/0/c1dc2a26\"\n    NAS-Port-Type = Async\n    User-Name = \"10.220.42.38\"\n    Called-Station-Id = \"12508632152\"\n    Calling-Station-Id = \"\"\n    Acct-Status-Type = Stop\n    Acct-Delay-Time = 0\n    Acct-Input-Octets = 0\n    Acct-Output-Octets = 0\n    Acct-Session-Id = \"000000C0000012F7\"\n    Acct-Session-Time = 0\n    Acct-Input-Packets = 0\n    Acct-Output-Packets = 0\n    Service-Type = Login-User\n    Quintum-AVPair = \"h323-ivr-out=ACCESSCODE:12508632152\"\n    Quintum-h323-conf-id = \"34363262 65386438 32656433 00340000\"\n    Quintum-AVPair = \"h323-incoming-conf-id=34363262 65386438 32656433\n00340000\"\n    Quintum-h323-gw-id = \"mygate\"\n    Quintum-h323-call-origin = \"answer\"\n    Quintum-h323-call-type = \"VoIP\"\n    Quintum-h323-setup-time = \"22:59:35.665 UTC Sun Apr 22 2007\"\n    Quintum-h323-connect-time = \"23:00:11.755 UTC Sun Apr 22 2007\"\n    Quintum-h323-disconnect-time = \"23:00:11.755 UTC Sun Apr 22 2007\"\n    Quintum-h323-remote-address = \"10.220.42.38\"\n    Quintum-h323-disconnect-cause = \"1f\"\n    Quintum-h323-voice-quality = \"0\"\n    Quintum-Trunkid-In = \"10.220.42.38\"\n    Quintum-Trunkid-Out = \"10.128.75.204\"\n    h323-incoming-conf-id = \"34363262 65386438 32656433 00340000\"\n    Client-IP-Address = 10.220.42.41\n    Acct-Unique-Session-Id = \"69512c19e7769b31\"\n    Timestamp = 1177282886\n\n-- \nTo unsubscribe, e-mail: beginners-unsubscribe@perl.org\nFor additional commands, e-mail: beginners-help@perl.org\nhttp://learn.perl.org/\n\n\n"}