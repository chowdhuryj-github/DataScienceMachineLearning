{"category": "ham", "to_address": "samba-cvs@samba.org", "from_address": "tridge@samba.org", "subject": "Rev 591: This is a 2nd implemetation of a shadow copy module for\n\texposing in http://samba.org/~tridge/3_0-ctdb", "body": "------------------------------------------------------------\nrevno: 591\nrevision-id: tridge@samba.org-20070616151413-wzak0e57nd23qfpd\nparent: tridge@samba.org-20070614213512-ie5pz1ac78fwlxw9\ncommitter: Andrew Tridgell \nbranch nick: s3-ctdb-tridge\ntimestamp: Sun 2007-06-17 01:14:13 +1000\nmessage:\n    This is a 2nd implemetation of a shadow copy module for exposing\n    snapshots to windows clients as shadow copies. This version has the\n    following features:\n  \n       1) you don't need to populate your shares with symlinks to the\n       snapshots. This can be very important when you have thousands of\n       shares, or use [homes]\n  \n       2) the inode number of the files is altered so it is different\n       from the original. This allows the 'restore' button to work\n       without a sharing violation\n  \n    Module options:\n  \n        shadow:snapdir = \n  \n        This is the directory containing the @GMT-* snapshot directories. If it is an absolute\n        path it is used as-is. If it is a relative path, then it is taken relative to the mount\n        point of the filesystem that the root of this share is on\n  \n        shadow:basedir = \n  \n        This is an optional parameter that specifies the directory that\n        the snapshots are relative to. It defaults to the filesystem\n        mount point\n  \n        shadow:fixinodes = yes/no\n  \n        If you enable shadow:fixinodes then this module will modify the\n        apparent inode number of files in the snapshot directories using\n        a hash of the files path. This is needed for snapshot systems\n        where the snapshots have the same device:inode number as the\n        original files (such as happens with GPFS snapshots). If you\n        don't set this option then the 'restore' button in the shadow\n        copy UI will fail with a sharing violation.\n  \n    Note that the directory names in the snapshot directory must take the form\n    @GMT-YYYY.MM.DD-HH.MM.SS\n    \n    The following command would generate a correctly formatted directory name:\n       date -u +@GMT-%Y.%m.%d-%H.%M.%S\nadded:\n  source/modules/vfs_shadow_copy2.c vfs_shadow_copy2.c-20070616115727-8jw10u301cshsoqz-1\nmodified:\n  source/Makefile.in             makefile.in-20070210173807-1wjifrbwaz6xnmgl-65\n  source/configure.in            configure.in-20070210173807-1wjifrbwaz6xnmgl-78\n\nDiff too large for email (588, the limit is 200).\n\n"}