{"category": "ham", "to_address": "\"RICHARD PITMAN\" <richard.pitman3@btopenworld.com>", "from_address": "\"Deepayan Sarkar\" <deepayan.sarkar@gmail.com>", "subject": "Re: [R] plotting order of lines in xyplot panels while using\n\tconditioning variable and groups", "body": "On 6/19/07, RICHARD PITMAN  wrote:\n> I am using the following code:\n>\n> library(lattice)\n> data<-read.csv(\"data.csv\")\n> attach(data)\n>\n> fig<-xyplot(S_t~month|event,\n>        key    = list(text=list(lab=c(\"Time to first CV\n> event - Data\",\n>                                      \"Survival post\n> first CV event - Model\",\n>                                      \"Survival post\n> first MIA/CA event - Data\",\n>                                      \"Survival post\n> first CVA event - Data\",\n>                                      \"Survival post\n> first TIA event - Data\",\n>                                      \"Survival post\n> first CVA/TIA event - Model\"),\n>                                font=2,\n>                                cex=0.55),\n>                      lines=list(col=c(\"red\",\n>                                       \"magenta\",\n>                                       \"blue\",\n>                                       \"brown\"),\n>                                 type=\"l\",\n>                                 cex=0.55,\n>                                 lwd=1.5,\n>                                 pch=0:1),\n>                      corner=c(0,0),x=0.75,y=0.75),\n>        group  = group,\n>        index.cond = list(c(4,5,6,7,1,2,3)),\n>        type   = \"l\",\n>        lwd    = \"3\",\n>        ylim   = c(0,1.5),\n>        layout = c(4,2),\n>        col    = c(\"red\",\"magenta\",\"blue\",\"brown\"),\n>        pch    = 0:3,\n>        cex    = 0.5,\n>        ylab   = \"cumulative probability\",\n>        xlab   = \"months\",\n>      )\n> print(fig)\n>\n> However, in each panel, the order in which the lines\n> are printed is suboptimal as some shorter lines are\n> obscured under longer lines. I am having some trouble\n> finding a method to change the order in which curves\n> are plotted in each panel. I have tried reordering the\n> levels in data$group:\n>\n> data$group<-factor(data$group,\n> levels=c(\"CV_model_event_1\",\"CV model event 2\",\"CV\n> event\n> 1\",\"CV_event_2\",\"CV_event_2_CVA\",\"CV_event_2_TIA\"))\n>\n> but this changed nothing.\n>\n> Any suggestions gratefully received.\n\nIt's hard to see the problem without a reproducible example, but if\nall you want is to order the levels of groups in decreasing order of\nfrequency, you could use\n\n groups  = reorder(group, group, function(x) { -length(x) }),\n\n-Deepayan\n\n______________________________________________\nR-help@stat.math.ethz.ch mailing list\nhttps://stat.ethz.ch/mailman/listinfo/r-help\nPLEASE do read the posting guide http://www.R-project.org/posting-guide.html\nand provide commented, minimal, self-contained, reproducible code.\n\n"}