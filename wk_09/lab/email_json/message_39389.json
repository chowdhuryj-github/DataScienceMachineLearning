{"category": "ham", "to_address": "r-help@stat.math.ethz.ch", "from_address": "\"Sebastian P. Luque\" <spluque@gmail.com>", "subject": "Re: [R] lattice: aligning independent graphs", "body": "On Sun, 27 May 2007 15:09:43 -0700,\n\"Deepayan Sarkar\"  wrote:\n\n[...]\n\n> Better in what sense? You are trying to use lattice to do something that\n> lattice isn't designed to do, so there is no solution that is \"clean\" in\n> a philosophical sense. Ideally, you want something like grid, that\n> allows you to control the layout in as much detail as you want (you can\n> still use panel.xyplot, panel.grid, etc. as \"panel functions\" once you\n> set up everything else). On the other hand, lattice gets you very close,\n> and the only improvement I can think of is some sort of automated scheme\n> to align the x labels to the respective columns. Here's one approach to\n> do that (taking advantage of the fact that xlab can be an arbitrary\n> \"grob\"):\n\n[...]\n\nI'm not yet savvy with grid, but if one were to do the same for y axis\nlabels, I thought the following modification to your code might do that:\n\n\n---<---------------cut here---------------start-------------->---\nmyXlabGrob <-\n    function(...) ## ...is lab1, lab2, etc\n{\n    ## you can add arguments to textGrob for more control\n    ## in the next line\n    labs <- lapply(list(...), textGrob, rot=90)\n    nlabs <- length(labs)\n    lab.heights <-\n        lapply(labs,\n               function(lab) unit(1, \"grobheight\", data=list(lab)))\n    lab.layout <-\n        grid.layout(ncol=1, nrow=nlabs,\n                    heights=unit(1, \"null\"),\n                    widths=do.call(max, lab.heights),\n                    respect=TRUE)\n    lab.gf <- frameGrob(layout=lab.layout)\n    for (i in seq_len(nlabs))\n        {\n            lab.gf <- placeGrob(lab.gf, labs[[i]], row=i, col=1)\n        }\n    lab.gf\n}\n\n\nxyplot(1:9 ~ 1:9 | gl(3, 1, 9), layout=c(1, 3),\n       ylab=myXlabGrob('Trial number', 'Subject number',\n           'Experimental condition'), strip=FALSE)\n---<---------------cut here---------------end---------------->---\n\n\nwhich gives wrong width and placement.  How can this be modified so it\nplaces the labels close to the axis annotation, centered on each panel?\nThanks in advance.\n\n\n\nCheers,\n\n-- \nSeb\n\n______________________________________________\nR-help@stat.math.ethz.ch mailing list\nhttps://stat.ethz.ch/mailman/listinfo/r-help\nPLEASE do read the posting guide http://www.R-project.org/posting-guide.html\nand provide commented, minimal, self-contained, reproducible code.\n\n"}