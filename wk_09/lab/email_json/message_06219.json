{"category": "ham", "to_address": "samba-cvs@samba.org", "from_address": "Michael Adam <ma@sernet.de>", "subject": "Rev 5357: add some comments in\n\thttp://samba.sernet.de/ma/bzr/SAMBA_3_0-registry.bzr/", "body": "At http://samba.sernet.de/ma/bzr/SAMBA_3_0-registry.bzr/\n\n------------------------------------------------------------\nrevno: 5357\nrevision-id: ma@sernet.de-20070415212850-d065eec3f15fccc9\nparent: ma@sernet.de-20070413160501-13a5e31534a398b3\ncommitter: Michael Adam \nbranch nick: SAMBA_3_0-registry.bzr\ntimestamp: Sun 2007-04-15 23:28:50 +0200\nmessage:\n  add some comments\nmodified:\n  source/lib/util_reg.c          util_reg.c-20060711181331-c2d45d0e1f4a8648\n=== modified file 'source/lib/util_reg.c'\n--- a/source/lib/util_reg.c\t2007-04-13 15:57:35 +0000\n+++ b/source/lib/util_reg.c\t2007-04-15 21:28:50 +0000\n@@ -226,6 +226,10 @@\n \treturn WERR_OK;\n }\n \n+/*\n+ * create a fake token just with enough rights to\n+ * locally access the registry.\n+ */\n NT_USER_TOKEN *registry_create_admin_token(TALLOC_CTX *mem_ctx)\n {\n \tNT_USER_TOKEN *token = NULL;\n@@ -248,12 +252,19 @@\n \treturn token;\n }\n \n+/*\n+ * init the smbconf portion of the registry.\n+ * for use in places where not the whole registry is needed,\n+ * e.g. utils/net_conf.c and loadparm.c\n+ */\n BOOL registry_init_regdb(void)\n {\n \tBOOL ret = False;\n \tint saved_errno = 0;\n \tREGISTRY_HOOK smbconf_reg_hook = {KEY_SMBCONF, &smbconf_reg_ops};\n \n+\tDEBUG(10, (\"registry_init_regdb called\\n\"));\n+\n \tif (!regdb_init()) {\n \t\tsaved_errno = errno;\n \t\tDEBUG(1, (\"Can't open the registry\"));\n\n"}