{"category": "ham", "to_address": "Henrik Zagerholm <henke@mac.se>", "from_address": "derrell@samba.org", "subject": "Re: libsmbclient -> smbc_setxattr corrupts context.", "body": "Henrik Zagerholm  writes:\n\n> Hello list,\n>\n> I just found what I believe is a bug in smc_setxattr but wanted to  air it\n> hear before submitting to bugzilla.\n>\n> I've notices that every-time I use smbc_setxattr my context gets  messed up\n> and I must initialize a new one before I call the function  again.\n>\n> My pseudo code is as follow.\n>\n> SMB::init_context();\n> smbc_setxattr(\"smb://SERVER/SHARE/file1\",ACL, ACL.size, 0) -> SUCCESS!\n>\n> smbc_setxattr(\"smb://SERVER/SHARE/file2\",ACL, ACL.size, 0) -> FAILS!\n>\n>\n> SMB::init_context();\n> smbc_setxattr(\"smb://SERVER/SHARE/file1\",ACL, ACL.size, 0) -> SUCCESS!\n>\n> SMB::init_context();\n> smbc_setxattr(\"smb://SERVER/SHARE/file2\",ACL, ACL.size, 0) -> SUCCESS!\n\nHi Henrik,\n\nPlease post a bugzilla report on this and I'll look into it.  If can attach a\nsmall C program (maybe based on examples/libsmbclient/testacl.c) that\ndemonstrates the problem, I'd appreciate it.\n\nThanks,\n\nDerrell\n\n"}