{"category": "ham", "to_address": "<a.martino@crismaitalia.it>, <r-help@stat.math.ethz.ch>", "from_address": "\"Daniel Nordlund\" <res90sx5@verizon.net>", "subject": "Re: [R] importing sas datasets", "body": "> -----Original Message-----\n> From: r-help-bounces@stat.math.ethz.ch [mailto:r-help-bounces@stat.math.ethz.ch]\n> On Behalf Of a.martino@crismaitalia.it\n> Sent: Friday, April 20, 2007 6:36 AM\n> To: r-help@stat.math.ethz.ch\n> Subject: [R] importing sas datasets\n> \n> Hello,\n> \n> I wanted to ask help about importing sas datasets.\n> \n> 1)I tried with some functions as read.ssd (foreign package),\n> but it doesn't import the file if the length of the\n> variables' names are longer than 8 bite (it has to conform\n> to the 6 version).\n> \n> 2)I then tried with the sas.get function (Hmisc package) but\n> with the command:\n> \n>  c<- sas.get(lib=\"c:\\\\ghan\", mem=\"mkds0001\", var=(\"   \"),\n> format.library=\"d:\\\\R\\\\R-2.4.1\",\n> sasprog=\"C:\\\\Programmi\\\\SAS\\\\SAS 9.1\\\\sas.exe\")\n> \n> R can't launch the sas.exe because there is a space in the\n> directory SAS 9.1.\n> \n<<>>\n\nAnna,\n\nThere has been a thread on this problem recently.  You could check the archives for posts with the subject \"sas.get problem\".  I can't comment about point 1, but the problem in point 2 has nothing to do with the space in the name.  (Well, it kind of does because it has to do with trying to get around the problem of spaces in path names).  \n\nThe problem you are having with sas.get is that the function is broken in the Windows version of Hmisc.  There is a fix which you can apply, and when that is done sas.get is a very nice function (I have heard that the problem will be fixed in an upcoming version of Hmisc).  Here is a solution that works for me and others.\n1.  start up R interactively\n2.  I will assume you have appropriately installed the Hmisc package\n3.  load Hmisc by typing library(Hmisc) at the R prompt.\n4.  type 'sas.get' (without the quotes) at the R prompt.  This will print the source code for the sas.get function definition.\n5.  cut and paste the source code into the text editor of your choice and correct line 127 (change 'sys' to 'system'), i.e.  change line 127 from\n\n    status <- sys(paste(shQuote(sasprog), shQuote(sasin), \"-log\", \n\nto\n\n    status <- system(paste(shQuote(sasprog), shQuote(sasin), \"-log\",\n\n7.  next, sas.get needs to be redefined with the corrected code.  In your text editor, add \n\n     sas.get <- \n\nto the first line so that it reads\n\n     sas.get <- function (library, member, variables = character(0), ifs = character(0),\n\n8.  save this corrected function definition as a text file (I chose Hmisc_sas_get_correction.R as the file name).\n\nNow, any time you want to use sas.get from Hmisc you can take the following steps\n1. start R\n2. load Hmisc using \n\nlibrary(Hmisc)\n\n3. source the corrected sas.get definition\n\n   source(\"your_path/Hmisc_sas_get_correction.R\")\n\nNow you are set to go.  Let us know if this works for you.\n\nHope this is helpful,\n\nDan\n\nDaniel Nordlund\nBothell, WA\n\n______________________________________________\nR-help@stat.math.ethz.ch mailing list\nhttps://stat.ethz.ch/mailman/listinfo/r-help\nPLEASE do read the posting guide http://www.R-project.org/posting-guide.html\nand provide commented, minimal, self-contained, reproducible code.\n\n"}