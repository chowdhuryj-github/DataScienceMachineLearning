{"category": "ham", "to_address": "parrot-porters@perl.org", "from_address": "chromatic <chromatic@wgz.org>", "subject": "Constants from Sub", "body": "Leo,\n\nIn the discussion around RT #41291, I think I heard you say something about \nthe code:\n\n    CONTEXT(interp->ctx)->constants =\n        PMC_sub(sub)->seg->const_table->constants;\n\n(seen for example in Parrot_call_sub() in src/extend.c).  Do I remember \ncorrectly that you called this an optimization that could take place \nelsewhere?\n\nIn a similar case, I have an NCI sub I want to invoke from C.  My impression \nis that the structure of NCI subs is sufficiently different from Sub subs \nthat this code doesn't do the right thing.\n\nIf I were to figure out where to move this initialization, how would I do so?\n\n-- c\n\n"}