{"category": "ham", "to_address": "Christoph.Scherber@agr.uni-goettingen.de", "from_address": "Adaikalavan Ramasamy <ramasamy@cancer.org.uk>", "subject": "Re: [R] Chosing a subset of a non-sorted vector", "body": "You want to select two subplots for each DL value. Try:\n\n  df <- data.frame( DL=gl(3,4), subplot=rep(1:4,3) )\n\n  df$index <- 1:nrow(df)\n  ind <- tapply( df$index, df$DL, function(x) sample(x,2) )\n  df[ unlist(ind), ]\n\nYou could also have used rownames(df) instead of creating df$index.\n\nOR\n\n   tmp <- lapply( split(df, df$DL), function(m) m[sample(1:nrow(m),2),] )\n   do.call(\"rbind\", tmp)\n\nRegards, Adai\n\n\n\nChristoph Scherber wrote:\n> Dear all,\n> \n> I have a tricky problem here:\n> \n> I have a dataframe with biodiversity data in which suplots are a \n> repeated sequence from 1 to 4 (1234,1234,...)\n> \n> Now, I want to randomly pick two subplots each from each diversity level \n> (DL).\n> \n> The problem is that it works up to that point - but if I try to subset \n> the whole dataframe, I get stuck:\n> \n> DL=gl(3,4)\n> subplot=rep(1:4,3)\n> diversity.data=data.frame(DL,subplot)\n> \n> \n> subplot.sampled=NULL\n> for(i in 1:3)\n> subplot.sampled=c(subplot.sampled,sort(sample(4,2,replace=F)))\n> \n> subplot.sampled\n> [1] 3 4 1 3 1 3\n> subplot[subplot.sampled]\n> [1] 3 4 1 3 1 3\n> \n> ## here comes the tricky bit:\n> \n> diversity.data[subplot.sampled,]\n>      DL subplot\n> 3    1       3\n> 4    1       4\n> 1    1       1\n> 3.1  1       3\n> 1.1  1       1\n> 3.2  1       3\n> \n> How can I select those rows of diversity.data that match the exact \n> subplots in \"subplot.sampled\"?\n> \n> \n> Thank you very much for your help!\n> \n> Best wishes,\n> Christoph\n> \n> (I am using R 2.4.1 on Windows XP)\n> \n> \n> ##\n> Christoph Scherber\n> DNPW, Agroecology\n> University of Goettingen\n> Waldweg 26\n> D-37073 Goettingen\n> \n> +49-(0)551-39-8807\n> \n> ______________________________________________\n> R-help@stat.math.ethz.ch mailing list\n> https://stat.ethz.ch/mailman/listinfo/r-help\n> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html\n> and provide commented, minimal, self-contained, reproducible code.\n> \n> \n>\n\n______________________________________________\nR-help@stat.math.ethz.ch mailing list\nhttps://stat.ethz.ch/mailman/listinfo/r-help\nPLEASE do read the posting guide http://www.R-project.org/posting-guide.html\nand provide commented, minimal, self-contained, reproducible code.\n\n"}