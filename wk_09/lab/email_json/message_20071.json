{"category": "ham", "to_address": "Andrew Bartlett <abartlet@samba.org>", "from_address": "Jelmer Vernooij <jelmer@samba.org>", "subject": "Re: [SAMBA4] we should create just one test environment", "body": "-----BEGIN PGP SIGNED MESSAGE-----\nHash: SHA1\n\nAndrew Bartlett wrote:\n> On Mon, 2007-04-30 at 11:39 +0200, Stefan (metze) Metzmacher wrote:\n>> -----BEGIN PGP SIGNED MESSAGE-----\n>> Hash: SHA1\n> \n>> we have already make testenv SELFTEST_TESTENV=member\n>>\n>> we can make that the default for make testenv...\n> \n> But then it doesn't match how we run the tests otherwise.  \n> \n> My point is that I don't want to have to constantly wonder:  what test\n> environment did we declare for this test, what test environment did it\n> get, and what is 'make testenv' giving me\nWe only have three different ones at the moment (none, dc, member) so it\nshould be easy to guess against which environment a test is being run.\nOnce we get more, it may be harder to keep track, but then provisioning\nwill be too expensive to set up all environments always anyway.\n\nWe can print out the environment name if that helps.\n\n> I really just want one setup, and I don't mind the extra smbd or member\n> server configuration if it ensures that all the tests run against a\n> consistent set of servers.\n\n> If we are only going to give the tests the environment they declare, are\n> we going to start up/shut down environments between tests?\nWe do support doing that, though it is not the default. It can be very\nuseful in tracking down, for example, whether a test is corrupting one\nof smbd's databases and thus is causing strange failures in subsequent\ntests.\n\nAt the moment, though, we set up environments on a when-needed basis and\nclose them all when selftest exits.\n\nCheers,\n\nJelmer\n-----BEGIN PGP SIGNATURE-----\nVersion: GnuPG v1.4.6 (GNU/Linux)\nComment: Using GnuPG with Mozilla - http://enigmail.mozdev.org\n\niQCVAwUBRjXMDQy0JeEGD2blAQKzSQQAl5p6Z1EVg/HWl3HMitLvQetMReN0nYbp\nFmDyswnsUdxWe6VTIsrGOQQ/G/2UnBVH24q+V5nxqwfzltgx5WybTgtHJpBxNswi\nU0otvICUs4WwJJNswWOQH/8Xxnr/IrTjGP7/98zzM8yrWKcn6zfEmkJCJcZ0U9SO\nPzDin1su5BI=\n=pngt\n-----END PGP SIGNATURE-----\n\n"}