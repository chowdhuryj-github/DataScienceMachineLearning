{"category": "ham", "to_address": "\"John Kane\" <jrkrideau@yahoo.ca>", "from_address": "\"Gabor Grothendieck\" <ggrothendieck@gmail.com>", "subject": "Re: [R] Character coerced to factor and I cannot get it back", "body": "Try this:\n\nDF <- data.frame(let = letters[1:3], num = 1:3, stringsAsFactors = FALSE)\nstr(DF)\n\n\nOn 4/19/07, John Kane  wrote:\n>\n> --- Tyler Smith  wrote:\n>\n> > I really need to sit down with the manual and sort\n> > factors and classes\n> > properly. In your case, I think the problem has\n> > something to do with\n> > the way a list behaves?  I'm not sure, but if you\n> > convert your list to\n> > a dataframe it seems to work ok:\n> >\n> > > dd3 <- as.data.frame(dd1)\n> > > typeof(dd3$st)\n> > [1] \"integer\"\n> > > class(dd3$st)\n> > [1] \"factor\"\n> > > dd3$st <- as.character(dd3$st)\n> > > typeof(dd3$st)\n> > [1] \"character\"\n> > > class(dd3$st)\n> > [1] \"character\"\n> >\n> > HTH,\n> >\n> > Tyler\n>\n> Seems to work nicely. I had forgotten about\n> 'as.data.frame.\n>\n> I originally thought that it might be a list problem\n> too but I don't think so. I set up the example as a\n> list since that is the way my real data is being\n> imported from csv. However after my original posting I\n> went back and tried it with just a dataframe and I'm\n> getting the same results. See below.\n>\n> I even shut down R , reloaded it and detached the two\n> extra packages I usually load. Everything is working\n> fine but I am doing some things with factors that I\n> have never done before and this just makes me a bit\n> paranoid.\n>\n> Thanks very much for the help.\n>\n>\n> EXAMPLE\n> dd  <- data.frame(aa <- 1:4, bb <-  letters[1:4],\n>         cc <- c(12345, 123456, 45678, 456789))\n>\n> id  <-  as.character(dd[,3]) ; id\n>\n> st  <- substring(id, 1,nchar(id)-4 ) ; st\n> typeof (st)  ; class(st)\n>\n> dd1  <-  cbind(dd, st)\n>    names(dd1)  <- c(\"aa\",\"bb\",\"cc\",\"st\")\n>    dd1\n>    typeof(dd1$st); class(dd1$st)\n>\n> dd2  <-  cbind(dd, as.character(st))\n>    names(dd2)  <- c(\"aa\",\"bb\",\"cc\",\"st\")\n>    dd2\n>    typeof(dd2$st) ;   class(dd2$st)\n>\n> ______________________________________________\n> R-help@stat.math.ethz.ch mailing list\n> https://stat.ethz.ch/mailman/listinfo/r-help\n> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html\n> and provide commented, minimal, self-contained, reproducible code.\n>\n\n______________________________________________\nR-help@stat.math.ethz.ch mailing list\nhttps://stat.ethz.ch/mailman/listinfo/r-help\nPLEASE do read the posting guide http://www.R-project.org/posting-guide.html\nand provide commented, minimal, self-contained, reproducible code.\n\n"}