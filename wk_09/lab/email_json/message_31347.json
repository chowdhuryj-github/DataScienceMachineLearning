{"category": "ham", "to_address": "samba-technical@lists.samba.org", "from_address": "Jeff Coffler <jeff-list-sambatech@taltos.com>", "subject": "Re: Problems with dfs and Samba 3.0.24-5/3.0.25-7 - please help", "body": "Jeremy Allison wrote:\n> Ah - this explains a lot. The default for the \"msdfs root\"\n> parameter changed between 3.0.24 from True to False.\n>\n> Has this client been restarted since the new Samba\n> load was added and restarted ?\n>\n> If not - try rebooting the client. The clients remember\n> if a server was a dfs root and act accordingly until a\n> restart.\n>\n> The decision was made to change \"msdfs root = no\"\n> due to problems detecting that the initial name given in\n> a dfs root path belonged to this server (as I recall).\n>   \n\nYes, eureka!  That was it!  Thank you so much!!!  I've bashed my head \nagainst the wall, on and off, due to this problem.\n\nMy client is rarely rebooted.  It's pretty much rebooted on Patch \nTuesday from Microsoft, or when I install something that requires a \nreboot.  Otherwise, it just runs.\n\nI have several clients, and they were both ill after the Samba upgrade.  \nI noted the following:\n\nClient A is rebooted (shares not mounted).  Mount the shares, they just \nworked.\n\nClient B, which has the shares mounted 24x7 (and mounted at the time of \nthe reboot), is rebooted.  Upon reboot, it gave a pretty bizarre error \nwhen I tried to access one of the Samba shares.  Delete the share (net \nuse l: /d), then remount it.  Now the share is fine.\n\nSo, the correct recovery case here is:\n\n1) If the share is mounted, dismount it.\n2) Reboot\n3) Mount the shares, and you should be fine  If you forget #1 above, \nthen I was fine deleting the share and remounting without a further reboot.\n\nAgain, thank you so much for your help, Jeremy!  I really appreciate it!\n\n    -- Jeff\n\n"}