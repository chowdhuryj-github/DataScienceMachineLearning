{"category": "ham", "to_address": "\"Jonathan Lang\" <dataweaver@gmail.com>", "from_address": "\"Chas Owens\" <chas.owens@gmail.com>", "subject": "Re: 'x' vs. 'xx'", "body": "On 6/3/07, Jonathan Lang  wrote:\n> Chas Owens wrote:\n> > Jonathan Lang wrote:\n> > > Chas Owens wrote:\n> > > > Jonathan Lang wrote:\n> > > > > Is there any reason why we can't simply define '$a x $n' as being\n> > > > > shorthand for 'cat($a xx $n)'?  In what way does the former differ\n> > > > > from the latter, other than the use of a Whatever in place of $n?\n> > > >\n> > > > \"$a x $n\" is equivalent to \"join '', $a xx $n\", but that isn't an apt\n> > > > description of its behavior.  \"cat($a xx *)\" is an attempt to provide\n> > > > an infinite string since 'a' x Inf would result in memory overflow\n> > > > (but the cat trick works since lists are evaluated lazily).\n> > >\n> > > Then it looks to me like 'cat($a xx $n)' is more flexible than \"join\n> > > '', $a xx $n\", and would work better as the baseline definition for\n> > > '$a x $n'.  Is there any reason to prefer a join-based definition to a\n> > > cat-based one?  AFAICT, the only thing that 'join' can do that 'cat'\n> > > can't is to provide a delimiter when stitching the component strings\n> > > together; in the case of 'x', this feature is (rightfully) not being\n> > > used.\n> >\n> > Okay, maybe my understanding of the cat function is flawed, but I\n> > thought it walked through each array handed to it in a serial fashion\n> > (as opposed to zip which walks the arrays in a parallel fashion).\n>\n> Hmm... true enough.  That was an aspect of the 'cat' function that I\n> hadn't been aware of.  Rather, what came to mind when I saw the 'cat'\n> function was the following (from S29): \"...a C in item context\n> emulates the C interface lazily.\"\n>\n> In short, 'cat(\"a\" x 5)' effectively _is_ a scalar string value of\n> five characters - in item context.  And because it emulates the string\n> interface _lazily_, there's no danger from an infinitely long string.\n>\n> Again, I was not aware that there _was_ a distinct list context result\n> for 'cat'; and I'm pretty sure that it was referenced as an\n> alternative to '$a x *' due to its behavior in scalar context, rather\n> than its behavior in list context.\n>\n> So the question is this: is there a problem with \"'a' x 5\" producing\n> \"'a', 'a', 'a', 'a', 'a'\" in list context, and 'aaaaa' in item\n> context?  Or should it produce the latter in anything but void\n> context?\n>\n> --\n> Jonathan \"Dataweaver\" Lang\n>\n\nI am almost certain that the following code is in list context.\n\npugs> my @a = '-' x 5, 'foo', '-' x 5;\npugs> @a\n(\"-----\", \"foo\", \"-----\")\npugs> my @b = cat('-' xx 5), 'foo', cat('-' xx 5)\n(\"-\", \"-\", \"-\", \"-\", \"-\", \"foo\", \"-\", \"-\", \"-\", \"-\", \"-\")\n\nHowever, it does seem that Pug's version of cat does not handle the\nStr emulation, so that may fix it, but I don't see how it could since\n(at least in my mind) the code above is in list context.\n\n"}