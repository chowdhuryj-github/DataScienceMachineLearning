{"category": "ham", "to_address": "\"Dimitris Rizopoulos\" <dimitris.rizopoulos@med.kuleuven.be>,\n   r-help@stat.math.ethz.ch", "from_address": "\"Economics Guy\" <economics.guy@gmail.com>", "subject": "Re: [R] generating a new variable based on results of a by command", "body": "Perfect!\n\nEG\n\nOn 6/21/07, Dimitris Rizopoulos  wrote:\n>\n> maybe you want to use ave(), e.g.,\n>\n> f$sums <- ave(f$b, f$e, FUN = sum)\n>\n>\n> I hope it helps.\n>\n> Best,\n> Dimitris\n>\n> ----\n> Dimitris Rizopoulos\n> Ph.D. Student\n> Biostatistical Centre\n> School of Public Health\n> Catholic University of Leuven\n>\n> Address: Kapucijnenvoer 35, Leuven, Belgium\n> Tel: +32/(0)16/336899\n> Fax: +32/(0)16/337015\n> Web: http://med.kuleuven.be/biostat/\n>      http://www.student.kuleuven.be/~m0390867/dimitris.htm\n>\n>\n> ----- Original Message -----\n> From: \"Economics Guy\" \n> To: \n> Sent: Thursday, June 21, 2007 3:53 PM\n> Subject: [R] generating a new variable based on results of a by\n> command\n>\n>\n> >I have a matrix with a set of variables one of which is a factor.\n> >Using by()\n> > I have calculated something about each group (say the sum). Now I\n> > want to\n> > create a new variable in the original matrix that contains the\n> > results of\n> > the by() for each observation that is in the corresponding group.\n> >\n> > For example I have:\n> >\n> > ---------\n> >\n> > a <-c(1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16)\n> >\n> > b <-c(7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22)\n> >\n> > e\n> > <-c(\"A\",\"B\",\"C\",\"D\",\"E\",\"F\",\"A\",\"B\",\"C\",\"D\",\"E\",\"F\",\"D\",\"E\",\"F\",\"A\")\n> >\n> > f <-data.frame(e,a,b)\n> >\n> > # Calculate sum by group\n> >\n> > sums <- by(f, e, function(x) sum(x$b))\n> >\n> > -----------\n> >\n> > Now I would like to assign each observation in f a new variable\n> > based on the\n> > results of the by(). I converted sums into a matrix and then tried\n> > using\n> > match() and ifthen() but could not get it to work.\n> >\n> > Thanks,\n> >\n> > EG\n> >\n> > [[alternative HTML version deleted]]\n> >\n> > ______________________________________________\n> > R-help@stat.math.ethz.ch mailing list\n> > https://stat.ethz.ch/mailman/listinfo/r-help\n> > PLEASE do read the posting guide\n> > http://www.R-project.org/posting-guide.html\n> > and provide commented, minimal, self-contained, reproducible code.\n> >\n>\n>\n> Disclaimer: http://www.kuleuven.be/cwis/email_disclaimer.htm\n>\n>\n\n\t[[alternative HTML version deleted]]\n\n______________________________________________\nR-help@stat.math.ethz.ch mailing list\nhttps://stat.ethz.ch/mailman/listinfo/r-help\nPLEASE do read the posting guide http://www.R-project.org/posting-guide.html\nand provide commented, minimal, self-contained, reproducible code.\n\n"}