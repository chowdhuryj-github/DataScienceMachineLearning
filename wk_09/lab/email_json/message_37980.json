{"category": "ham", "to_address": "r-help@stat.math.ethz.ch", "from_address": "\"Chung-hong Chan\" <chainsawtiney@gmail.com>", "subject": "Re: [R] R's Spearman", "body": "Hi,\n\nYou can try with\ncor.test(rank(y[1]),rank(y[2]))\n\n\nOn 5/29/07, Raymond Wan  wrote:\n>\n> Hi all,\n>\n> I am trying to figure out the formula used by R's Spearman rho (using\n> cor(method=\"spearman\")) because I can't seem to get the same value as by\n> calculating \"by hand\".  Perhaps I'm using \"cor\" wrong, but I don't know\n> where.  Basically, I am running these commands:\n>\n>  > y=read.table(file=\"tmp\",header=TRUE,sep=\"\\t\")\n>  > y\n>    IQ Hours\n> 1 106     7\n> 2  86     0\n> 3  97    20\n> 4 113    12\n> 5 120    12\n> 6 110    17\n>  > cor(y[1],y[2],method=\"spearman\")\n>        Hours\n> IQ 0.2319084\n>\n> [it's an abbreviated example of one I took from Wikipedia].  I\n> calculated by hand (apologies if the table looks strange when pasted\n> into e-mail):\n>\n>       IQ    Hours    rank(IQ)  rank(hours)    diff    diff^2\n> 1    106    7        3         2                 1    1\n> 2     86    0        1         1                 0    0\n> 3     97    20       2         6                -4    16\n> 4    113    12       5         3.5             1.5    2.25\n> 5    120    12       6         3.5             2.5    6.25\n> 6    110    17       4         5                -1    1\n>                                                       26.5\n>\n>                                               rho=    0.242857\n>\n> where rho = (1 - ((6 * 26.5) / 6 * (6^2 - 1))).  I kept modifying the\n> table and realized that the difference in result comes from ties.  i.e.,\n> if I remove the tie in rows 4 and 5, I get the same result from both cor\n> and calculating by hand.  Perhaps I'm handling ties wrong...does anyone\n> know how R does it or perhaps I need to change how I'm using it?\n>\n> Thank you!\n>\n> Ray\n>\n> ______________________________________________\n> R-help@stat.math.ethz.ch mailing list\n> https://stat.ethz.ch/mailman/listinfo/r-help\n> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html\n> and provide commented, minimal, self-contained, reproducible code.\n>\n\n\n-- \n\"The scientists of today think deeply instead of clearly. One must be\nsane to think clearly, but one can think deeply and be quite insane.\"\nNikola Tesla\nhttp://www.macgrass.com\n\n______________________________________________\nR-help@stat.math.ethz.ch mailing list\nhttps://stat.ethz.ch/mailman/listinfo/r-help\nPLEASE do read the posting guide http://www.R-project.org/posting-guide.html\nand provide commented, minimal, self-contained, reproducible code.\n\n"}