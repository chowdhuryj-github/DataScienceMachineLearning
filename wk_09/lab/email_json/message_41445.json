{"category": "ham", "to_address": "samba-cvs@samba.org", "from_address": "tridge@samba.org", "subject": "Rev 447: more portability tweaks in the init script in\n\thttp://samba.org/~tridge/ctdb", "body": "------------------------------------------------------------\nrevno: 447\nrevision-id: tridge@samba.org-20070603075326-xqewuvbtien3b5dq\nparent: tridge@samba.org-20070603073911-b0hoqqxx14tt5x5f\ncommitter: Andrew Tridgell \nbranch nick: tridge\ntimestamp: Sun 2007-06-03 17:53:26 +1000\nmessage:\n  more portability tweaks in the init script\nmodified:\n  config/ctdb.init               ctdb.init-20070527204758-biuh7znabuwan3zn-6\n=== modified file 'config/ctdb.init'\n--- a/config/ctdb.init\t2007-06-03 00:29:57 +0000\n+++ b/config/ctdb.init\t2007-06-03 07:53:26 +0000\n@@ -25,6 +25,12 @@\n   . /etc/rc.d/init.d/functions\n fi\n \n+[ -f /etc/rc.status ] && {\n+    . /etc/rc.status\n+    rc_reset\n+    LC_ALL=en_US.UTF-8\n+}\n+\n # Avoid using root's TMPDIR\n unset TMPDIR\n \n@@ -69,7 +75,7 @@\n \techo -n $\"Starting ctdbd service: \"\n \tcase $init_style in\n \t    suse)\n-\t\tstartproc ctdbd $CTDB_OPTIONS\n+\t\tstartproc /usr/sbin/ctdbd $CTDB_OPTIONS\n \t\trc_status -v\n \t\t;;\n \t    redhat)\n\n"}