{"category": "ham", "to_address": "samba-cvs@samba.org", "from_address": "jpeach@samba.org", "subject": "svn commit: samba r23397 - in branches/SAMBA_3_0_26/source/modules:\n\t.", "body": "Author: jpeach\nDate: 2007-06-08 23:13:04 +0000 (Fri, 08 Jun 2007)\nNew Revision: 23397\n\nWebSVN: http://websvn.samba.org/cgi-bin/viewcvs.cgi?view=rev&root=samba&rev=23397\n\nLog:\nMerge branches/SAMBA_3_0@23396\n\nMake VFS callbacks static. Mark operations as OPAQUE because they\ndo not pass through.\n\nModified:\n   branches/SAMBA_3_0_26/source/modules/vfs_zfsacl.c\n\n\nChangeset:\nModified: branches/SAMBA_3_0_26/source/modules/vfs_zfsacl.c\n===================================================================\n--- branches/SAMBA_3_0_26/source/modules/vfs_zfsacl.c\t2007-06-08 23:08:41 UTC (rev 23396)\n+++ branches/SAMBA_3_0_26/source/modules/vfs_zfsacl.c\t2007-06-08 23:13:04 UTC (rev 23397)\n@@ -133,14 +133,15 @@\n \t\t\tzfs_process_smbacl);\n }\n \n-size_t zfsacl_fget_nt_acl(struct vfs_handle_struct *handle,\n+static size_t zfsacl_fget_nt_acl(struct vfs_handle_struct *handle,\n \t\t\t\t struct files_struct *fsp,\n \t\t\t\t int fd,  uint32 security_info,\n \t\t\t\t struct security_descriptor **ppdesc)\n {\n \treturn zfs_get_nt_acl(fsp, security_info, ppdesc);\n }\n-size_t zfsacl_get_nt_acl(struct vfs_handle_struct *handle,\n+\n+static size_t zfsacl_get_nt_acl(struct vfs_handle_struct *handle,\n \t\t\t\tstruct files_struct *fsp,\n \t\t\t\tconst char *name,  uint32 security_info,\n \t\t\t\tstruct security_descriptor **ppdesc)\n@@ -148,7 +149,7 @@\n \treturn zfs_get_nt_acl(fsp, security_info, ppdesc);\n }\n \n-BOOL zfsacl_fset_nt_acl(vfs_handle_struct *handle,\n+static BOOL zfsacl_fset_nt_acl(vfs_handle_struct *handle,\n \t\t\t files_struct *fsp,\n \t\t\t int fd, uint32 security_info_sent,\n \t\t\t SEC_DESC *psd)\n@@ -156,7 +157,7 @@\n \treturn zfs_set_nt_acl(handle, fsp, security_info_sent, psd);\n }\n \n-BOOL zfsacl_set_nt_acl(vfs_handle_struct *handle,\n+static BOOL zfsacl_set_nt_acl(vfs_handle_struct *handle,\n \t\t       files_struct *fsp,\n \t\t       const char *name, uint32 security_info_sent,\n \t\t       SEC_DESC *psd)\n@@ -168,13 +169,13 @@\n \n static vfs_op_tuple zfsacl_ops[] = {\t\n \t{SMB_VFS_OP(zfsacl_fget_nt_acl), SMB_VFS_OP_FGET_NT_ACL,\n-\t SMB_VFS_LAYER_TRANSPARENT},\n+\t SMB_VFS_LAYER_OPAQUE},\n \t{SMB_VFS_OP(zfsacl_get_nt_acl), SMB_VFS_OP_GET_NT_ACL,\n-\t SMB_VFS_LAYER_TRANSPARENT},\n+\t SMB_VFS_LAYER_OPAQUE},\n \t{SMB_VFS_OP(zfsacl_fset_nt_acl), SMB_VFS_OP_FSET_NT_ACL,\n-\t SMB_VFS_LAYER_TRANSPARENT},\n+\t SMB_VFS_LAYER_OPAQUE},\n \t{SMB_VFS_OP(zfsacl_set_nt_acl), SMB_VFS_OP_SET_NT_ACL,\n-\t SMB_VFS_LAYER_TRANSPARENT},\n+\t SMB_VFS_LAYER_OPAQUE},\n \t{SMB_VFS_OP(NULL), SMB_VFS_OP_NOOP, SMB_VFS_LAYER_NOOP}\n };\n \n\n"}