{"category": "ham", "to_address": "Theodore Tso <tytso@mit.edu>", "from_address": "Jeremy Allison <jra@samba.org>", "subject": "Re: avoid leak upon failed realloc", "body": "On Fri, Jun 22, 2007 at 02:41:44AM -0400, Theodore Tso wrote:\n> On Mon, Jun 18, 2007 at 04:10:44PM +0200, Jim Meyering wrote:\n> > Here's a tiny fix to avoid a leak when realloc fails:\n> > \n> > 2007-06-16  Jim Meyering  \n> > \n> > \t* tdb.c (tdb_append): Don't leak a buffer when realloc fails.\n> \n> Hi Jim,\n> \n> \tThanks for the patch!  I actually automatically build the\n> tdb.c file from the Samba SVN tree (with a series of patches and\n> scripts) at: \n> \n> \tsvn://svnanon.samba.org/samba/branches/SAMBA_4_0/source/lib/tdb\n> \n> So I'm going to forward this patch (attached) to the Samba developers.\n> It appears to apply cleanly to .../source/lib/tdb/common/tdb.c.  Once\n> they commit it into their SVN tree, I can just pick it up from there.\n\nThanks Ted, we fixed this in the generic Samba sources by using\nrealloc wrappers, but tdb has to be separate from these.\n\nI'll commit the fix asap.\n\nThanks,\n\n\tJeremy.\n\n"}