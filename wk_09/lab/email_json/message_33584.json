{"category": "ham", "to_address": "samba-cvs@samba.org", "from_address": "abartlet@samba.org", "subject": "svn commit: samba r23035 - in branches/SAMBA_4_0/source/selftest: .", "body": "Author: abartlet\nDate: 2007-05-21 12:03:15 +0000 (Mon, 21 May 2007)\nNew Revision: 23035\n\nWebSVN: http://websvn.samba.org/cgi-bin/viewcvs.cgi?view=rev&root=samba&rev=23035\n\nLog:\nWe don't need to add this entry, and I hope to figure out how to avoid\nadding the other two manually.\n\nHowever, to do this we do need to skip the check (with -u) that\nslaptest can access the db.\n\nAndrew Bartlett\n\nModified:\n   branches/SAMBA_4_0/source/selftest/Samba4.pm\n\n\nChangeset:\nModified: branches/SAMBA_4_0/source/selftest/Samba4.pm\n===================================================================\n--- branches/SAMBA_4_0/source/selftest/Samba4.pm\t2007-05-21 11:57:56 UTC (rev 23034)\n+++ branches/SAMBA_4_0/source/selftest/Samba4.pm\t2007-05-21 12:03:15 UTC (rev 23035)\n@@ -435,11 +435,10 @@\n \t}\n \n \tsystem(\"slaptest -u -f $slapd_conf\") == 0 or die(\"slaptest still fails after adding modules\");\n-\tsystem(\"slapadd -b $basedn -f $slapd_conf -l $privatedir/$dnsname.ldif >/dev/null\") == 0 or die(\"slapadd failed\");\n \tsystem(\"slapadd -b cn=Configuration,$basedn -f $slapd_conf -l $privatedir/$dnsname-config.ldif >/dev/null\") == 0 or die(\"slapadd failed\");\n \tsystem(\"slapadd -b cn=Schema,cn=Configuration,$basedn -f $slapd_conf -l $privatedir/$dnsname-schema.ldif >/dev/null\") == 0 or die(\"slapadd failed\");\n \n-    system(\"slaptest -f $slapd_conf >/dev/null\") == 0 or \n+    system(\"slaptest -u -f $slapd_conf >/dev/null\") == 0 or \n \t\tdie (\"slaptest after database load failed\");\n     \n \t$ENV{PATH} = $oldpath;\n\n"}