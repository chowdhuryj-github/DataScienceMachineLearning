{"category": "ham", "to_address": "chromatic <chromatic@wgz.org>", "from_address": "\"Patrick R. Michaud\" <pmichaud@pobox.com>", "subject": "Re: Odd Memory Corruption", "body": "On Thu, Jul 05, 2007 at 06:30:44PM -0700, chromatic wrote:\n> In theory, this patch should apply and run cleanly.  It doesn't.\n> \n> Thus, something somewhere pokes into memory it shouldn't.\n> \n> Any ideas?  Alternately, any comments on this analysis?\n\nI also get segfaults after applying this patch.\n\nHowever, if I change the patch such that the \"size_t sentinel;\"\nline goes at the end of the struct PMC instead of the beginning, \nthen everything appears to compile and run.  \n\nIn fact, if \"size_t sentinel;\" is placed as the second or third\nline in the struct (i.e., after \"pobj_t obj;\" or \"VTABLE *vtable;\")\nthen things still appear to compile and run.  It's only when the\nsentinel is given as the first line that I get errors.\n\nSo, I'm guessing there's some code somewhere that assumes that\n\"obj\" is always the first component of PMC.\n\nPm\n\n"}