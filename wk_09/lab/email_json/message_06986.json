{"category": "ham", "to_address": "Dong-hyun Oh <r.arecibo@gmail.com>, R-help <r-help@stat.math.ethz.ch>", "from_address": "Don MacQueen <macq@llnl.gov>", "subject": "Re: [R] Simplify simple code", "body": "For one thing, get rid of the for() loop.\nThe following may or may not be faster, and may or may not use more \nmemory (an issue if x1 and x2 are long), but it's easier to read.\n\nn <- length(x1)\ny <- numeric(n)\n\ntmp <-  x1>=5 & x1 <= 10 & x2 >= 5 & x2 <= 10\ny[tmp] <- 0.631*x1[tmp]^0.55 * x2[tmp]^0.65\n\n# and similarly for the other three conditions\n\nI would put in a test at the beginning to make sure that x1 and x2 \nare the same length:\n       if (length(x1) != length(x2)) stop(\"Problem: x1 and x2 have \ndifferent lengths\")\n\n-Don\n\nAt 2:37 PM +0900 4/16/07, Dong-hyun Oh wrote:\n>Dear expeRts,\n>\n>I would simplify following code.\n>---------------------------------------------\n>youtput <- function(x1, x2){\n>    n <- length(x1)\n>    y <- vector(mode=\"numeric\", length=n)\n>    for(i in 1:n){\n>      if(x1[i] >=5 & x1[i] <= 10 & x2[i] >=5 & x2[i] <=10)\n>        y[i] <- 0.631 * x1[i]^0.55 * x2[i]^0.65\n>      if(x1[i] >=10 & x1[i] <= 15 & x2[i] >=5 & x2[i] <=10)\n>        y[i] <- 0.794 * x1[i]^0.45 * x2[i]^0.65\n>      if(x1[i] >=5 & x1[i] <= 10 & x2[i] >=10 & x2[i] <=15)\n>        y[i] <- 1.259 * x1[i]^0.55 * x2[i]^0.35\n>      if(x1[i] >=10 & x1[i] <= 15 & x2[i] >=10 & x2[i] <=15)\n>        y[i] <- 1.585 * x1[i]^0.45 * x2[i]^0.35\n>    }\n>    y\n>}\n>----------------------------------------------\n>Anyone can help me?\n>\n>Sincerely,\n>\n>===========================================\n>Dong H. Oh\n>\n>Ph. D Candidate\n>Techno-Economics and Policy Program\n>College of Engineering, Seoul National University,\n>Seoul, 151-050, Republic of Korea\n>\n>E-mail:doriaba2@snu.ac.kr\n>Mobile: +82-10-6877-2109\n>Office : +82-2-880-9142\n>Fax: +82-2-880-8389\n>\n>______________________________________________\n>R-help@stat.math.ethz.ch mailing list\n>https://stat.ethz.ch/mailman/listinfo/r-help\n>PLEASE do read the posting guide http://www.R-project.org/posting-guide.html\n>and provide commented, minimal, self-contained, reproducible code.\n\n\n-- \n--------------------------------------\nDon MacQueen\nEnvironmental Protection Department\nLawrence Livermore National Laboratory\nLivermore, CA, USA\n\n______________________________________________\nR-help@stat.math.ethz.ch mailing list\nhttps://stat.ethz.ch/mailman/listinfo/r-help\nPLEASE do read the posting guide http://www.R-project.org/posting-guide.html\nand provide commented, minimal, self-contained, reproducible code.\n\n"}