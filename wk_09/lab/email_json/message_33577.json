{"category": "ham", "to_address": "r-help@stat.math.ethz.ch", "from_address": "Vladimir Eremeev <wl2776@gmail.com>", "subject": "[R] ... and 5 cents more.", "body": "\n\n\nVladimir Eremeev wrote:\n> \n> I was solving similar problem some time ago.\n> Here is my script.\n> I had a data frame, containing a response and several other variables,\n> which were assumed predictors.\n> I was trying to choose the best linear approximation.\n> This approach now seems to me useless, please, don't blame me for that.\n> However, the script might be useful to you.\n> \n> \n> library(forward)\n> \n> # dfr is a data.frame, that contains everything.\n> # The response variable is named med5x\n> # The following lines construct linear models for all possibe formulas\n> # of the form \n> # med5x~T+a+height\n> # med5x~a+height+RH\n> # T, a, RH, etc are the names of possible predictors\n> \n> inputs<-names(dfr)[c(10:30,1)]  # dfr was a very large data frame,\n> containing lot of variables.\n> # here we have chosen only a subset of them.\n> \n> for(nc in 11:length(inputs)){ # the linear models were assumed to have at\n> least 11 terms\n> # now we are generating character vectors containing formulas.\n> \n>   formulas<-paste(\"med5x\",sep=\"~\",\n>                  \n> fwd.combn(inputs,nc,fun=function(x){paste(x,collapse=\"+\")}))\n> \n> # and then, are trying to fit every\n> \n>   for(f in formulas){\n>     lms<-lm(eval(parse(text=f)),data=dfr)\n> \n>    \n> cat(file=\"linear_models.txt\",f,sum(residuals(lms)^2),\"\\n\",sep=\"\\t\",append=TRUE)\n>   }\n> }\n> \n> \n> Hmm, looking back, I see that this is rather inefficient script.\n> For example, the inner cycle can easily be replaced with the apply\n> function.\n> \n> \n\nlm(as.formula(f),data=dfr)\ndo.call(\"lm\",list(formula=f,data=dfr))\n\nalso should work in the inner cycle.\n\n-- \nView this message in context: http://www.nabble.com/using-lm%28%29-with-variable-formula-tf3772540.html#a10717354\nSent from the R help mailing list archive at Nabble.com.\n\n______________________________________________\nR-help@stat.math.ethz.ch mailing list\nhttps://stat.ethz.ch/mailman/listinfo/r-help\nPLEASE do read the posting guide http://www.R-project.org/posting-guide.html\nand provide commented, minimal, self-contained, reproducible code.\n\n"}