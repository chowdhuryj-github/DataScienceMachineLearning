{"category": "ham", "to_address": "samba <samba-technical@lists.samba.org>", "from_address": "derrell@samba.org", "subject": "Re: Error compiling libsmb examples 3.0.26pre1-SVN-build-22419", "body": "Henrik Zagerholm  writes:\n\n> Hello list,\n>\n> I get the following errors when compiling the examples in libsmbclient.\n> The make && make install of samba itself works but no examples.\n\nJeremy/Jerry, I don't see these errors in my test environment, but I suspect\nthat it has to do with what configure finds available.  This is almost\ncertainly caused by the recent changes to link the example programs with the\nlibsmbclient library in the ../source/bin directory rather than with whatever\nhappens to be \"installed\".\n\nIs there a mechanism in the current build system to determine the static\nlibraries (.a) needed to link an executable given what configure found?  If\nnot (or maybe even if so), I should probably just explicitly link\nlibsmbclient.a but leave the remainder of the example dynamically linked.\nThat's really not what I wanted, but if there are going to be environment-\nspecific issues, that's probalby the best I can get.\n\nDerrell\n\n\n> Enclosed are the error messages.\n>\n> cubiq-debian:~/downloads/SAMBA_3_0/examples/libsmbclient# make\n> gcc -O0 -g -I../../source/include -I/usr/include/gtk-1.2 -I/usr/\n> include/glib-1.2 -I/usr/lib/glib/include -D_LARGEFILE64_SOURCE -\n> D_FILE_OFFSET_BITS=64 -D_GNU_SOURCE   -c -o testsmbc.o testsmbc.c\n> Linking testsmbc\n> gcc -O0 -g -I../../source/include -I/usr/include/gtk-1.2 -I/usr/\n> include/glib-1.2 -I/usr/lib/glib/include -D_LARGEFILE64_SOURCE -\n> D_FILE_OFFSET_BITS=64 -D_GNU_SOURCE -L/usr/local/samba/lib -o  testsmbc\n> testsmbc.o ../../source/bin/libsmbclient.a -ldl -lresolv\n> ../../source/bin/libsmbclient.a(cliconnect.o): In function\n> `cli_session_setup_spnego':\n> cliconnect.c:(.text+0x29b5): undefined reference to `error_message'\n> cliconnect.c:(.text+0x2ac3): undefined reference to `error_message'\n> ../../source/bin/libsmbclient.a(smb_seal.o): In function\n> `common_free_enc_buffer':\n> smb_seal.c:(.text+0x132): undefined reference to `gss_release_buffer'\n> ../../source/bin/libsmbclient.a(smb_seal.o): In function\n> `common_free_encryption_state':\n> smb_seal.c:(.text+0x1e4): undefined reference to `gss_release_cred'\n> smb_seal.c:(.text+0x200): undefined reference to  `gss_delete_sec_context'\n> ../../source/bin/libsmbclient.a(smb_seal.o): In function\n> `common_encrypt_buffer':\n>\n> -------------------------------- SNIP  --------------------------------------\n>\n> clikrb5.c:(.text+0x17dc): undefined reference to `error_message'\n> clikrb5.c:(.text+0x1895): undefined reference to `krb5_set_real_time'\n> clikrb5.c:(.text+0x18b0): undefined reference to `krb5_cc_get_type'\n> clikrb5.c:(.text+0x1914): undefined reference to `krb5_cc_get_name'\n> clikrb5.c:(.text+0x19ec): undefined reference to `krb5_cc_remove_cred'\n> clikrb5.c:(.text+0x1a33): undefined reference to `error_message'\n> clikrb5.c:(.text+0x1abd): undefined reference to `krb5_cc_get_name'\n> clikrb5.c:(.text+0x1adb): undefined reference to `krb5_cc_get_type'\n> clikrb5.c:(.text+0x1b52): undefined reference to `krb5_mk_req_extended'\n> clikrb5.c:(.text+0x1b99): undefined reference to `error_message'\n> clikrb5.c:(.text+0x1bc0): undefined reference to `krb5_free_creds'\n> clikrb5.c:(.text+0x1bd8): undefined reference to  `krb5_free_cred_contents'\n> clikrb5.c:(.text+0x1bed): undefined reference to `krb5_free_principal'\n> clikrb5.c:(.text+0x1c7a): undefined reference to `krb5_cc_close'\n> clikrb5.c:(.text+0x1c90): undefined reference to `krb5_auth_con_free'\n> clikrb5.c:(.text+0x1c9b): undefined reference to `krb5_free_context'\n> clikrb5.c:(.text+0x1cb2): undefined reference to `krb5_free_principal'\n> collect2: ld returned 1 exit status\n> make: *** [testsmbc] Error 1\n>\n>\n> Regards,\n> Henrik\n>\n\n-- \n\n"}