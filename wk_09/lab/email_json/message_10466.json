{"category": "ham", "to_address": "r-help@stat.math.ethz.ch", "from_address": "Alan Zaslavsky <zaslavsk@hcp.med.harvard.edu>", "subject": "[R]  erratic behavior of match()?", "body": ">Is this a consequence of machine error or something else?\n>Could this be overcome? (It works correctly when integers are used in\n>the sequences as well as in many other circumstances)\n\nThe usual solution for testing a==b with floating-point round-off error is \nabs(a-b) X1=seq(0,1,len=11)\n> X2=seq(0,1,len=101)\n> match(X1,X2)\n  [1]   1  11  21  NA  41  51  NA  71  81  91 101\n> match(round(X1,2),round(X2,2))\n  [1]   1  11  21  31  41  51  61  71  81  91 101\n\nIn the following case, X2 does not round \"exactly\" but 7-digit accuracy \nseems fine.\n\n> X2=seq(0,1,len=31)\n> match(X1,X2)\n  [1]  1  4  7 NA 13 16 NA NA 25 28 31\n> match(round(X1,7),round(X2,7))\n  [1]  1  4  7 10 13 16 19 22 25 28 31\n\n______________________________________________\nR-help@stat.math.ethz.ch mailing list\nhttps://stat.ethz.ch/mailman/listinfo/r-help\nPLEASE do read the posting guide http://www.R-project.org/posting-guide.html\nand provide commented, minimal, self-contained, reproducible code.\n\n"}