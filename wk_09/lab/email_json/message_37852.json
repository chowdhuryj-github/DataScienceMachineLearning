{"category": "ham", "to_address": "samba-cvs@samba.org", "from_address": "jelmer@samba.org", "subject": "svn commit: samba r23175 - in branches/SAMBA_4_0: .\n\tsource/lib/replace source/script source/selftest", "body": "Author: jelmer\nDate: 2007-05-28 21:04:59 +0000 (Mon, 28 May 2007)\nNew Revision: 23175\n\nWebSVN: http://websvn.samba.org/cgi-bin/viewcvs.cgi?view=rev&root=samba&rev=23175\n\nLog:\nHandle PKG_CONFIG_PATH not set yet - fixes warning in selftest.pl\nModified:\n   branches/SAMBA_4_0/\n   branches/SAMBA_4_0/source/lib/replace/replace.h\n   branches/SAMBA_4_0/source/script/mkproto.pl\n   branches/SAMBA_4_0/source/selftest/selftest.pl\n\n\nChangeset:\n\nProperty changes on: branches/SAMBA_4_0\n___________________________________________________________________\nName: bzr:revision-info\n   - timestamp: Mon 2007-05-28 16:21:22.220000029 +0200\ncommitter: Jelmer Vernooij \nproperties: \n\tbranch-nick: SAMBA_4_0\n\n   + timestamp: Mon 2007-05-28 23:02:10.542000055 +0200\ncommitter: Jelmer Vernooij \nproperties: \n\tbranch-nick: SAMBA_4_0\n\nName: bzr:revision-id-v3\n   - jelmer@samba.org-20070528142122-cf5oh79k3uyecr1j\n\n   + jelmer@samba.org-20070528142122-cf5oh79k3uyecr1j\njelmer@samba.org-20070528210210-rmhpmrglmhpe9aps\n\nName: bzr:merge\n...skipped...\n\nModified: branches/SAMBA_4_0/source/lib/replace/replace.h\n===================================================================\n--- branches/SAMBA_4_0/source/lib/replace/replace.h\t2007-05-28 14:24:36 UTC (rev 23174)\n+++ branches/SAMBA_4_0/source/lib/replace/replace.h\t2007-05-28 21:04:59 UTC (rev 23175)\n@@ -258,6 +258,14 @@\n #endif\n #endif\n \n+#ifndef _DEPRECATED_\n+#if (__GNUC__ >= 3) && (__GNUC_MINOR__ >= 1 )\n+#define _DEPRECATED_ __attribute__ ((deprecated))\n+#else\n+#define _DEPRECATED_\n+#endif\n+#endif\n+\n #ifndef HAVE_VASPRINTF\n #define vasprintf rep_vasprintf\n int rep_vasprintf(char **ptr, const char *format, va_list ap) PRINTF_ATTRIBUTE(2,0);\n\nModified: branches/SAMBA_4_0/source/script/mkproto.pl\n===================================================================\n--- branches/SAMBA_4_0/source/script/mkproto.pl\t2007-05-28 14:24:36 UTC (rev 23174)\n+++ branches/SAMBA_4_0/source/script/mkproto.pl\t2007-05-28 21:04:59 UTC (rev 23175)\n@@ -180,10 +180,10 @@\n \t\t}\n \n \t\tnext unless ( $is_public || $line =~ /\n-\t\t\t      ^void|^BOOL|^bool|^int|^struct|^char|^const|^\\w+_[tT]\\s|^uint|^unsigned|^long|\n-\t\t\t      ^NTSTATUS|^ADS_STATUS|^enum\\s.*\\(|^DATA_BLOB|^WERROR|^XFILE|^FILE|^DIR|\n-\t\t\t      ^double|^TDB_CONTEXT|^TDB_DATA|^TALLOC_CTX|^NTTIME|^FN_|^init_module|\n-\t\t\t      ^GtkWidget|^GType|^smb_ucs2_t|^krb5_error_code\n+\t\t\t      (_DEPRECATED_ )?^(void|BOOL|bool|int|struct|char|const|\\w+_[tT]\\s|uint|unsigned|long|NTSTATUS|\n+\t\t\t\t  ADS_STATUS|enum\\s.*\\(|DATA_BLOB|WERROR|XFILE|FILE|DIR|\n+\t\t\t      double|TDB_CONTEXT|TDB_DATA|TALLOC_CTX|NTTIME|FN_|init_module|\n+\t\t\t      GtkWidget|GType|smb_ucs2_t|krb5_error_code)\n \t\t\t      /xo);\n \n \t\tnext if ($line =~ /^int\\s*main/);\n\nModified: branches/SAMBA_4_0/source/selftest/selftest.pl\n===================================================================\n--- branches/SAMBA_4_0/source/selftest/selftest.pl\t2007-05-28 14:24:36 UTC (rev 23174)\n+++ branches/SAMBA_4_0/source/selftest/selftest.pl\t2007-05-28 21:04:59 UTC (rev 23175)\n@@ -519,7 +519,11 @@\n } else {\n \t$ENV{LD_LIBRARY_PATH} = \"$old_pwd/bin/shared\";\n }\n-$ENV{PKG_CONFIG_PATH} = \"$old_pwd/bin/pkgconfig:$ENV{PKG_CONFIG_PATH}\";\n+if (defined($ENV{PKG_CONFIG_PATH})) {\n+\t$ENV{PKG_CONFIG_PATH} = \"$old_pwd/bin/pkgconfig:$ENV{PKG_CONFIG_PATH}\";\n+} else { \n+\t$ENV{PKG_CONFIG_PATH} = \"$old_pwd/bin/pkgconfig\";\n+}\n $ENV{PATH} = \"$old_pwd/bin:$ENV{PATH}\";\n \n \n\n"}