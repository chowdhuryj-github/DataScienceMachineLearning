{"category": "ham", "to_address": "\"Earl F. Glynn\" <efg@stowers-institute.org>", "from_address": "\"Gabor Grothendieck\" <ggrothendieck@gmail.com>", "subject": "Re: [R] Read Windows-like .INI files into R data structure?", "body": "In thinking about this a bit more here is an even shorter solution where\nLines.raw is as before:\n\n# Lines <- readLines(\"myfile.ini\")\nLines <- readLines(textConnection(Lines.raw))\nLines2 <- chartr(\"[]\", \"==\", Lines)\nDF <- read.table(textConnection(Lines2), as.is = TRUE, sep = \"=\", fill = TRUE)\nL <- DF$V1 == \"\"\nsubset(transform(DF, V3 = V2[which(L)[cumsum(L)]])[1:3], V1 != \"\")\n\n\nOn 6/12/07, Gabor Grothendieck  wrote:\n> Here is some code. It replaces [ and ] with = sign and reads the result\n> into a data frame, DF.  DF2 is similar except the section is now in V3.\n> DF3 is like like DF2 except sections are carried forward and finally\n> we remove the rows which only had sections.\n>\n> Lines.raw <- \"[Section1]\n> var1=value1\n> var2=value2\n> [Section2]\n> A=value3\n> B=value4\n> \"\n>\n> Lines <- readLines(textConnection(Lines.raw))\n> Lines2 <- chartr(\"[]\", \"==\", Lines)\n> DF <- read.table(textConnection(Lines2), as.is = TRUE, sep = \"=\", fill = TRUE)\n> DF2 <- transform(DF, V3 = ifelse(V1 == \"\", V2, NA))\n> L <- !is.na(DF2$V3)\n> DF3 <- transform(DF2, V3 = V3[c(NA, which(L))[cumsum(L)+1]])\n> subset(DF3, V1 != \"\")\n>\n> The result is:\n>\n>    V1     V2       V3\n> 2 var1 value1 Section1\n> 3 var2 value2 Section1\n> 5    A value3 Section2\n> 6    B value4 Section2\n>\n>\n> On 6/12/07, Earl F. Glynn  wrote:\n> > I need to process some datasets where the configuration information was\n> > stored in .INI-like files, i.e., text files with sections like this:\n> >\n> > [Section1]\n> > var1=value1\n> > var2=value2\n> > [Section2]\n> > A=value3\n> > B=value4\n> >\n> > ...\n> >\n> > >From Google and other searches I haven't found any package, or function\n> > within a package, that reads .INI files into an R list, or other data\n> > structure.\n> >\n> >\n> >\n> > Any suggestions, or do I need to write my own?\n> >\n> > efg\n> >\n> > Earl F. Glynn\n> > Stowers Institute for Medical Research\n> >\n> > ______________________________________________\n> > R-help@stat.math.ethz.ch mailing list\n> > https://stat.ethz.ch/mailman/listinfo/r-help\n> > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html\n> > and provide commented, minimal, self-contained, reproducible code.\n> >\n>\n\n______________________________________________\nR-help@stat.math.ethz.ch mailing list\nhttps://stat.ethz.ch/mailman/listinfo/r-help\nPLEASE do read the posting guide http://www.R-project.org/posting-guide.html\nand provide commented, minimal, self-contained, reproducible code.\n\n"}