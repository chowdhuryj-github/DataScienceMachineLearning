{"category": "ham", "to_address": "beginners@perl.org", "from_address": "\"Romeo Theriault\" <romeotheriault@fastmail.fm>", "subject": "Store contents of array in a variable?", "body": "This is probably a dumb question but is it possible to store the\ncontents of an array into a variable?\n\nSomething like this:\n\n$variable = foreach $array_ref7 (@rowstash7) {\n       return \"@$array_ref7\\n\";\n    }\n\nI have this script below in which I am trying to send the contents of an\narray within an email and don't quite know how to deal with getting the\ncontents of the array's into the email message. Suggestions are very\nwelcome.\n\nThanks,\n\nRomeo\n\n\n#!/usr/bin/perl\n\nuse warnings;\nuse strict;\nuse DBI;\nuse Net::SMTP;\n\n\nmy @rowstash7;\nmy @rowstash30;\nmy @rowstash365;\nmy $array_ref7;\nmy $array_ref30;\nmy $array_ref365;\nmy $somevariable = \"test\";\n\n\n## Connect to the database.\nmy $dbh = DBI->connect( \"DBI:mysql:database=antivirus;host=localhost\",\n    \"user\", \"password\", { 'RaiseError' => 1 } );\n\n&success_querie(7);\n&success_querie(30);\n&success_querie(365);\n\n&sendmail('antivirus_downloads@umfk.maine.edu',\n'romeo.theriault@maine.edu', \"Antivirus Downloads\", 'mail.maine.edu',\n'romeo.theriault@maine.edu', \"Download Activity for the last\nWeek:\\n$somevariable\\n\\nDownload Activity for the last\nMonth:\\n$somevariable\\n\\nDownload Activity for the last\nYear:\\n$somevariable\");\n\n\n\n## Function to query the database for the info.\nsub success_querie {\n    my ($searchlength) = @_;\n    my $select_handle =\n      $dbh->prepare_cached(\n'SELECT name,COUNT(*) FROM success WHERE datetime > SUBDATE(NOW(),\nINTERVAL ? DAY) GROUP BY name;'\n      );\n\n    die \"Couldn't prepare queries; aborting\"\n      unless defined $select_handle;\n\n    $select_handle->execute($searchlength) or return 0;\n    my ( $name, $count );\n    $select_handle->bind_columns( \\$name, \\$count );\n\n    if ( $searchlength == 7 ) {\n        while ( $array_ref7 = $select_handle->fetchrow_arrayref() ) {\n            push @rowstash7, [@$array_ref7];\n\n            #print \"$name, $count\\n\";\n        }\n    }\n    elsif ( $searchlength == 30 ) {\n        while ( $array_ref30 = $select_handle->fetchrow_arrayref() ) {\n            push @rowstash30, [@$array_ref30];\n\n            #print \"$name, $count\\n\";\n        }\n    }\n    else {\n        while ( $array_ref365 = $select_handle->fetchrow_arrayref() ) {\n            push @rowstash365, [@$array_ref365];\n\n            #print \"$name, $count\\n\";\n        }\n    }\n\n    $select_handle->finish();\n\n    return 1;    # Success\n\n    ## Disconnect from the database.\n    $dbh->disconnect();\n\n}\n\n## Function to send the mail.\nsub sendmail {\n    my ( $from, $to, $subject, $server, $replyto, $message ) = @_;\n    my $smtp = Net::SMTP->new($server);\n    $smtp->mail($from);\n    $smtp->to($to);\n\n    #$smtp->bcc($bcc, $bcc1);\n    $smtp->data();\n    $smtp->datasend(\"To: $to\\n\");\n    $smtp->datasend(\"Subject: $subject\\n\");\n    $smtp->datasend(\"Reply-To: $replyto\\n\");\n    $smtp->datasend(\"$message\");\n    $smtp->dataend();\n\n    $smtp->quit;\n}\n\n#sub messagebody {\n#       Print \"Download Activity for the last Week:\\n\";\n#       foreach $array_ref7 (@rowstash7) {\n#          return \"@$array_ref7\\n\";\n#       }\n#       print \"Download Activity for the last Month:\\n\";\n#       foreach $array_ref30 (@rowstash30) {\n#          return \"@$array_ref30\\n\";\n#       }\n#       print \"Download Activity for the last Year:\\n\";\n#       foreach $array_ref365 (@rowstash365) {\n#               return \"@$array_ref365\\n\";\n#       }\n#}\n\n\n-- \nTo unsubscribe, e-mail: beginners-unsubscribe@perl.org\nFor additional commands, e-mail: beginners-help@perl.org\nhttp://learn.perl.org/\n\n\n"}