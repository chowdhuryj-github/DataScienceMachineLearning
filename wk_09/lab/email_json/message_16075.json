{"category": "ham", "to_address": "Daniel Bolnick <danbolnick@mail.utexas.edu>, r-help@stat.math.ethz.ch", "from_address": "\"Richard M. Heiberger\" <rmh@temple.edu>", "subject": "Re: [R] ANOVA results in R conflicting with results in other\n software packages", "body": "It looks from your tables that you have the same residual\nin both programs, suggesting that the arithmetic is correct.\nThe terms are in a different order.  Since anova() gives\nsequential sums of squares (Type I), the numerical values\ndepend on the order.  Force both programs to use the\nsame order for the terms.  Here is how in R.\n\n> tmp <- data.frame(y=rnorm(12), \n+                   a=factor(rep(letters[1:2],6)),\n+                   b=factor(rep(letters[3:5], each=4)),\n+                   d=factor(rep(LETTERS[6:9], each=3)))\n\n> anova(aov(terms(y ~ a*b + d, keep.order=TRUE), data=tmp))\nAnalysis of Variance Table\n\nResponse: y\n          Df Sum Sq Mean Sq F value  Pr(>F)  \na          1 4.3786  4.3786 11.5479 0.04252 *\nb          2 0.0688  0.0344  0.0907 0.91567  \na:b        2 2.1225  1.0612  2.7988 0.20612  \nd          3 3.2254  1.0751  2.8354 0.20741  \nResiduals  3 1.1375  0.3792                  \n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1 \n\n> anova(aov(y ~ a*b + d, data=tmp))\nAnalysis of Variance Table\n\nResponse: y\n          Df Sum Sq Mean Sq F value  Pr(>F)  \na          1 4.3786  4.3786 11.5479 0.04252 *\nb          2 0.0688  0.0344  0.0907 0.91567  \nd          3 3.0020  1.0007  2.6391 0.22327  \na:b        2 2.3458  1.1729  3.0933 0.18661  \nResiduals  3 1.1375  0.3792                  \n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1 \n> \n\n\nIf you need to resend this, please put some spacing in the SYSTAT output\nto make it legible.\n\nRich\n\n______________________________________________\nR-help@stat.math.ethz.ch mailing list\nhttps://stat.ethz.ch/mailman/listinfo/r-help\nPLEASE do read the posting guide http://www.R-project.org/posting-guide.html\nand provide commented, minimal, self-contained, reproducible code.\n\n"}