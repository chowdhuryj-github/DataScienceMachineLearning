{"category": "ham", "to_address": "samba-cvs@samba.org", "from_address": "jpeach@samba.org", "subject": "svn commit: samba r22952 - in branches/SAMBA_4_0/source/lib/ldb: .", "body": "Author: jpeach\nDate: 2007-05-16 19:23:08 +0000 (Wed, 16 May 2007)\nNew Revision: 22952\n\nWebSVN: http://websvn.samba.org/cgi-bin/viewcvs.cgi?view=rev&root=samba&rev=22952\n\nLog:\nMake sure we look at extra_cflags when building custom targets.\n\nModified:\n   branches/SAMBA_4_0/source/lib/ldb/config.mk\n\n\nChangeset:\nModified: branches/SAMBA_4_0/source/lib/ldb/config.mk\n===================================================================\n--- branches/SAMBA_4_0/source/lib/ldb/config.mk\t2007-05-16 17:30:00 UTC (rev 22951)\n+++ branches/SAMBA_4_0/source/lib/ldb/config.mk\t2007-05-16 19:23:08 UTC (rev 22952)\n@@ -149,9 +149,13 @@\n # End MODULE ldb_tdb\n ################################################\n \n+# NOTE: this rule is broken for some systems when $builddir != $srcdir because\n+# it hardcodes the use of $<. See smb_build/makefile.pm.\n ./lib/ldb/common/ldb_modules.o: lib/ldb/common/ldb_modules.c Makefile\n \t@echo Compiling $<\n-\t@$(CC) -Iinclude $(CFLAGS) -Ilib/replace -Ilib/talloc -Ilib/ldb/include $(PICFLAG) -DLDBMODULESDIR=\\\"$(MODULESDIR)/ldb\\\" -DSHLIBEXT=\\\"$(SHLIBEXT)\\\" -c $< -o $@\n+\t@$(CC) `$(PERL) $(srcdir)/script/cflags.pl $@` $(CFLAGS) $(PICFLAG) \\\n+\t-DLDBMODULESDIR=\\\"$(MODULESDIR)/ldb\\\" -DSHLIBEXT=\\\"$(SHLIBEXT)\\\" \\\n+\t-c $< -o $@\n \n ################################################\n # Start SUBSYSTEM ldb\n\n"}