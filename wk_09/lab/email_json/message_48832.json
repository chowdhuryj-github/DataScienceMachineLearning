{"category": "ham", "to_address": "Deepayan Sarkar <deepayan.sarkar@gmail.com>", "from_address": "Philipp Benner <pbenner@uos.de>", "subject": "Re: [R] model.frame: how does one use it?", "body": "\nThanks for your explanation!\n\n> With this in mind, either of the following might do what you want:\n> \n> badFunction <- function(mydata, myformula) {\n>    mydata$myweight <- abs(rnorm(nrow(mydata)))\n>    hyp <-\n>        rpart(myformula,\n>              data=mydata,\n>              weights=myweight,\n>              method=\"class\")\n>    prev <- hyp\n> }\n> \n> \n> badFunction <- function(mydata, myformula) {\n>    myweight <- abs(rnorm(nrow(mydata)))\n>    environment(myformula) <- environment()\n>    hyp <-\n>        rpart(myformula,\n>              data=mydata,\n>              weights=myweight,\n>              method=\"class\")\n>    prev <- hyp\n> }\n\nOK, this is what I have now:\n\nadaboostBad <- function(formula, data) {\n  ## local definition of the weight vector (won't work because pima.formula is not defined within this function)\n  w <- abs(rnorm(nrow(data)))\n  rpart(formula, data=data, weights=w)\n}\n\nadaboostGood <- function(formula, data) {\n  ## create weight vector in the data object\n  data$w <- abs(rnorm(nrow(data)))\n  rpart(formula, data=data, weights=w)\n}\n\nadaboostBest <- function(formula, data) {\n  ## associate the current environment (this function's one) with the object `formula'\n  environment(formula) <- environment()\n  w <- abs(rnorm(nrow(data)))\n  rpart(formula, data=data, weights=w)\n}\n\nAs far as I understand this non-standard evaluation stuff, adaboostGood() and adaboostBest()\nare the only two possibilities to call rpart() with weight vectors. Now suppose that I don't\nknow what `data' contains and suppose further that it already contains a column called `w'.\nadaboostGood() would overwrite that column with new data which is then used as weight vector\nand as training data for rpart(). adaboostBest() would just use the wrong data as weight\nvector as it finds data$w before the real weight vector. So, in both cases I have to check for\n`names(data) == \"w\"` and stop if TRUE? Or is there a better way?\n\nRegards\n\n-- \nPhilipp Benner\n\n______________________________________________\nR-help@stat.math.ethz.ch mailing list\nhttps://stat.ethz.ch/mailman/listinfo/r-help\nPLEASE do read the posting guide http://www.R-project.org/posting-guide.html\nand provide commented, minimal, self-contained, reproducible code.\n\n"}