{"category": "ham", "to_address": "Alma <almatirkey@gmail.com>", "from_address": "\"Chas Owens\" <chas.owens@gmail.com>", "subject": "Re: Error:Can't locate object method \"prepare\" via package \"abc\" at xyz.pm", "body": "On 31 May 2007 06:17:50 -0700, Alma  wrote:\nsnip\n> I am getting an error :\n> Can't locate object method \"prepare\" via package \"abc\" at xyz.pm\nsnip\n\nBesides the things that are wrong that other people have mentioned,\nyou need to make the abc class a subclass of DBI.  This being Perl\nthere are several ways to do it, but I prefer to say\n\npackage DBI::MySingleton;\n\nuse strict;\nuse Carp;\nuse base 'DBI';\n\nour $dbh;\n\nsub new {\n    our $dbh;\n    my ($class, $user, $pass) = @_;\n    $user ||= \"test\";\n    $pass ||= \"test123\";\n\n    unless ($dbh and $dbh->ping) {\n        $dbh = DBI->connect(\"DBI:Pg:dbname=mydb\",$user,$pass, {PrintError =>1})\n            or croak DBI->errstr;\n        bless $dbh, $class;\n    }\n\n    return $dbh;\n}\n\nsub DESTROY() {\n    my $self = shift;\n    $self->disconnect();\n}\n\n1;\n\n\nOr you could just use DBI->connect_cached() and save yourself a heap of trouble.\n\n-- \nTo unsubscribe, e-mail: beginners-unsubscribe@perl.org\nFor additional commands, e-mail: beginners-help@perl.org\nhttp://learn.perl.org/\n\n\n"}