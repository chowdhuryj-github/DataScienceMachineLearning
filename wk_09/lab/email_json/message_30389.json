{"category": "ham", "to_address": "samba-cvs@samba.org", "from_address": "metze@samba.org", "subject": "svn commit: samba r22913 - in\n\tbranches/SAMBA_4_0/source/ntvfs/posix: .", "body": "Author: metze\nDate: 2007-05-15 18:23:58 +0000 (Tue, 15 May 2007)\nNew Revision: 22913\n\nWebSVN: http://websvn.samba.org/cgi-bin/viewcvs.cgi?view=rev&root=samba&rev=22913\n\nLog:\ntry to work arround the unaligned memory access bug on Tru64\n\nmetze\nModified:\n   branches/SAMBA_4_0/source/ntvfs/posix/pvfs_wait.c\n\n\nChangeset:\nModified: branches/SAMBA_4_0/source/ntvfs/posix/pvfs_wait.c\n===================================================================\n--- branches/SAMBA_4_0/source/ntvfs/posix/pvfs_wait.c\t2007-05-15 16:56:21 UTC (rev 22912)\n+++ branches/SAMBA_4_0/source/ntvfs/posix/pvfs_wait.c\t2007-05-15 18:23:58 UTC (rev 22913)\n@@ -61,14 +61,20 @@\n {\n \tstruct pvfs_wait *pwait = private;\n \tstruct ntvfs_request *req;\n+\tvoid *p = NULL;\n \n \t/* we need to check that this one is for us. See\n \t   messaging_send_ptr() for the other side of this.\n \t */\n-\tif (data->length != sizeof(void *) ||\n-\t    *(void **)data->data != pwait->private) {\n+\tif (data->length == sizeof(void *)) {\n+\t\tvoid **pp;\n+\t\tpp = (void **)data->data;\n+\t\tp = *pp;\n+\t}\n+\tif (p == NULL || p != pwait->private) {\n \t\treturn;\n \t}\n+\n \tpwait->reason = PVFS_WAIT_EVENT;\n \treq = pwait->req;\n \n\n"}