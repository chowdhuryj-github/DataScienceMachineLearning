{"category": "ham", "to_address": "samba-cvs@samba.org", "from_address": "jra@samba.org", "subject": "svn commit: samba r22352 - in branches/SAMBA_3_0/source/smbd: .", "body": "Author: jra\nDate: 2007-04-19 00:44:39 +0000 (Thu, 19 Apr 2007)\nNew Revision: 22352\n\nWebSVN: http://websvn.samba.org/cgi-bin/viewcvs.cgi?view=rev&root=samba&rev=22352\n\nLog:\nWow - working gss SMB sealing !\nJeremy.\n\nModified:\n   branches/SAMBA_3_0/source/smbd/seal.c\n\n\nChangeset:\nModified: branches/SAMBA_3_0/source/smbd/seal.c\n===================================================================\n--- branches/SAMBA_3_0/source/smbd/seal.c\t2007-04-19 00:40:08 UTC (rev 22351)\n+++ branches/SAMBA_3_0/source/smbd/seal.c\t2007-04-19 00:44:39 UTC (rev 22352)\n@@ -365,6 +365,8 @@\n \tout_buf.value = NULL;\n \tout_buf.length = 0;\n \n+\tbecome_root();\n+\n \tret = gss_accept_sec_context(&min,\n \t\t\t\t&gss_state->gss_ctx,\n \t\t\t\tgss_state->creds,\n@@ -376,6 +378,7 @@\n \t\t\t\t&flags,\n \t\t\t\tNULL,\t\t/* Ingore time. */\n \t\t\t\tNULL);\t\t/* Ignore delegated creds. */\n+\tunbecome_root();\n \n \tstatus = gss_err_to_ntstatus(ret, min);\n \tif (ret != GSS_S_COMPLETE && ret != GSS_S_CONTINUE_NEEDED) {\n\n"}