{"category": "ham", "to_address": "samba-cvs@samba.org", "from_address": "tridge@samba.org", "subject": "svn commit: samba r23301 - in branches/SAMBA_4_0/source/lib/events:\n\t.", "body": "Author: tridge\nDate: 2007-06-02 00:32:49 +0000 (Sat, 02 Jun 2007)\nNew Revision: 23301\n\nWebSVN: http://websvn.samba.org/cgi-bin/viewcvs.cgi?view=rev&root=samba&rev=23301\n\nLog:\n\nmerged from ctdb\n\nModified:\n   branches/SAMBA_4_0/source/lib/events/events_aio.c\n   branches/SAMBA_4_0/source/lib/events/events_epoll.c\n   branches/SAMBA_4_0/source/lib/events/events_standard.c\n\n\nChangeset:\nModified: branches/SAMBA_4_0/source/lib/events/events_aio.c\n===================================================================\n--- branches/SAMBA_4_0/source/lib/events/events_aio.c\t2007-06-01 19:42:23 UTC (rev 23300)\n+++ branches/SAMBA_4_0/source/lib/events/events_aio.c\t2007-06-02 00:32:49 UTC (rev 23301)\n@@ -393,6 +393,8 @@\n \tstruct aio_event_context *aio_ev = talloc_get_type(ev->additional_data,\n \t\t\t\t\t\t\t   struct aio_event_context);\n \n+\tepoll_check_reopen(aio_ev);\n+\n \taio_ev->num_fd_events--;\n \taio_ev->destruction_count++;\n \n\nModified: branches/SAMBA_4_0/source/lib/events/events_epoll.c\n===================================================================\n--- branches/SAMBA_4_0/source/lib/events/events_epoll.c\t2007-06-01 19:42:23 UTC (rev 23300)\n+++ branches/SAMBA_4_0/source/lib/events/events_epoll.c\t2007-06-02 00:32:49 UTC (rev 23301)\n@@ -342,6 +342,8 @@\n \tstruct epoll_event_context *epoll_ev = talloc_get_type(ev->additional_data,\n \t\t\t\t\t\t\t   struct epoll_event_context);\n \n+\tepoll_check_reopen(epoll_ev);\n+\n \tepoll_ev->num_fd_events--;\n \tepoll_ev->destruction_count++;\n \n\nModified: branches/SAMBA_4_0/source/lib/events/events_standard.c\n===================================================================\n--- branches/SAMBA_4_0/source/lib/events/events_standard.c\t2007-06-01 19:42:23 UTC (rev 23300)\n+++ branches/SAMBA_4_0/source/lib/events/events_standard.c\t2007-06-02 00:32:49 UTC (rev 23301)\n@@ -379,6 +379,8 @@\n \tstruct std_event_context *std_ev = talloc_get_type(ev->additional_data,\n \t\t\t\t\t\t\t   struct std_event_context);\n \n+\tepoll_check_reopen(std_ev);\n+\n \tif (std_ev->maxfd == fde->fd) {\n \t\tstd_ev->maxfd = EVENT_INVALID_MAXFD;\n \t}\n\n"}