{"category": "ham", "to_address": "Perl Beginners <beginners@perl.org>", "from_address": "\"John W. Krahn\" <krahnj@telus.net>", "subject": "Re: Sorting dir output", "body": "Igor Sutton Lopes wrote:\n> \n> On Apr 10, 2007, at 3:27 PM, John W. Krahn wrote:\n> \n>> Craig Schneider wrote:\n>>\n>>> How could I exec a 'dir' command on a dos system and put the  output in\n>>> an array, sort by date and the files that are older than 3 days be \n>>> moved into a folder called 'history'\n>>\n>> # open the current directory\n>> opendir my $dh, '.' or die \"Cannot open '.' $!\";\n>>\n>> # get files older than three days\n>> my @files = grep -M > 3, readdir $dh;\n>>\n>> closedir $dh;\n>>\n>> for my $file ( @files ) {\n>>     rename $file, \"history/$file\" or die \"Cannot move '$file' $!\";\n>>     }\n> \n> You can also use File::Find::Rule for that:\n> \n> \n> use strict;\n> use warnings;\n> \n> use File::Copy;\n> use File::Find::Rule;\n> use File::Spec;\n> \n> my $basedir = \"/Users/igorsutton/workspace\";\n> \n> sub move_file {\n>     move( $_[2], File::Spec->catdir( $basedir, 'history', $_ ) )\n>       or warn $!;\n> }\n> \n> my $rule = File::Find::Rule->new;\n> $rule->directory()->name('trunk')->exec( \\&move_file )->in($basedir);\n> \n\nDid you test this?  Where do you distinguish between files \"older than 3 days\"\nand other files?  Where is \"name('trunk')\" specified by the OP?\n\n\n\nJohn\n-- \nPerl isn't a toolbox, but a small machine shop where you can special-order\ncertain sorts of tools at low cost and in short order.       -- Larry Wall\n\n-- \nTo unsubscribe, e-mail: beginners-unsubscribe@perl.org\nFor additional commands, e-mail: beginners-help@perl.org\nhttp://learn.perl.org/\n\n\n"}