{"category": "ham", "to_address": "perl6-internals@perl.org", "from_address": "Leopold Toetsch <lt@toetsch.at>", "subject": "Re: [perl #42774] [PATCH] Configure.pl --gc=libc doesn't compile", "body": "Am Donnerstag, 10. Mai 2007 23:07 schrieb Andrew Spieherty:\n> On Wed, 9 May 2007, Andy Spieherty wrote:\n> > Ok, I've got it compiling, at least.  I'll let it run tests overnight and\n> > submit a cleaned-up patch tomorrow.  I've gone back and reviewed the\n> > alignment issue and think I have implemented it sanely.\n>\n> Hmm.  Rats.  My initial version required more invasive changes elsewhere\n> (esp. in string.c and dod.c) than I'm comfortable with.  It still needs\n> more work.\n\nWell, I saw some patches [1] floating by which did remove \nPObj_bufstart_external_FLAG. This flag was needed to sync the malloc-based \nallocators with parrots (and COWs) understanding of a 'not owned' / external \nbuffer/string memory resource. COWed strings are not external to the \nmalloc-based GCs, they just have an increased ref-count.\n\nI was never able to fix string allocation and COW in such a way that this flag \nwould be obsolete with GC_IS_MALLOC.\n\nleo\n\n[1] well it seems ;) that I've committed r10582 but this patch obviously \nignroed the GC_IS_MALLOC-cases. While having different allocators is nice, \nit's really hard to test & sync them with the default one. \n\n"}