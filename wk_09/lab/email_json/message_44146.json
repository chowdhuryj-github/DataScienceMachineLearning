{"category": "ham", "to_address": "samba-cvs@samba.org", "from_address": "tridge@samba.org", "subject": "Rev 498: later times are a lower priority,\n\tnot a higher priority in http://samba.org/~tridge/ctdb", "body": "------------------------------------------------------------\nrevno: 498\nrevision-id: tridge@samba.org-20070607092155-cq7warowco9jcgu0\nparent: tridge@samba.org-20070607091727-nyesysrrvcjrbgf3\ncommitter: Andrew Tridgell \nbranch nick: tridge\ntimestamp: Thu 2007-06-07 19:21:55 +1000\nmessage:\n  later times are a lower priority, not a higher priority\nmodified:\n  common/ctdb_recoverd.c         recoverd.c-20070503213540-bvxuyd9jm1f7ig90-1\n=== modified file 'common/ctdb_recoverd.c'\n--- a/common/ctdb_recoverd.c\t2007-06-07 09:17:27 +0000\n+++ b/common/ctdb_recoverd.c\t2007-06-07 09:21:55 +0000\n@@ -97,6 +97,7 @@\n \t}\n \n \tif (vnn == ctdb->vnn) {\n+\t\tDEBUG(0,(\"self ban - lowering our election priority\\n\"));\n \t\t/* banning ourselves - lower our election priority */\n \t\trec->priority_time = timeval_current();\n \t}\n@@ -842,7 +843,7 @@\n \n \t/* then the longest running node */\n \tif (cmp == 0) {\n-\t\tcmp = timeval_compare(&myem.priority_time, &em->priority_time);\n+\t\tcmp = timeval_compare(&em->priority_time, &myem.priority_time);\n \t}\n \n \tif (cmp == 0) {\n\n"}