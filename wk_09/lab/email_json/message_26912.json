{"category": "ham", "to_address": "<r-help@stat.math.ethz.ch>", "from_address": "\"Patnaik, Tirthankar \" <tirthankar.patnaik@citi.com>", "subject": "[R] Getting the last day of the month.", "body": "Hi,\n\tGiven a date, how do I get the last date of that month? I have\ndata in the form YYYYMM, that I've read as a date using\n\n> x$Date <-\nas.Date(ISOdate(substr(x$YearEnd,1,4),substr(x$YearEnd,5,6),1))\n\nBut this gives the first day of the month. To get the last day of the\nmonth, I tried \n\n> as.Date(as.yearmon(x$Date,frac=0))\n\nBut I don't get the last day of the month here. (Tried frac=1 too.)\n\nI then add a month to the date, substract one day from the resultant\ndate. But this wouldn't work for December.\n\n> x$YearEnd\n [1] 200203 200303 200403 200503 200603 200603 200312 200503 200603\n200203 200303\n[12] 200403 200503 200512 200612 200203 200303 200403 200503 200603\n> \n> x$Date <- as.Date(ISOdate(substr(x$YearEnd,1,4),\n+ as.integer(substr(x$YearEnd,5,6))+1,\n+ 1))-1\n> x$Date\n [1] \"2002-03-31\" \"2003-03-31\" \"2004-03-31\" \"2005-03-31\" \"2006-03-31\"\n\"2006-03-31\"\n [7] NA           \"2005-03-31\" \"2006-03-31\" \"2002-03-31\" \"2003-03-31\"\n\"2004-03-31\"\n[13] \"2005-03-31\" NA           NA           \"2002-03-31\" \"2003-03-31\"\n\"2004-03-31\"\n[19] \"2005-03-31\" \"2006-03-31\"\n\nSo I add a year, and set the month to 1 in a quick function.\n\n> GetEOM <- function(yyyymm=200406){\n\tyear <- as.integer(substr(yyyymm,1,4))\n\tmonth <- as.integer(substr(yyyymm,5,6))\n\tif (month==12){\n\t\tdate <- as.Date(ISOdate(year+1,1,1))-1\n\t}else{\n\t\tdate <- as.Date(ISOdate(year,month+1,1))-1\n\t}\n\tprint(date)\n}\n\nx$Date <- as.vector(sapply(x$YearEnd,GetEOM))\n\nstr(x$Date)\n\n\nIs there a simpler way to do this please?\n\n\nTIA and best,\n-Tir\n\nTirthankar Patnaik\nIndia Strategy\nCitigroup Investment Research\n+91-22-6631 9887\n\n______________________________________________\nR-help@stat.math.ethz.ch mailing list\nhttps://stat.ethz.ch/mailman/listinfo/r-help\nPLEASE do read the posting guide http://www.R-project.org/posting-guide.html\nand provide commented, minimal, self-contained, reproducible code.\n\n"}