{"category": "ham", "to_address": "samba-cvs@samba.org", "from_address": "gd@samba.org", "subject": "svn commit: samba r22636 - in branches/SAMBA_3_0/source/nsswitch: .", "body": "Author: gd\nDate: 2007-05-02 15:44:05 +0000 (Wed, 02 May 2007)\nNew Revision: 22636\n\nWebSVN: http://websvn.samba.org/cgi-bin/viewcvs.cgi?view=rev&root=samba&rev=22636\n\nLog:\nFix logic bug. \n\nWe certainly don't want to crash winbind on each sucessfull\ncentry_uint{8,16,32,64} read.\n\nJeremy, please check :-)\n\nGuenther\n\nModified:\n   branches/SAMBA_3_0/source/nsswitch/winbindd_cache.c\n\n\nChangeset:\nModified: branches/SAMBA_3_0/source/nsswitch/winbindd_cache.c\n===================================================================\n--- branches/SAMBA_3_0/source/nsswitch/winbindd_cache.c\t2007-05-02 09:54:06 UTC (rev 22635)\n+++ branches/SAMBA_3_0/source/nsswitch/winbindd_cache.c\t2007-05-02 15:44:05 UTC (rev 22636)\n@@ -221,7 +221,7 @@\n {\n \tuint32 ret;\n \n-\tif (centry_check_bytes(centry, 4)) {\n+\tif (!centry_check_bytes(centry, 4)) {\n \t\tsmb_panic_fn(\"centry_uint32\");\n \t\treturn (uint32)-1;\n \t}\n@@ -236,7 +236,7 @@\n static uint16 centry_uint16(struct cache_entry *centry)\n {\n \tuint16 ret;\n-\tif (centry_check_bytes(centry, 2)) {\n+\tif (!centry_check_bytes(centry, 2)) {\n \t\tsmb_panic_fn(\"centry_uint16\");\n \t\treturn (uint16)-1;\n \t}\n@@ -251,7 +251,7 @@\n static uint8 centry_uint8(struct cache_entry *centry)\n {\n \tuint8 ret;\n-\tif (centry_check_bytes(centry, 1)) {\n+\tif (!centry_check_bytes(centry, 1)) {\n \t\tsmb_panic_fn(\"centry_uint8\");\n \t\treturn (uint8)-1;\n \t}\n@@ -266,7 +266,7 @@\n static NTTIME centry_nttime(struct cache_entry *centry)\n {\n \tNTTIME ret;\n-\tif (centry_check_bytes(centry, 8)) {\n+\tif (!centry_check_bytes(centry, 8)) {\n \t\tsmb_panic_fn(\"centry_nttime\");\n \t\treturn (NTTIME)-1;\n \t}\n@@ -300,7 +300,7 @@\n \t\treturn NULL;\n \t}\n \n-\tif (centry_check_bytes(centry, (size_t)len)) {\n+\tif (!centry_check_bytes(centry, (size_t)len)) {\n \t\tsmb_panic_fn(\"centry_string\");\n \t\treturn NULL;\n \t}\n@@ -332,7 +332,7 @@\n \t\treturn NULL;\n \t}\n \n-\tif (centry_check_bytes(centry, 16)) {\n+\tif (!centry_check_bytes(centry, 16)) {\n \t\treturn NULL;\n \t}\n \n\n"}