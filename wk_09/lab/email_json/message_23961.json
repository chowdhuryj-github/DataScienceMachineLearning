{"category": "ham", "to_address": "sumfleth@geographie.uni-kiel.de, r-help@stat.math.ethz.ch", "from_address": "Stephen Tucker <brown_emu@yahoo.com>", "subject": "Re: [R] loop in function", "body": "Actually I am not sure what you want exactly, but is it\n\ndf1 <-data.frame(b=c(1,2,3,4,5,5,6,7,8,9,10))\ndf2 <-data.frame(x=c(1,2,3,4,5), y=c(2,5,4,6,5), z=c(10, 8, 7, 9, 3))\ndf1 <- cbind(df1,\n             \"colnames<-\"(sapply(with(df2,(x+y)/z),\n                                 function(a,b) a/b,b=df1$b),\n                          paste(\"goal\",seq(nrow(df2)),sep=\"\")))\n\n> round(df1,2)\n    b goal1 goal2 goal3 goal4 goal5\n1   1  0.30  0.88  1.00  1.11  3.33\n2   2  0.15  0.44  0.50  0.56  1.67\n3   3  0.10  0.29  0.33  0.37  1.11\n4   4  0.07  0.22  0.25  0.28  0.83\n5   5  0.06  0.17  0.20  0.22  0.67\n6   5  0.06  0.17  0.20  0.22  0.67\n7   6  0.05  0.15  0.17  0.19  0.56\n8   7  0.04  0.12  0.14  0.16  0.48\n9   8  0.04  0.11  0.12  0.14  0.42\n10  9  0.03  0.10  0.11  0.12  0.37\n11 10  0.03  0.09  0.10  0.11  0.33\n\neach column \"goal\" corresponds to row of df1. Alternatively, the sapply()\nfunction can be rewritten with apply():\n\napply(df2,1,\n      function(a,b) (a[\"x\"]+a[\"y\"])/(a[\"z\"]*b),\n      b=df1$b)\n\nHope this answered your question...\n\n--- sumfleth@geographie.uni-kiel.de wrote:\n\n> Dear Mailing-List,\n> I think this is a newbie question. However, i would like to integrate a\n> loop in the function below. So that the script calculates for each\n> variable within the dataframe df1 the connecting data in df2. Actually it\n> takes only the first row. I hope that's clear. My goal is to apply the\n> function for each data in df1. Many thanks in advance. An example is as\n> follows:\n> \n> df1 <-data.frame(b=c(1,2,3,4,5,5,6,7,8,9,10))\n> df2 <-data.frame(x=c(1,2,3,4,5), y=c(2,5,4,6,5), z=c(10, 8, 7, 9, 3))\n> attach(df2)\n> myfun = function(yxz) (x + y)/(z * df1$b)\n> df1$goal <- apply(df2, 1, myfun)\n> df1$goal\n> \n> regards,\n> \n> kay\n> \n> ______________________________________________\n> R-help@stat.math.ethz.ch mailing list\n> https://stat.ethz.ch/mailman/listinfo/r-help\n> PLEASE do read the posting guide\n> http://www.R-project.org/posting-guide.html\n> and provide commented, minimal, self-contained, reproducible code.\n>\n\n______________________________________________\nR-help@stat.math.ethz.ch mailing list\nhttps://stat.ethz.ch/mailman/listinfo/r-help\nPLEASE do read the posting guide http://www.R-project.org/posting-guide.html\nand provide commented, minimal, self-contained, reproducible code.\n\n"}