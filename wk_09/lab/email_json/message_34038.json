{"category": "ham", "to_address": "\"'Sugar List'\" <sugar@laptop.org>, pygtk@daa.com.au,\n   John Gilmore <gnu@toad.com>", "from_address": "Don Hopkins <dhopkins@DonHopkins.com>", "subject": "[sugar] How to get pygtk to give you a GtkToolTips from a Toolbar\n to pass to ToolItem's set_tooltip?", "body": "I'm trying to set the tooltip of a tool item, which I though would be \neasy, but the ToolItem.set_tooltip takes a first parameter that's a \nmysterious GtkTooltips object.\nBut I can't figure out how to get a reference to the required ToolTips \nobject to pass as a first argument to a ToolItem's set_tooltip(tooltips, \ntool_tip_string) ...\nThe obvious looking method GtkToolbar.get_tooltips() actually returns a \nboolean that tells if the toolbar is using tooltips, but does not return \nthe toolbar's \"GtkTooltips *tooltips\" member, which is declared public \nbut apparently not exposed as a property to Python.\n\nIs there an existing way to get a reference to the GtkTooltips object? \nOr another way to set the tooltip of a ToolItem without passing in a \nGtkTooltips?\n\nIn desperation, I hacked pygtk to support a phantom \n\"toolbar.get_tooltips_object()\" method that returns the toolbar's actual \nGtkTooltips object.\nIt seems to work ok, and now I can get the tooltips object, then pass it \nto set_tooltip without giving it indigestion, so now I'm getting tooltips!\nIs this a change that should be added upstream to pygtk, or is there a \nbetter way to do it? Would there be a better name for it?\n\nAdded to gtk-base.defs after the definition of \"popup_context_menu\":\n\n(define-method get_tooltips_object\n  (of-object \"GtkToolbar\")\n  (c-name \"gtk_toolbar_get_tooltips_object\")\n  (return-type \"GtkTooltips*\")\n)\n\n\nAdded to gtk.override at the end:\n\n%%\noverride gtk_toolbar_get_tooltips_object noargs\nstatic PyObject *\n_wrap_gtk_toolbar_get_tooltips_object(PyGObject *self)\n{\n    GtkTooltips *ret;\n\n    ret = GTK_TOOLBAR(self->obj)->tooltips;\n\n    /* pygobject_new handles NULL checking */\n    return pygobject_new((GObject *)ret);\n}\n\n\nI'm kind of winging it with the pygtk-codegen stuff.\nIt's not very well documented, so I read the code to figure out how it \nworks, and took some notes.\nIt would be great if somebody who's more familiar with it could \nelaborate on it and correct any mistakes, please!\nI've put the notes up on the olpc wiki!\n\nhttp://wiki.laptop.org/go/PyGTK-Codegen\n\n    -Don\n\n_______________________________________________\nSugar mailing list\nSugar@laptop.org\nhttp://mailman.laptop.org/mailman/listinfo/sugar\n\n"}