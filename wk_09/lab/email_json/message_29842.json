{"category": "ham", "to_address": "bugs-bitbucket@netlabs.develooper.com", "from_address": "Mike Mattie (via RT) <parrotbug-followup@parrotcode.org>", "subject": "[perl #42947] [PATCH] revise Parrot_get_runtime_prefix API for safety and usablility ", "body": "# New Ticket Created by  Mike Mattie \n# Please include the string:  [perl #42947]\n# in the subject line of all future correspondence about this issue. \n# \n\n\nHello,\n\nThis patch changes the Parrot_get_runtime_prefix API from\n\nchar* Parrot_get_runtime_prefix(Interp *interp, STRING **prefix_str)\n\nto\n\nSTRING* Parrot_get_runtime_prefix (Interp *interp ) {\n\nThis is done to make the routine safer, it no longer can leak memory. Also the useless \".\" paths\nare removed from src/library.c. some minor changes to Parrot_locate_runtime_file_str are present\nto sync and correct that function.\n\nother callers in src/inter_misc.c , and compilers/imcc/main.c are fixed as well.\n\nalso a case of a bare free() being used instead of the proper mem_sys_free is fixed.\n\nThis relies on #42944 to apply.\n\nCheers,\nMike Mattie - codermattie@gmail.com\n\n"}