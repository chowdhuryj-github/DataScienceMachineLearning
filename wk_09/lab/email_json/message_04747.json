{"category": "ham", "to_address": "Jim McDonough <jmcd@samba.org>", "from_address": "Jeremy Allison <jra@samba.org>", "subject": "Re: msdfs and AD troubles", "body": "On Fri, Apr 13, 2007 at 01:49:27PM -0400, Jim McDonough wrote:\n> Jerry, here are two captures of what I mentioned earlier.  Basically, when\n> kerberos authentication happens (I've connected to a server using its own\n> netbios name, the one that was used during join), the q_path_info (frame 73)\n> does not have the dfs bit on in flags2.  When we fall back to ntlm (I\n> connect to the same server using a netbios alias which does not have an spn\n> in AD, so the TGS_REQ fails, not because the user's prinicpal is wrong, but\n> because the server's principal is unknown), the q_path_info (frame 71) has\n> the dfs bit on.  My DC is 2k3, client is 2k pro.\n> \n> What I'm wondering is do we have to have some other missing piece in for\n> AD.\n\nWhat version of the server are you using here ? I know you're not\nusing current SAMBA_3_0_25 'cos the client is requesting an extended\ntconX response in frame 42 in the dfs-krb5.cap and the server is not\nresponding with the 7 word response. I fixed that for 3.0.25rc1.\n\nThis may matter.\n\nJeremy.\n\n"}