{"category": "ham", "to_address": "samba-cvs@samba.org", "from_address": "obnox@samba.org", "subject": "svn commit: samba r23669 - in branches: SAMBA_3_0/source/lib\n\tSAMBA_3_0_26/source/lib", "body": "Author: obnox\nDate: 2007-07-01 00:09:20 +0000 (Sun, 01 Jul 2007)\nNew Revision: 23669\n\nWebSVN: http://websvn.samba.org/cgi-bin/viewcvs.cgi?view=rev&root=samba&rev=23669\n\nLog:\nMove a variable into the only block where it is used.\n\n\nModified:\n   branches/SAMBA_3_0/source/lib/util_reg_api.c\n   branches/SAMBA_3_0_26/source/lib/util_reg_api.c\n\n\nChangeset:\nModified: branches/SAMBA_3_0/source/lib/util_reg_api.c\n===================================================================\n--- branches/SAMBA_3_0/source/lib/util_reg_api.c\t2007-06-30 23:52:23 UTC (rev 23668)\n+++ branches/SAMBA_3_0/source/lib/util_reg_api.c\t2007-07-01 00:09:20 UTC (rev 23669)\n@@ -51,7 +51,6 @@\n \t\t */\n \n \t\tsmb_ucs2_t *tmp;\n-\t\tuint32 num_ucs2 = length / 2;\n \n \t\tif (length == 1) {\n \t\t\t/* win2k regedit gives us a string of 1 byte when\n@@ -71,6 +70,7 @@\n \t\t\tgoto error;\n \t\t}\n \t\telse {\n+\t\t\tuint32 num_ucs2 = length / 2;\n \t\t\tif (!(tmp = SMB_MALLOC_ARRAY(smb_ucs2_t, num_ucs2+1))) {\n \t\t\t\terr = WERR_NOMEM;\n \t\t\t\tgoto error;\n\nModified: branches/SAMBA_3_0_26/source/lib/util_reg_api.c\n===================================================================\n--- branches/SAMBA_3_0_26/source/lib/util_reg_api.c\t2007-06-30 23:52:23 UTC (rev 23668)\n+++ branches/SAMBA_3_0_26/source/lib/util_reg_api.c\t2007-07-01 00:09:20 UTC (rev 23669)\n@@ -51,7 +51,6 @@\n \t\t */\n \n \t\tsmb_ucs2_t *tmp;\n-\t\tuint32 num_ucs2 = length / 2;\n \n \t\tif (length == 1) {\n \t\t\t/* win2k regedit gives us a string of 1 byte when\n@@ -71,6 +70,7 @@\n \t\t\tgoto error;\n \t\t}\n \t\telse {\n+\t\t\tuint32 num_ucs2 = length / 2;\n \t\t\tif (!(tmp = SMB_MALLOC_ARRAY(smb_ucs2_t, num_ucs2+1))) {\n \t\t\t\terr = WERR_NOMEM;\n \t\t\t\tgoto error;\n\n"}