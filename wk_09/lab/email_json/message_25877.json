{"category": "ham", "to_address": "\"Leeds, Mark (IED)\" <Mark.Leeds@morganstanley.com>", "from_address": "\"Gabor Grothendieck\" <ggrothendieck@gmail.com>", "subject": "Re: [R] Looking for a cleaner way to implement a setting\n\tcertainindices of a matrix to 1 function", "body": "Try this:\n\nkronecker(t(rep(1:0, c(lagnum, 3-lagnum))), diag(K))\n\n\nOn 5/8/07, Leeds, Mark (IED)  wrote:\n> That's a good idea : I didn't realize that my matrices would look so bad\n> in the final email. All I want\n> To do is output 1's in the diagonal elements and zero's everywhere else\n> but the matrix is not square so by diagonals I\n> Really mean if\n>\n> Lagnum = 1 then the elements are (1,1), (2,2), (3,3),(4,4),(5,5),(6,6)\n>\n> Lagnum = 2 then the elements (1,1), (2,2),\n> (3,3),(4,4),(5,5),(6,6),(7,1),(8,2),(9,3),(10,4),(11,5),(12,6)\n>\n> Lagnum = 3 then the elements (1,1), (2,2),\n> (3,3),(4,4),(5,5),(6,6),(7,1),(8,2),(9,3),(10,4),(11,5),(12,6),(13,1),(1\n> 4,2),(15,3),(16,4),(17,5),\n> (18,6)\n>\n> And lagnum always has to be greater than or equal to 1 and less than or\n> equal to (number of cols/number of rows ). Thanks\n> For your advice.\n>\n>\n> -----Original Message-----\n> From: Bert Gunter [mailto:gunter.berton@gene.com]\n> Sent: Tuesday, May 08, 2007 5:34 PM\n> To: Leeds, Mark (IED); r-help@stat.math.ethz.ch\n> Subject: RE: [R] Looking for a cleaner way to implement a setting\n> certainindices of a matrix to 1 function\n>\n> Suggestion:\n>\n> You might make it easier for folks to help if you explained in clear and\n> simple terms what you are trying to do. Code is hard to deconstruct.\n>\n>\n> Bert Gunter\n> Genentech Nonclinical Statistics\n>\n>\n> -----Original Message-----\n> From: r-help-bounces@stat.math.ethz.ch\n> [mailto:r-help-bounces@stat.math.ethz.ch] On Behalf Of Leeds, Mark (IED)\n> Sent: Tuesday, May 08, 2007 2:22 PM\n> To: r-help@stat.math.ethz.ch\n> Subject: [R] Looking for a cleaner way to implement a setting\n> certainindices of a matrix to 1 function\n>\n> I wrote an ugly algorithm to set certain elements of a matrix to 1\n> without looping and below works and you can see what The output is below\n> the code.\n>\n> K<-6\n> lagnum<-2\n>\n> restrictmat<-matrix(0,nrow=K,ncol=K*3)\n> restrictmat[((col(restrictmat) - row(restrictmat) >= 0 ) &\n> (col(restrictmat)-row(restrictmat)) %% K == 0)]<-1\n> restrictmat[,(lagnum*K+1):ncol(restrictmat)]<-0\n>\n>  restrictmat\n>     [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10] [,11] [,12]\n> [,13] [,14] [,15] [,16] [,17] [,18]\n> [1,]    1    0    0    0    0    0    1    0    0     0     0     0\n> 0     0     0     0     0     0\n> [2,]    0    1    0    0    0    0    0    1    0     0     0     0\n> 0     0     0     0     0     0\n> [3,]    0    0    1    0    0    0    0    0    1     0     0     0\n> 0     0     0     0     0     0\n> [4,]    0    0    0    1    0    0    0    0    0     1     0     0\n> 0     0     0     0     0     0\n> [5,]    0    0    0    0    1    0    0    0    0     0     1     0\n> 0     0     0     0     0     0\n> [6,]    0    0    0    0    0    1    0    0    0     0     0     1\n> 0     0     0     0     0     0\n>\n> For lagnum equals 1 , it also works :\n>\n>  restrictmat\n>     [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10] [,11] [,12]\n> [,13] [,14] [,15] [,16] [,17] [,18]\n> [1,]    1    0    0    0    0    0    0    0    0     0     0     0\n> 0     0     0     0     0     0\n> [2,]    0    1    0    0    0    0    0    0    0     0     0     0\n> 0     0     0     0     0     0\n> [3,]    0    0    1    0    0    0    0    0    0     0     0     0\n> 0     0     0     0     0     0\n> [4,]    0    0    0    1    0    0    0    0    0     0     0     0\n> 0     0     0     0     0     0\n> [5,]    0    0    0    0    1    0    0    0    0     0     0     0\n> 0     0     0     0     0     0\n> [6,]    0    0    0    0    0    1    0    0    0     0     0     0\n> 0     0     0     0     0     0\n>\n> But I am thinking that there has to be a better way particularly because\n> I'll get an error if I set lagnum to 3.\n> Any improvements or total revampings are appreciated. The number of\n> columns will always be a multiple of the number of rows So K doesn't\n> have to be 6. that was just to show what the commands do.\n> thanks.\n> --------------------------------------------------------\n>\n> This is not an offer (or solicitation of an offer) to\n> buy/se...{{dropped}}\n>\n> ______________________________________________\n> R-help@stat.math.ethz.ch mailing list\n> https://stat.ethz.ch/mailman/listinfo/r-help\n> PLEASE do read the posting guide\n> http://www.R-project.org/posting-guide.html\n> and provide commented, minimal, self-contained, reproducible code.\n> --------------------------------------------------------\n>\n> This is not an offer (or solicitation of an offer) to buy/se...{{dropped}}\n>\n> ______________________________________________\n> R-help@stat.math.ethz.ch mailing list\n> https://stat.ethz.ch/mailman/listinfo/r-help\n> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html\n> and provide commented, minimal, self-contained, reproducible code.\n>\n\n______________________________________________\nR-help@stat.math.ethz.ch mailing list\nhttps://stat.ethz.ch/mailman/listinfo/r-help\nPLEASE do read the posting guide http://www.R-project.org/posting-guide.html\nand provide commented, minimal, self-contained, reproducible code.\n\n"}