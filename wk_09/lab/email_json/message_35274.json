{"category": "ham", "to_address": "samba-cvs@samba.org", "from_address": "obnox@samba.org", "subject": "svn commit: samba r23108 - in branches:\n\tSAMBA_3_0/source/lib/replace SAMBA_3_0_26/source/lib/replace\n\tSAMBA_4_0/source/lib/replace", "body": "Author: obnox\nDate: 2007-05-24 07:15:36 +0000 (Thu, 24 May 2007)\nNew Revision: 23108\n\nWebSVN: http://websvn.samba.org/cgi-bin/viewcvs.cgi?view=rev&root=samba&rev=23108\n\nLog:\nAdd defines of RTLD_NOW and RTLD_GLOBAL to replace.h.\nFixing build of ldb for instance on some systems without dlfcn.h.\n\n\nModified:\n   branches/SAMBA_3_0/source/lib/replace/replace.h\n   branches/SAMBA_3_0_26/source/lib/replace/replace.h\n   branches/SAMBA_4_0/source/lib/replace/replace.h\n\n\nChangeset:\nModified: branches/SAMBA_3_0/source/lib/replace/replace.h\n===================================================================\n--- branches/SAMBA_3_0/source/lib/replace/replace.h\t2007-05-24 01:57:02 UTC (rev 23107)\n+++ branches/SAMBA_3_0/source/lib/replace/replace.h\t2007-05-24 07:15:36 UTC (rev 23108)\n@@ -111,11 +111,6 @@\n extern int errno;\n #endif\n \n-#if defined(HAVE_LINUX_READAHEAD) && ! defined(HAVE_READAHEAD_DECL)\n-ssize_t readahead(int fd, off64_t offset, size_t count);\n-#endif\n-\n-\n #ifndef HAVE_STRDUP\n #define strdup rep_strdup\n char *rep_strdup(const char *s);\n@@ -326,6 +321,12 @@\n #ifndef RTLD_LAZY\n #define RTLD_LAZY 0\n #endif\n+#ifndef RTLD_NOW\n+#define RTLD_NOW 0\n+#endif\n+#ifndef RTLD_GLOBAL\n+#define RTLD_GLOBAL 0\n+#endif\n \n #ifndef HAVE_SECURE_MKSTEMP\n #define mkstemp(path) rep_mkstemp(path)\n\nModified: branches/SAMBA_3_0_26/source/lib/replace/replace.h\n===================================================================\n--- branches/SAMBA_3_0_26/source/lib/replace/replace.h\t2007-05-24 01:57:02 UTC (rev 23107)\n+++ branches/SAMBA_3_0_26/source/lib/replace/replace.h\t2007-05-24 07:15:36 UTC (rev 23108)\n@@ -321,6 +321,12 @@\n #ifndef RTLD_LAZY\n #define RTLD_LAZY 0\n #endif\n+#ifndef RTLD_NOW\n+#define RTLD_NOW 0\n+#endif\n+#ifndef RTLD_GLOBAL\n+#define RTLD_GLOBAL 0\n+#endif\n \n #ifndef HAVE_SECURE_MKSTEMP\n #define mkstemp(path) rep_mkstemp(path)\n\nModified: branches/SAMBA_4_0/source/lib/replace/replace.h\n===================================================================\n--- branches/SAMBA_4_0/source/lib/replace/replace.h\t2007-05-24 01:57:02 UTC (rev 23107)\n+++ branches/SAMBA_4_0/source/lib/replace/replace.h\t2007-05-24 07:15:36 UTC (rev 23108)\n@@ -321,6 +321,12 @@\n #ifndef RTLD_LAZY\n #define RTLD_LAZY 0\n #endif\n+#ifndef RTLD_NOW\n+#define RTLD_NOW 0\n+#endif\n+#ifndef RTLD_GLOBAL\n+#define RTLD_GLOBAL 0\n+#endif\n \n #ifndef HAVE_SECURE_MKSTEMP\n #define mkstemp(path) rep_mkstemp(path)\n\n"}