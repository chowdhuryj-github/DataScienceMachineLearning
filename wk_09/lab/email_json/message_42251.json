{"category": "ham", "to_address": "James Peach <jpeach@samba.org>", "from_address": "David Collier-Brown <davec-b@rogers.com>", "subject": "Sidebar on include.h (was  getting rid of mkproto.sh from Samba3", "body": "Volker Lendecke wrote:\n>> And, I would *like* to keep our includes.h. It is a\n>> nightmare in Samba 4 to pick all necessary includes, and\n>> this will fill very quickly with obsolete includes if you\n>> change something.\n\nJames Peach wrote:\n> Yep, \"includes.h\" is nice'n'easy and also plays well with precompiled  \n> headers. It would be nice to give some modules the option of including  \n> less that everything, however.\n\n   This is a discussion most teams have every few years, as it's\nsomething of a trade-off (:-))\n\n   If you put everything in an include.h file, you'll pay the\nprice in compile speed, unless your compiler has a specific\nmechanism (kludge?) to deal with them like precompiled headers.\nYou'll also detect any contradictions still present in vendor\ninclude files (;-))\n\n   If you don't include the kitchen sink, you'll find .h's missing\nduring development, just after you've added a call to something.\nOver time you'll also collect no-longer-needed headers, unless\n(like gcc -MMD) you have a compiler has a specific mechanism to\ntell you what includes you need.\n\n   A customer of mine now occasionally uses -MMD, .d files and a\nscript to prune out extra #include files when they're using gcc,\nand lint|grep \"unneeded\" when they're using a vendor compiler.\n\n--dave\n-- \nDavid Collier-Brown,         | Always do right. This will gratify\nSystem Programmer and Author | some people and astonish the rest\ndavecb@spamcop.net           |                      -- Mark Twain\n(416) 223-5943\n\n"}