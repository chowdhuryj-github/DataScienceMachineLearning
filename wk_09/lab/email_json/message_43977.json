{"category": "ham", "to_address": "\"Melanie Ann Harsch\" <harschm@lincoln.ac.nz>", "from_address": "\"jim holtman\" <jholtman@gmail.com>", "subject": "Re: [R] error message: only first element in each line of matrix\n\tused", "body": "your problem is in the statement:\n\nif(mat.all[i,(j-int):(j-1)]<0){\n\nyou have multiple values in the comparison and the 'if' statement can only\nuse a single value.  Do you want the statement to read:\n\nif(all(mat.all[i,(j-int):(j-1)]<0)){\n\nwhich will test for 'all' the comparisons to be true?\n\n\nOn 6/6/07, Melanie Ann Harsch  wrote:\n>\n> I have a matrix and am trying to write a code to\n> 1. identify all neg values along each line\n> 2. for each neg value I need to identify min(j+3)\n> 3. end with this code: eq[i,j]<- ifelse(mat.r[i,j] < (0.5*mat.s[i,j]),\n> mat.all[i,j], 0)\n>\n> This is the code I have so far.  I have tried several different methods\n> but I\n> keep getting the same error message that the condition has length >1 and\n> only the first element will be used.\n> Any suggestions?\n>\n> int <- 3\n>        for(i in 1:nrow(mat.all)) {\n>        start.year <- min(which(is.na(mat.all[i,])==F & (mat.all[i,]<0)))\n>        fin.year <- max(which(is.na(mat.all[i,])==F))\n>                for(j in start.year:fin.year) {\n>                        if(mat.all[i,(j-int):(j-1)]<0){\n>      mat.s[i,j] <- ifelse((mat.all[i,(j-int):(j-1)])==pmin, mat.all[i,j],\n> 0);\n>                  mat.r [i,j] <- which.max((mat.all[i,(j+1):(j+int)]) > 0)\n> }\n>                  }}\n>\n> ______________________________________________\n> R-help@stat.math.ethz.ch mailing list\n> https://stat.ethz.ch/mailman/listinfo/r-help\n> PLEASE do read the posting guide\n> http://www.R-project.org/posting-guide.html\n> and provide commented, minimal, self-contained, reproducible code.\n>\n\n\n\n-- \nJim Holtman\nCincinnati, OH\n+1 513 646 9390\n\nWhat is the problem you are trying to solve?\n\n\t[[alternative HTML version deleted]]\n\n______________________________________________\nR-help@stat.math.ethz.ch mailing list\nhttps://stat.ethz.ch/mailman/listinfo/r-help\nPLEASE do read the posting guide http://www.R-project.org/posting-guide.html\nand provide commented, minimal, self-contained, reproducible code.\n\n"}