{"category": "ham", "to_address": "Andy Spieherty <spiehera@lafayette.edu>", "from_address": "Allison Randal <allison@perl.org>", "subject": "Re: [perl #42774] [PATCH] Configure.pl --gc=libc doesn't compile", "body": "Andy Spieherty wrote:\n> \n> I was about to post a patch adding those functions in, but I see that \n> you're in the middle of a much more thorough review than I had attempted, \n> so my patch isn't going to apply anymore, and would probably be \n> misleading, to boot.\n\nJust adding Parrot_allocate_aligned and Parrot_merge_memory_pools \nshouldn't conflict. I'm pretty confident they will need to be \nimplemented custom for res_lea.c. (I haven't made any changes to the \nfile since my last commit.)\n\n> Going down that route anyway, I haven't solved any GC problems, so it may \n> not end up being a useful diversion.  Still, I have been looking at the \n> hand-rolling of structures, such as this one at the top of resources.c, to \n> see if they could be simplified in the simplified --gc=libc case (where \n> we're not worrying about compaction and moving aligned pools to unaligned \n> places.)\n> \n> \n>                     +-----------------+\n>                     |  ref_count   |f |    # GC header\n>   obj->bufstart  -> +-----------------+\n>                     |  data           |\n>                     v                 v \n\nSounds great.\n\nAllison\n\n"}