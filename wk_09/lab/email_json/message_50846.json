{"category": "ham", "to_address": "Jeremy Allison <jra@samba.org>", "from_address": "Jeremy Allison <jra@samba.org>", "subject": "Re: Problem with DELETE_ON_CLOSE open_file_ntcreate()?", "body": "On Tue, Jun 19, 2007 at 11:21:52AM -0700, Todd wrote:\n> \n> I'm hesitant to \"fix\" this (e.g. set the lock->delete_on_close bit  \n> when we see the FILE_DELETE_ON_CLOSE option), because there might be  \n> some subtlety I'm missing here.\n\nAnother FYI: There is a subtlety here. Allowing setting the\ndelete on close semantics on open is different to setting\nthe delete on close semantics on an already open handle.\n\nThe logic in SAMBA_3_0_25 is (I believe) correct. Once you've\npatched your 3.0.24 run the latest Samba4 smbtorture against it\nto make sure you've got the changes correct.\n\nJeremy.\n\n"}