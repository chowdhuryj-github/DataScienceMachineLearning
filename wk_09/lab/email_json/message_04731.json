{"category": "ham", "to_address": "aedin culhane <aedin@jimmy.harvard.edu>", "from_address": "Prof Brian Ripley <ripley@stats.ox.ac.uk>", "subject": "Re: [R] apply problem", "body": "On Fri, 13 Apr 2007, aedin culhane wrote:\n\n> Dear R-Help\n> I am running apply on a data.frame containing factors and numeric\n> columns.  It appears to convert are columns into as.character? Does it\n> convert data.frame into matrix? Is this expected? I wish it to recognise\n\nYes, and quite explicit on the help page\n\nArguments:\n\n        X: the array to be used.\n               ^^^^^\n      If 'X' is not an array but has a dimension attribute, 'apply'\n      attempts to coerce it to an array via 'as.matrix' if it is\n      two-dimensional (e.g., data frames) or via 'as.array'.\n\nI am baffled as to how you managed to miss this, as it is part of the \nhomework the posting guide asked you to do *before* posting.\n\n\n\n> numerical columns and round numbers.  Can I use another function instead\n> of apply, or should I use a for loop in the case?\n\nYou haven;t told us _what_ you want to do, but lapply works by column.\n\n> > summary(xmat)\n>        A               B             C             D\n>  Min.   :  1.0   414    :  1   Stage 2:  5   Min.   :-0.075369\n>  1st Qu.:113.8   422    :  1   Stage 3:  6   1st Qu.:-0.018102\n>  Median :226.5   426    :  1   Stage 4:441   Median :-0.003033\n>  Mean   :226.5   436    :  1                 Mean   : 0.008007\n>  3rd Qu.:339.2   460    :  1                 3rd Qu.: 0.015499\n>  Max.   :452.0   462    :  1                 Max.   : 0.400578\n>                  (Other):446\n>        E                F                G\n>  Min.   :0.2345   Min.   :0.9808   Min.   :0.01558\n>  1st Qu.:0.2840   1st Qu.:0.9899   1st Qu.:0.02352\n>  Median :0.3265   Median :0.9965   Median :0.02966\n>  Mean   :0.3690   Mean   :1.0079   Mean   :0.03580\n>  3rd Qu.:0.3859   3rd Qu.:1.0129   3rd Qu.:0.03980\n>  Max.   :2.0422   Max.   :1.3742   Max.   :0.20062\n>\n> > for(i in 1:7) print(class(xmat[,i]))\n> [1] \"integer\"\n> [1] \"factor\"\n> [1] \"factor\"\n> [1] \"numeric\"\n> [1] \"numeric\"\n> [1] \"numeric\"\n> [1] \"numeric\"\n\nBetter, sapply(xmat, class).\n\n> > apply(xmat, 2, class)\n>           A           B           C           D           E           F\n> \"character\" \"character\" \"character\" \"character\" \"character\" \"character\"\n>           G\n> \"character\"\n\nWell, all columns of a matrix are of the same class.\n\n\n-- \nBrian D. Ripley,                  ripley@stats.ox.ac.uk\nProfessor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/\nUniversity of Oxford,             Tel:  +44 1865 272861 (self)\n1 South Parks Road,                     +44 1865 272866 (PA)\nOxford OX1 3TG, UK                Fax:  +44 1865 272595\n\n______________________________________________\nR-help@stat.math.ethz.ch mailing list\nhttps://stat.ethz.ch/mailman/listinfo/r-help\nPLEASE do read the posting guide http://www.R-project.org/posting-guide.html\nand provide commented, minimal, self-contained, reproducible code.\n\n"}