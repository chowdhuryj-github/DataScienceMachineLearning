{"category": "ham", "to_address": "samba-cvs@samba.org", "from_address": "tridge@samba.org", "subject": "Rev 291: the invalid dmaster is no longer needed in recovery in\n\thttp://samba.org/~tridge/ctdb", "body": "------------------------------------------------------------\nrevno: 291\nrevision-id: tridge@samba.org-20070512095631-mqryf40232ncs0k6\nparent: tridge@samba.org-20070512095555-59wxjjrspw50l8s9\ncommitter: Andrew Tridgell \nbranch nick: tridge\ntimestamp: Sat 2007-05-12 19:56:31 +1000\nmessage:\n  the invalid dmaster is no longer needed in recovery\nmodified:\n  direct/ctdb_recoverd.c         recoverd.c-20070503213540-bvxuyd9jm1f7ig90-1\n=== modified file 'direct/ctdb_recoverd.c'\n--- a/direct/ctdb_recoverd.c\t2007-05-12 05:59:49 +0000\n+++ b/direct/ctdb_recoverd.c\t2007-05-12 09:56:31 +0000\n@@ -392,18 +392,6 @@\n \t}\n \n \n-\n-\t/* repoint all local and remote database records to an invalid\n-\t   node as being dmaster to stop the shortcut from working\n-\t */\n-\tret = update_dmaster_on_all_databases(ctdb, nodemap, 0xffffffff, dbmap, mem_ctx);\n-\tif (ret != 0) {\n-\t\tDEBUG(0, (__location__ \" Unable to update dmaster on all databases\\n\"));\n-\t\treturn -1;\n-\t}\n-\n-\n-\n \t/* pull all remote databases onto the local node */\n \tret = pull_all_remote_databases(ctdb, nodemap, vnn, dbmap, mem_ctx);\n \tif (ret != 0) {\n\n"}