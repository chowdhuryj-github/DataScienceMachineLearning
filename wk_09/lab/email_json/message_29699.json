{"category": "ham", "to_address": "samba-technical@lists.samba.org", "from_address": "Help <Help@wiu.edu>", "subject": "Microsoft programs overwrite default mask", "body": "I have a Unix directory with permission set using ACL as follows:\n \n# file: testdir\n# owner: sftp\n# group: student\nuser::rwx\nuser:user1:rwx         #effective:rwx\nuser:user2:rwx          #effective:rwx\ngroup::---              #effective:---\nmask:rwx\nother:---\ndefault:user::rw-\ndefault:user:user1:rwx\ndefault:user:user2:rwx\ndefault:user:sftp:rwx\ndefault:group::---\ndefault:mask:rwx\ndefault:other:---\n \nWhen user1 drops a file - copies it from a directory on the windows machine - into this share (testdir), it gets the following permissions:\n \n# file: testfile\n# owner: user1\n# group: student\nuser::rwx\nuser:user1:rwx         #effective:rw-\nuser:user2:rwx          #effective:rw-\nuser:sftp:rwx                #effective:rw-\ngroup::---              #effective:---\nmask:rw-\nother:---\n\nWhich is correct.  However, if he uses MS word or Excel and \"Save As\" directly to the testdir share, it gets the following permissions:\n \n# file: testfile\n# owner: user1\n# group: student\nuser::rwx\nuser:user1:rwx         #effective:-w-\nuser:user2:rwx          #effective:-w-\nuser:sftp:rwx                #effective:-w-\ngroup::---              #effective:---\nmask:-w-\nother:---\n\nWhich is wrong?\n \nI have tried to change samba options, but no luck. The current options are as follows:\n \n[testdata]\n   comment = Transfer area\n   browseable = no\n   read only = no\n   path = /home/sftp/Data\n   public = no\n   writeable = yes\n   inherit permissions = yes\n   create mask = 0700\n \n   #force create mode = 0660\n   #force directory mode = 0770\n   #create mask = 0000\n   #directory mask = 0000\n   #force create mode = 0660\n   #nt acl support = no\n   #security mask = 0000\n   #inherit acls = yes\n\n \nPS. the commented options are some of my tries.\n \nThanks,\n\n"}