{"category": "ham", "to_address": "samba-cvs@samba.org", "from_address": "gd@samba.org", "subject": "svn commit: samba r22794 - in branches:\n\tSAMBA_3_0/examples/pam_winbind SAMBA_3_0/source/nsswitch\n\tSAMBA_3_0_26/examples/pam_winbind SAMBA_3_0_26/source/nsswitch", "body": "Author: gd\nDate: 2007-05-11 11:54:41 +0000 (Fri, 11 May 2007)\nNew Revision: 22794\n\nWebSVN: http://websvn.samba.org/cgi-bin/viewcvs.cgi?view=rev&root=samba&rev=22794\n\nLog:\nAdd \"debug_state\" and \"silent\" to pam_winbind.conf template. Honor the silent\nargument when parsing pam configuration file options.\n\nGuenther\n\nModified:\n   branches/SAMBA_3_0/examples/pam_winbind/pam_winbind.conf\n   branches/SAMBA_3_0/source/nsswitch/pam_winbind.c\n   branches/SAMBA_3_0_26/examples/pam_winbind/pam_winbind.conf\n   branches/SAMBA_3_0_26/source/nsswitch/pam_winbind.c\n\n\nChangeset:\nModified: branches/SAMBA_3_0/examples/pam_winbind/pam_winbind.conf\n===================================================================\n--- branches/SAMBA_3_0/examples/pam_winbind/pam_winbind.conf\t2007-05-11 10:15:20 UTC (rev 22793)\n+++ branches/SAMBA_3_0/examples/pam_winbind/pam_winbind.conf\t2007-05-11 11:54:41 UTC (rev 22794)\n@@ -9,6 +9,9 @@\n # turn on debugging\n ;debug = no\n \n+# turn on extended PAM state debugging\n+;debug_state = no\n+\n # request a cached login if possible\n # (needs \"winbind offline logon = yes\" in smb.conf)\n ;cached_login = no\n@@ -24,3 +27,6 @@\n # make successful authentication dependend on membership of one SID\n # (can also take a name)\n ;require_membership_of =\n+\n+# omit pam conversations\n+;silent = no\n\nModified: branches/SAMBA_3_0/source/nsswitch/pam_winbind.c\n===================================================================\n--- branches/SAMBA_3_0/source/nsswitch/pam_winbind.c\t2007-05-11 10:15:20 UTC (rev 22793)\n+++ branches/SAMBA_3_0/source/nsswitch/pam_winbind.c\t2007-05-11 11:54:41 UTC (rev 22794)\n@@ -273,6 +273,8 @@\n \t\t\tctrl |= WINBIND_DEBUG_ARG;\n \t\telse if (!strcasecmp(*v, \"debug_state\"))\n \t\t\tctrl |= WINBIND_DEBUG_STATE;\n+\t\telse if (!strcasecmp(*v, \"silent\"))\n+\t\t\tctrl |= WINBIND_SILENT;\n \t\telse if (!strcasecmp(*v, \"use_authtok\"))\n \t\t\tctrl |= WINBIND_USE_AUTHTOK_ARG;\n \t\telse if (!strcasecmp(*v, \"use_first_pass\"))\n\nModified: branches/SAMBA_3_0_26/examples/pam_winbind/pam_winbind.conf\n===================================================================\n--- branches/SAMBA_3_0_26/examples/pam_winbind/pam_winbind.conf\t2007-05-11 10:15:20 UTC (rev 22793)\n+++ branches/SAMBA_3_0_26/examples/pam_winbind/pam_winbind.conf\t2007-05-11 11:54:41 UTC (rev 22794)\n@@ -9,6 +9,9 @@\n # turn on debugging\n ;debug = no\n \n+# turn on extended PAM state debugging\n+;debug_state = no\n+\n # request a cached login if possible\n # (needs \"winbind offline logon = yes\" in smb.conf)\n ;cached_login = no\n@@ -24,3 +27,6 @@\n # make successful authentication dependend on membership of one SID\n # (can also take a name)\n ;require_membership_of =\n+\n+# omit pam conversations\n+;silent = no\n\nModified: branches/SAMBA_3_0_26/source/nsswitch/pam_winbind.c\n===================================================================\n--- branches/SAMBA_3_0_26/source/nsswitch/pam_winbind.c\t2007-05-11 10:15:20 UTC (rev 22793)\n+++ branches/SAMBA_3_0_26/source/nsswitch/pam_winbind.c\t2007-05-11 11:54:41 UTC (rev 22794)\n@@ -273,6 +273,8 @@\n \t\t\tctrl |= WINBIND_DEBUG_ARG;\n \t\telse if (!strcasecmp(*v, \"debug_state\"))\n \t\t\tctrl |= WINBIND_DEBUG_STATE;\n+\t\telse if (!strcasecmp(*v, \"silent\"))\n+\t\t\tctrl |= WINBIND_SILENT;\n \t\telse if (!strcasecmp(*v, \"use_authtok\"))\n \t\t\tctrl |= WINBIND_USE_AUTHTOK_ARG;\n \t\telse if (!strcasecmp(*v, \"use_first_pass\"))\n\n"}