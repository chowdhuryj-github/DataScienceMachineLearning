{"category": "ham", "to_address": "Ignacio Coupeau <icoupeau@unav.es>", "from_address": "tridge@samba.org", "subject": "Re: [CTDB and GFS] some troubles joining domain", "body": "Ignacio,\n\n > then I think that tdb is not initialized and tdb-> points nothing:\n\nyep, it looks like there is no secrets_init() in the \"net rpc join\"\ncode paths in this branch.\n\nThe obvious fix is this:\n\n--- source/passdb/secrets.c     2007-05-31 05:57:51 +0000\n+++ source/passdb/secrets.c     2007-07-01 09:31:32 +0000\n@@ -615,6 +615,10 @@\n        uint32 last_change_time;\n        uint32 sec_channel_type;\n\n+       if (!secrets_init()) {\n+               return False;\n+       }\n+\n        if (tdb_transaction_start(tdb) == -1) {\n                DEBUG(5, (\"tdb_transaction_start failed: %s\\n\",\n                          tdb_errorstr(tdb)));\n\nbut I'd like to understand why this isn't needed in the SAMBA_3_0\nbranch - Volker, any ideas what has diverged here?\n\nCheers, Tridge\n\n"}