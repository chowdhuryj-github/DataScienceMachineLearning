{"category": "ham", "to_address": "samba-cvs@samba.org", "from_address": "jra@samba.org", "subject": "svn commit: samba r22925 - in branches/SAMBA_3_0/source/smbd: .", "body": "Author: jra\nDate: 2007-05-16 01:36:23 +0000 (Wed, 16 May 2007)\nNew Revision: 22925\n\nWebSVN: http://websvn.samba.org/cgi-bin/viewcvs.cgi?view=rev&root=samba&rev=22925\n\nLog:\nSync read_and_X with 3.0.26 code (use setup_readX_header()).\nJeremy.\n\nModified:\n   branches/SAMBA_3_0/source/smbd/reply.c\n\n\nChangeset:\nModified: branches/SAMBA_3_0/source/smbd/reply.c\n===================================================================\n--- branches/SAMBA_3_0/source/smbd/reply.c\t2007-05-16 01:34:22 UTC (rev 22924)\n+++ branches/SAMBA_3_0/source/smbd/reply.c\t2007-05-16 01:36:23 UTC (rev 22925)\n@@ -2666,12 +2666,7 @@\n \t\t\treturn(UNIXERROR(ERRDOS,ERRnoaccess));\n \t\t}\n \n-\t\toutsize = set_message(inbuf, outbuf,12,nread,False);\n-\t\tSSVAL(outbuf,smb_vwv2,0xFFFF); /* Remaining - must be -1. */\n-\t\tSSVAL(outbuf,smb_vwv5,nread);\n-\t\tSSVAL(outbuf,smb_vwv6,smb_offset(data,outbuf));\n-\t\tSSVAL(outbuf,smb_vwv7,((nread >> 16) & 1));\n-\t\tSSVAL(smb_buf(outbuf),-2,nread);\n+\t\toutsize = setup_readX_header(inbuf, outbuf,nread);\n \n \t\tDEBUG( 3, ( \"send_file_readX fnum=%d max=%d nread=%d\\n\",\n \t\t\tfsp->fnum, (int)smb_maxcnt, (int)nread ) );\n\n"}