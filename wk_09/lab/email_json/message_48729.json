{"category": "ham", "to_address": "new ruser <newruser@yahoo.com>", "from_address": "Marc Schwartz <marc_schwartz@comcast.net>", "subject": "Re: [R] removing values from a vector,\n\twhere both the value and\tits name are the same?", "body": "On Fri, 2007-06-15 at 11:19 -0700, new ruser wrote:\n> I have an array such as:\n> \n> x=c(sum=77, min=4,max=9, count=5, min=4,max=9, count=8 ,  test=77)\n> \n> I wish to remove values where both the name and the value are identical.\n> \n> eg. i wish to end up with:\n> x2=c(sum=77, min=4,max=9, count=5, count=8, test=77)\n>  \n> What is the \"best\" way to do this?\n\nNot sure if this is the best way, but since you need to compare both the\nvalues and their name attributes for 'uniqueness':\n\n> x[!(duplicated(x) & duplicated(names(x)))]\n  sum   min   max count count  test \n   77     4     9     5     8    77 \n\n\nWhat is being done is to first compare the values for duplicates. Note\nthat the second value is identified as the duplicate, not the first:\n\n> duplicated(x)\n[1] FALSE FALSE FALSE FALSE  TRUE  TRUE FALSE  TRUE\n\nand then compare the names for duplicates:\n\n> duplicated(names(x))\n[1] FALSE FALSE FALSE FALSE  TRUE  TRUE  TRUE FALSE\n\n\nThen compare the two logical vectors and get the indices where BOTH are\nTRUE:\n\n> (duplicated(x) & duplicated(names(x)))\n[1] FALSE FALSE FALSE FALSE  TRUE  TRUE FALSE FALSE\n\n\nNow, negate the relation:\n\n> !(duplicated(x) & duplicated(names(x)))\n[1]  TRUE  TRUE  TRUE  TRUE FALSE FALSE  TRUE  TRUE\n\n\nand return the values in 'x' that satisfy the logical indices:\n\n> x[!(duplicated(x) & duplicated(names(x)))]\n  sum   min   max count count  test \n   77     4     9     5     8    77 \n\n\n\nSee ?duplicated.  You might also want to look\nat ?unique, ?identical, ?all.equal and ?isTRUE.\n\nNote that the above example will likely fail if any of the values are\nfloats:\n\n> duplicated(c(0.5 - 0.4, 0.1))\n[1] FALSE FALSE\n\nin which case, you would need to use a looping structure where the value\ncomparisons use isTrue(all.equal(...)) instead.\n\n\nHTH,\n\nMarc Schwartz\n\n______________________________________________\nR-help@stat.math.ethz.ch mailing list\nhttps://stat.ethz.ch/mailman/listinfo/r-help\nPLEASE do read the posting guide http://www.R-project.org/posting-guide.html\nand provide commented, minimal, self-contained, reproducible code.\n\n"}