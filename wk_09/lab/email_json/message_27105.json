{"category": "ham", "to_address": "derrell@samba.org", "from_address": "Jeremy Allison <jra@samba.org>", "subject": "Re: readahead() which is Linux-only vs. posix_fadvise()", "body": "On Thu, May 10, 2007 at 03:16:35PM -0400, derrell@samba.org wrote:\n> Jeremy Allison  writes:\n> \n> > On Wed, May 09, 2007 at 09:35:29PM -0400, derrell@samba.org wrote:\n> >> \n> >> The only place that readahead() is used, I think, is in vfs_readahead.c.\n> >> It might make sense for the maintainer of this module to look into using\n> >> posix_fadvise() instead of readahead().\n> >\n> > Did you look at the code here :-) ? I'm guessing not....\n> \n> Clearly I hadn't noticed that further down it tries posix_fadvise().  Thanks\n> for pointing it out.  Based on the fact that there's possibly no reliable\n> declaration for readahead() and that there is a POSIX-compliant alternative,\n> would it make sense to swap the order... try to use posix_fadvise() first, and\n> if it doesn't exist, then look for readahead()?  (Also, since Linux provides\n> posix_fadvise(), maybe there's no reason for readahead() at all?)\n\nNo it doesn't make sense, as readahead and posix_fadvise actually\ndo different things. I want the readahead semantics in this case\nand only fall back to posix_fadvise as a poor mans alternative.\n\nJeremy\n\n"}