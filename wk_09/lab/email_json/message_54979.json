{"category": "ham", "to_address": "\"Frank E Harrell Jr\" <f.harrell@vanderbilt.edu>", "from_address": "\"Nicholas Lewin-Koh\" <nikko@hailmail.net>", "subject": "Re: [R] complex contrasts and logistic regression", "body": "Hi,\nSorry to take so long to reply, I was travelling last week. Thanks for\nyour\nsuggestions. Actually in this case contrast and predict gave the same\nresult,\nand what I was looking at was the correct odds from the model. \n\nWhat is still confusing me is the 1st part of my question,\nlooking for a trend in odds ratios. From what I understand\ntesting the interaction:\nfit1<-glmD(survived ~ as.numeric(Covariate)+Therapy +\nconfounder,myDat,X=TRUE, Y=TRUE, family=binomial())\nfit2<-glmD(survived ~ as.numeric(Covariate)*Therapy +\nconfounder,myDat,X=TRUE, Y=TRUE, family=binomial()) \nlrtest(fit1,fit2)\n\nWould be effectively testing for a trend in odds ratios? \nDo I have to fiddle with contrasts to make sure I am testing the correct\nparameter?\n\nThanks\nNicholas\n\nOn Sat, 16 Jun 2007 11:14:12 -0500, \"Frank E Harrell Jr\"\n said:\n> Nicholas Lewin-Koh wrote:\n> > Hi,\n> > I am doing a retrospective analysis on a cohort from a designed trial,\n> > and I am fitting\n> > the model\n> > \n> > fit<-glmD(survived ~ Covariate*Therapy + confounder,myDat,X=TRUE,\n> > Y=TRUE, family=binomial()) \n> \n> For logistic regression you can also use Design's lrm function which \n> gives you more options.\n> \n> > \n> > My covariate has three levels (\"A\",\"B\" and \"C\") and therapy has two\n> > (treated and control), confounder is a continuous variable.\n> > Also patients were randomized to treatment in the trial, but Covariate\n> > is something that is measured\n> > posthoc and can vary in the population.\n> \n> If by posthoc you mean that the covariate is measured after baseline, it \n> is difficult to get an interpretable analysis.\n> \n> >  \n> > I am trying to wrap my head around how to calculate a few quantities\n> > from the model\n> > and get reasonable confidence intervals for them, namely I would like to\n> > test\n> > \n> > H0: gamma=0, where gamma is the regression coefficient of the odds\n> > ratios of surviving\n> >              under treatment vs control at each level of Covariate\n> >              (adjusted for the confounder)\n> \n> You mean regression coefficient on the log odds ratio scale.  This is \n> easy to do with the contrast( ) function in Design.  Do ?contrast.Design \n> for details and examples.\n> \n> > \n> > and I would like to get the odds of surviving at each level of Covariate\n> > under treatment and control\n> > for each level of covariate adjusted for the confounder. I have looked\n> > at contrast in the Design \n> > library but I don't think it gives me the right quantity, for instance \n> > \n> > contrast(fit,list(covariate=\"A\", Therapy=\"Treated\",\n> > confounder=median(myDat$confounder), X=TRUE)\n> > ( \"A\" is the baseline level of Covariate) \n> > \n> > gives me beta0 + beta_Treated + beta_confounder*68  \n> > \n> > Is this correctly interpreted as the conditional odds of dying? \n> > As to the 1st contrast I am not sure how to get it, would it be using\n> > type = 'average' with some weights \n> > in contrast? The answers are probably staring me in the face, i am just\n> > not seeing them today.\n> \n> contrast( ) is for contrasts (differences).  Sounds like you want \n> predicted values.  Do ?predict  ?predict.lrm  ?predict.Design.  Also do \n> ?gendata which will generate a data frame for getting predictors, with \n> unspecified predictors set to reference values such as medians.\n> \n> Frank\n> \n> > \n> > Nicholas\n> > \n> > \n> > \n> \n> \n> -- \n> Frank E Harrell Jr   Professor and Chair           School of Medicine\n>                       Department of Biostatistics   Vanderbilt University\n\n______________________________________________\nR-help@stat.math.ethz.ch mailing list\nhttps://stat.ethz.ch/mailman/listinfo/r-help\nPLEASE do read the posting guide http://www.R-project.org/posting-guide.html\nand provide commented, minimal, self-contained, reproducible code.\n\n"}