{"category": "ham", "to_address": "samba-cvs@samba.org", "from_address": "tridge@samba.org", "subject": "Rev 420: tidy up the install somewhat in\n\thttp://samba.org/~tridge/ctdb", "body": "------------------------------------------------------------\nrevno: 420\nrevision-id: tridge@samba.org-20070601111049-gil5eidqj2uc4tpk\nparent: tridge@samba.org-20070601105426-8caweabxmsenly05\ncommitter: Andrew Tridgell \nbranch nick: tridge\ntimestamp: Fri 2007-06-01 21:10:49 +1000\nmessage:\n  tidy up the install somewhat\nmodified:\n  Makefile.in                    makefile.in-20061117234101-o3qt14umlg9en8z0-1\n  packaging/RHEL/ctdb.spec       ctdb.spec-20070527204758-biuh7znabuwan3zn-3\n  packaging/RHEL/setup/ctdb.sysconfig ctdb.sysconfig-20070527204758-biuh7znabuwan3zn-7\n=== modified file 'Makefile.in'\n--- a/Makefile.in\t2007-05-29 05:52:03 +0000\n+++ b/Makefile.in\t2007-06-01 11:10:49 +0000\n@@ -117,9 +117,19 @@\n install: all\n \tmkdir -p $(DESTDIR)$(bindir)\n \tmkdir -p $(DESTDIR)$(includedir)\n-\trsync $(BINS) $(DESTDIR)$(bindir)\n-\trsync $(SBINS) $(DESTDIR)$(sbindir)\n-\trsync $(srcdir)/include/ctdb.h $(DESTDIR)$(includedir)\n+\tmkdir -p $(DESTDIR)$(etcdir)/ctdb\n+\tmkdir -p $(DESTDIR)$(etcdir)/ctdb/events.d\n+\tinstall -m755 bin/ctdb $(DESTDIR)$(bindir)\n+\tinstall -m755 bin/ctdbd $(DESTDIR)$(sbindir)\n+\tinstall -m644 include/ctdb.h $(DESTDIR)$(includedir)\n+\tinstall -m644 include/ctdb_private.h $(DESTDIR)$(includedir) # for samba3\n+\tinstall -m755 tools/events $(DESTDIR)$(etcdir)/ctdb\n+\tinstall -m755 tools/statd-callout $(DESTDIR)$(etcdir)/ctdb\n+\tinstall -m755 tools/events.d/samba $(DESTDIR)$(etcdir)/ctdb/events.d\n+\tinstall -m755 tools/events.d/nfslock $(DESTDIR)$(etcdir)/ctdb/events.d\n+\tinstall -m755 tools/onnode.ssh $(DESTDIR)$(bindir)\n+\tinstall -m755 tools/onnode.rsh $(DESTDIR)$(bindir)\n+\tln -sf $(DESTDIR)$(bindir)/onnode.ssh $(DESTDIR)$(bindir)/onnode\n \n test: all\n \ttests/run_tests.sh\n\n=== modified file 'packaging/RHEL/ctdb.spec'\n--- a/packaging/RHEL/ctdb.spec\t2007-06-01 10:54:26 +0000\n+++ b/packaging/RHEL/ctdb.spec\t2007-06-01 11:10:49 +0000\n@@ -9,12 +9,12 @@\n Epoch: 0\n License: GNU GPL version 2\n Group: System Environment/Daemons\n-URL: bzr://www.samba.org/~tridge/ctdb/\n+URL: http://ctdb.samba.org/\n \n Source: ctdb-%{version}.tar.bz2\n Source999: ctdb-setup.tar.bz2\n \n-Prereq: /sbin/chkconfig /bin/mktemp /usr/bin/killall\n+Prereq: /sbin/chkconfig /bin/mktemp /usr/bin/killall /usr/bin/nc\n Prereq: fileutils sed /etc/init.d\n \n Requires: initscripts >= 5.54-1\n@@ -66,17 +66,6 @@\n \n install -m644 setup/ctdb.sysconfig $RPM_BUILD_ROOT%{_sysconfdir}/sysconfig/ctdb\n install -m755 setup/ctdb.init $RPM_BUILD_ROOT%{initdir}/ctdb\n-install -m755 tools/events $RPM_BUILD_ROOT%{_sysconfdir}/ctdb/events\n-install -m755 tools/events.d/samba $RPM_BUILD_ROOT%{_sysconfdir}/ctdb/events.d/samba\n-install -m755 tools/events.d/nfslock $RPM_BUILD_ROOT%{_sysconfdir}/ctdb/events.d/nfslock\n-install -m755 tools/statd-callout $RPM_BUILD_ROOT%{_sysconfdir}/ctdb/statd-callout\n-install -m755 tools/onnode.ssh $RPM_BUILD_ROOT%{_bindir}\n-install -m755 tools/onnode.rsh $RPM_BUILD_ROOT%{_bindir}\n-ln -sf %{_bindir}/onnode.ssh $RPM_BUILD_ROOT%{_bindir}/onnode\n-\n-# unfortunately samba3 needs ctdb_private.h too\n-install -m644 include/ctdb_private.h $RPM_BUILD_ROOT%{_includedir}/ctdb_private.h\n-\n \n # Remove \"*.old\" files\n find $RPM_BUILD_ROOT -name \"*.old\" -exec rm -f {} \\;\n\n=== modified file 'packaging/RHEL/setup/ctdb.sysconfig'\n--- a/packaging/RHEL/setup/ctdb.sysconfig\t2007-06-01 03:50:18 +0000\n+++ b/packaging/RHEL/setup/ctdb.sysconfig\t2007-06-01 11:10:49 +0000\n@@ -42,16 +42,6 @@\n # the default is 0\n # DEBUGLEVEL=0\n \n-# use this to specify any local tcp ports to wait on before starting\n-# ctdb. Use 445 and 139 for Samba\n-# the default is not to wait for any local services\n-# CTDB_WAIT_TCP_PORTS=\"445 139\"\n-\n-# use this to specify any local directories to wait on before starting\n-# ctdb. You should list any critical Samba or NFS shared directories \n-# the default is not to wait for any local directories\n-# CTDB_WAIT_DIRECTORIES=\"/some/directory\"\n-\n # the shared directory where you want to put statd information on\n # which clients to notify on a NFS restart\n # there is no default\n\n"}