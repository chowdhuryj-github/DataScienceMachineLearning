{"category": "ham", "to_address": "ant@bankaktiengesellschaft.de", "from_address": "Jelmer Vernooij <jelmer@samba.org>", "subject": "Re: Segfault in \"profiles\" binary", "body": "Hi,\n\nOn Tue, 2007-06-26 at 13:38 +0200, ant@bankaktiengesellschaft.de wrote:\n> during the testing stage of an XP migration with roaming user profiles \n> which are currently hosted on an NT4 machine we've experienced a segfault \n> in the profiles binary.\n> \n> The segfault occurres during the rewriting stage of the user profiles to \n> achieve the algorithmic RID-UID mapping which samba has and NT not as we \n> already have Unix-UIDs for each and every user and to prevent permission \n> problems by not abiding to the RID=( (uid * 2) + 1000 ) rule of samba.\n> \n> Debugger output of the segfault follows:\n> \n> (gdb) set args -c S-1-5-21-596271630-1476544438-1821 -n \n> S-1-5-21-596271630-14765 44438-2175 ntuser.dat \n> (gdb) r \n> Starting program: /root/profiles -c S-1-5-21-596271630-1476544438-1821 \n> -n S-1-5- 21-596271630-1476544438-2175 ntuser.dat \n> Failed to read a valid object file image from memory. \n^^^^ I wonder where this error comes from - maybe the mmap profiles\ntries to do is failing?\n\n> Is anybody able to give some hints to track down this issue?\nCan you perhaps run profiles under valgrind and see if that reveals any\nerrors? \n\nvalgrind /root/profiles -c S-1-5-21-596271630-1476544438-1821 -n S-1-5-\n21-596271630-1476544438-2175 ntuser.dat \n\nCheers,\n\nJelmer\n\n-- \nJelmer Vernooij  - http://samba.org/~jelmer/\n\n"}