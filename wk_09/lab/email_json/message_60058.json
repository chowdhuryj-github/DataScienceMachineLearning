{"category": "ham", "to_address": "\"Markus Loecher\" <markus@insightfromdata.com>", "from_address": "\"Gabor Grothendieck\" <ggrothendieck@gmail.com>", "subject": "Re: [R] align() function missing in R ?", "body": "On 6/29/07, Markus Loecher  wrote:\n> Thank you for your responses, I should have given an example of the\n> functionality I am looking for, here are three typical scenarios that\n> I deal with a lot in my work:\n>\n> - a regular timeseries with lots of missing values that I want to\n> convert to the corresponding regular time series with mssing values\n> replaced by NAs, e.g.:\n>         x = timeSeries(c(0.5,0.2,0.3,0.4,0.3,0.2,0.3), pos =\n> c(1,2,5,8,9,12,14));\n>         x.align = align(x, pos = 1:14, method = \"NA\");\n> - a regular timeseries at a coarse scale which I want to linearly\n> interpolate to a finer time scale:\n>         x = ts(1:10, frequency = 4);\n>         x.align = align(x, frequency = 8, method = \"interp\")\n> - an irregular timeseries which I want to linearly interpolate to a\n> regular time grid:\n>         x = timeSeries(c(0.5,0.2,0.3,0.4,0.3,0.2,0.3), pos =\n> c(1,2.5,3.2,4.1,5.7,6.5,7.3));\n>         x.align = align(x, pos = 1:7, method = \"interp\");\n>\n> I am wondering how to easily code such a function using only window,\n> ts.union and ts.intersect.\n\nHere it is using zoo series:\n\n\nlibrary(zoo)\nx <- c(0.5, 0.2, 0.3, 0.4, 0.3, 0.2, 0.3)\n\nx1 <- zoo(x, c(1, 2, 5, 8, 9, 12, 14))\nas.zoo(as.ts(x1))\n\nx2 <- zooreg(1:10, frequency = 4)\nfrequency(x2) <- 8\nx2\n\nx3 <- zoo(x,  c(1, 2.5, 3.2, 4.1, 5.7, 6.5, 7.3))\ntt <- 1:7\nzoo(approx(time(x3), x3, tt)$y, tt)\n# or\ntt <- as.numeric(1:7) # can omit if warning in next line ok\nwindow(na.approx(cbind(x3, zoo(, tt))), tt)\n\nFor more on zoo:\n\nlibrary(zoo)\nvignette(\"zoo\")\n\n______________________________________________\nR-help@stat.math.ethz.ch mailing list\nhttps://stat.ethz.ch/mailman/listinfo/r-help\nPLEASE do read the posting guide http://www.R-project.org/posting-guide.html\nand provide commented, minimal, self-contained, reproducible code.\n\n"}