{"category": "ham", "to_address": "R-help <r-help@stat.math.ethz.ch>", "from_address": "Michael Toews <mwtoews@sfu.ca>", "subject": "[R] sequential for loop", "body": "Hi all,\n\nI'm usually comfortable using the *apply functions for vectorizing loops \nin R. However, my particular problem now is using it in a sequential \noperation, which uses values evaluated in an offset of the loop vector. \nHere is my example using a for loop approach:\n\ndat <- data.frame(year=rep(1970:1980,each=365),yday=1:365)\ndat$value <- sin(dat$yday*2*pi/365)+rnorm(nrow(dat),sd=0.5)\ndat$ca <- dat$cb <- 0 # consecutive above and below 0\n\nfor(n in 2:nrow(dat)){\n  if(dat$value[n] > 0)\n    dat$ca[n] <- dat$ca[n-1] + 1\n  else\n    dat$cb[n] <- dat$cb[n-1] + 1\n}\n\nI'm inquiring if there is a straightforward way to vectorize this (or a \nsimilar example) in R, since it gets rather slow with larger data \nframes. If there is no straightforward method, no worries.\n\nThanks in advance.\n+mt\n\n______________________________________________\nR-help@stat.math.ethz.ch mailing list\nhttps://stat.ethz.ch/mailman/listinfo/r-help\nPLEASE do read the posting guide http://www.R-project.org/posting-guide.html\nand provide commented, minimal, self-contained, reproducible code.\n\n"}