{"category": "ham", "to_address": "Volker.Lendecke@SerNet.DE", "from_address": "tridge@samba.org", "subject": "Re: ctdb shortcut locking", "body": "Volker,\n\n > And what about the situation where very many children are\n > waiting for a lock? The child sits in F_WRLCK with SETLKW,\n > it gets the lock, it has to free it by exiting. Then there's\n > a window where the lock is free, and I think it is far from\n > clear that the parent ever gets the chance to try the SETLK\n > because other children are sitting there in SETLKW. I might\n > be wrong, but I would like to understand that situation.\n\nyes, but it seems to be fine in practice. You can simulate N children\ncontending as fast as they can on one lock using the -n option to the\ntest prog. I'm pretty happy with how it performs, even though it can\nloop more than once in the most heavily contended case.\n\nCheers, Tridge\n\n"}