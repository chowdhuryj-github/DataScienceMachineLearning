{"category": "ham", "to_address": "beginners@perl.org", "from_address": "\"Adriano Ferreira\" <a.r.ferreira@gmail.com>", "subject": "Re: Run a block of sql commands using 'here document'", "body": "On 6/8/07, Martin Barth  wrote:\n> Hi,\n>\n> > I know that using 'Here Documents', we can output multiple lines. But is it\n> > possible to run a couple of commands?\n> >\n> > $s = qx [sqlplus user/paswd\\@schema < > select 2 from DUAL;\n> > exit\n> > ENDOFSQL];\n>\n> what do you think about that:\n>\n> open(DBI, \"| sqlplus user/passwd\\@schmea\");\n> then print DBI with a Here Document?\n>\n> that should work, shouldn't it?\n\nMartin's idea seems the way to go. You can abstract it via\n\nsub sqlplus {\n       my $param = shift;\n       my $script_text = shift;\n       open my $script, \"| sqlplus $param\" or die $!;\n       print $script $script_text;\n       close $script or die $!;\n}\n\nsqlplus(\"user/paswd@schema\", <<SCRIPT );\n select 2 from DUAL;\n exit\nSCRIPT\n\nAnother implementation could use File::Temp.\n\n\nsub sqlplus {\n       my $param = shift;\n       my $script_text = shift;\n       require File::Temp;\n       my ($fh, $filename) = File::Temp::tempfile;\n       print $fh $script_text;\n       close $fh;\n       system \"sqlplus $param \\@$tempfile\"\n}\n\n(untested)\n\n-- \nTo unsubscribe, e-mail: beginners-unsubscribe@perl.org\nFor additional commands, e-mail: beginners-help@perl.org\nhttp://learn.perl.org/\n\n\n"}