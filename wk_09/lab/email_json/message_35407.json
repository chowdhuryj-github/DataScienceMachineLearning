{"category": "ham", "to_address": "sugar@laptop.org", "from_address": "Simon McVittie <simon.mcvittie@collabora.co.uk>", "subject": "[sugar] [PATCH] services/presence/server_plugin: reformat,\n\tdocument signal definitions", "body": "-----BEGIN PGP SIGNED MESSAGE-----\nHash: SHA1\n\nI also have various cosmetic changes to server_plugin and\npresenceservice - removing trailing whitespace, wrapping long lines,\ninvoking logging more conventionally - which aren't really worth\nreviewing!\n\n- ---\n services/presence/server_plugin.py |   80 +++++++++++++++++++++++++-----------\n 1 files changed, 56 insertions(+), 24 deletions(-)\n\ndiff --git a/services/presence/server_plugin.py b/services/presence/server_plugin.py\nindex b7a40cd..fbb2662 100644\n- --- a/services/presence/server_plugin.py\n+++ b/services/presence/server_plugin.py\n@@ -101,30 +101,62 @@ class ServerPlugin(gobject.GObject):\n     to implement the PresenceService.\n     \"\"\"\n     __gsignals__ = {\n- -        'contact-online':  (gobject.SIGNAL_RUN_FIRST, gobject.TYPE_NONE,\n- -                             ([gobject.TYPE_PYOBJECT, gobject.TYPE_PYOBJECT])),\n- -        'contact-offline': (gobject.SIGNAL_RUN_FIRST, gobject.TYPE_NONE,\n- -                             ([gobject.TYPE_PYOBJECT])),\n- -        'status':          (gobject.SIGNAL_RUN_FIRST, gobject.TYPE_NONE,\n- -                             ([gobject.TYPE_INT, gobject.TYPE_INT])),\n- -        'avatar-updated':  (gobject.SIGNAL_RUN_FIRST, gobject.TYPE_NONE,\n- -                             ([gobject.TYPE_PYOBJECT, gobject.TYPE_PYOBJECT])),\n- -        'buddy-properties-changed':  (gobject.SIGNAL_RUN_FIRST, gobject.TYPE_NONE,\n- -                             ([gobject.TYPE_PYOBJECT, gobject.TYPE_PYOBJECT])),\n- -        'buddy-activities-changed':  (gobject.SIGNAL_RUN_FIRST, gobject.TYPE_NONE,\n- -                             ([gobject.TYPE_PYOBJECT, gobject.TYPE_PYOBJECT])),\n- -        'activity-invitation': (gobject.SIGNAL_RUN_FIRST, gobject.TYPE_NONE,\n- -                             ([gobject.TYPE_PYOBJECT])),\n- -        'private-invitation':  (gobject.SIGNAL_RUN_FIRST, gobject.TYPE_NONE,\n- -                             ([gobject.TYPE_PYOBJECT])),\n- -        'activity-properties-changed':  (gobject.SIGNAL_RUN_FIRST, gobject.TYPE_NONE,\n- -                             ([gobject.TYPE_PYOBJECT, gobject.TYPE_PYOBJECT])),\n- -        'activity-shared':   (gobject.SIGNAL_RUN_FIRST, gobject.TYPE_NONE,\n- -                               ([gobject.TYPE_PYOBJECT, gobject.TYPE_PYOBJECT,\n- -                                 gobject.TYPE_PYOBJECT, gobject.TYPE_PYOBJECT])),\n- -        'activity-joined':   (gobject.SIGNAL_RUN_FIRST, gobject.TYPE_NONE,\n- -                               ([gobject.TYPE_PYOBJECT, gobject.TYPE_PYOBJECT,\n- -                                 gobject.TYPE_PYOBJECT, gobject.TYPE_PYOBJECT]))\n+        'contact-online':\n+            # Contact has come online and we've discovered all their buddy\n+            # properties.\n+            # args: contact handle: int; dict {name: str => property: object}\n+            (gobject.SIGNAL_RUN_FIRST, None, [object, object]),\n+        'contact-offline':\n+            # Contact has gone offline.\n+            # args: contact handle\n+            (gobject.SIGNAL_RUN_FIRST, None, [object]),\n+        'status':\n+            # Connection status changed.\n+            # args: status, reason as for Telepathy StatusChanged\n+            (gobject.SIGNAL_RUN_FIRST, None, [int, int]),\n+        'avatar-updated':\n+            # Contact's avatar has changed\n+            # args: contact handle: int; icon data: str\n+            (gobject.SIGNAL_RUN_FIRST, None, [object, object]),\n+        'buddy-properties-changed':\n+            # OLPC buddy properties changed; as for PropertiesChanged\n+            # args:\n+            #   contact handle: int\n+            #   properties: dict {name: str => property: object}\n+            # FIXME: are these all the properties or just those that changed?\n+            (gobject.SIGNAL_RUN_FIRST, None, [object, object]),\n+        'buddy-activities-changed':\n+            # OLPC activities changed\n+            # args:\n+            #   contact handle: int\n+            #   activity IDs: list of str\n+            (gobject.SIGNAL_RUN_FIRST, None, [object, object]),\n+        'activity-invitation':\n+            # We were invited to join an activity\n+            # args: activity ID: str\n+            (gobject.SIGNAL_RUN_FIRST, None, [object]),\n+        'private-invitation':\n+            # We were invited to join a chat or a media call\n+            # args: channel object path\n+            (gobject.SIGNAL_RUN_FIRST, None, [object]),\n+        'activity-properties-changed':\n+            # An activity's properties changed; as for\n+            # ActivityPropertiesChanged\n+            # args: activity ID: str; properties: dict { str => object }\n+            # FIXME: are these all the properties or just those that changed?\n+            (gobject.SIGNAL_RUN_FIRST, None, [object, object]),\n+        'activity-shared':\n+            # share_activity() succeeded\n+            # args:\n+            #   activity ID: str\n+            #   channel: telepathy.client.Channel, or None on failure\n+            #   error: None, or Exception on failure\n+            #   userdata as passed to share_activity\n+            (gobject.SIGNAL_RUN_FIRST, None, [object, object, object, object]),\n+        'activity-joined':\n+            # join_activity() succeeded\n+            # args: as for activity-shared\n+            (gobject.SIGNAL_RUN_FIRST, None, [object, object, object, object]),\n     }\n \n     def __init__(self, registry, owner):\n- -- \n1.5.2-rc3.GIT\n\n-----BEGIN PGP SIGNATURE-----\nVersion: GnuPG v1.4.6 (GNU/Linux)\nComment: OpenPGP key: http://www.pseudorandom.co.uk/2003/contact/ or pgp.net\n\niD8DBQFGVXwtWSc8zVUw7HYRAiOPAKDWkTiMdQL+zfi1LQWHmgeoXmJVqACfYD2K\nDwCkFPAP67tr9PLNwBxXhPo=\n=/i13\n-----END PGP SIGNATURE-----\n_______________________________________________\nSugar mailing list\nSugar@laptop.org\nhttp://mailman.laptop.org/mailman/listinfo/sugar\n\n"}