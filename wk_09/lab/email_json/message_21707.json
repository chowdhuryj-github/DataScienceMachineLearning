{"category": "ham", "to_address": "Perl Beginners <beginners@perl.org>", "from_address": "\"John W. Krahn\" <krahnj@telus.net>", "subject": "Re: crypt() and /etc/shadow entries do not match?", "body": "jbuburuz@sce.carleton.ca wrote:\n> Hey folks,\n\nHello,\n\n> I have been using crypt for a while. No problems until recently.\n> \n> Problem crypt does not return a hash that matches getpwnam(). I have been \n> using crypt for a long time without any problems.\n> \n> Bellow is test script I have using for testing hashs. The output of the\n> script bellow is as follows(Note passwd  for user \"test\" is \"hello\"):\n> \n> linux:/tmp# ./perltest.pl\n> Enter a string to encrypt with DES: hello\n> Enter two random alphanumerics to be used as a salt:n$!\n> \n> \"hello\" encrypted using the perl crypt() function and salt \"$!\" returns:\n> $!8VHq6xLWgQc  $1$70w840Bc$Hkmqjlz8N7abM2SGlLm0T1\n> \n> crypt returns= $!8VHq6xLWgQc\n> hash value returned by getpwnam= $1$70w840Bc$Hkmqjlz8N7abM2SGlLm0T1\n> \n> I have tested crypt() on debian, and redhat. Same problems. The has values\n> do not match each other.\n> \n> Please help, any suggestions.\n> \n> thanks\n> \n> jerry\n> \n> #########################################################################\n> Perl script bellow\n> #########################################################################\n> #!/usr/bin/perl\n> \n> print \"Enter a string to encrypt with DES:n\";\n> chomp(my $string = ); #Take the input from the user and remove the n\n> \n> print \"Enter two random alphanumerics to be used as a salt:n\";\n> chomp(my $salt = );\n> \n> my $encrypted_string = crypt($string,$salt); #take the string and the salt\n> and put through crypt()\n> \n> $pass = (getpwnam(test))[1];\n\nYou need to use the old password as the salt, so change that to:\n\nmy $pass = ( getpwnam 'test' )[ 1 ];\n\nmy $encrypted_string = crypt $string, $pass;\n\n\n> print qq~\n> \"$string\" encrypted using the perl crypt() function and salt \"$salt\" returns:\n> $encrypted_string  $pass\n> ~;\n\n\n\nJohn\n-- \nPerl isn't a toolbox, but a small machine shop where you can special-order\ncertain sorts of tools at low cost and in short order.       -- Larry Wall\n\n-- \nTo unsubscribe, e-mail: beginners-unsubscribe@perl.org\nFor additional commands, e-mail: beginners-help@perl.org\nhttp://learn.perl.org/\n\n\n"}