{"category": "ham", "to_address": "samba-cvs@samba.org", "from_address": "obnox@samba.org", "subject": "svn commit: samba r22739 - in branches: SAMBA_3_0/source/include\n\tSAMBA_3_0_26/source/include", "body": "Author: obnox\nDate: 2007-05-07 11:25:00 +0000 (Mon, 07 May 2007)\nNew Revision: 22739\n\nWebSVN: http://websvn.samba.org/cgi-bin/viewcvs.cgi?view=rev&root=samba&rev=22739\n\nLog:\nMake prototypes in include/util_tdb.h of some functions from\nlib/util_tdb.c exactly match the definitions. (There were\nsome [u]int_32_t instead of [u]int32, which made a gcc 2.95\non an old AIX without system [u]int32[_t] types complain...)\n\n\nModified:\n   branches/SAMBA_3_0/source/include/util_tdb.h\n   branches/SAMBA_3_0_26/source/include/util_tdb.h\n\n\nChangeset:\nModified: branches/SAMBA_3_0/source/include/util_tdb.h\n===================================================================\n--- branches/SAMBA_3_0/source/include/util_tdb.h\t2007-05-07 11:04:38 UTC (rev 22738)\n+++ branches/SAMBA_3_0/source/include/util_tdb.h\t2007-05-07 11:25:00 UTC (rev 22739)\n@@ -43,7 +43,7 @@\n \n TDB_LIST_NODE *tdb_search_keys(struct tdb_context*, const char*);\n void tdb_search_list_free(TDB_LIST_NODE*);\n-int32_t tdb_change_int32_atomic(struct tdb_context *tdb, const char *keystr, int32_t *oldval, int32_t change_val);\n+int32 tdb_change_int32_atomic(struct tdb_context *tdb, const char *keystr, int32 *oldval, int32 change_val);\n int tdb_lock_bystring(struct tdb_context *tdb, const char *keyval);\n int tdb_lock_bystring_with_timeout(TDB_CONTEXT *tdb, const char *keyval,\n \t\t\t\t   int timeout);\n@@ -51,10 +51,10 @@\n int tdb_read_lock_bystring_with_timeout(TDB_CONTEXT *tdb, const char *keyval,\n \t\t\t\t\tunsigned int timeout);\n void tdb_read_unlock_bystring(TDB_CONTEXT *tdb, const char *keyval);\n-int32_t tdb_fetch_int32(struct tdb_context *tdb, const char *keystr);\n-int tdb_store_uint32(struct tdb_context *tdb, const char *keystr, uint32_t value);\n-int tdb_store_int32(struct tdb_context *tdb, const char *keystr, int32_t v);\n-int tdb_fetch_uint32(struct tdb_context *tdb, const char *keystr, uint32_t *value);\n+int32 tdb_fetch_int32(struct tdb_context *tdb, const char *keystr);\n+int tdb_store_uint32(struct tdb_context *tdb, const char *keystr, uint32 value);\n+int tdb_store_int32(struct tdb_context *tdb, const char *keystr, int32 v);\n+int tdb_fetch_uint32(struct tdb_context *tdb, const char *keystr, uint32 *value);\n int tdb_traverse_delete_fn(struct tdb_context *the_tdb, TDB_DATA key, TDB_DATA dbuf,\n                      void *state);\n int tdb_store_bystring(struct tdb_context *tdb, const char *keystr, TDB_DATA data, int flags);\n@@ -69,7 +69,7 @@\n TDB_DATA string_term_tdb_data(const char *string);\n int tdb_trans_store(struct tdb_context *tdb, TDB_DATA key, TDB_DATA dbuf,\n \t\t    int flag);\n-int tdb_change_uint32_atomic(TDB_CONTEXT *tdb, const char *keystr,\n+BOOL tdb_change_uint32_atomic(TDB_CONTEXT *tdb, const char *keystr,\n \t\t\t      uint32 *oldval, uint32 change_val);\n int tdb_chainlock_with_timeout( TDB_CONTEXT *tdb, TDB_DATA key,\n \t\t\t\tunsigned int timeout);\n\nModified: branches/SAMBA_3_0_26/source/include/util_tdb.h\n===================================================================\n--- branches/SAMBA_3_0_26/source/include/util_tdb.h\t2007-05-07 11:04:38 UTC (rev 22738)\n+++ branches/SAMBA_3_0_26/source/include/util_tdb.h\t2007-05-07 11:25:00 UTC (rev 22739)\n@@ -43,7 +43,7 @@\n \n TDB_LIST_NODE *tdb_search_keys(struct tdb_context*, const char*);\n void tdb_search_list_free(TDB_LIST_NODE*);\n-int32_t tdb_change_int32_atomic(struct tdb_context *tdb, const char *keystr, int32_t *oldval, int32_t change_val);\n+int32 tdb_change_int32_atomic(struct tdb_context *tdb, const char *keystr, int32 *oldval, int32 change_val);\n int tdb_lock_bystring(struct tdb_context *tdb, const char *keyval);\n int tdb_lock_bystring_with_timeout(TDB_CONTEXT *tdb, const char *keyval,\n \t\t\t\t   int timeout);\n@@ -51,10 +51,10 @@\n int tdb_read_lock_bystring_with_timeout(TDB_CONTEXT *tdb, const char *keyval,\n \t\t\t\t\tunsigned int timeout);\n void tdb_read_unlock_bystring(TDB_CONTEXT *tdb, const char *keyval);\n-int32_t tdb_fetch_int32(struct tdb_context *tdb, const char *keystr);\n-int tdb_store_uint32(struct tdb_context *tdb, const char *keystr, uint32_t value);\n-int tdb_store_int32(struct tdb_context *tdb, const char *keystr, int32_t v);\n-int tdb_fetch_uint32(struct tdb_context *tdb, const char *keystr, uint32_t *value);\n+int32 tdb_fetch_int32(struct tdb_context *tdb, const char *keystr);\n+int tdb_store_uint32(struct tdb_context *tdb, const char *keystr, uint32 value);\n+int tdb_store_int32(struct tdb_context *tdb, const char *keystr, int32 v);\n+int tdb_fetch_uint32(struct tdb_context *tdb, const char *keystr, uint32 *value);\n int tdb_traverse_delete_fn(struct tdb_context *the_tdb, TDB_DATA key, TDB_DATA dbuf,\n                      void *state);\n int tdb_store_bystring(struct tdb_context *tdb, const char *keystr, TDB_DATA data, int flags);\n@@ -68,7 +68,7 @@\n TDB_DATA string_tdb_data(const char *string);\n int tdb_trans_store(struct tdb_context *tdb, TDB_DATA key, TDB_DATA dbuf,\n \t\t    int flag);\n-int tdb_change_uint32_atomic(TDB_CONTEXT *tdb, const char *keystr,\n+BOOL tdb_change_uint32_atomic(TDB_CONTEXT *tdb, const char *keystr,\n \t\t\t      uint32 *oldval, uint32 change_val);\n int tdb_chainlock_with_timeout( TDB_CONTEXT *tdb, TDB_DATA key,\n \t\t\t\tunsigned int timeout);\n\n"}