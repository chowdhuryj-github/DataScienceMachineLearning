{"category": "ham", "to_address": "psomogyi@gamax.hu", "from_address": "James Peach <jpeach@samba.org>", "subject": "Re: ctdb debug vasprintf memory overwrite in ib", "body": "On 20/04/2007, at 4:09 AM, Peter Somogyi wrote:\n\n[snip]\n\n> Picking another vasprintf implementation like this solves my problem:\n>\n> int vasprintf(char **ptr, const char *format, va_list ap)\n> {\n>    int ret;\n>    va_list tmp_ap;\n>\n>    va_copy(tmp_ap, ap);\n>    ret = vsnprintf(NULL, 0, format, tmp_ap);\n\nNote that you can't rely on this returning the number of characters  \nthat would have been output if the buffer were large enough until C99  \nor UNIX98 IIRC.\n\n--\nJames Peach | jpeach@samba.org\n\n"}