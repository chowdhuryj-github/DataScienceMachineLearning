{"category": "ham", "to_address": "Mathew Snyder <theillien@yahoo.com>", "from_address": "Mathew Snyder <theillien@yahoo.com>", "subject": "Re: using a homemade perl module", "body": "Brad Baxter wrote:\n> On Jun 14, 10:22 pm, theill...@yahoo.com (Mathew Snyder) wrote:\n>> I fixed all of the bugs save one.  I can't access any of my subroutines without\n>> explicitly using it with dates_emails::subroutine.  I was under the impression\n>> that if I was exporting them all from the module, the subroutine would be found\n>> regardless.\n>>\n>> package dates_emails;\n>> require Exporter;\n>> use strict;\n>>\n>> our @ISA         = qw(Exporter);\n>> our @EXPORT      = qw(startDate, endDate, searchStart, searchEnd);\n>> our @EXPORT_OK   = qw($emailTo, $emailFrom, $emailBcc);\n>> our %EXPORT_TAGS = {\n>>                 dates  => [qw(startDate, endDate, searchStart, searchEnd)],\n>>                 emails => [qw($emailTo, $emailFrom, $emailBcc)],\n>>                 };\n>> our $VERSION     = '1';\n>>\n>> It doesn't even work with 'use dates_emails(\"dates\");'.  I get an error that\n>> dates is not an exported subroutine.  I don't understand what I'm not doing\n>> right as I've got the %EXPORT_TAGS hash set up, I've got the @EXPORTS array set\n>> up.  I've got this in my opening block:\n>> use lib '/usr/local/bin/lib/';\n>> use dates_emails;\n> \n>> use strict;\n> \n> add:\n> \n> use warnings;\n> \n> ...\n> Possible attempt to separate words with commas at dates_emails.pm line\n> 6.\n> Possible attempt to separate words with commas at dates_emails.pm line\n> 7.\n> Possible attempt to separate words with commas at dates_emails.pm line\n> 9.\n> Possible attempt to separate words with commas at dates_emails.pm line\n> 10.\n> Reference found where even-sized list expected at dates_emails.pm line\n> 8.\n> \n> That may not be your whole problem, but it might get you a little\n> farther.\n> \n> --\n> Brad\n> \n> \n\nI need to revisit this.\n\nI've broken things down a bit and separated the email addresses from the date\nsubs and now have two files under /usr/local/bin/lib/Reports: Dates.pm and\nEmails.pm.\n\n*Dates.pm:*\n\npackage Dates;\nrequire Exporter;\n\nuse strict;\nuse warnings;\n\nour @ISA                 = qw(Exporter);\nour @EXPORT      = qw(startDate endDate searchStart searchEnd);\nour $VERSION     = '1';\n\n# Declare our global variables\nmy (@date, @days, @months, @years, @searchDate);\nmy $time = time();\nour (@searchDate, $startDate, $endDate, $searchStart, $searchEnd);\n\nsub getDates {\n        for (1 .. 7) {\n                $time -= 24*60*60;\n                @date = (localtime($time))[3 .. 5];\n                push @days, (sprintf '%02d', $date[0]);\n                push @months,(sprintf '%02d',$date[1] + 1);\n                push @years, $date[2] + 1900;\n                return;\n        }\n}\n\nsub searchDate {\n        getDates();\n        push @searchDate, join \"-\", ($date[2] + 1900), (sprintf '%02d',$date[1]\n+ 1),\n(sprintf '%02d', $date[0]);\n        return \\@searchDate;\n}\n\nsub startDate {\n        getDates();\n        $startDate   = join \"-\", $months[$#months], $days[$#days], $years[$#years];\n        return $startDate;\n}\n\nsub endDate {\n        getDates();\n        $endDate     = join \"-\", $months[0], $days[0], $years[0];\n        return $endDate;\n}\n\nsub searchStart {\n        getDates();\n        $searchStart = join \"-\", $years[$#years], $months[$#months], $days[$#days];\n        return $searchStart;\n}\n\nsub searchEnd {\n        getDates();\n        $searchEnd   = join \"-\", $years[0], $months[0], $days[0];\n        return $searchEnd;\n}\n\nreturn 1;\n\nThe simple thing I'm trying to do to test all of this is:\n\n#!/usr/bin/perl\n\n###################################\n#  Title:    module_test.pl\n#  Author:   Mathew Snyder\n#  Reliease: 0.1\n#  Date:     June 13, 2007\n###################################\n\nuse warnings;\nuse strict;\nuse lib \"/usr/local/bin/lib\";\nuse Reports::Dates;\n\nmy $today = startDate();\n\nprint $today . \"\\n\";\n\nDoing things this way gives me an error telling me that &main::startDate isn't\ndefined.  However, if I use 'my $today = Dates::startDate;' it works.  I'm\nconfused since I told it to 'use Reports::Dates;'.\n\nAnyone have any insight on why this isn't working the way I've been told it should?\n\nThanks,\nMathew\n\n-- \nTo unsubscribe, e-mail: beginners-unsubscribe@perl.org\nFor additional commands, e-mail: beginners-help@perl.org\nhttp://learn.perl.org/\n\n\n"}