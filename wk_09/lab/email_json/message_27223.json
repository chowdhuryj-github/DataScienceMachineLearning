{"category": "ham", "to_address": "Beginners List <beginners@perl.org>", "from_address": "\"Mumia W.\" <mumia.w.18.spam+nospam@earthlink.net>", "subject": "Re: regexp", "body": "On 05/10/2007 12:54 PM, oryann9 wrote:\n> [...]\n> The strings I need out of this are:\n> \n> msgagt=ESM_WMB_AIX\n> \n> sec_id=Sec_id\n> \n> severity=Low\n> \n> msgnode=qwmbap01.cardinalhealth.net\n> \n> utc={2007-04-26 18:01:59.472+00:00}\n> \n> om={\n> \n> UID=3a7affd6-f420-11db-80b1-000000000000\n> \n> AlertCode=AEM001\n> \n> AlertType=AEM-default\n> \n> AppName=AEM-CommonService2\n> \n> Message=5004:An error has been reported by the\n> BIPXML4C component.:XML\n> \n> }\n> \n> [...]\n\nYou could try it this way:\n\n#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse Data::Dumper;\n\nmy $data = do { local $/;  };\n\nmy $regex = '\n     ((?:msgagt|sec_id|severity|msgnode)=[\\w.]+)\n     |\n     ((?:utc|om)={[^}]+})\n';\n\nmy @gotten = grep defined, $data =~ m/$regex/gx;\n@gotten = map {\n     s/{([^}]+)}/\n         my $value = $1;\n         $value =~ s{\\s+}{}g;\n         $value =~ s{,}{\\n}g;\n         $value;\n     /e;\n     $_;\n} @gotten;\nprint Dumper(\\@gotten);\n\n\n__DATA__\nNode:          dudbqa02 Message group: MoM_OpC_ADM-m-s\nApplication:   OGTP Object:        syslog Severity:\n   Critical Text:          WebSph\n\nere Broker v6003[2998366]:\n(QWMB01.EG500)[8225]BIP2951I: Event generated by user\ncode. Additional information :\n'msgagt=ESM_WMB_AIX,sec_id=Sec\n\n_id,severity=Low,msgnode=qwmbap01.cardinalhealth.net,utc={2007-04-26\n18:01:59.472+00:00},om={UID=3a7affd6-f420-11db-80b1-000000000000,AlertCod\n\ne=AEM001,AlertType=AEM-default,AppName=AEM-CommonService2,Message=5004:An\nerror has been reported by the BIPXML4C\ncomponent.:XML}' 'MS_Alert_E\n\nSM_Integrator.InsertToSYSLOG' '{2}' '{3}' '{4}' '{5}'\n'{6}' '{7}' '{8}' '{9}' :\nQWMB01.1aef50ec-1001-0000-0080-dae5df22a0ad:\n/build/S600_P/src\n\n/DataFlowEngine/ImbRdl/ImbRdlThrowExceptionStatements.cpp:\n158: SqlThrowExceptionStatement::execute:\nComIbmComputeNode: MS_Alert_ESM_Integrato\n\nr#FCMComposite_1_2,cma={Location=Not_found,BusUnit=Not_found}\n\n__HTH__\n\n\n-- \nTo unsubscribe, e-mail: beginners-unsubscribe@perl.org\nFor additional commands, e-mail: beginners-help@perl.org\nhttp://learn.perl.org/\n\n\n"}