{"category": "ham", "to_address": "\"Erik Iverson\" <iverson@biostat.wisc.edu>,\n   \"Mark (IED) Leeds\" <Mark.Leeds@morganstanley.com>", "from_address": "\"Horace Tso\" <Horace.Tso@pgn.com>", "subject": "Re: [R] Imputing missing values in time series", "body": "Mark, thanks for the tips. I thought you financial folks must have run into things like these before. Just wonder why this problem wasn't asked more often on this list.\n\nH.\n\n\n>>> \"Leeds, Mark (IED)\"  6/22/2007 12:16 PM >>>\nI have a function that does this type of thing but it works off a pure\nvector so it wouldn have to be modified.\nIf you make your object a zoo object, the that object has many functions\nassociated with it and na.locf would\nDo what you need, I think.\n\n\n-----Original Message-----\nFrom: r-help-bounces@stat.math.ethz.ch \n[mailto:r-help-bounces@stat.math.ethz.ch] On Behalf Of Erik Iverson\nSent: Friday, June 22, 2007 3:02 PM\nTo: Horace Tso\nCc: r-help@stat.math.ethz.ch \nSubject: Re: [R] Imputing missing values in time series\n\nI think my example should work for you, but I couldn't think of a way to\ndo this without an interative while loop.\n\ntest <- c(1,2,3,NA,4,NA,NA,5,NA,6,7,NA)\n\nwhile(any(is.na(test)))\ntest[is.na(test)] <- test[which(is.na(test))-1]\n\n  test\n  [1] 1 2 3 3 4 4 4 5 5 6 7 7\n\nHorace Tso wrote:\n> Folks,\n> \n> This must be a rather common problem with real life time series data \n> but I don't see anything in the archive about how to deal with it. I \n> have a time series of natural gas prices by flow date. Since gas is \n> not traded on weekends and holidays, I have a lot of missing values,\n> \n> FDate\tPrice\n> 11/1/2006\t6.28\n> 11/2/2006\t6.58\n> 11/3/2006\t6.586\n> 11/4/2006\t6.716\n> 11/5/2006\tNA\n> 11/6/2006\tNA\n> 11/7/2006\t6.262\n> 11/8/2006\t6.27\n> 11/9/2006\t6.696\n> 11/10/2006\t6.729\n> 11/11/2006\t6.487\n> 11/12/2006\tNA\n> 11/13/2006\tNA\n> 11/14/2006\t6.725\n> 11/15/2006\t6.844\n> 11/16/2006\t6.907\n>  \n> What I would like to do is to fill the NAs with the price from the \n> previous date * gas used during holidays is purchased from the week \n> before. Though real simple, I wonder if there is a function to perform\n\n> this task. Some of the imputation functions I'm aware of (eg. impute, \n> transcan in Hmisc) seem to deal with completely different problems.\n> \n> 2.5.0/Windows XP\n> \n> Thanks in advance.\n> \n> HT\n> \n> ______________________________________________\n> R-help@stat.math.ethz.ch mailing list\n> https://stat.ethz.ch/mailman/listinfo/r-help \n> PLEASE do read the posting guide \n> http://www.R-project.org/posting-guide.html \n> and provide commented, minimal, self-contained, reproducible code.\n\n______________________________________________\nR-help@stat.math.ethz.ch mailing list\nhttps://stat.ethz.ch/mailman/listinfo/r-help \nPLEASE do read the posting guide\nhttp://www.R-project.org/posting-guide.html \nand provide commented, minimal, self-contained, reproducible code.\n--------------------------------------------------------\n\nThis is not an offer (or solicitation of an offer) to buy/se...{{dropped}}\n\n______________________________________________\nR-help@stat.math.ethz.ch mailing list\nhttps://stat.ethz.ch/mailman/listinfo/r-help\nPLEASE do read the posting guide http://www.R-project.org/posting-guide.html\nand provide commented, minimal, self-contained, reproducible code.\n\n"}