{"category": "ham", "to_address": "Simon Pickett <S.Pickett@exeter.ac.uk>", "from_address": "Gavin Simpson <gavin.simpson@ucl.ac.uk>", "subject": "Re: [R] how to be clever with princomp?", "body": "On Fri, 2007-04-27 at 12:58 +0100, Simon Pickett wrote:\n> Hi all,\n> \n> I have been using princomp() recently, its very useful indeed, but I have\n> a question about how to specify the rows of data you want it to choose.\n> \n> I have a set of variables relating to bird characteristics and I have been\n> using princomp to produce PC scores from these.\n> \n> However since I have multiple duplicate entries per individual (each bird\n> had a varying number of chicks), I only want princomp to treat each\n> individual bird as the sample and not include all the duplicates. Then I\n> want to replicate the pc scores for all the duplicated rows for that\n> individual.\n> \n> Any idea how to do this?\n\n## example data using the vegan package\nrequire(vegan)\ndata(varespec)\n## duplicate some rows\nvare2 <- varespec\nvare2 <- rbind(vare2, varespec[sample(nrow(varespec), 50, replace =\nTRUE), ])\n## build the model using prcomp - it is better - on the original data\n## without duplicates\nmod <- prcomp(varespec, centre = TRUE, scale. = TRUE)\n## predict for full matrix inc duplicated rows\npred <- predict(mod, vare2)\n\nTakes 0.005 seconds on my machine. So get a subset of your data without\nthe duplicates, then use the predict method for prcomp.\nSee ?predict.prcomp.\n\nIs that what you wanted?\n\nG\n\n> \n> Up to now I have been using princomp to only select the entries which are\n> not duplicated which is easy, but the difficult bit is the programming to\n> duplicate the pc scores across the entries for each individual.\n> \n> (I developed something that worked but it takes about 5 minutes to run!)\n> \n> Thanks for all your help,\n> \n> very much appreciated,\n> \n> Simon.\n> \n> \n> \n> \n> Simon Pickett\n> PhD student\n> Centre For Ecology and Conservation\n> Tremough Campus\n> University of Exeter in Cornwall\n> TR109EZ\n> Tel 01326371852\n> \n> ______________________________________________\n> R-help@stat.math.ethz.ch mailing list\n> https://stat.ethz.ch/mailman/listinfo/r-help\n> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html\n> and provide commented, minimal, self-contained, reproducible code.\n-- \n%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%\n Gavin Simpson                 [t] +44 (0)20 7679 0522\n ECRC, UCL Geography,          [f] +44 (0)20 7679 0565\n Pearson Building,             [e] gavin.simpsonATNOSPAMucl.ac.uk\n Gower Street, London          [w] http://www.ucl.ac.uk/~ucfagls/\n UK. WC1E 6BT.                 [w] http://www.freshwaters.org.uk\n%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%\n\n______________________________________________\nR-help@stat.math.ethz.ch mailing list\nhttps://stat.ethz.ch/mailman/listinfo/r-help\nPLEASE do read the posting guide http://www.R-project.org/posting-guide.html\nand provide commented, minimal, self-contained, reproducible code.\n\n"}