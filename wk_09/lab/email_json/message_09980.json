{"category": "ham", "to_address": "samba-technical@lists.samba.org", "from_address": "\"Carlos Eduardo Pedroza Santiviago\" <segfault@core-dumped.org>", "subject": "Dumping core?", "body": "Hi, i'm trying to get a core dump of smbd processes, it says in log it\nwill dump the core, but nothing happens. I've made\n/var/log/samba/cores/smbd 777 and still got no cores:\n\n[2007/04/19 12:06:26, 2] passdb/pdb_ldap.c:init_group_from_ldap(2140)\n  init_group_from_ldap: Entry found for group: 514\n[2007/04/19 12:06:26, 2] passdb/pdb_ldap.c:init_group_from_ldap(2140)\n  init_group_from_ldap: Entry found for group: 512\n[2007/04/19 12:06:30, 0] lib/fault.c:fault_report(41)\n  ===============================================================\n[2007/04/19 12:06:30, 0] lib/fault.c:fault_report(42)\n  INTERNAL ERROR: Signal 6 in pid 6328 (3.0.24-2.8-1217-SUSE-CODE10)\n  Please read the Trouble-Shooting section of the Samba3-HOWTO\n[2007/04/19 12:06:30, 0] lib/fault.c:fault_report(44)\n\n  From: http://www.samba.org/samba/docs/Samba3-HOWTO.pdf\n[2007/04/19 12:06:30, 0] lib/fault.c:fault_report(45)\n  ===============================================================\n[2007/04/19 12:06:30, 0] lib/util.c:smb_panic(1599)\n  PANIC (pid 6328): internal error\n[2007/04/19 12:06:30, 0] lib/util.c:log_stack_trace(1706)\n  BACKTRACE: 25 stack frames:\n   #0 /usr/sbin/smbd(log_stack_trace+0x40) [0x826b4c0]\n   #1 /usr/sbin/smbd(smb_panic+0x60) [0x826b5f0]\n   #2 /usr/sbin/smbd [0x8251ad4]\n   #3 [0x100374]\n   #4 [0xff8f3dd8]\n   #5 /lib/power5/libc.so.6(abort+0x240) [0x792e460]\n   #6 /usr/sbin/smbd [0x827231c]\n   #7 /usr/sbin/smbd(talloc_steal+0x4c) [0x827266c]\n   #8 /usr/sbin/smbd(lookup_sids+0x2f8) [0x82251d8]\n   #9 /usr/sbin/smbd [0x814a7b8]\n   #10 /usr/sbin/smbd(_lsa_lookup_sids+0x1b8) [0x814b0e8]\n   #11 /usr/sbin/smbd [0x8143454]\n   #12 /usr/sbin/smbd(api_rpcTNP+0x1b8) [0x81a7e28]\n   #13 /usr/sbin/smbd(api_pipe_request+0x1ac) [0x81a840c]\n   #14 /usr/sbin/smbd [0x81a3458]\n   #15 /usr/sbin/smbd [0x81a398c]\n   #16 /usr/sbin/smbd(write_to_pipe+0x94) [0x81a2184]\n   #17 /usr/sbin/smbd [0x8099e88]\n   #18 /usr/sbin/smbd [0x809a474]\n   #19 /usr/sbin/smbd(reply_trans+0x62c) [0x809ab7c]\n   #20 /usr/sbin/smbd [0x80ef0b4]\n   #21 /usr/sbin/smbd(smbd_process+0x6f0) [0x80f02d0]\n   #22 /usr/sbin/smbd(main+0x8f8) [0x83149d8]\n   #23 /lib/power5/libc.so.6 [0x7914810]\n   #24 /lib/power5/libc.so.6 [0x7914a5c]\n[2007/04/19 12:06:30, 0] lib/fault.c:dump_core(173)\n  dumping core in /var/log/samba/cores/smbd\n[2007/04/19 12:06:30, 0] lib/util_sock.c:read_data(534)\n  read_data: read failure for 4 bytes to client 172.26.20.117. Error =\nConnection reset by peer\n\n\ndrwxrwxrwx 2 root root 4096 Apr 19 12:05 /var/log/samba/cores/smbd\n\nCan anyone give me a clue?\n\nthanks,\n-- \nCarlos Eduardo Pedroza Santiviago\n\n"}