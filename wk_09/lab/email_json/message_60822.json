{"category": "ham", "to_address": "Andrew Bartlett <abartlet@samba.org>", "from_address": "tridge@samba.org", "subject": "Re: Samba4 MMC Write Support", "body": "Andrew,\n\n > [SYSVOL] shouldn't be our private dir, but say /usr/local/samba/sysvol. \n\nactually, I wonder if we shouldn't make [sysvol] point by default into\none of the standard directories (like where we place our long term tdb\ndatabases). It should remain fairly small, and is really config\ninformation, not user data.\n\n > Perhaps just check the silly things - do the directories exist, and do\n > you have access?\n\nHere is a (very brief) howto:\n\n1) you need to create the right directories. Run this command:\n\n     ldbsearch -H $PREFIX/private/sam.ldb objectClass=groupPolicyContainer gPCFileSysPath\n\n  That will point you at a UNC path with a GUID in it. You can edit\n  that path using ldbedit, or create a share to match that path. \n\n  Within that path you need to create subdirectories called Machine\n  and User. \n\n2) use gpmc.msc and edit your policies, connected as administrator\n\n3) use chmod -R to make the files and directories in that share\n   accessible for read by everyone. This shouldn't be necessary, and I\n   have a pending patch to fix this, but for now you'll need to do it\n   by hand.\n\n4) login from a client, and see that the policies are obeyed. I\n   sometimes find it takes 2 logins before they apply on a client. I\n   don't know why yet.\n\nCheers, Tridge\n\n"}