{"category": "ham", "to_address": "Gabor Grothendieck <ggrothendieck@gmail.com>", "from_address": "Prof Brian Ripley <ripley@stats.ox.ac.uk>", "subject": "Re: [R] http proxies: setting and unsetting", "body": "That was misleading advice.  R is a C program and accesses the environment \nvia the C calls getenv and (on Windows) putenv.  This is not Windows \nscripting (Grothendieck's earlier reference): the C runtime maintains only \none environment block.\n\nI've re-checked, and suspect the problem is in the following comment in\n?download.file\n\n      These environment variables must be set before the download code\n      is first used: they cannot be altered later by calling\n      'Sys.setenv'.\n\nIf I have http_proxy set in the environment, the proxy is not used in any \nof the following cases:\n\n- Calling R from a shortcut with http_proxy=\"\" on the target (see the \nrw-FAQ).\n\n- Calling R from a shortcut with no_proxy=\"*\" on the target.\n\n- Using Sys.unsetenv(\"http_proxy\") right at the start of the R session.\n\n- Using Sys.setenv(no_proxy=\"*\") right at the start of the R session.\n\nIf you set options(internet.info=0) you will see exactly what is tried.\n\nAnother possibility is that R is being used with --internet2, in which \ncase none of this applies, and the simple answer is not to use --internet2 \nat home.\n\n\n\nOn Tue, 29 May 2007, Gabor Grothendieck wrote:\n\n> You can have 4 different http_proxy environment variables and if you\n> set one type but try to unset a different type then that will have no\n> effect on the one you originally set.  For example, if you originally\n> set it as a system or user environment variable and then try to\n> unset the process environment variable of the same name then\n> that will have no effect on the system or user environment variable.\n>\n> On 5/29/07, matt.pettis@thomson.com  wrote:\n>> Hi Gabor,\n>>\n>> Thanks for the reply and link.\n>>\n>> I took a look at the link -- one thing I don't understand is why if I delete the 'http_proxy' variable via the cmd shell (or equivalent OS dialog box), why I can get R to ignore the proxy, but using Sys.setenv(\"http_proxy\"=\"\") won't do that for me (at least for the scope of the session).  If there were other variables affecting it, I would think my deleting 'http_proxy' in the OS would also have no effect -- yet it does.\n>>\n>> Any ideas?\n>>\n>> Thanks again,\n>> Matt\n>>\n>>\n>> -----Original Message-----\n>> From: Gabor Grothendieck [mailto:ggrothendieck@gmail.com]\n>> Sent: Tue 5/29/2007 9:49 PM\n>> To: Pettis, Matthew (Thomson)\n>> Cc: r-help@stat.math.ethz.ch\n>> Subject: Re: [R] http proxies: setting and unsetting\n>>\n>> Note that Windows XP has 4 types of environment variables and I suspect\n>> that the problem stems from not taking that into account:\n>>\n>> http://www.microsoft.com/technet/scriptcenter/guide/sas_wsh_kmmj.mspx?mfr=true\n>>\n>> On 5/29/07, matt.pettis@thomson.com  wrote:\n>>> Hi,\n>>>\n>>> I am trying to use R at work and at home on the same computer.  At work, I have a proxy, and at home, I do not.  I have, for work, a User environment variable \"http_proxy\" which I set in the OS (Windows XP Pro).  When I am at work, and I try to retrieve data from the web with 'read.csv', things work just fine.  I assume it knows how to use the proxy.\n>>>\n>>> The trouble is when I am at home and have no proxy, R still tries to use my work proxy.  I have tried the following:\n>>>\n>>> Sys.setenv(\"http_proxy\"=\"\")\n>>> Sys.setenv(\"no_proxy\"=TRUE)\n>>> Sys.setenv(\"no_proxy\"=1)\n>>>\n>>> none of which seems to work.  Whenever I try to use read.csv, it tells me that it cannot find my work proxy, which I am trying to tell R to ignore.\n>>>\n>>> I can solve this problem by removing the http_proxy environment variable binding in the OS when at home, but that is a pain, because then I have to reset it when I go back into work.\n>>>\n>>> Is there a way to tell R within a session to ignore the proxy?  If so, what am I doing wrong?\n>>>\n>>> thanks,\n>>> matt\n>>>\n>>> ______________________________________________\n>>> R-help@stat.math.ethz.ch mailing list\n>>> https://stat.ethz.ch/mailman/listinfo/r-help\n>>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html\n>>> and provide commented, minimal, self-contained, reproducible code.\n>>>\n>>\n>>\n>\n> ______________________________________________\n> R-help@stat.math.ethz.ch mailing list\n> https://stat.ethz.ch/mailman/listinfo/r-help\n> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html\n> and provide commented, minimal, self-contained, reproducible code.\n>\n\n-- \nBrian D. Ripley,                  ripley@stats.ox.ac.uk\nProfessor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/\nUniversity of Oxford,             Tel:  +44 1865 272861 (self)\n1 South Parks Road,                     +44 1865 272866 (PA)\nOxford OX1 3TG, UK                Fax:  +44 1865 272595\n\n______________________________________________\nR-help@stat.math.ethz.ch mailing list\nhttps://stat.ethz.ch/mailman/listinfo/r-help\nPLEASE do read the posting guide http://www.R-project.org/posting-guide.html\nand provide commented, minimal, self-contained, reproducible code.\n\n"}