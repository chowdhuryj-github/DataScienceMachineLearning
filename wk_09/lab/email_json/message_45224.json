{"category": "ham", "to_address": "samba-cvs@samba.org", "from_address": "jra@samba.org", "subject": "svn commit: samba r23401 - in\n\tbranches/SAMBA_3_0_26/source/rpc_client: .", "body": "Author: jra\nDate: 2007-06-09 00:18:07 +0000 (Sat, 09 Jun 2007)\nNew Revision: 23401\n\nWebSVN: http://websvn.samba.org/cgi-bin/viewcvs.cgi?view=rev&root=samba&rev=23401\n\nLog:\n3.0.26 differs here from 3.0.25.\nJeremy.\n\nModified:\n   branches/SAMBA_3_0_26/source/rpc_client/cli_lsarpc.c\n\n\nChangeset:\nModified: branches/SAMBA_3_0_26/source/rpc_client/cli_lsarpc.c\n===================================================================\n--- branches/SAMBA_3_0_26/source/rpc_client/cli_lsarpc.c\t2007-06-09 00:13:07 UTC (rev 23400)\n+++ branches/SAMBA_3_0_26/source/rpc_client/cli_lsarpc.c\t2007-06-09 00:18:07 UTC (rev 23401)\n@@ -145,7 +145,6 @@\n \tLSA_Q_LOOKUP_SIDS q;\n \tLSA_R_LOOKUP_SIDS r;\n \tDOM_R_REF ref;\n-\tLSA_TRANS_NAME_ENUM t_names;\n \tNTSTATUS result = NT_STATUS_OK;\n \tTALLOC_CTX *tmp_ctx = NULL;\n \tint i;\n@@ -163,10 +162,8 @@\n \tinit_q_lookup_sids(tmp_ctx, &q, pol, num_sids, sids, 1);\n \n \tZERO_STRUCT(ref);\n-\tZERO_STRUCT(t_names);\n \n \tr.dom_ref = &ref\n-\tr.names = &t_names;\n \n \tCLI_DO_RPC( cli, tmp_ctx, PI_LSARPC, LSA_LOOKUPSIDS,\n \t\t\tq, r,\n@@ -192,7 +189,7 @@\n \n \tfor (i = 0; i < num_sids; i++) {\n \t\tfstring name, dom_name;\n-\t\tuint32 dom_idx = t_names.name[i].domain_idx;\n+\t\tuint32 dom_idx = r.names.name[i].domain_idx;\n \n \t\t/* Translate optimised name through domain index array */\n \n@@ -201,11 +198,11 @@\n \t\t\trpcstr_pull_unistr2_fstring(\n                                 dom_name, &ref.ref_dom[dom_idx].uni_dom_name);\n \t\t\trpcstr_pull_unistr2_fstring(\n-                                name, &t_names.uni_name[i]);\n+                                name, &r.names.uni_name[i]);\n \n \t\t\t(names)[i] = talloc_strdup(mem_ctx, name);\n \t\t\t(domains)[i] = talloc_strdup(mem_ctx, dom_name);\n-\t\t\t(types)[i] = t_names.name[i].sid_name_use;\n+\t\t\t(types)[i] = r.names.name[i].sid_name_use;\n \t\t\t\n \t\t\tif (((names)[i] == NULL) || ((domains)[i] == NULL)) {\n \t\t\t\tDEBUG(0, (\"cli_lsa_lookup_sids(): out of memory\\n\"));\n\n"}