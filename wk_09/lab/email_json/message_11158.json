{"category": "ham", "to_address": "<r-help@stat.math.ethz.ch>", "from_address": "\"GREGOR Brian J\" <Brian.J.GREGOR@odot.state.or.us>", "subject": "Re: [R] sequences extraction", "body": "Here's a solution which uses diff() and apply.\n\nfindSequences <- function(Data){\n     # Sort the vector in case it hasn't been sorted\n     Data <- sort(Data)\n     # Check that there are no duplicate values in Data\n     if(any(duplicated(Data))) stop(\"Function with not work if Data\nargument contains duplicate values.\")\n     # Make a matrix of the starting and ending indices of sequences\n     Breaks <- which(diff(Data) != 1)\n     Starts <- c(0, Breaks) + 1\n     Ends <- c(Breaks, length(Data)) \n     SequenceIndices <- cbind(Starts, Ends)\n     # Return a list of vectors of sequences\n     apply(SequenceIndices, 1, function(x) Data[x[1]:x[2]])\n     }\n\n>> I need to extract sequences from an ordered vector.\n>> For example, if\n>> a<-c(1,2,3,6,10,11,13)\n>> I need to get the followings 4 vectors \n>> (1,2,3),(6),(10,11),(13)\n\n>There should be a more elegant way to do it, but the following code\n>seems to work (it returns the results a s a list) :\n\n\n>a<-c(9,1,2,3,6,10,11,17,13,14)\n>d <- diff(a)\n>result <- list()\n>tmp <- a[1]            \n>for (i in 1:length(d)) {  \n>        if (d[i]==1) {\n>                tmp <- c(tmp, a[i+1])\n>        } else {\n>                result <- c(result,list(tmp))\n>                tmp <- a[i+1]         \n>        }\n>}\n>result <- c(result,list(tmp))   \n>result\n\n\nBrian Gregor, P.E.\nTransportation Planning Analysis Unit\nOregon Department of Transportation\nBrian.J.GREGOR@odot.state.or.us\n(503) 986-4120\n\n______________________________________________\nR-help@stat.math.ethz.ch mailing list\nhttps://stat.ethz.ch/mailman/listinfo/r-help\nPLEASE do read the posting guide http://www.R-project.org/posting-guide.html\nand provide commented, minimal, self-contained, reproducible code.\n\n"}