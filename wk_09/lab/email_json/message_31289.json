{"category": "ham", "to_address": "\"Mikhail T.\" <mi+metlife@aldan.algebra.com>", "from_address": "Jeremy Allison <jra@samba.org>", "subject": "Re: prs_uint32 applied to pointers?", "body": "On Wed, May 16, 2007 at 03:24:58PM -0400, Mikhail T. wrote:\n> Hello!\n> \n> Trying to build Samba on my FreeBSD/amd64 machine, I noticed a scary \n> warning about a pointer getting cast to an integer of lesser width.\n> \n> Indeed, the following code seems to stick the file path /pointer/ into a \n> 32-bit number:\n> \n>        uni_p = fl3->path ? (uint32)fl3->path : 0;\n>        if(!prs_uint32(\"ptr\", ps, depth, &uni_p))\n>                return False;\n> \n> Although the 32-bit systems will not notice, the code does not seem \n> right for 64-bit ones, where pointers are 64-bit wide. Can someone, \n> please, comment? Silencing the warning is easy, but there may be a \n> genuine problem pointed out here.\n\nActually it should be putting \"1\" here as all that matters is\nthat the pointer is non-zero.\n\nJeremy.\n\n"}