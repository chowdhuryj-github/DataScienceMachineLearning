{"category": "ham", "to_address": "samba-cvs@samba.org", "from_address": "jpeach@samba.org", "subject": "svn commit: samba r23576 - in branches: SAMBA_3_0/source/lib\n\tSAMBA_3_0_26/source/lib", "body": "Author: jpeach\nDate: 2007-06-21 21:17:06 +0000 (Thu, 21 Jun 2007)\nNew Revision: 23576\n\nWebSVN: http://websvn.samba.org/cgi-bin/viewcvs.cgi?view=rev&root=samba&rev=23576\n\nLog:\nFix some confusion between HAVE_BROKEN_GETGROUPS and USE_BSD_SETGROUPS.\n\nModified:\n   branches/SAMBA_3_0/source/lib/system.c\n   branches/SAMBA_3_0_26/source/lib/system.c\n\n\nChangeset:\nModified: branches/SAMBA_3_0/source/lib/system.c\n===================================================================\n--- branches/SAMBA_3_0/source/lib/system.c\t2007-06-21 20:56:56 UTC (rev 23575)\n+++ branches/SAMBA_3_0/source/lib/system.c\t2007-06-21 21:17:06 UTC (rev 23576)\n@@ -1022,7 +1022,7 @@\n \t\tsetlen = max;\n \t}\n \n-#if defined(BROKEN_GETGROUPS)\n+#if defined(HAVE_BROKEN_GETGROUPS)\n \tret = sys_broken_setgroups(setlen, new_gidset ? new_gidset : gidset);\n #else\n \tret = setgroups(setlen, new_gidset ? new_gidset : gidset);\n@@ -1063,10 +1063,10 @@\n \treturn -1;\n #endif /* HAVE_SETGROUPS */\n \n-#if defined(HAVE_BROKEN_GETGROUPS)\n+#if defined(USE_BSD_SETGROUPS)\n+\treturn sys_bsd_setgroups(primary_gid, setlen, gidset);\n+#elif defined(HAVE_BROKEN_GETGROUPS)\n \treturn sys_broken_setgroups(setlen, gidset);\n-#elif defined(USE_BSD_SETGROUPS)\n-\treturn sys_bsd_setgroups(primary_gid, setlen, gidset);\n #else\n \treturn setgroups(setlen, gidset);\n #endif\n\nModified: branches/SAMBA_3_0_26/source/lib/system.c\n===================================================================\n--- branches/SAMBA_3_0_26/source/lib/system.c\t2007-06-21 20:56:56 UTC (rev 23575)\n+++ branches/SAMBA_3_0_26/source/lib/system.c\t2007-06-21 21:17:06 UTC (rev 23576)\n@@ -1022,7 +1022,7 @@\n \t\tsetlen = max;\n \t}\n \n-#if defined(BROKEN_GETGROUPS)\n+#if defined(HAVE_BROKEN_GETGROUPS)\n \tret = sys_broken_setgroups(setlen, new_gidset ? new_gidset : gidset);\n #else\n \tret = setgroups(setlen, new_gidset ? new_gidset : gidset);\n@@ -1063,10 +1063,10 @@\n \treturn -1;\n #endif /* HAVE_SETGROUPS */\n \n-#if defined(HAVE_BROKEN_GETGROUPS)\n+#if defined(USE_BSD_SETGROUPS)\n+\treturn sys_bsd_setgroups(primary_gid, setlen, gidset);\n+#elif defined(HAVE_BROKEN_GETGROUPS)\n \treturn sys_broken_setgroups(setlen, gidset);\n-#elif defined(USE_BSD_SETGROUPS)\n-\treturn sys_bsd_setgroups(primary_gid, setlen, gidset);\n #else\n \treturn setgroups(setlen, gidset);\n #endif\n\n"}