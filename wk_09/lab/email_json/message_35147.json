{"category": "ham", "to_address": "samba-cvs@samba.org", "from_address": "jra@samba.org", "subject": "svn commit: samba r23104 - in\n\tbranches/SAMBA_4_0/source/torture/basic: .", "body": "Author: jra\nDate: 2007-05-23 23:14:48 +0000 (Wed, 23 May 2007)\nNew Revision: 23104\n\nWebSVN: http://websvn.samba.org/cgi-bin/viewcvs.cgi?view=rev&root=samba&rev=23104\n\nLog:\nAdd comment explaining the new test.\nJeremy.\n\nModified:\n   branches/SAMBA_4_0/source/torture/basic/delete.c\n\n\nChangeset:\nModified: branches/SAMBA_4_0/source/torture/basic/delete.c\n===================================================================\n--- branches/SAMBA_4_0/source/torture/basic/delete.c\t2007-05-23 23:11:16 UTC (rev 23103)\n+++ branches/SAMBA_4_0/source/torture/basic/delete.c\t2007-05-23 23:14:48 UTC (rev 23104)\n@@ -1258,6 +1258,12 @@\n }\n \n /* Test 20b ... */\n+/* This is the delete semantics that the cifsfs client depends on when\n+ * trying to delete an open file on a Windows server. It\n+ * opens a file with initial delete on close set, renames it then closes\n+ * all open handles. The file goes away on Windows.\n+ */\n+\n static bool deltest20b(struct torture_context *tctx, struct smbcli_state *cli1, struct smbcli_state *cli2)\n {\n \tint fnum1 = -1;\n@@ -1266,7 +1272,7 @@\n \n \tdel_clean_area(cli1, cli2);\n \n-\t/* Test 20a. */\n+\t/* Test 20b. */\n \n \t/* Ensure the file doesn't already exist. */\n \tsmbcli_close(cli1->tree, fnum1);\n\n"}