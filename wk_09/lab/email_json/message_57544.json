{"category": "ham", "to_address": "r-help@stat.math.ethz.ch", "from_address": "Spencer Graves <spencer.graves@pdf.com>", "subject": "[R] R.matlab questions", "body": "Hello:\n\n\t  Two questions about R.matlab:\n\n\t  1.  How to break a hung R-Matlab connection?\n\n\t  2.  How to execute R.matlab commands from within a function?\n\n\t\nBREAKING AN R-Matlab CONNECTION\n\n\t  Sometimes an attempted R.matlab command locks up my computer.  The \nstandard R break process interrupts the R command.  However, when I do \nthat, the command to Matlab is still pending, and I don't know an easy \nway to interrupt that.  A simple, self-contained example appears below.\n\n\t  The easiest way I've found so far to interrupt Matlab is to quit R. \nThis will finally release Matlab.\n\n\nCALLING R.matlab FUNCTIONS FROM WITHIN A FUNCTION\n\n\t  An R.matlab function call that works as a direct R command hangs for \nme when executed within an R function.  A simple, self-contained example \nappears below.\n\nHow can I work around this?\n\n\n\t  Thanks,\n\t  Spencer Graves\nUsing Matlab 7.3.0 (R2006b) under Windows XP Pro.\n> sessionInfo()\nR version 2.5.0 (2007-04-23)\ni386-pc-mingw32\n\nlocale:\nLC_COLLATE=English_United States.1252;LC_CTYPE=English_United\nStates.1252;LC_MONETARY=English_United\nStates.1252;LC_NUMERIC=C;LC_TIME=English_United States.1252\n\nattached base packages:\n[1] \"splines\"   \"stats\"     \"graphics\"  \"grDevices\" \"utils\"     \"datasets\"\n[7] \"methods\"   \"base\"\n\nother attached packages:\nR.matlab     R.oo      fda      zoo\n  \"1.1.3\"  \"1.2.7\"  \"1.2.1\"  \"1.3-1\"\n\n###################\n\n#EXAMPLE:  CALLING R.matlab FROM WITHIN A FUCTION?\n\n# 1.  library(R.matlab)\nlibrary(R.matlab)\n# 2.  Create a Matlab client object to support communications\n(matlab <- Matlab())\n#     Optionally set setVerbose(..., -2) to get max info\nsetVerbose(matlab, -2)\n\n# 3.  Start Matlab\n# 4.  Ask Matlab to become a slave\n\n#Matlab>> MatlabServer\n\n# 5.  Open the connection from R to MatlabServer\n(isOpenMatlab <- open(matlab))\n\n# NOTE:  If Matlab is not frozen:\n#R> close(matlab)\n# returns local control to Matlab.\n# Control of Matlab can be returned to R at any time\n# by repeating steps 4 & 5.\n\n# 6.  matlab.compute.a\ncompute <- evaluate(matlab, \"a = 1+2\")\n(a0 <- getVariable(matlab, \"a\"))\n\n# The above works fine for me.\n\n# 7.  R.matlab.compute.a function\nR.matlab.compute.a <- function(text=\"a=1+2\", matlabClient=matlab){\n# text = a Matlab expression that stores 'a'\n   ev0 <- evaluate(matlabClient, text)\n   getVariable(matlabClient, \"a\")\n}\n\n# The following locks up both R and Matlab for me:\nR.matlab.compute.a()\n\n______________________________________________\nR-help@stat.math.ethz.ch mailing list\nhttps://stat.ethz.ch/mailman/listinfo/r-help\nPLEASE do read the posting guide http://www.R-project.org/posting-guide.html\nand provide commented, minimal, self-contained, reproducible code.\n\n"}