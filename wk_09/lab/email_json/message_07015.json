{"category": "ham", "to_address": "samba-cvs@samba.org", "from_address": "metze@samba.org", "subject": "svn commit: samba r22269 - in\n\tbranches/SAMBA_3_0_25/source/lib/talloc: .", "body": "Author: metze\nDate: 2007-04-16 19:16:20 +0000 (Mon, 16 Apr 2007)\nNew Revision: 22269\n\nWebSVN: http://websvn.samba.org/cgi-bin/viewcvs.cgi?view=rev&root=samba&rev=22269\n\nLog:\nmerge from samba4:\n\nprotect #define __location__ with an #ifndef\n\nmetze\nModified:\n   branches/SAMBA_3_0_25/source/lib/talloc/talloc.h\n\n\nChangeset:\nModified: branches/SAMBA_3_0_25/source/lib/talloc/talloc.h\n===================================================================\n--- branches/SAMBA_3_0_25/source/lib/talloc/talloc.h\t2007-04-16 19:15:57 UTC (rev 22268)\n+++ branches/SAMBA_3_0_25/source/lib/talloc/talloc.h\t2007-04-16 19:16:20 UTC (rev 22269)\n@@ -32,10 +32,12 @@\n /*\n   this uses a little trick to allow __LINE__ to be stringified\n */\n-#define _STRING_LINE_(s)    #s\n-#define _STRING_LINE2_(s)   _STRING_LINE_(s)\n-#define __LINESTR__       _STRING_LINE2_(__LINE__)\n-#define __location__ __FILE__ \":\" __LINESTR__\n+#ifndef __location__\n+#define __TALLOC_STRING_LINE1__(s)    #s\n+#define __TALLOC_STRING_LINE2__(s)   __TALLOC_STRING_LINE1__(s)\n+#define __TALLOC_STRING_LINE3__  __TALLOC_STRING_LINE2__(__LINE__)\n+#define __location__ __FILE__ \":\" __TALLOC_STRING_LINE3__\n+#endif\n \n #ifndef TALLOC_DEPRECATED\n #define TALLOC_DEPRECATED 0\n\n"}