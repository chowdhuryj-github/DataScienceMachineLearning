{"category": "ham", "to_address": "\"Stefan (metze) Metzmacher\" <metze@samba.org>", "from_address": "Michael Adam <ma@sernet.de>", "subject": "Re: Rev 5367: Try bzr and, if this is a brz checkout,\n\tuse bzr branch nick\n\tand\tin\thttp://samba.sernet.de/ma/bzr/SAMBA_3_0-registry.bzr/", "body": "On Wed, Apr 18, 2007 at 03:57:05PM +0200, Stefan (metze) Metzmacher wrote:\n> Michael Adam schrieb:\n> > Hi Metze,\n> > \n> > On Wed, Apr 18, 2007 at 02:37:14PM +0200, Stefan (metze) Metzmacher wrote:\n> >> Michael Adam schrieb:\n> >>> It puts BZR-$(bzr nick)-$(bzr revno) instead of SVN-${SVN_REVISION}\n> >>> in the SAMBA_VERSION_STRING if the current directory\n> >>>   1. is neither an svn nor an svk checkout and\n> >>>   2. is a bzr checkout.\n> >> have you seen what we have in samba4 ?\n> > \n> > To be honest - not yet. :-/\n> > \n> >> we should try to sync samba 3 and 4 here.\n> \n> think what needs to be added to samba4 is the letter release support.\n\nDoes that refer e.g. to the a in 3.0.14a ?\nIsn't that already there in both versions?!\nOr else I misunderstood something here.\n\nThe diff at the corresponding part ist as follows:\n\n--- SAMBA_3_0/source/script/mkversion.sh  2007-04-18 15:56:37.000000000 +0200\n+++ SAMBA_4_0/source/script/mkversion.sh    2006-11-09 15:40:52.000000000 +0100\n@@ -37,12 +44,15 @@\n \n \n ##\n-## maybe add \"3.0.22a\" or \"3.0.22pre1\" or \"3.0.22rc1\"\n+## maybe add \"3.0.22a\" or \"4.0.0tp11\" or \"3.0.22pre1\" or \"3.0.22rc1\"\n ## We do not do pre or rc version on patch/letter releases\n ##\n if test -n \"${SAMBA_VERSION_REVISION}\";then\n     SAMBA_VERSION_STRING=\"${SAMBA_VERSION_STRING}${SAMBA_VERSION_REVISION}\"\n     echo \"#define SAMBA_VERSION_REVISION \\\"${SAMBA_VERSION_REVISION}\\\"\" >> $OUTPUT_FILE\n+elif test -n \"${SAMBA_VERSION_TP_RELEASE}\";then\n+    SAMBA_VERSION_STRING=\"${SAMBA_VERSION_STRING}tp${SAMBA_VERSION_TP_RELEASE}\"\n+    echo \"#define SAMBA_VERSION_TP_RELEASE ${SAMBA_VERSION_TP_RELEASE}\" >> $OUTPUT_FILE\n elif test -n \"${SAMBA_VERSION_PRE_RELEASE}\";then\n     ## maybe add \"3.0.22pre2\"\n     SAMBA_VERSION_STRING=\"${SAMBA_VERSION_STRING}pre${SAMBA_VERSION_PRE_RELEASE}\"\n\n> then we can copy the samba4 file to samba3.\n\nTo me, it looks like it could be copied as is?!\n\n> the good thing in samba4 is that we cache the output in a shell var\n> and use echo -e \"$CACHE\" that's much faster. \n\nHey, you made me searching for $CACHE a bit until I got what you meant...\nThanks. ;)\n\nMichael\n\n"}