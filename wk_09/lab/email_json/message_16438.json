{"category": "ham", "to_address": "samba-cvs@samba.org", "from_address": "gd@samba.org", "subject": "svn commit: samba r22524 - in branches: SAMBA_3_0/source/printing\n\tSAMBA_3_0_25/source/printing", "body": "Author: gd\nDate: 2007-04-26 12:09:25 +0000 (Thu, 26 Apr 2007)\nNew Revision: 22524\n\nWebSVN: http://websvn.samba.org/cgi-bin/viewcvs.cgi?view=rev&root=samba&rev=22524\n\nLog:\nFix memleak.\n\nGuenther\n\nModified:\n   branches/SAMBA_3_0/source/printing/nt_printing.c\n   branches/SAMBA_3_0_25/source/printing/nt_printing.c\n\n\nChangeset:\nModified: branches/SAMBA_3_0/source/printing/nt_printing.c\n===================================================================\n--- branches/SAMBA_3_0/source/printing/nt_printing.c\t2007-04-26 09:32:26 UTC (rev 22523)\n+++ branches/SAMBA_3_0/source/printing/nt_printing.c\t2007-04-26 12:09:25 UTC (rev 22524)\n@@ -3264,6 +3264,7 @@\n \tif (!ADS_ERR_OK(ads_rc)) {\n \t\tDEBUG(3, (\"ads_connect failed: %s\\n\", ads_errstr(ads_rc)));\n \t\tads_destroy(&ads);\n+\t\tads_kdestroy(\"MEMORY:prtpub_cache\");\n \t\treturn WERR_ACCESS_DENIED;\n \t}\n \n@@ -3280,6 +3281,7 @@\n \t}\n \n \tads_destroy(&ads);\n+\tads_kdestroy(\"MEMORY:prtpub_cache\");\n \treturn WERR_OK;\n }\n \n\nModified: branches/SAMBA_3_0_25/source/printing/nt_printing.c\n===================================================================\n--- branches/SAMBA_3_0_25/source/printing/nt_printing.c\t2007-04-26 09:32:26 UTC (rev 22523)\n+++ branches/SAMBA_3_0_25/source/printing/nt_printing.c\t2007-04-26 12:09:25 UTC (rev 22524)\n@@ -3274,6 +3274,7 @@\n \tif (!ADS_ERR_OK(ads_rc)) {\n \t\tDEBUG(3, (\"ads_connect failed: %s\\n\", ads_errstr(ads_rc)));\n \t\tads_destroy(&ads);\n+\t\tads_kdestroy(\"MEMORY:prtpub_cache\");\n \t\treturn WERR_ACCESS_DENIED;\n \t}\n \n@@ -3290,6 +3291,7 @@\n \t}\n \n \tads_destroy(&ads);\n+\tads_kdestroy(\"MEMORY:prtpub_cache\");\n \treturn WERR_OK;\n }\n \n\n"}