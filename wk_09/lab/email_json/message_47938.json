{"category": "ham", "to_address": "\"Tobin, Jared\" <TobinJR@DFO-MPO.GC.CA>", "from_address": "Duncan Murdoch <murdoch@stats.uwo.ca>", "subject": "Re: [R] Using subset() in a user-defined function", "body": "On 6/14/2007 9:38 AM, Tobin, Jared wrote:\n> Hello,\n> \n> I'm having a problem with using subset() inside a function I'm writing.\n> Ignoring everything else in the function, the problem can be illustrated\n> by (where master.frame is the data frame I'm using):\n> \n> \n> function1 <- function(arg1=\"\", arg2=\"\", arg3=\"\"){\n> \n> \ttemp.frame <- subset(master.frame, a == arg1 & b == arg2 & c ==\n> arg3)\n> \n> }\n> \n> \n> This works fine if the user specifies all arguments, but if any one or\n> more of the arguments isn't specified, say arg1 for example, the subset\n> is empty because subset() goes looking for values of a == \"\" in\n> master.frame, and there are none.  I want it to work such that if an\n> argument is not specified, it is not included in what subset() goes\n> looking for.  So if I were to input:\n> \n> function1(arg2=5, arg3=6)\n> \n> then in function1, the subset command will look like\n> \n> \ttemp.frame <- subset(master.frame, b == 5 & c == 6)\n> \n> \n> Any suggestions would be much appreciated.\n\nCode it like this:\n\nsubset(master.frame, (missing(arg1) | a == arg1) &\n                      (missing(arg2) | b == arg2) &\n                      (missing(arg3) | c == arg3))\n\nI haven't tried this, and I forget what happens in subset() if you pass \nit a subset of the wrong length, so it might fail if all args are \nmissing, but otherwise I think it should work.  It does depend on \ndefaults for the args existing and not causing errors in the equality \ntests (it's not using shortcut evaluation).\n\nDuncan Murdoch\n\n______________________________________________\nR-help@stat.math.ethz.ch mailing list\nhttps://stat.ethz.ch/mailman/listinfo/r-help\nPLEASE do read the posting guide http://www.R-project.org/posting-guide.html\nand provide commented, minimal, self-contained, reproducible code.\n\n"}