{"category": "ham", "to_address": "\"Uwe Ligges\" <ligges@statistik.uni-dortmund.de>,\n   \"Saeed Abu Nimeh\" <sabunime@gmail.com>", "from_address": "\"Kuhn, Max\" <Max.Kuhn@pfizer.com>", "subject": "Re: [R] naiveBayes other than e1071", "body": "Saeed and Uwe,\n\nThe underlying problem is the distribution of the data. For example:\n\n> table(x.x[,91], y.y)\n             y.y\n                 0    1\n  0.000675027 2412    0\n  0.002184892    0  481\n\nWhen the function tries to estimate the distribution of this feature for\neach class, it gets:\n\n   nb$tables[[91]]\n            [,1] [,2]\n   0 0.000675027    0\n   1 0.002184892    0\n\n(Saeed - column 1 contains the means for each class and column 2\ncontains the variances)\n \nFor class 0, if a new data point for this variable has a value of\n0.000675027, then dnorm(0.000675027, 0.000675027, 0) = Inf (all other\npoints have density values of zero). When the data are normalized by\np(x), this produces a NaN. A few of the predictors have this problem.\n\nThere should probably be some sort of check for this, but that might be\nhard to do when usekernel = TRUE. Uwe - do you agree and/or have ideas? \n\nGood news Saeed! Just use variable 91 and you don't need a model.\nSeriously, you might want to think about these data a bit. Many of them\nare highly skewed and have a large point mass at zero. Modeling the\nconditional probabilities using a normal distribution may not be the\nbest idea.\n\nMax\n\n\n-----Original Message-----\nFrom: Uwe Ligges [mailto:ligges@statistik.uni-dortmund.de] \nSent: Tuesday, June 05, 2007 3:56 PM\nTo: Saeed Abu Nimeh\nCc: Kuhn, Max; r-help@stat.math.ethz.ch\nSubject: Re: [R] naiveBayes other than e1071\n\n\n\nSaeed Abu Nimeh wrote:\n> Max,\n> Thanks. I have tried it but i keep getting an error:\n> Error in as.vector(x, mode) : invalid argument 'mode'\n> Do I have to do something specific when using the class column. I\ntried\n> both  y.y<-as.vector and y.y<-as.factor.\n> \n> dread<-read.table('dataset.csv',sep=\",\")\n> x.x<-as.matrix(dread[,2:256])\n> y.y<-as.vector(dread[,1])\n> nb<- NaiveBayes(x=x.x,grouping=y.y)\n> pred.nb<-predict(nb)\n> \n> Error in as.vector(x, mode) : invalid argument 'mode'\n\n\n\nPlease tell us (according to the posting guide): Which version of R? \nWhich version of klaR? Example data that reproduce the error?\n\nUwe Ligges\n\n\n\n> Thanks,\n> Saeed\n> \n> Kuhn, Max wrote:\n>> Saeed,\n>>\n>> There is a version in the klaR package. I recently submitted a change\nto\n>> the predict function that may be related to your problem. \n>>\n>> If:\n>>\n>>   1. the posterior probabilities (apart from the prior) are being\n>> approximated by the product of the p(x_i|y_j) and\n>>\n>>   2. a lot of predictors are being used\n>>\n>> then posterior probabilities may have values of absolute zero. \n>>\n>> When the approximation is used, the approximate posterior\nprobabilities\n>> are normalized by their sum (which is zero in such cases).\n>>\n>> The patch in klaR uses the product of the conditional divided by the\n>> marginal of x_i (per the true formula). I haven't seen the problem\noccur\n>> with this patch.\n>>\n>> HTH,\n>>\n>> Max\n>>\n>> -----Original Message-----\n>> From: r-help-bounces@stat.math.ethz.ch\n>> [mailto:r-help-bounces@stat.math.ethz.ch] On Behalf Of Saeed Abu\nNimeh\n>> Sent: Monday, June 04, 2007 2:45 PM\n>> To: r-help@stat.math.ethz.ch\n>> Subject: [R] naiveBayes other than e1071\n>>\n>> Hi List,\n>> Is there a naiveBayes interface other than the one in e1071 package.\nFor\n>> some reason on certain datasets all predicted values are NaN, but it\n>> predicts well on others.\n>> Thanks,\n>> Saeed\n>> ---\n>> model <- naiveBayes(x.train, y.train, laplace = 3)\n>> pred <- predict(model,x.test,type=\"raw\")\n>>\n>> ______________________________________________\n>> R-help@stat.math.ethz.ch mailing list\n>> https://stat.ethz.ch/mailman/listinfo/r-help\n>> PLEASE do read the posting guide\n>> http://www.R-project.org/posting-guide.html\n>> and provide commented, minimal, self-contained, reproducible code.\n>>\n>>\n----------------------------------------------------------------------\n>> LEGAL NOTICE\n>> Unless expressly stated otherwise, this message is confidential and\nmay be privileged.  It is intended for the addressee(s) only.  Access to\nthis E-mail by anyone else is unauthorized.  If you are not an\naddressee, any disclosure or copying of the contents of this E-mail or\nany action taken (or not taken) in reliance on it is unauthorized and\nmay be unlawful.  If you are not an addressee, please inform the sender\nimmediately.\n>>\n> \n> ______________________________________________\n> R-help@stat.math.ethz.ch mailing list\n> https://stat.ethz.ch/mailman/listinfo/r-help\n> PLEASE do read the posting guide\nhttp://www.R-project.org/posting-guide.html\n> and provide commented, minimal, self-contained, reproducible code.\n\n______________________________________________\nR-help@stat.math.ethz.ch mailing list\nhttps://stat.ethz.ch/mailman/listinfo/r-help\nPLEASE do read the posting guide http://www.R-project.org/posting-guide.html\nand provide commented, minimal, self-contained, reproducible code.\n\n"}