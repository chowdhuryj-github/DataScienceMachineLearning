{"category": "ham", "to_address": "sugar@laptop.org", "from_address": "Simon McVittie <simon.mcvittie@collabora.co.uk>", "subject": "[sugar] [PATCH] bin/datastore-service: respect $SUGAR_PROFILE,\n\tallowing multiple instances", "body": "-----BEGIN PGP SIGNED MESSAGE-----\nHash: SHA1\n\n- ---\n bin/datastore-service |    3 ++-\n 1 files changed, 2 insertions(+), 1 deletions(-)\n\ndiff --git a/bin/datastore-service b/bin/datastore-service\nindex e2a96d9..cad9fc4 100755\n- --- a/bin/datastore-service\n+++ b/bin/datastore-service\n@@ -7,7 +7,8 @@ from olpc.datastore import DataStore, DS_LOG_CHANNEL\n import logging\n \n # Path handling\n- -base_dir = os.path.expanduser(\"~/.sugar/default\")\n+profile = os.environ.get('SUGAR_PROFILE', 'default')\n+base_dir = os.path.join(os.path.expanduser('~'), '.sugar', profile)\n repo_dir = os.path.join(base_dir, 'datastore')\n db_dir   = \"sqlite:///%s/datastore.db\"  % repo_dir\n \n- -- \n1.5.2-rc3.GIT\n\n-----BEGIN PGP SIGNATURE-----\nVersion: GnuPG v1.4.6 (GNU/Linux)\nComment: OpenPGP key: http://www.pseudorandom.co.uk/2003/contact/ or pgp.net\n\niD8DBQFGTElRWSc8zVUw7HYRAuHfAKCfHnEt0Cj5eqRu0aS/khkNC9PRaQCaA+9u\n1F7d7JpyxS7pis6wMeQkX1I=\n=yfDN\n-----END PGP SIGNATURE-----\n_______________________________________________\nSugar mailing list\nSugar@laptop.org\nhttp://mailman.laptop.org/mailman/listinfo/sugar\n\n"}