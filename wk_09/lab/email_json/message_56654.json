{"category": "ham", "to_address": "Jim McDonough <jmcd@samba.org>", "from_address": "\"Gerald (Jerry) Carter\" <jerry@samba.org>", "subject": "Re: winbindd 32/64 offset issues", "body": "-----BEGIN PGP SIGNED MESSAGE-----\nHash: SHA1\n\nJim McDonough wrote:\n> Jerry,\n> Despite your comments about testing with 32bit libs on 64bit platforms\n> in the winbindd_request struct in winbindd_nss.h, it seems we're out of\n> sync, and the following comment may be part of the issue:\n> \n> nsswitch/winbindd_nss.h:40\n> -------\n> /* Have to deal with time_t being 4 or 8 bytes due to structure alignment.\n>    On a 64bit Linux box, we have to support a constant structure size\n>    between /lib/libnss_winbind.so.2 and /li64/libnss_winbind.so.2.\n>    The easiest way to do this is to always use 8byte values for time_t. */\n> ------\n> \n> I can say that I've recently found this to not be true.  \n...\n> The only solution I found was the old method that hasn't been updated in\n> the code in a while...the padding member of the huge data union needs to\n> be set to that 8-byte boundary, ...\n\n> Or we could just start up that marshalling discussion again :-)\n\nWe have to do the marshalling to maintain this long term.\n\n> In any case, before I check anything in, can someone run \n> any quick tests of your various binaries on 64-bit platforms\n> using 32-bit winbind libs?\n\nThe test is simple.  Do one build normally and then build wbinfo\nfrom a second tree using -m32 and all the various calls from\nthe 32bit client should work against the 64bit winbindd.\n\n\n\n\n\njerry\n-----BEGIN PGP SIGNATURE-----\nVersion: GnuPG v1.4.6 (GNU/Linux)\nComment: Using GnuPG with Mozilla - http://enigmail.mozdev.org\n\niD8DBQFGgrfIIR7qMdg1EfYRAv5xAKCB0AQK3jABPgXlgyzgH/aB5DAtQQCfbZhp\n9Cgta3N7sp0GXC0sGiS1wb4=\n=z70u\n-----END PGP SIGNATURE-----\n\n"}