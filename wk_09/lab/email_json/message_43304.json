{"category": "ham", "to_address": "\"M. P. Papadatos\" <mpp26@cam.ac.uk>", "from_address": "Simon Blomberg <s.blomberg1@uq.edu.au>", "subject": "Re: [R] Expand duplicated observations", "body": "Does this do what you want?\n\ndat <- c(NA, 0, 3.2, 4)\n\nfn <- function (x) {\nz <- round(x)\nif (is.na(x) | x <= 1) z else rep(z, each=z)\n}\n\nunlist(sapply(dat, fn))\n\n[1] NA  0  3  3  3  4  4  4  4\n\nHTH,\n\nSimon.\n\nOn Wed, 2007-06-06 at 01:54 +0100, M. P. Papadatos wrote:\n> Dear all,\n> \n> I am trying to  expand duplicated observations. I need to replace  \n> each observation in the dataset with n copies of the observation,  \n> where n is equal to the required expression rounded to the nearest  \n> integer. If the expression is less than 1 or equal to missing, it is  \n> interpreted as if it were 1, and the observation is retained but not  \n> duplicated.\n> \n> Example\n> \n> From\n> c(1,2,3)\n> \n> To\n> c(1,2,2,3,3,3)\n> \n> Thank you in advance.\n> \n> Best wishes,\n> Martin\n> \n> \n> --Apple-Mail-4-920612661--\n> \n> ______________________________________________\n> R-help@stat.math.ethz.ch mailing list\n> https://stat.ethz.ch/mailman/listinfo/r-help\n> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html\n> and provide commented, minimal, self-contained, reproducible code.\n-- \nSimon Blomberg, BSc (Hons), PhD, MAppStat. \nLecturer and Consultant Statistician \nFaculty of Biological and Chemical Sciences \nThe University of Queensland \nSt. Lucia Queensland 4072 \nAustralia\n\nRoom 320, Goddard Building (8)\nT: +61 7 3365 2506 \nemail: S.Blomberg1_at_uq.edu.au \n\nThe combination of some data and an aching desire for \nan answer does not ensure that a reasonable answer can \nbe extracted from a given body of data. - John Tukey.\n\n______________________________________________\nR-help@stat.math.ethz.ch mailing list\nhttps://stat.ethz.ch/mailman/listinfo/r-help\nPLEASE do read the posting guide http://www.R-project.org/posting-guide.html\nand provide commented, minimal, self-contained, reproducible code.\n\n"}