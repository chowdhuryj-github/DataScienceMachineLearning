{"category": "ham", "to_address": "gepardcv@yahoo.com, samba-technical@lists.samba.org", "from_address": "\"David Gutierrez\" <davegu1@hotmail.com>", "subject": "RE: Determining a user's remote port in a VFS module", "body": "There are some tools out there. Try tcpdump, netpdump or any other network \ntool. Also, for Unix, there sed to be a tool called lslk which is from the \nsame person who designed the lsof.\nCheck both and will give you more info.\nDavid\n\n\n\nFrom: Constantine Vetoshev \nTo: samba-technical@lists.samba.org\nSubject: Determining a user's remote port in a VFS module\nDate: Mon, 25 Jun 2007 21:51:54 +0000 (UTC)\nMIME-Version: 1.0\nReceived: from lists.samba.org ([66.70.73.150]) by \nbay0-mc8-f2.bay0.hotmail.com with Microsoft SMTPSVC(6.0.3790.2668); Tue, 26 \nJun 2007 15:12:00 -0700\nReceived: from dp.samba.org (localhost [127.0.0.1])by lists.samba.org \n(Postfix) with ESMTP id F1617163B4Dfor ; Tue, 26 Jun \n2007 22:11:59 +0000 (GMT)\nReceived: from ciao.gmane.org (main.gmane.org [80.91.229.2])by \nlists.samba.org (Postfix) with ESMTP id 2C313162C35for \n;Tue, 26 Jun 2007 22:11:05 +0000 (GMT)\nReceived: from root by ciao.gmane.org with local (Exim 4.43)id \n1I3JEY-00065j-Bjfor samba-technical@lists.samba.org; Wed, 27 Jun 2007 \n00:10:03 +0200\nReceived: from mobile-166-217-116-043.mycingular.net ([166.217.116.43])by \nmain.gmane.org with esmtp (Gmexim 0.1 (Debian))id 1AlnuQ-0007hv-00for \n; Wed, 27 Jun 2007 00:10:02 +0200\nReceived: from gepardcv by mobile-166-217-116-043.mycingular.net with \nlocal(Gmexim 0.1 (Debian)) id 1AlnuQ-0007hv-00for \n; Wed, 27 Jun 2007 00:10:02 +0200\nX-Message-Info: \ntxF49lGdW43Xxnrcm0XIn9IhgWFzYvS/H8G7C7jhf9wV/oGckUv+zJmC8Tfm6/XD\nX-Spam-Checker-Version: SpamAssassin 3.1.7 (2006-10-05) on dp.samba.org\nX-Spam-Level:\nX-Spam-Status: No, score=0.1 required=3.8 \ntests=BAYES_00,DATE_IN_PAST_24_48,FORGED_YAHOO_RCVD,RCVD_IN_DSBL,SPF_HELO_PASS,SPF_PASS \nautolearn=no version=3.1.7\nX-Original-To: samba-technical@lists.samba.org\nDelivered-To: samba-technical@lists.samba.org\nX-Injected-Via-Gmane: http://gmane.org/\nLines: 7\nX-Complaints-To: usenet@sea.gmane.org\nX-Gmane-NNTP-Posting-Host: main.gmane.org\nUser-Agent: Loom/3.14 (http://gmane.org/)\nX-Loom-IP: 166.217.116.43 (Mozilla/5.0 (Windows; U; Windows NT 5.1; \nen-US;rv:1.8.1.4) Gecko/20070515 Firefox/2.0.0.4)\nX-BeenThere: samba-technical@lists.samba.org\nX-Mailman-Version: 2.1.5\nPrecedence: list\nList-Id: \"Discussions on Samba internals. For general questions \npleasesubscribe to the list \nsamba@samba.org\"\nList-Unsubscribe: \n, \n\nList-Archive: \nList-Post: \nList-Help: \nList-Subscribe: \n,\nErrors-To: samba-technical-bounces+davegu1=hotmail.com@lists.samba.org\nReturn-Path: samba-technical-bounces+davegu1=hotmail.com@lists.samba.org\nX-OriginalArrivalTime: 26 Jun 2007 22:12:00.0449 (UTC) \nFILETIME=[04B0BB10:01C7B83F]\n\nI need to figure out which port a user connected from in a VFS module. \nLooking\nin connection_struct in smb.h, I don't see anything promising. I see the \nremote\nIP, but not the remote port. Is this information available from Samba, or do \nI\nhave to do some sketchy /proc scraping to figure this out?\n\nThanks,\nCV\n\n_________________________________________________________________\nGet a preview of Live Earth, the hottest event this summer - only on MSN \nhttp://liveearth.msn.com?source=msntaglineliveearthhm\n\n"}