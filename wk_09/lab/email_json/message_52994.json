{"category": "ham", "to_address": "samba-cvs@samba.org", "from_address": "jra@samba.org", "subject": "svn commit: samba r23591 - in branches: SAMBA_3_0/source/registry\n\tSAMBA_3_0/source/rpc_server SAMBA_3_0_25/source/registry\n\tSAMBA_3_0_25/source/rpc_server SAMBA_3_0_26/source/registry\n\tSAMBA_3_0_26/source/rpc_server", "body": "Author: jra\nDate: 2007-06-22 19:33:46 +0000 (Fri, 22 Jun 2007)\nNew Revision: 23591\n\nWebSVN: http://websvn.samba.org/cgi-bin/viewcvs.cgi?view=rev&root=samba&rev=23591\n\nLog:\nFix bug #4725. Don't crash when no eventlogs specified. Needs\nmerging for 3.0.25b.\nJeremy.\n\nModified:\n   branches/SAMBA_3_0/source/registry/reg_eventlog.c\n   branches/SAMBA_3_0/source/rpc_server/srv_eventlog_nt.c\n   branches/SAMBA_3_0_25/source/registry/reg_eventlog.c\n   branches/SAMBA_3_0_25/source/rpc_server/srv_eventlog_nt.c\n   branches/SAMBA_3_0_26/source/registry/reg_eventlog.c\n   branches/SAMBA_3_0_26/source/rpc_server/srv_eventlog_nt.c\n\n\nChangeset:\nModified: branches/SAMBA_3_0/source/registry/reg_eventlog.c\n===================================================================\n--- branches/SAMBA_3_0/source/registry/reg_eventlog.c\t2007-06-22 17:36:10 UTC (rev 23590)\n+++ branches/SAMBA_3_0/source/registry/reg_eventlog.c\t2007-06-22 19:33:46 UTC (rev 23591)\n@@ -194,6 +194,10 @@\n \tint i;\n \tint numsources;\n \n+\tif (!elogs) {\n+\t\treturn False;\n+\t}\n+\n \tfor ( i = 0; elogs[i]; i++ ) {\n \t\tif ( strequal( elogs[i], eventlog ) )\n \t\t\tbreak;\n\nModified: branches/SAMBA_3_0/source/rpc_server/srv_eventlog_nt.c\n===================================================================\n--- branches/SAMBA_3_0/source/rpc_server/srv_eventlog_nt.c\t2007-06-22 17:36:10 UTC (rev 23590)\n+++ branches/SAMBA_3_0/source/rpc_server/srv_eventlog_nt.c\t2007-06-22 19:33:46 UTC (rev 23591)\n@@ -123,6 +123,10 @@\n \tint i;\n \tconst char **elogs = lp_eventlog_list();\n \t\n+\tif (!elogs) {\n+\t\treturn False;\n+\t}\n+\n \tfor ( i=0; elogs[i]; i++ ) {\n \t\tif ( strequal( name, elogs[i] ) )\n \t\t\treturn True;\n\nModified: branches/SAMBA_3_0_25/source/registry/reg_eventlog.c\n===================================================================\n--- branches/SAMBA_3_0_25/source/registry/reg_eventlog.c\t2007-06-22 17:36:10 UTC (rev 23590)\n+++ branches/SAMBA_3_0_25/source/registry/reg_eventlog.c\t2007-06-22 19:33:46 UTC (rev 23591)\n@@ -190,6 +190,10 @@\n \tint i;\n \tint numsources;\n \n+\tif (!elogs) {\n+\t\treturn False;\n+\t}\n+\n \tfor ( i = 0; elogs[i]; i++ ) {\n \t\tif ( strequal( elogs[i], eventlog ) )\n \t\t\tbreak;\n\nModified: branches/SAMBA_3_0_25/source/rpc_server/srv_eventlog_nt.c\n===================================================================\n--- branches/SAMBA_3_0_25/source/rpc_server/srv_eventlog_nt.c\t2007-06-22 17:36:10 UTC (rev 23590)\n+++ branches/SAMBA_3_0_25/source/rpc_server/srv_eventlog_nt.c\t2007-06-22 19:33:46 UTC (rev 23591)\n@@ -123,6 +123,10 @@\n \tint i;\n \tconst char **elogs = lp_eventlog_list();\n \t\n+\tif (!elogs) {\n+\t\treturn False;\n+\t}\n+\n \tfor ( i=0; elogs[i]; i++ ) {\n \t\tif ( strequal( name, elogs[i] ) )\n \t\t\treturn True;\n\nModified: branches/SAMBA_3_0_26/source/registry/reg_eventlog.c\n===================================================================\n--- branches/SAMBA_3_0_26/source/registry/reg_eventlog.c\t2007-06-22 17:36:10 UTC (rev 23590)\n+++ branches/SAMBA_3_0_26/source/registry/reg_eventlog.c\t2007-06-22 19:33:46 UTC (rev 23591)\n@@ -194,6 +194,10 @@\n \tint i;\n \tint numsources;\n \n+\tif (!elogs) {\n+\t\treturn False;\n+\t}\n+\n \tfor ( i = 0; elogs[i]; i++ ) {\n \t\tif ( strequal( elogs[i], eventlog ) )\n \t\t\tbreak;\n\nModified: branches/SAMBA_3_0_26/source/rpc_server/srv_eventlog_nt.c\n===================================================================\n--- branches/SAMBA_3_0_26/source/rpc_server/srv_eventlog_nt.c\t2007-06-22 17:36:10 UTC (rev 23590)\n+++ branches/SAMBA_3_0_26/source/rpc_server/srv_eventlog_nt.c\t2007-06-22 19:33:46 UTC (rev 23591)\n@@ -123,6 +123,10 @@\n \tint i;\n \tconst char **elogs = lp_eventlog_list();\n \t\n+\tif (!elogs) {\n+\t\treturn False;\n+\t}\n+\n \tfor ( i=0; elogs[i]; i++ ) {\n \t\tif ( strequal( name, elogs[i] ) )\n \t\t\treturn True;\n\n"}