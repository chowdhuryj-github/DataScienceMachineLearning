{"category": "ham", "to_address": "samba-cvs@samba.org", "from_address": "jerry@samba.org", "subject": "svn commit: samba r22340 - in branches: SAMBA_3_0/source/nsswitch\n\tSAMBA_3_0_25/source/nsswitch", "body": "Author: jerry\nDate: 2007-04-18 16:45:00 +0000 (Wed, 18 Apr 2007)\nNew Revision: 22340\n\nWebSVN: http://websvn.samba.org/cgi-bin/viewcvs.cgi?view=rev&root=samba&rev=22340\n\nLog:\nFix another segfault in idmap_ldap.c caused by setting the iterator\nLDAPMessage * to NULL on each loop rotation.\n\n\nModified:\n   branches/SAMBA_3_0/source/nsswitch/idmap_ldap.c\n   branches/SAMBA_3_0_25/source/nsswitch/idmap_ldap.c\n\n\nChangeset:\nModified: branches/SAMBA_3_0/source/nsswitch/idmap_ldap.c\n===================================================================\n--- branches/SAMBA_3_0/source/nsswitch/idmap_ldap.c\t2007-04-18 14:43:05 UTC (rev 22339)\n+++ branches/SAMBA_3_0/source/nsswitch/idmap_ldap.c\t2007-04-18 16:45:00 UTC (rev 22340)\n@@ -1028,6 +1028,7 @@\n \n static NTSTATUS idmap_ldap_sids_to_unixids(struct idmap_domain *dom, struct id_map **ids)\n {\n+       \tLDAPMessage *entry = NULL;\n \tNTSTATUS ret;\n \tTALLOC_CTX *memctx;\n \tstruct idmap_ldap_context *ctx;\n@@ -1108,7 +1109,6 @@\n \t}\n \n \tfor (i = 0; i < count; i++) {\n-\t\tLDAPMessage *entry = NULL;\n \t\tchar *sidstr = NULL;\n \t\tchar *tmp = NULL;\n \t\tenum id_type type;\n\nModified: branches/SAMBA_3_0_25/source/nsswitch/idmap_ldap.c\n===================================================================\n--- branches/SAMBA_3_0_25/source/nsswitch/idmap_ldap.c\t2007-04-18 14:43:05 UTC (rev 22339)\n+++ branches/SAMBA_3_0_25/source/nsswitch/idmap_ldap.c\t2007-04-18 16:45:00 UTC (rev 22340)\n@@ -1025,6 +1025,7 @@\n \n static NTSTATUS idmap_ldap_sids_to_unixids(struct idmap_domain *dom, struct id_map **ids)\n {\n+       \tLDAPMessage *entry = NULL;\n \tNTSTATUS ret;\n \tTALLOC_CTX *memctx;\n \tstruct idmap_ldap_context *ctx;\n@@ -1105,7 +1106,6 @@\n \t}\n \n \tfor (i = 0; i < count; i++) {\n-\t\tLDAPMessage *entry = NULL;\n \t\tchar *sidstr = NULL;\n \t\tchar *tmp = NULL;\n \t\tenum id_type type;\n\n"}