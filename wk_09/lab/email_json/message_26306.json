{"category": "ham", "to_address": "\"Jeff Pang\" <pangj@earthlink.net>", "from_address": "\"Chas Owens\" <chas.owens@gmail.com>", "subject": "Re: forking problem with dbd::mysql", "body": "On 5/9/07, Jeff Pang  wrote:\nsnip\n> But still has a question for me.We may see this similiar destroy method on DBI class,\n>\n> sub DESTROY\n> {\n>     my $self = shift;\n>     my $dbh = $self->{'dbh'};\n>     if ($dbh) {\n>         local $SIG{'__WARN__'} = sub {};\n>         $dbh->disconnect();\n>     }\n> }\n>\n> Ok where in child when going out of scope the $dbh should get disconnected.\n> But why this would affect the $dbh in parent?As we know,when forking child get a\n> full copy of $dbh from parent and it's separate to parent's $dbh.\nsnip\n\nBut the connection information in the $dbh is the same, so when the\nchild disconnects it tells the MySQL server to destroy the connection.\n This means that the parent loses its connection unexpectedly.\n\n-- \nTo unsubscribe, e-mail: beginners-unsubscribe@perl.org\nFor additional commands, e-mail: beginners-help@perl.org\nhttp://learn.perl.org/\n\n\n"}