{"category": "ham", "to_address": "\"Ron Michael\" <ron_michael70@yahoo.com>, r-help@stat.math.ethz.ch", "from_address": "\"Greg Snow\" <Greg.Snow@intermountainmail.org>", "subject": "Re: [R] Problem with ?curve", "body": "Try this for now (a combination of my previous answer and the example from the tkrplot help page):\n \nlibrary(tkrplot)\n\nlibrary(TeachingDemos)\n\ntkcurve <- function(expr, from, to, ...){\n\ntt <- tktoplevel()\n\nmyx <- from\n\nmyfun <- function(){\n\ncurve(expr, from, to, ...)\n\ntmp1 <- cnvrt.coords(0,0, input='plt')$usr\n\ntmp2 <- cnvrt.coords(-0.05, -0.05, input='plt')$usr\n\nmyy <- expr(myx)\n\nlines( c(myx,myx,tmp1$x), c(tmp1$y, myy, myy), col='green')\n\npar(xpd=TRUE)\n\ntext( c(myx, tmp2$x), c(tmp2$y, myy), round( c(myx,myy),2 ), \n\ncol='red')\n\n}\n\nimg <- tkrplot( tt, myfun, hscale=1.5, vscale=1.5 )\n\nf <- function(...) {\n\nmyxx <- as.numeric(tclvalue(\"myx\"))\n\nif (myx != myxx){\n\nmyx <<- myxx\n\ntkrreplot(img)\n\n}\n\n}\n\ns <- tkscale(tt, command=f, from=from, to=to, variable='myx',\n\nshowvalue=TRUE, resolution=signif( (to-from)/100, 1 ), \n\norient=\"horiz\")\n\ntkpack(img,s)\n\n}\n\ntkcurve( function(x) sqrt(x), 0.5, 10 )\n\ntkcurve( function(x) sin(x)*x, -2*pi, 4*pi )\n\n\n________________________________\n\nFrom: r-help-bounces@stat.math.ethz.ch on behalf of Ron Michael\nSent: Fri 4/20/2007 12:03 AM\nTo: r-help@stat.math.ethz.ch\nCc: Greg Snow\nSubject: Re: [R] Problem with ?curve\n\n\n\nDear all R users,\n\nThank you Greg for having time in my problem. Your suggestion is working pretty fine for my problem. But here I am involved for some teaching assignments in a local school. If at least I could use sliders for changing values, it would be very fine.\n\nHave anyone any suggestion?\n\nThanks and regards,\n\n\n----- Original Message ----\nFrom: Greg Snow \nTo: Ron Michael ; r-help@stat.math.ethz.ch\nSent: Thursday, April 19, 2007 11:03:43 PM\nSubject: RE: [R] Problem with ?curve\n\n\nSomething along these lines is on my todo list for the TeachingDemos\npackage, so any thoughts on what you want the user interface to be would\nbe helpful (do you want sliders to set the x-value? Do you want to click\non the plot to see an update?  Or just moving the mouse over the plot\nwithout clicking would update the line?).\n\nIf you don't mind clicking on the plot, here is a quick example of what\nyou could do (put in your own function and numbers):\n\nlibrary(TeachingDemos)\n\nmyfun <- function(x)  sqrt(x)\n\ncurve( myfun, 0, 10 )\n\ntmp <- cnvrt.coords(0,0, input='plt')$usr\ntmp2 <- cnvrt.coords(-0.05, -0.05, input='plt')$usr\n\npar(xpd=TRUE)\n\nwhile( length(myx <- locator(1)$x) ){\n    myy <- myfun(myx)\n    curve( myfun, 0, 10 )\n    lines( c(myx,myx,tmp$x), c(tmp$y, myy, myy), col='green' )\n    text( c( myx, tmp2$x ), c(tmp2$y, myy), round(c( myx, myy ), 2),\ncol='red')\n}\n\n\nIf you run the above code it will create the plot, then wait for you to\nclick on the plot, when you click it will draw the lines corresponding\nto the x location of your click and put labels in the margins, clicking\nagain will move the lines and update the labels.  Right click and select\n'stop' when you are through.\n\nHope this helps,\n\n\n--\nGregory (Greg) L. Snow Ph.D.\nStatistical Data Center\nIntermountain Healthcare\ngreg.snow@intermountainmail.org\n(801) 408-8111\n\n\n\n> -----Original Message-----\n> From: r-help-bounces@stat.math.ethz.ch\n> [mailto:r-help-bounces@stat.math.ethz.ch] On Behalf Of Ron Michael\n> Sent: Thursday, April 19, 2007 1:16 AM\n> To: r-help@stat.math.ethz.ch\n> Subject: Re: [R] Problem with ?curve\n>\n> Dear all R users,\n> \n> Thank you Gabor, and Mark for spending some times on my\n> problem. But I want to move little bit further. I want to\n> show some basic features interactively. I want to move my\n> mouse pointer through the X axis. In graphics window I want\n> to show that, for a particular position of pointer in X-axis,\n> there will be a vertical straightline from that position,\n> which will cull the curve at a point, and from this point\n> another horizontal straight line will be there, which will\n> cut to Y-axis at a particular point. And upon moving my\n> pointer along X-axis, that mapping-point in Y-axis will also\n> move along y-axis accordingly. I also want to mark the\n> position of X-axis point and Y-axis point interactively.\n> \n> I know there is a package \"TeachingDemos\" for creating this\n> type of interactive picture. But I really dont know how to\n> apply this in my problem.\n> \n> Can anyone give me any suggestion? Your help will be highly\n> appreciated.\n> \n> Thanks and regards,\n>\n>\n> ----- Original Message ----\n> From: Gabor Grothendieck \n> To: Ron Michael \n> Cc: r-help@stat.math.ethz.ch\n> Sent: Wednesday, April 18, 2007 10:08:32 PM\n> Subject: Re: [R] Problem with ?curve\n>\n>\n> Your chipply function is not vectorized. See ?curve and try:\n>\n> curve(Vectorize(chippy)(x), 1, 20, n=200)\n>\n>\n> On 4/18/07, Ron Michael  wrote:\n> >\n> > Dear all R gurus,\n> >\n> >\n> >\n> > I have following syntax:\n> >\n> >\n> >\n> > y = c(1:10)\n> > chippy <- function(x)\n> >        {\n> >         y[5] = x\n> >         sin(cos(t(y)%*%y)*exp(-t(y)%*%y/2))\n> >        }\n> > curve(chippy, 1, 20, n=200)\n> >\n> >\n> >\n> > But I am getting error while executing :\n> >\n> >\n> >\n> > Error in xy.coords(x, y, xlabel, ylabel, log) :\n> >        'x' and 'y' lengths differ\n> > In addition: Warning message:\n> > number of items to replace is not a multiple of replacement length\n> >\n> >\n> > Can anyone tell me how I can recover?\n> >\n> >\n> >\n> > Thanks\n> >\n> > Ron\n> >\n> >\n> >\n> >\n> >\n> >\n> >\n> >\n> > Send instant messages to your online friends\n> http://uk.messenger.yahoo.com\n> >        [[alternative HTML version deleted]]\n> >\n> > ______________________________________________\n> > R-help@stat.math.ethz.ch mailing list\n> > https://stat.ethz.ch/mailman/listinfo/r-help\n> > PLEASE do read the posting guide\n> > http://www.R-project.org/posting-guide.html\n> > and provide commented, minimal, self-contained, reproducible code.\n> >\n>\n> Send instant messages to your online friends\n> http://uk.messenger.yahoo.com\n>     [[alternative HTML version deleted]]\n>\n> ______________________________________________\n> R-help@stat.math.ethz.ch mailing list\n> https://stat.ethz.ch/mailman/listinfo/r-help\n> PLEASE do read the posting guide\n> http://www.R-project.org/posting-guide.html\n> and provide commented, minimal, self-contained, reproducible code.\n>\n\nSend instant messages to your online friends http://uk.messenger.yahoo.com\n        [[alternative HTML version deleted]]\n\n______________________________________________\nR-help@stat.math.ethz.ch mailing list\nhttps://stat.ethz.ch/mailman/listinfo/r-help\nPLEASE do read the posting guide http://www.R-project.org/posting-guide.html\nand provide commented, minimal, self-contained, reproducible code.\n\n\n\n\t[[alternative HTML version deleted]]\n\n______________________________________________\nR-help@stat.math.ethz.ch mailing list\nhttps://stat.ethz.ch/mailman/listinfo/r-help\nPLEASE do read the posting guide http://www.R-project.org/posting-guide.html\nand provide commented, minimal, self-contained, reproducible code.\n\n"}