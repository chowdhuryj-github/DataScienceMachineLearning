{"category": "ham", "to_address": "Jeremy Allison <jra@samba.org>", "from_address": "Jeremy Allison <jra@samba.org>", "subject": "Re: [PATCH 1/4] Make sure groups[0] is the effective gid on FreeBSD.", "body": "On Thu, Jun 07, 2007 at 09:39:39PM -0700, Jeremy Allison wrote:\n> \n> What I'd like to see is a parallel implementation\n> of the functions you want to change in the security\n> context code, that only work for *BSD.\n\nOne more thing (sorry for going on about this but\nI'm really paranoid about this :-).\n\nI dislike the way you've added the new\napply_unix_token() call - I feel this is\nthe wrong way to do things.\n\nWhat I'd like to see is a *BSD specific\nversion of sys_setgroups() that re-arranges\nthe groups as *BSD requires. I'm not\naverse to changing the function interface\nfrom it's current :\n\nint sys_setgroups(int setlen, gid_t *gidset);\n\nto be :\n\nint sys_setgroups(gid_t primary_gid, int setlen, gid_t *gidset);\n\nas I think on *BSD you need to know the primary gid\nfor setgroups to work correctly.\n\nBut I don't think you need to be changing\ncode in smbd/sec_ctx.c *AT ALL* for this.\n\nJeremy.\n\n"}