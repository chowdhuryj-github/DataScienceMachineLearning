{"category": "ham", "to_address": "\"Michael Kubovy\" <kubovy@virginia.edu>", "from_address": "\"Deepayan Sarkar\" <deepayan.sarkar@gmail.com>", "subject": "Re: [R] xyplot() and controlling panel.polygon()", "body": "On 4/26/07, Michael Kubovy  wrote:\n\n> I'm not sure I understand.\n>\n> I'm trying to add a filled band to show CIs around the data (which is\n> why I tried to use xYplot, where 'filled bands' have bug).\n> So with these data:\n>\n> est <- c(1:4, 3:6, 7, 9, 11, 13, 12, 15, 18, 21)\n> cond <- rep(c('a','b'), each = 8)\n> grp <- rep(c('I', 'II'), each = 4, 2)\n> x <- rep(c(.5, .7, .9, 1.1), 4)\n> upper <- est + 1\n> lower = est - 1\n> data <- data.frame(est = est, x = x, cond = cond, grp = grp, upper =\n> upper, lower = lower)\n>\n>   I'm trying to decorate this with bands:\n>\n> xyplot(est ~ x | cond, group = grp, data = data, type = 'b')\n>\n> So I'm not sure why your proposal is failing:\n\nAnd in what sense exactly is it \"failing\"?\n\n> my.panel.polygon <- function(..., font, fontface)\n> {\n>     panel.polygon(...)\n> }\n>\n> xYplot(est ~ x | cond, group = grp, data = data, type = 'b',\n>      panel = function(x, y, subscripts, groups, ...){\n\nNo, my proposal did not have 'groups' and 'subscripts' as arguments in\nthe custom panel function.\n\nMy point was precisely that you shouldn't have them unless you use\nthem, in which case, they will be simply passed on as appropriate as\npart of the ... argument, whereas now they are not being passed on to\npanel.xYplot at all. This should have been obvious from the error\nmessage:\n\nError in panel.xYplot(x, y, , ...) : argument \"subscripts\" is missing,\nwith no default\n\n(at least that's the error I get)\n\nIt's perfectly OK to have them as explicit arguments, but this\nincreases the chances of a mistake. For example, you had in your\noriginal code (the equivalent of):\n\npanel = function(x, y, groups, ...) {\n   panel.xYplot(x, y, groups, ...)\n}\n\nwhich looks OK until you realize that 'groups' is not the 3rd argument\npanel.xYplot().\n\n-Deepayan\n\n>          panel.superpose(c(x, rev(x)), c(upper, rev(lower)),\n> subscripts, groups,\n>              panel.groups = 'my.panel.polygon', default.units =\n> 'native', ...)\n>          panel.xYplot(x, y,,...)\n>      }\n> )\n>\n> _____________________________\n> Professor Michael Kubovy\n> University of Virginia\n> Department of Psychology\n> USPS:     P.O.Box 400400    Charlottesville, VA 22904-4400\n> Parcels:    Room 102        Gilmer Hall\n>          McCormick Road    Charlottesville, VA 22903\n> Office:    B011    +1-434-982-4729\n> Lab:        B019    +1-434-982-4751\n> Fax:        +1-434-982-4766\n> WWW:    http://www.people.virginia.edu/~mk9y/\n>\n>\n>\n\n______________________________________________\nR-help@stat.math.ethz.ch mailing list\nhttps://stat.ethz.ch/mailman/listinfo/r-help\nPLEASE do read the posting guide http://www.R-project.org/posting-guide.html\nand provide commented, minimal, self-contained, reproducible code.\n\n"}