{"category": "ham", "to_address": "samba-cvs@samba.org", "from_address": "jra@samba.org", "subject": "svn commit: samba r22358 - in branches/SAMBA_3_0/source/libsmb: .", "body": "Author: jra\nDate: 2007-04-19 01:26:38 +0000 (Thu, 19 Apr 2007)\nNew Revision: 22358\n\nWebSVN: http://websvn.samba.org/cgi-bin/viewcvs.cgi?view=rev&root=samba&rev=22358\n\nLog:\nUse gss error to NTSTATUS mapping function for errors.\nJeremy.\n\nModified:\n   branches/SAMBA_3_0/source/libsmb/smb_seal.c\n\n\nChangeset:\nModified: branches/SAMBA_3_0/source/libsmb/smb_seal.c\n===================================================================\n--- branches/SAMBA_3_0/source/libsmb/smb_seal.c\t2007-04-19 01:26:15 UTC (rev 22357)\n+++ branches/SAMBA_3_0/source/libsmb/smb_seal.c\t2007-04-19 01:26:38 UTC (rev 22358)\n@@ -191,8 +191,7 @@\n \t\tADS_STATUS adss = ADS_ERROR_GSS(ret, minor);\n \t\tDEBUG(0,(\"common_gss_encrypt_buffer: gss_unwrap failed. Error %s\\n\",\n \t\t\tads_errstr(adss) ));\n-\t\t/* Um - no mapping for gss-errs to NTSTATUS yet. */\n-\t\treturn ads_ntstatus(adss);\n+\t\treturn map_nt_error_from_gss(ret, minor);\n \t}\n \n \tif (out_buf.length > in_buf.length) {\n@@ -248,8 +247,7 @@\n \t\tADS_STATUS adss = ADS_ERROR_GSS(ret, minor);\n \t\tDEBUG(0,(\"common_gss_encrypt_buffer: gss_wrap failed. Error %s\\n\",\n \t\t\tads_errstr(adss) ));\n-\t\t/* Um - no mapping for gss-errs to NTSTATUS yet. */\n-\t\treturn ads_ntstatus(adss);\n+\t\treturn map_nt_error_from_gss(ret, minor);\n \t}\n \n \tif (!flags_got) {\n\n"}