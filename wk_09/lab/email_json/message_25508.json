{"category": "ham", "to_address": "sugar@laptop.org", "from_address": "Simon McVittie <simon.mcvittie@collabora.co.uk>", "subject": "[sugar] [PATCH] sugar.logger: Use formatters properly when\n\tinterfacing with logging.", "body": "-----BEGIN PGP SIGNED MESSAGE-----\nHash: SHA1\n\nThis fixes display of tracebacks in the logs, and adds logger names\n- ---\n sugar/logger.py |    4 +++-\n 1 files changed, 3 insertions(+), 1 deletions(-)\n\ndiff --git a/sugar/logger.py b/sugar/logger.py\nindex 5cd3d72..d6b6d43 100644\n- --- a/sugar/logger.py\n+++ b/sugar/logger.py\n@@ -29,6 +29,8 @@ _log_writer = None\n STDOUT_LEVEL = 1000\n STDERR_LEVEL = 2000\n \n+formatter = logging.Formatter('%(name)s: %(message)s')\n+\n class LogWriter:\n     def __init__(self, module_id):\n         self._module_id = module_id\n@@ -38,7 +40,7 @@ class LogWriter:\n         self._log_file = open(log_path, 'w')\n \n     def write_record(self, record):\n- -        self.write(record.levelno, record.getMessage())\n+        self.write(record.levelno, formatter.format(record))\n \n     def write(self, level, msg):\n         if level == logging.ERROR:\n- -- \n1.5.1.3\n\n-----BEGIN PGP SIGNATURE-----\nVersion: GnuPG v1.4.6 (GNU/Linux)\nComment: OpenPGP key: http://www.pseudorandom.co.uk/2003/contact/ or pgp.net\n\niD8DBQFGQJdIWSc8zVUw7HYRAj+JAJoDJA6nA7Ne5Q0WlxH5cQite0um0QCfSSkQ\nqgCbFCC+J9Tz4I4TBdS13Sw=\n=kPro\n-----END PGP SIGNATURE-----\n_______________________________________________\nSugar mailing list\nSugar@laptop.org\nhttp://mailman.laptop.org/mailman/listinfo/sugar\n\n"}