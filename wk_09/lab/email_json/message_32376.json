{"category": "ham", "to_address": "r-help@stat.math.ethz.ch", "from_address": "gatemaze@gmail.com", "subject": "Re: [R] partial correlation significance", "body": "On 18/05/07, gatemaze@gmail.com  wrote:\n>\n> Hi,\n>\n> among the many (5) methods that I found in the list to do partial\n> correlation in the following two that I had a look I am getting different\n> t-values. Does anyone have any clues on why is that? The source code is\n> below. Thanks.\n>\n> pcor3 <- function (x, test = T, p = 0.05) {\n>   nvar <- ncol(x)\n>   ndata <- nrow(x)\n>   conc <- solve(cor(x))\n>   resid.sd <- 1/sqrt(diag(conc))\n>   pcc <- -sweep(sweep(conc, 1, resid.sd, \"*\"), 2, resid.sd, \"*\")\n>   #colnames(pcc) <- rownames(pcc) <- colnames(x)\n>   if (test) {\n>     t.df <- ndata - nvar\n>     t <- pcc/sqrt((1 - pcc^2)/t.df)\n>     print(t);\n>     pcc <- list(coefs = pcc, sig = t > qt(1 - (p/2), df = t.df))\n>   }\n>   return(pcc)\n> }\n>\n>\n> pcor4 <- function(x, y, z) {\n>   return(cor.test (lm(x~z)$resid,lm(y~z)$resid));\n> }\n>\n>\n\nJust to self-reply my question since I found the answer. The difference is\nin the degrees of freedom. The variable t.df in pcor3 is smaller than the df\nused for the test in pcor4, and how smaller it is depends on the number of\nvariables used in the partial correlation.\n\n\t[[alternative HTML version deleted]]\n\n______________________________________________\nR-help@stat.math.ethz.ch mailing list\nhttps://stat.ethz.ch/mailman/listinfo/r-help\nPLEASE do read the posting guide http://www.R-project.org/posting-guide.html\nand provide commented, minimal, self-contained, reproducible code.\n\n"}