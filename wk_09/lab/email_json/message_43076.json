{"category": "ham", "to_address": "waverley.paloalto@gmail.com", "from_address": "\"bogdan romocea\" <br44114@gmail.com>", "subject": "Re: [R] RMySQL question, sql with R vector or list", "body": "With regards to your concern - export the R object to a MySQL table\n(the RMySQL documentation tells you how), then run an inner join. Or\nif the table to query isn't that big, pull it in R and subset it with\n%in%. You could use system.time() to see which runs faster.\n\n\n> -----Original Message-----\n> From: r-help-bounces@stat.math.ethz.ch\n> [mailto:r-help-bounces@stat.math.ethz.ch] On Behalf Of Waverley\n> Sent: Tuesday, June 05, 2007 1:49 PM\n> To: Chris Stubben\n> Cc: r-help@stat.math.ethz.ch\n> Subject: Re: [R] RMySQL question, sql with R vector or list\n>\n> Thanks Chris.\n>\n> I think this should work.  I have one more question regarding\n> this.  Is that\n> possible to write some PL/SQL scripts integrated inside R, it\n> is the same\n> token like I have asked in my previous question.  In this\n> way, native R data\n> structures can be passed to the MYSQL data base directly to\n> interrogate\n> dynamically, rather than statically like using paste.  One\n> concern using\n> paste to construct the SQL command is this: what about if the\n> ID list in\n> your sample becomes very large, is this a problem to\n> construct this way?\n>\n> I will try to follow your advice but I hope someone on the\n> mailing list can\n> teach me how to integrate R data structure with MYSQL like PL/SQL.\n>\n> Thanks much.\n>\n> Bruce\n>\n>\n> On 6/5/07, Chris Stubben  wrote:\n> >\n> >\n> > > I am trying to write a RMySQL sql script inside R such\n> that part of the\n> > SQL\n> > > would be R list or vector.  For example, I want to select\n> * from Atable\n> > > where ID would equal to a members of R list or vector of \"1, 2,\n> > 3\".  Here\n> > > the ID list was generated inside R and then try to feed\n> to mysql to call\n> > to\n> > > get additional data sets.\n> > >\n> >\n> >\n> > You could pass a comma-separated list of IDs to the sql IN operator\n> >\n> >\n> > ## in MySQL\n> >\n> > CREATE table tmp (id int, name char(1));\n> > insert into tmp values (1, \"A\"), (2, \"B\"), (3, \"C\"), (4,\n> \"D\"), (5, \"E\");\n> >\n> >\n> >\n> > ### in R\n> >\n> >\n> > library(RMySQL)\n> >\n> > con <- dbConnect(\"MySQL\",  dbname=\"test\" )\n> >\n> >\n> > id.in<-function(ids)\n> > {\n> > dbGetQuery(con,   paste(\"select * from tmp\n> > where id IN (\", paste(ids,collapse=\",\"), \")\")  )\n> > }\n> >\n> >\n> >\n> > id.in(2:4)\n> > id name\n> > 1  2    B\n> > 2  3    C\n> > 3  4    D\n> >\n> >\n> > ## simple lists also work\n> >\n> > id.in(list(1,4,5))\n> > id name\n> > 1  1    A\n> > 2  4    D\n> > 3  5    E\n> >\n> >\n> > Chris\n> >\n> > ______________________________________________\n> > R-help@stat.math.ethz.ch mailing list\n> > https://stat.ethz.ch/mailman/listinfo/r-help\n> > PLEASE do read the posting guide\n> > http://www.R-project.org/posting-guide.html\n> > and provide commented, minimal, self-contained, reproducible code.\n> >\n>\n>\n>\n> --\n> Waverley @ Palo Alto\n>\n> [[alternative HTML version deleted]]\n>\n> ______________________________________________\n> R-help@stat.math.ethz.ch mailing list\n> https://stat.ethz.ch/mailman/listinfo/r-help\n> PLEASE do read the posting guide\n> http://www.R-project.org/posting-guide.html\n> and provide commented, minimal, self-contained, reproducible code.\n>\n\n______________________________________________\nR-help@stat.math.ethz.ch mailing list\nhttps://stat.ethz.ch/mailman/listinfo/r-help\nPLEASE do read the posting guide http://www.R-project.org/posting-guide.html\nand provide commented, minimal, self-contained, reproducible code.\n\n"}