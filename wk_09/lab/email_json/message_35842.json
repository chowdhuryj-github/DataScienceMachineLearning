{"category": "ham", "to_address": "adschai@optonline.net", "from_address": "Martin Morgan <mtmorgan@fhcrc.org>", "subject": "Re: [R] Question about setReplaceMethod", "body": "Hi Adschai --\n\nYou'll want to return the value whose slot you have modified:\n\nsetReplaceMethod(\"setX\", \"foo\",\n                 function(this,value) {\n                     this@x <- value\n                     this               # add this line\n                 })\n\nMartin\n\nadschai@optonline.net writes:\n\n> Hi \n>  \n> I have the code like I show below. The problem here is that I have a\n> setReplacementMethod to set the value of my class slot. However,\n> this function doesn't work when I call it within another function\n> definition (declared by setMethod) of the same class. I do not\n> understand this behavior that much. I'm wondering how to make this\n> work? Any help would be really appreciated. Thank you.\n>  \n> setClass(\"foo\", \n> representation(x=\"data.frame\", y=\"character\"))\n> setGeneric(\"setX<-\", function(this, value), standardGeneric(\"setX<-\"))\n> setReplaceMethod(\"setX\", \"foo\",\n> function(this,value) {\n> this@x <- value\n> })\n> setGeneric(\"generateFrame\", function(this), standardGeneric(\"generateFrame\"))\n> setReplaceMethod(\"generateFrame\", \"foo\",\n> function(this) {\n> frame <- read.csv(file=\"myfile.csv\", header=T) # read some input file\n> this@x <- frame # this doesn't replace the value for me\n> setX(this) <- frame # this doesn't replace the value for me\n> frame # instead I have to return the frame object\n> })\n> foo <- function(x,y) {\n> objFoo <- new(\"foo\", x=data.frame(NULL), y=\"\")\n> frame <- generateFrame(objFoo) # after this point, nothing got assigned to objFoo@x\n> setX(objFoo) <- frame # this will work (why do I have to duplicate this??) \n> }\n> - adschai\n>\n> \t[[alternative HTML version deleted]]\n>\n> ______________________________________________\n> R-help@stat.math.ethz.ch mailing list\n> https://stat.ethz.ch/mailman/listinfo/r-help\n> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html\n> and provide commented, minimal, self-contained, reproducible code.\n\n-- \nMartin Morgan\nBioconductor / Computational Biology\nhttp://bioconductor.org\n\n______________________________________________\nR-help@stat.math.ethz.ch mailing list\nhttps://stat.ethz.ch/mailman/listinfo/r-help\nPLEASE do read the posting guide http://www.R-project.org/posting-guide.html\nand provide commented, minimal, self-contained, reproducible code.\n\n"}