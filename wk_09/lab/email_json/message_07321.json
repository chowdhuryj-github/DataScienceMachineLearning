{"category": "ham", "to_address": "samba-cvs@samba.org", "from_address": "jelmer@samba.org", "subject": "svn commit: samba r22287 - in branches/SAMBA_4_0: .\n\tsource/script/tests", "body": "Author: jelmer\nDate: 2007-04-17 00:53:07 +0000 (Tue, 17 Apr 2007)\nNew Revision: 22287\n\nWebSVN: http://websvn.samba.org/cgi-bin/viewcvs.cgi?view=rev&root=samba&rev=22287\n\nLog:\nFix some issues in fedora ds code.\nModified:\n   branches/SAMBA_4_0/\n   branches/SAMBA_4_0/source/script/tests/Samba4.pm\n\n\nChangeset:\n\nProperty changes on: branches/SAMBA_4_0\n___________________________________________________________________\nName: bzr:revprop:branch-nick\n   - real4\n   + SAMBA_4_0\nName: bzr:merge\n...skipped...\n\nModified: branches/SAMBA_4_0/source/script/tests/Samba4.pm\n===================================================================\n--- branches/SAMBA_4_0/source/script/tests/Samba4.pm\t2007-04-17 00:30:01 UTC (rev 22286)\n+++ branches/SAMBA_4_0/source/script/tests/Samba4.pm\t2007-04-17 00:53:07 UTC (rev 22287)\n@@ -167,6 +167,8 @@\n {\n \tmy ($self, $ldapdir, $basedn, $root, $password, $privatedir, $configuration) = @_;\n \n+\tmkdir($ldapdir);\n+\n \tmy $fedora_ds_inf = \"$ldapdir/fedorads.inf\";\n \tmy $fedora_ds_initial_ldif = \"$ldapdir/fedorads-initial.ldif\";\n \n@@ -206,8 +208,8 @@\n \";\n \tclose(CONF);\n \n-\topen(CONF, \">$fedora_ds_initial_ldif\");\n-\tprint \"\n+\topen(LDIF, \">$fedora_ds_initial_ldif\");\n+\tprint LDIF \"\n # These entries need to be added to get the container for the \n # provision to be aimed at.\n \n@@ -224,7 +226,7 @@\n objectclass: nsBackendInstance\n nsslapd-suffix: $basedn\n \";\n-\tclose(CONF);\n+\tclose(LDIF);\n \n \tsystem(\"perl $ENV{FEDORA_DS_PREFIX}/bin/ds_newinst.pl $fedora_ds_inf >&2\") == 0 or return 0;\n \n@@ -248,7 +250,7 @@\n nsslapd-pluginVendor: Fedora Project\n nsslapd-pluginDescription: Allow bitwise matching rules\n \";\n-\tclose(CONF);\n+\tclose(LDIF);\n \n \tsystem(\"$self->{bindir}/ad2oLschema $configuration -H $privatedir/sam.ldb --option=convert:target=fedora-ds -I $self->{setupdir}/schema-map-fedora-ds-1.0 -O $fedora_ds_dir/schema/99_ad.ldif >&2\");\n \n\n"}