{"category": "ham", "to_address": "samba-cvs@samba.org", "from_address": "metze@samba.org", "subject": "svn commit: samba r22382 - in\n\tbranches/SAMBA_4_0/source/wrepl_server: .", "body": "Author: metze\nDate: 2007-04-19 17:00:15 +0000 (Thu, 19 Apr 2007)\nNew Revision: 22382\n\nWebSVN: http://websvn.samba.org/cgi-bin/viewcvs.cgi?view=rev&root=samba&rev=22382\n\nLog:\nfix memory leak\n\nmetze\nModified:\n   branches/SAMBA_4_0/source/wrepl_server/wrepl_server.c\n\n\nChangeset:\nModified: branches/SAMBA_4_0/source/wrepl_server/wrepl_server.c\n===================================================================\n--- branches/SAMBA_4_0/source/wrepl_server/wrepl_server.c\t2007-04-19 16:50:16 UTC (rev 22381)\n+++ branches/SAMBA_4_0/source/wrepl_server/wrepl_server.c\t2007-04-19 17:00:15 UTC (rev 22382)\n@@ -127,7 +127,7 @@\n \tstruct wreplsrv_partner *partner;\n \tstruct ldb_result *res = NULL;\n \tint ret;\n-\tTALLOC_CTX *tmp_ctx = talloc_new(service);\n+\tTALLOC_CTX *tmp_ctx;\n \tint i;\n \tuint64_t new_seqnumber;\n \n@@ -138,6 +138,9 @@\n \t\treturn NT_STATUS_OK;\n \t}\n \n+\ttmp_ctx = talloc_new(service);\n+\tNT_STATUS_HAVE_NO_MEMORY(tmp_ctx);\n+\n \tservice->config.seqnumber = new_seqnumber;\n \n \t/* find the record in the WINS database */\n\n"}