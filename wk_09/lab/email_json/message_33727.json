{"category": "ham", "to_address": "Martin Zielinski <mz@seh.de>", "from_address": "\"Gerald (Jerry) Carter\" <jerry@samba.org>", "subject": "Re: 3.0.25 publish printer problem", "body": "-----BEGIN PGP SIGNED MESSAGE-----\nHash: SHA1\n\nMartin Zielinski wrote:\n\n> I encounter problems (un)publishing printers to ADS.\n> The samba log shows up the following message:\n> \n> kerberos_kinit_password SERVER$@MY.DOMAIN failed: Cannot \n> contact any KDC for requested realm\n>\n> The error occurs, when the smbd runs through the \n> ads_kinit_password() routine the second time.\n> I've follow the \"data-flow\" until krb5_cc_get_principal() in clikrb5.c.\n> \n> Removing the    \n> \n> ads_kdestroy(\"MEMORY:prtpub_cache\");\n> \n> in line 3294 of nt_printing.c fixes this for me.\n\nMartin,\n\nI don't understand why this would be necessary.  In\nnt_printer_publish() we set the memory ccache again.\n\nI also don't understand why the kinit() in ads_sasl_spnego_bind()\nis failing.  It seems to me that the existing ds_kdestroy()\nin check_printers-Published() is correct and that we should add\none to nt_printer_publish().\n\nWhat am I missing?\n\n\n\n\n\ncheers, jerry\n=====================================================================\nSamba                                    ------- http://www.samba.org\nCenteris                         -----------  http://www.centeris.com\n\"What man is a man who does not make the world better?\"      --Balian\n-----BEGIN PGP SIGNATURE-----\nVersion: GnuPG v1.4.6 (GNU/Linux)\nComment: Using GnuPG with Mozilla - http://enigmail.mozdev.org\n\niD8DBQFGUcuJIR7qMdg1EfYRAr7cAJ4/Xjt06lWlHGJZsKGWvSP3ml7SVACfYgQs\ngiSzpMezwivXVhO7z604aO8=\n=2ieF\n-----END PGP SIGNATURE-----\n\n"}