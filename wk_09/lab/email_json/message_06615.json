{"category": "ham", "to_address": "samba-cvs@samba.org", "from_address": "metze@samba.org", "subject": "svn commit: samba r22255 - in\n\tbranches/SAMBA_3_0_25/source/lib/replace/test: .", "body": "Author: metze\nDate: 2007-04-16 09:44:15 +0000 (Mon, 16 Apr 2007)\nNew Revision: 22255\n\nWebSVN: http://websvn.samba.org/cgi-bin/viewcvs.cgi?view=rev&root=samba&rev=22255\n\nLog:\nmerge from samba4:\n\n- make the strtoll tests more verbose\n- add initial strtoull tests\n\nmetze\nModified:\n   branches/SAMBA_3_0_25/source/lib/replace/test/testsuite.c\n\n\nChangeset:\nModified: branches/SAMBA_3_0_25/source/lib/replace/test/testsuite.c\n===================================================================\n--- branches/SAMBA_3_0_25/source/lib/replace/test/testsuite.c\t2007-04-16 09:44:00 UTC (rev 22254)\n+++ branches/SAMBA_3_0_25/source/lib/replace/test/testsuite.c\t2007-04-16 09:44:15 UTC (rev 22255)\n@@ -478,26 +478,75 @@\n \n static int test_strtoll(void)\n {\n+\tint64_t v;\n+\n \tprintf(\"test: strtoll\\n\");\n-\tif (strtoll(\"15\", NULL, 10) != 15) {\n-\t\tprintf(\"failure: strtoll [\\nstrtoll failed\\n]\\n\");\n+\n+\tv = strtoll(\"15\", NULL, 10);\n+\tif (v != 15) {\n+\t\tprintf(\"failure: strtoll [\\n\"\n+\t\t       \"strtoll failed: %lld != 15\\n\"\n+\t\t       \"]\\n\",\n+\t\t       v);\n \t\treturn false;\n \t}\n-\tif (strtoll(\"10\", NULL, 16) != 16) {\n-\t\tprintf(\"failure: strtoll [\\nstrtoll hex failed\\n]\\n\");\n+\n+\tv = strtoll(\"10\", NULL, 16);\n+\tif (v != 16) {\n+\t\tprintf(\"failure: strtoll [\\n\"\n+\t\t       \"strtoll hex failed: %lld != 16\\n\"\n+\t\t       \"]\\n\",\n+\t\t       v);\n \t\treturn false;\n \t}\n-\tif (strtoll(\"11\", NULL, 2) != 3) {\n-\t\tprintf(\"failure: strtoll [\\nstrtoll binary failed\\n]\\n\");\n+\n+\tv = strtoll(\"11\", NULL, 2);\n+\tif (v != 3) {\n+\t\tprintf(\"failure: strtoll [\\n\"\n+\t\t       \"strtoll binary failed: %lld != 3\\n\"\n+\t\t       \"]\\n\",\n+\t\t       v);\n \t\treturn false;\n \t}\n+\n \tprintf(\"success: strtoll\\n\");\n \treturn true;\n }\n \n static int test_strtoull(void)\n {\n-\t/* FIXME */\n+\tuint64_t v;\n+\n+\tprintf(\"test: strtoull\\n\");\n+\n+\tv = strtoull(\"15\", NULL, 10);\n+\tif (v != 15) {\n+\t\tprintf(\"failure: strtoull [\\n\"\n+\t\t       \"strtoull failed: %llu != 15\\n\"\n+\t\t       \"]\\n\",\n+\t\t       v);\n+\t\treturn false;\n+\t}\n+\n+\tv = strtoull(\"10\", NULL, 16);\n+\tif (v != 16) {\n+\t\tprintf(\"failure: strtoull [\\n\"\n+\t\t       \"strtoull hex failed: %llu != 16\\n\"\n+\t\t       \"]\\n\",\n+\t\t       v);\n+\t\treturn false;\n+\t}\n+\n+\tv = strtoull(\"11\", NULL, 2);\n+\tif (v != 3) {\n+\t\tprintf(\"failure: strtoull [\\n\"\n+\t\t       \"strtoull binary failed: %llu != 3\\n\"\n+\t\t       \"]\\n\",\n+\t\t       v);\n+\t\treturn false;\n+\t}\n+\n+\tprintf(\"success: strtuoll\\n\");\n \treturn true;\n }\n \n\n"}