{"category": "ham", "to_address": "Mathew <theillien@yahoo.com>", "from_address": "\"Tom Phoenix\" <tom@stonehenge.com>", "subject": "Re: Problem with runaway format", "body": "On 7/2/07, Mathew  wrote:\n\n> foreach my $date (@searchDate) {\n>         while (my $ticket = $tix->Next) {\n\nSeeing this worries me. I don't know enough about what's going on to\ntell whether it's wrong or not, but it looks wrong. When the outer\nloop goes on to the second iteration, what does $tix->Next yield? (You\ncould use the debugger to find out.)\n\n> # Format the time spent on each ticket as hh:mm\n> foreach my $user (keys %tickets) {\n>         foreach my $env (keys %{ $tickets{$user} }) {\n>                 foreach my $tikID (keys %{ $tickets{$user}{$env} }) {\n>                         foreach my $subject (keys %{ $tickets{$user}{$env}{$tikID} }) {\n\nYou're doing the same dereferencing, just getting deeper each time.\nYou'll save some time if you make some of those into temporary\nvariables. That fourth nested loop could look more like this, but\npossibly with better variable names:\n\n        my $subjects_hash = $envs_hash->{$env};\n        foreach my $subject (keys %$subjects_hash) {\n\n>                                 my @endTime;\n> #                               my $temp          = $tickets{$user}{$env}{$tikID};\n>                                 my $temp          = $tickets{$user}{$env}{$tikID}{$subject};\n>                                 my $temp2         = $temp / 60;\n>                                 my @temp          = split /\\./, $temp2;\n>                                 $endTime[0]       = $temp[0];\n>                                 $endTime[1]       = $temp % 60;\n> #                               $tickets{$user}{$env}{$tikID} = sprintf '%d:%02d', @endTime[0,1];\n>                                 $tickets{$user}{$env}{$tikID}{$subject} = sprintf '%d:%02d', @endTime[0,1];\n\nThat looks like a difficult way to do it. Maybe something like this?\n\n          $subjects_hash->{$subject} = time_format($subjects_hash->{$subject});\n\nsub time_format {\n    my $arg = shift;\n    return sprintf '%d:%02d', int($arg / 60), $arg % 60;\n}\n\nThat code assumes, as did the original, that the number to be\nformatted is a non-negative integer of seconds or minutes.\n\nGood luck with it!\n\n--Tom Phoenix\nStonehenge Perl Training\n\n-- \nTo unsubscribe, e-mail: beginners-unsubscribe@perl.org\nFor additional commands, e-mail: beginners-help@perl.org\nhttp://learn.perl.org/\n\n\n"}