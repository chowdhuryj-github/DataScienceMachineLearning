{"category": "ham", "to_address": "Volker.Lendecke@SerNet.DE", "from_address": "simo <idra@samba.org>", "subject": "Re: wrt inotify problem", "body": "On Tue, 2007-04-10 at 18:29 +0200, Volker Lendecke wrote:\n> On Tue, Apr 10, 2007 at 12:17:58PM -0400, simo wrote:\n> > > Ok, this is really broken. SELinux allows us to set up\n> > > everything necessary for inotify but then when something\n> > > happens gives us an access denied? Very weird. Trying to\n> > > find a fix.\n> > \n> > Yes I think this is what happens, I will have a fixed policy tomorrow\n> > hopefully.\n> \n> Can you do me a favor and test the attached patch. It\n> compiles for me, but I did not run it yet, so it might well\n> segfault or eat your hard disk.\n> \n> Please check it in if it helps for you.\n\nThis patch seems to cure it, no messages in the logs, and no long\ntimeouts to get directory contents. Of course the proper fix for the\nSELinux case is to have the right policy, but I guess if there are\nlegittimate cases where the ioctl may fail that justify putting this\npatch in anyways.\n\nIdeas?\n\nSimo.\n\n-- \nSimo Sorce\nSamba Team GPL Compliance Officer\nemail: idra@samba.org\nhttp://samba.org\n\n"}