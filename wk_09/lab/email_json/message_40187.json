{"category": "ham", "to_address": "Saptarshi Guha <sapsi@pobox.com>", "from_address": "Prof Brian Ripley <ripley@stats.ox.ac.uk>", "subject": "Re: [R] A question regarding package development", "body": "On Thu, 31 May 2007, Saptarshi Guha wrote:\n\n> Hi,\n> \tI am writing a package which requires the ANN(Approx N.Neighbors)\n> library (found here http://www.cs.umd.edu/~mount/ANN/).\n> \tMy package directory looks something like this\n>\n> \tatry/\n> \tatry/src/ann/   <--ann source is here\n> \tatry/src/ann/include\n> \tatry/src/ann/lib <--ann lib file is here\n> \tatry/src/disp.cpp < my file which requires the ann lib\n>\n> \tThe last file disp.cpp has the include line\n>\n> \tinclude \"ann/ann.h\"\n>\n> \tHow do i modify the R CMD INSTALL process so that i can\n> \t1) build the ann library\n\nYou would need to add a src/Makefile. There are several examples in CRAN \npackages.  Matrix is one, but a complex one.  Runuran is a simple one, \nunfortunately specific to GNU make.\n\n> \t2) provides include paths and lib paths to the R CMD INSTALL process\n> so that atry/src/disp.cpp (my program)  can locate the libs and\n> header files and succesfully compile.\n> \tI tried using Makevars (in the src folder) and adding a INCPATH and\n> LIBS= however that didn't work - the compilation didn't take into\n> account the modified INCPATH.\n\n`Writing R Extensions' tells you about PKG_CPPFLAGS and PKG_LIBS, in the \nsection on 'Makevars', so I don't understand why you used different names.\nThere are lots of examples in CRAN packages.\n\n-- \nBrian D. Ripley,                  ripley@stats.ox.ac.uk\nProfessor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/\nUniversity of Oxford,             Tel:  +44 1865 272861 (self)\n1 South Parks Road,                     +44 1865 272866 (PA)\nOxford OX1 3TG, UK                Fax:  +44 1865 272595\n\n______________________________________________\nR-help@stat.math.ethz.ch mailing list\nhttps://stat.ethz.ch/mailman/listinfo/r-help\nPLEASE do read the posting guide http://www.R-project.org/posting-guide.html\nand provide commented, minimal, self-contained, reproducible code.\n\n"}