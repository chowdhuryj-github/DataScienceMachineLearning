{"category": "ham", "to_address": "\"Erik Iverson\" <iverson@biostat.wisc.edu>", "from_address": "\"Horace Tso\" <Horace.Tso@pgn.com>", "subject": "Re: [R] Imputing missing values in time series", "body": "Erik, indeed it gets the work done. I was hoping to avoid the dreaded looping, though.....\n\nThanks.\n\nHorace\n\n>>> Erik Iverson  6/22/2007 12:01 PM >>>\nI think my example should work for you, but I couldn't think of a way to \ndo this without an interative while loop.\n\ntest <- c(1,2,3,NA,4,NA,NA,5,NA,6,7,NA)\n\nwhile(any(is.na(test)))\ntest[is.na(test)] <- test[which(is.na(test))-1]\n\n  test\n  [1] 1 2 3 3 4 4 4 5 5 6 7 7\n\nHorace Tso wrote:\n> Folks,\n> \n> This must be a rather common problem with real life time series data\n> but I don't see anything in the archive about how to deal with it. I\n> have a time series of natural gas prices by flow date. Since gas is not\n> traded on weekends and holidays, I have a lot of missing values,\n> \n> FDate\tPrice\n> 11/1/2006\t6.28\n> 11/2/2006\t6.58\n> 11/3/2006\t6.586\n> 11/4/2006\t6.716\n> 11/5/2006\tNA\n> 11/6/2006\tNA\n> 11/7/2006\t6.262\n> 11/8/2006\t6.27\n> 11/9/2006\t6.696\n> 11/10/2006\t6.729\n> 11/11/2006\t6.487\n> 11/12/2006\tNA\n> 11/13/2006\tNA\n> 11/14/2006\t6.725\n> 11/15/2006\t6.844\n> 11/16/2006\t6.907\n>  \n> What I would like to do is to fill the NAs with the price from the\n> previous date * gas used during holidays is purchased from the week\n> before. Though real simple, I wonder if there is a function to perform\n> this task. Some of the imputation functions I'm aware of (eg. impute,\n> transcan in Hmisc) seem to deal with completely different problems. \n> \n> 2.5.0/Windows XP\n> \n> Thanks in advance.\n> \n> HT\n> \n> ______________________________________________\n> R-help@stat.math.ethz.ch mailing list\n> https://stat.ethz.ch/mailman/listinfo/r-help \n> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html \n> and provide commented, minimal, self-contained, reproducible code.\n\n______________________________________________\nR-help@stat.math.ethz.ch mailing list\nhttps://stat.ethz.ch/mailman/listinfo/r-help\nPLEASE do read the posting guide http://www.R-project.org/posting-guide.html\nand provide commented, minimal, self-contained, reproducible code.\n\n"}