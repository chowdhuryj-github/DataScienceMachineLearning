{"category": "ham", "to_address": "beginners@perl.org, perl-beginners@moderators.isc.org", "from_address": "\"nobull67@gmail.com\" <nobull67@gmail.com>", "subject": "Re: Effective date grab", "body": "On Jun 1, 5:36 am, theill...@yahoo.com (Mathew Snyder) wrote:\n> A while ago I had posted requesting help with a long block of code that would do\n> all kinds of stuff dealing with the date.  It turned out to not work despite\n> being technically, correct.  Instead of getting help with it, Mr. Phoenix\n> provided me with a block of code that did what I needed but much more concisely.\n>  And, more importantly, correctly.\n>\n> for (1 .. 7) {\n>   $time -= 24*60*60;\n>   my @date = (localtime($time))[3 .. 5];\n>   push @days, (sprintf '%02d', $date[0]);\n>   push @months,(sprintf '%02d',$date[1] + 1);\n>   push @years, $date[2] + 1900;\n>   push @searchDate, join \"-\", ($date[2] + 1900), (sprintf '%02d',$date[1] + 1),\n> (sprintf '%02d', $date[0]);\n\nYou code would be much more readable (but a little slower) with\nstrftime() rather than rolling your own manipulations of the return\nvalue of localtime().\n\n  use POSIX 'strftime';\n  my @date = localtime($time);\n  push @days, strftime '%d', @date;\n  push @months, strftime'%m',@date;\n  push @years, strftime '%Y',@date;\n  push @searchDate, strftime '%Y-%m-%d',@date\n\nBe aware strftime() is in the POSIX module so there's a theoretical\nrisk that it may not be available on all platforms. However AFAIK\nthere are no platforms on which Perl currently runs where\nPOSIX::strftime is not implemented.\n\n> The thing I see being a problem\n> though is that some months have 30 days, some months have 31 days and\n> February has 28/29 days.\n\nThat's not a problem. localtime() knows all about leap years.\n\n>  How can I populate an array of an entire month's worth\n> of dates without worrying about how many days the month has?\n\nProzac?\n\nBut don't simply pop a pill because what you _should_ worry about is\ndaylight saving time which could cause a date to be skipped or\nrepeated.\n\nYou should make sure that $time is not within the first or last hour\nof the day. I would make sure $time starts out at a 12:00.\n\n\n-- \nTo unsubscribe, e-mail: beginners-unsubscribe@perl.org\nFor additional commands, e-mail: beginners-help@perl.org\nhttp://learn.perl.org/\n\n\n"}