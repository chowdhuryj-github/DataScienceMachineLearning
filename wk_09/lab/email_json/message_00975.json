{"category": "ham", "to_address": "perl6-internals@perl.org", "from_address": "\"Patrick R. Michaud\" <pmichaud@pobox.com>", "subject": "Re: [perl #42334] PGE compiler faults out \"set_integer_keyed() not implemented in class 'Undef'\"", "body": "On Sat, Apr 07, 2007 at 11:20:19AM -0700, Jim McKim wrote:\n> The problematic grammar:\n> \n> grammar x_grammar;\n> \n> #token h_digits { <:i[0-9a-f]>+ }\n> #token h_digits { <[0-9a-f]> }\n> \n> token TOK_CONSTANT {\n>         # ( :  )**{1..15}\n>          : \n> }\n\n\nThe error (that PGE is having difficulty catching) is\nthat the cut operator (':') isn't being applied to any\nparticular term in:\n\n    # ( :  )**{1..15}\n\nSo, when PGE sees the ':' cut operator, it attempts to\napply it to the previous pattern and there's not anything\nthere to apply it to, at which point PGE chokes.  PGE should \nreport a more useful exception here.\n\nNote that the leading # does not comment out the entire line\nin this case -- since # is followed by an opening '<' bracket\ncharacter, the comment terminates with the closing '>' bracket [1]\nand not at the end of the line.\n\nSo, I'll take this ticket as being that PGE needs to\nbetter recognize when a 'cut' token is being applied to\na null term and report the error accordingly.\n\nThanks!\n\nPm\n\n[1] http://dev.perl.org/perl6/doc/design/syn/S05.html#New_metacharacters\n\n"}