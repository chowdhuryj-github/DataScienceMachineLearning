{"category": "ham", "to_address": "samba-cvs@samba.org", "from_address": "metze@samba.org", "subject": "svn commit: samba r22622 - in branches/SAMBA_4_0/source:\n\tlib/cmdline scripting/ejs", "body": "Author: metze\nDate: 2007-05-01 03:25:17 +0000 (Tue, 01 May 2007)\nNew Revision: 22622\n\nWebSVN: http://websvn.samba.org/cgi-bin/viewcvs.cgi?view=rev&root=samba&rev=22622\n\nLog:\nmake it possible to pass the config file via 'SMB_CONF_PATH' envvar\n\nvery usefull for make testenv!\n\nthis makes it also possible to pass a config file to smbscript\n\nmetze\nModified:\n   branches/SAMBA_4_0/source/lib/cmdline/popt_common.c\n   branches/SAMBA_4_0/source/scripting/ejs/smbscript.c\n\n\nChangeset:\nModified: branches/SAMBA_4_0/source/lib/cmdline/popt_common.c\n===================================================================\n--- branches/SAMBA_4_0/source/lib/cmdline/popt_common.c\t2007-05-01 03:22:17 UTC (rev 22621)\n+++ branches/SAMBA_4_0/source/lib/cmdline/popt_common.c\t2007-05-01 03:25:17 UTC (rev 22622)\n@@ -69,6 +69,10 @@\n \n \t\t/* and logging */\n \t\tsetup_logging(pname, DEBUG_STDOUT);\n+\n+\t\tif (getenv(\"SMB_CONF_PATH\")) {\n+\t\t\tlp_set_cmdline(\"config file\", getenv(\"SMB_CONF_PATH\"));\n+\t\t}\n \t\treturn;\n \t}\n \n\nModified: branches/SAMBA_4_0/source/scripting/ejs/smbscript.c\n===================================================================\n--- branches/SAMBA_4_0/source/scripting/ejs/smbscript.c\t2007-05-01 03:22:17 UTC (rev 22621)\n+++ branches/SAMBA_4_0/source/scripting/ejs/smbscript.c\t2007-05-01 03:25:17 UTC (rev 22622)\n@@ -52,6 +52,10 @@\n \n \tfault_setup(argv[0]);\n \n+\tif (getenv(\"SMB_CONF_PATH\")) {\n+\t\tlp_set_cmdline(\"config file\", getenv(\"SMB_CONF_PATH\"));\n+\t}\n+\n \tldb_global_init();\n \n \tgensec_init();\n\n"}