{"category": "ham", "to_address": "r-help@stat.math.ethz.ch", "from_address": "Jari Oksanen <jari.oksanen@oulu.fi>", "subject": "Re: [R] Error using mgcv package", "body": "spime  gmail.com> writes:\n\n> \n> \n> Hi all,\n> \n> I need some solution in the following problem. The following error appears\n> when i use \"mgcv\" package for implementing GAM. But the same formula works\n> fine in \"gam\" package.\n> \n> > model.gam <- gam(formula = RES ~\n> > CAT01+s(NUM01,5)+CAT02+CAT03+s(NUM02,5)+CAT04+\n> + CAT05+s(NUM03,5)+CAT06+CAT07+s(NUM04,5)+CAT08+s(NUM05,5)+CAT09+\n> + CAT10+s(NUM06,5)+CAT11+NUM07+CAT12+CAT13,\n> + family = binomial(link = logit), data = train.data,na.action = na.exclude,\n> + control = list(epsilon = 0.001,bf.epsilon = 0.001, maxit = 50, \n> + bf.maxit = 10, trace = F))\n> \n> Error in terms.formula(reformulate(term[i])) : \n>         invalid model formula in ExtractVars\n> \nIt seems that nobody answered this (in public). \n\nIt seems that function s() in mgcv is defined as:\n\ns(..., k = -1, fx = FALSE, bs = \"tp\", m = 0, by = NA) \n\n(Like you see reading its help ?s). The function definition starts with \"...\",\nand after three dots you cannot use positional arguments, but you must give the\nfull argument name. Try replacing s(NUM01, 5) with s(NUM01, k=5). See also help\nin mgcv (?s pointing to ?choose.k) for interpreting argument 'k' which is not\ndirectly degrees of freedom.\n\nThere may be other problems, but this probably fixes tha one you reported above.\n\ncheers, jari oksanen\n\n> And after deleting df's \n> \n> model.gam <- gam(formula = RES ~ CAT01+s(NUM01)+CAT02+CAT03+s(NUM02)+CAT04+\n> + CAT05+s(NUM03)+CAT06+CAT07+s(NUM04)+CAT08+s(NUM05)+CAT09+\n> + CAT10+s(NUM06)+CAT11+NUM07+CAT12+CAT13,\n> + family = binomial(link = logit), data = train.data)\n> \n> Error in smooth.construct.tp.smooth.spec(object, data, knots) : \n>         A term has fewer unique covariate combinations than specified\n> maximum degrees of freedom\n> \n> Can anybody show me some light in this case!!!\n> \n> Thanks in advance.\n\n______________________________________________\nR-help@stat.math.ethz.ch mailing list\nhttps://stat.ethz.ch/mailman/listinfo/r-help\nPLEASE do read the posting guide http://www.R-project.org/posting-guide.html\nand provide commented, minimal, self-contained, reproducible code.\n\n"}