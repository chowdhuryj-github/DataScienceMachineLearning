{"category": "ham", "to_address": "\"Tim Bergsma\" <timb@metrumrg.com>", "from_address": "\"hadley wickham\" <h.wickham@gmail.com>", "subject": "Re: [R] test for nested factors", "body": "On 6/4/07, Tim Bergsma  wrote:\n> Is there a conventional way to test for nested factors?  I.e., if 'a'\n> and 'b' are lists of same-length factors, does each level specified by\n> 'a' correspond to exactly one level specified by 'b'?\n>\n> The function below seems to suffice, but I'd be happy to know of a more\n> succinct solution, if it already exists.\n\nHow about:\n\n\"%nested%\" <- function(a, b) {\n\tif (is.list(a)) a <- do.call(\"interaction\", c(a, drop=TRUE))\n\tif (is.list(b)) b <- do.call(\"interaction\", c(b, drop=TRUE))\n\t\n\tlength(unique(a))  == length(unique(interaction(a, b, drop=TRUE)))\n}\n\nCO2$Plant %nested% CO2[,c(\"Type\",\"Treatment\")] #TRUE\nCO2$Plant %nested% (CO2$uptake < mean(CO2$uptake)) #FALSE\n\n?\n\nHadley\n\n______________________________________________\nR-help@stat.math.ethz.ch mailing list\nhttps://stat.ethz.ch/mailman/listinfo/r-help\nPLEASE do read the posting guide http://www.R-project.org/posting-guide.html\nand provide commented, minimal, self-contained, reproducible code.\n\n"}