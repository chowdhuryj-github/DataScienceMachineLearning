{"category": "ham", "to_address": "sugar@laptop.org", "from_address": "Simon McVittie <simon.mcvittie@collabora.co.uk>", "subject": "Re: [sugar] [patch][connect-activity] Update to high-level API in\n\tlatest dbus-python", "body": "-----BEGIN PGP SIGNED MESSAGE-----\nHash: SHA1\n\nOn Tue, 08 May 2007 at 11:27:40 +0100, Dafydd Harries wrote:\n> Ar 04/05/2007 am 19:16, ysgrifennodd Simon McVittie:\n> > -def guess(x):\n> > ...\n> \n> telepathy-python's examples/account.py currently does something like guess()\n> rather than something like decode(). That should probably be changed.\n\nAgreed.\n\n> > -# Needed for now, as dbus-python's high-level API doesn't support connecting\n> > -# to arbitrary addresses, or daemonless connections.\n> >  import _dbus_bindings\n> >  import dbus.lowlevel\n> \n> Are these still necessary?\n\nRemoved in a later patch.\n\n> > +dbus_main_loop = DBusGMainLoop(set_as_default=True)\n> \n> Statements in libraries considered dubious. In other words, \"import x\"\n> shouldn't cause side-effects.\n\n\"import dbus.glib\" causes side-effects (and is vaguely deprecated for\nthat reason), I'm just making it more explicit here. This should probably\nbe moved to activity.py and gtkui.py though.\n\nI believe bits of Sugar also import dbus.glib, causing the same magical\nside-effects.\n\n> What does this actually do? Does it create a new GLib mainloop? Will it cause\n> odd things to happen if another DBusGMainLoop loop has already been installed?\n\nIt uses the global default GLib main loop, and is harmless to do\nmultiple times.\n\n> >  def print_dbus_message(msg):\n> ...\n> Is this still used? If not, remove it.\n\nWill do.\n\n> > +logging.basicConfig()\n> > +_logger = logging.getLogger('connect-activity.client')\n> \n> Is this idempotent? The documentation is ambiguous:\n> \n>   Does basic configuration for the logging system by creating a StreamHandler\n>   with a default Formatter and adding it to the root logger. The functions\n>   debug(), info(), warning(), error() and critical() will call basicConfig()\n>   automatically if no handlers are defined for the root logger.\n> \n> Does this cause side effects if a handler is defined for the root logger\n> already? (Whatever that means. :P)\n\nlogging.basicConfig() has no effect if there is already a handler on the\nroot logger, although this call ought to be in gtkui.py really (Sugar\nalready sets up a handler for the root logger).\n-----BEGIN PGP SIGNATURE-----\nVersion: GnuPG v1.4.6 (GNU/Linux)\nComment: OpenPGP key: http://www.pseudorandom.co.uk/2003/contact/ or pgp.net\n\niD8DBQFGQGKAWSc8zVUw7HYRAp6yAKCepEPYtohU8Zlzm1OClOWWUlphvwCfV8cn\noACzqPBy7hWwO6Pw2slXPW4=\n=eka3\n-----END PGP SIGNATURE-----\n_______________________________________________\nSugar mailing list\nSugar@laptop.org\nhttp://mailman.laptop.org/mailman/listinfo/sugar\n\n"}