{"category": "ham", "to_address": "\"Juan Pablo Lewinger\" <lewinger@usc.edu>", "from_address": "\"hadley wickham\" <h.wickham@gmail.com>", "subject": "Re: [R] Controlling text and strip arrangement in xyplot", "body": "On 6/19/07, Juan Pablo Lewinger  wrote:\n> I've searched the archives and read the xyplot help but can't figure\n> out the 2 lattice questions below?\n>\n> Consider:\n>\n> library(lattice)\n> DF <- data.frame(x=rnorm(20), y=rnorm(20), g1=rep(letters[1:2], 10),\n>                   g2=rep(LETTERS[1:2], each=10),\n> g3=rep(rep(letters[3:4],each=5),2))\n>\n> xyplot(y ~ x | g1 + g2, groups=g3, data=DF)\n>\n> 1) Is there a way to get one strip per row and column of panels as\n> below instead of the default?\n>\n>\n>         _|__a__|__b__|\n>          |\n>        B\n>          |\n>         --\n>          |\n>        A\n>          |\n\nInstead of using lattice, you could use ggplot2\n(http://had.co.nz/ggplot2), where this is the default:\n\n(p <- qplot(x, y, data=DF, facets = g1 ~ g2))\n\n> 2) How do I control the text of the strips so that for instance\n> instead of \"a\" and \"b\" it reads\"g1=alpha\", \"g1=beta\" where \"alpha\"\n> and \"beta\" stand for the corresponding greek symbols? (my difficulty\n> here is not with the plotmath symbols but with controlling the text\n> of the strips directly from the call to xyplot and not by renaming\n> the levels of g1)\n\nIt's also possible to do this in ggplot, but some bugs currently stop\nit from working. It will work in the next version to be released next\nweek:\n\np$strip.text <- function(variable, value) {\n\tgreek <- c(\"A\" = \"alpha\", \"B\" = \"beta\")[value]\n\tmakelabel <- function(g) substitute(variable == greek,\nlist(variable=as.name(variable), greek=as.name(g)))\n\n\tlapply(greek, makelabel)\n}\np\n\nHadley\n\n______________________________________________\nR-help@stat.math.ethz.ch mailing list\nhttps://stat.ethz.ch/mailman/listinfo/r-help\nPLEASE do read the posting guide http://www.R-project.org/posting-guide.html\nand provide commented, minimal, self-contained, reproducible code.\n\n"}