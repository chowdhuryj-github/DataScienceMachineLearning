{"category": "ham", "to_address": "\"John Kane\" <jrkrideau@yahoo.ca>, \"R R-help\" <r-help@stat.math.ethz.ch>", "from_address": "\"Nordlund, Dan (DSHS/RDA)\" <NordlDJ@dshs.wa.gov>", "subject": "Re: [R] sas.get problem : the saga continues.", "body": "> -----Original Message-----\n> From: r-help-bounces@stat.math.ethz.ch \n> [mailto:r-help-bounces@stat.math.ethz.ch] On Behalf Of John Kane\n> Sent: Friday, April 13, 2007 1:37 PM\n> To: R R-help\n> Subject: Re: [R] sas.get problem : the saga continues.\n> \n> \n> #Continuing my sas.get saga.  Hmisc has been been\n> updated however I am still\n> getting the same problem. I seem to have aa SAS\n> problem  as well as\n>  an R problem.  There seems to be something dodgy in\n> the SAS data or\n> format files since SAS will not read the file unless I\n> use\n>  LIBNAME library = 'F:\\testsas'\n>  Something like\n>  LIBNAME dd1 = 'F:\\testsas'\n>  will not work and it should whereas Libname\n> dd1=\"C:\\Temp\\testsas\"  does.\n>  \n> However I still cannot get sas.get to read a simple\n> file which does work with\n> LIBNAME dd1 = 'F:\\testsas' .  Can anyone see if I am\n> misreading the Help or\n> making some kind of stupid typing mistake? I also have\n> tried running it on the\n> C drive with no luck. Thanks\n> \n> Windows XP, R 2.4.1\n> \n>  ###### EXAMPLE  #########\n>  #### SAS PROGRAM for simple file.  ###\n> libname  LIBRARY 'F:\\testsas';\n> proc format library= LIBRARY;\n> value catfmt 1 = \"Siam\"\n>              2 = \"Persian\"\n>              3 = \"Cougar\";\n> value dogfmt 1 = \"Lab\"\n>              2 = \"Collie\"\n>              3 = \"Coyote\";\n> run;\n> data library.animals;\n>    input cat dog;\n>    datalines;\n> 1 3\n> 2 2\n> 3 1\n> ;\n> \n> Data LIBRARY.doms;\n>  set LIBRARY.Animals ;\n>  format cat catfmt. dog  dogfmt.;\n>  proc freq;\n>  run;\n>  \n> #####\n> #   Apply sas.get\n> \n> library(Hmisc)\n> mydata <- sas.get(library=\"F:/testsas\", mem=\"doms\",\n>              format.library=\"F:/testsas\",\n>   sasprog = '\"C:/Program Files/SAS/SAS 9.1/sas.exe\"')\n> \n> RESULTS\n> \n> > library(Hmisc)\n> > mydata <- sas.get(library=\"C:/Temp/testsas\",\n> mem=\"doms\",\n> +              format.library=\"C:/Temp/testsas\",\n> +   sasprog = '\"C:/Program Files/SAS/SAS\n> 9.1/sas.exe\"')\n> The filename, directory name, or volume label syntax\n> is incorrect.\n> Error in sas.get(library = \"C:/Temp/testsas\", mem =\n> \"doms\", format.library = \"C:/Temp/testsas\",  :\n>         SAS job failed with status 1\n> In addition: Warning message:\n> 'cmd' execution failed with error code 1 in:\n> shell(cmd, wait = TRUE, intern = output)\n\nJohn,\n\nYou may have missed my earlier post about this.  The problem you are having with SAS is the value you are passing in the sasprog parameter.  You need to drop the single quotes, like the following \n\nsasprog = \"C:/Program Files/SAS/SAS 9.1/sas.exe\"\n\nsas.get() calls a function, shQuote(), which wraps the program name in double quotes and then escapes the double quotes you are passing, which messes up the program name that Windows sees.\n\nI don't understand exactly what problem you are having with the library names.  If I take your code and replace every instance of LIBRARY (in all caps) with dd1, your program runs just fine on my WinXP Pro system.  If changing the sasprog parameter value as above doesn't work, write back to the R-help with the errors you get and someone (maybe even me :-) should be able to help.\n\nHope this is helpful,\n\nDan\n\nDaniel J. Nordlund\nResearch and Data Analysis\nWashington State Department of Social and Health Services\nOlympia, WA  98504-5204\n\n______________________________________________\nR-help@stat.math.ethz.ch mailing list\nhttps://stat.ethz.ch/mailman/listinfo/r-help\nPLEASE do read the posting guide http://www.R-project.org/posting-guide.html\nand provide commented, minimal, self-contained, reproducible code.\n\n"}