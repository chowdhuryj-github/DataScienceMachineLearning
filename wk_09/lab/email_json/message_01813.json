{"category": "ham", "to_address": "samba-cvs@samba.org", "from_address": "jra@samba.org", "subject": "svn commit: samba r22154 - in branches: SAMBA_3_0/source/include\n\tSAMBA_3_0/source/libsmb SAMBA_3_0_25/source/include\n\tSAMBA_3_0_25/source/libsmb", "body": "Author: jra\nDate: 2007-04-10 18:12:25 +0000 (Tue, 10 Apr 2007)\nNew Revision: 22154\n\nWebSVN: http://websvn.samba.org/cgi-bin/viewcvs.cgi?view=rev&root=samba&rev=22154\n\nLog:\nMake struct smbdb_ctx an opaque pointer so users of the API\ndon't need to have tdb.h.\nJeremy.\n\nModified:\n   branches/SAMBA_3_0/source/include/smb_share_modes.h\n   branches/SAMBA_3_0/source/libsmb/smb_share_modes.c\n   branches/SAMBA_3_0_25/source/include/smb_share_modes.h\n   branches/SAMBA_3_0_25/source/libsmb/smb_share_modes.c\n\n\nChangeset:\nModified: branches/SAMBA_3_0/source/include/smb_share_modes.h\n===================================================================\n--- branches/SAMBA_3_0/source/include/smb_share_modes.h\t2007-04-10 16:04:22 UTC (rev 22153)\n+++ branches/SAMBA_3_0/source/include/smb_share_modes.h\t2007-04-10 18:12:25 UTC (rev 22154)\n@@ -33,13 +33,9 @@\n # endif\n #endif\n \n-#include \"tdb.h\"\n+/* Opaque database context handle. */\n+struct smbdb_ctx;\n \n-/* Database context handle. */\n-struct smbdb_ctx {\n-\tTDB_CONTEXT *smb_tdb;\n-};\n-\n /* Share mode entry. */\n /*\n  We use 64 bit types for device and inode as\n\nModified: branches/SAMBA_3_0/source/libsmb/smb_share_modes.c\n===================================================================\n--- branches/SAMBA_3_0/source/libsmb/smb_share_modes.c\t2007-04-10 16:04:22 UTC (rev 22153)\n+++ branches/SAMBA_3_0/source/libsmb/smb_share_modes.c\t2007-04-10 18:12:25 UTC (rev 22154)\n@@ -28,6 +28,11 @@\n #include \"includes.h\"\n #include \"smb_share_modes.h\"\n \n+/* Database context handle. */\n+struct smbdb_ctx {\n+\tTDB_CONTEXT *smb_tdb;\n+};\n+\n /* Remove the paranoid malloc checker. */\n #ifdef malloc\n #undef malloc\n\nModified: branches/SAMBA_3_0_25/source/include/smb_share_modes.h\n===================================================================\n--- branches/SAMBA_3_0_25/source/include/smb_share_modes.h\t2007-04-10 16:04:22 UTC (rev 22153)\n+++ branches/SAMBA_3_0_25/source/include/smb_share_modes.h\t2007-04-10 18:12:25 UTC (rev 22154)\n@@ -33,13 +33,9 @@\n # endif\n #endif\n \n-#include \"tdb.h\"\n+/* Opaque database context handle. */\n+struct smbdb_ctx;\n \n-/* Database context handle. */\n-struct smbdb_ctx {\n-\tTDB_CONTEXT *smb_tdb;\n-};\n-\n /* Share mode entry. */\n /*\n  We use 64 bit types for device and inode as\n\nModified: branches/SAMBA_3_0_25/source/libsmb/smb_share_modes.c\n===================================================================\n--- branches/SAMBA_3_0_25/source/libsmb/smb_share_modes.c\t2007-04-10 16:04:22 UTC (rev 22153)\n+++ branches/SAMBA_3_0_25/source/libsmb/smb_share_modes.c\t2007-04-10 18:12:25 UTC (rev 22154)\n@@ -28,6 +28,11 @@\n #include \"includes.h\"\n #include \"smb_share_modes.h\"\n \n+/* Database context handle. */\n+struct smbdb_ctx {\n+\tTDB_CONTEXT *smb_tdb;\n+};\n+\n /* Remove the paranoid malloc checker. */\n #ifdef malloc\n #undef malloc\n\n"}