{"category": "ham", "to_address": "r-help@stat.math.ethz.ch", "from_address": "nicolas bertin <nbertin@gsc.riken.jp>", "subject": "[R] Error in clusterApply(): recursive default argument reference", "body": "Hi,\n\nI want to compute a distribution of the intersection of a graph and\n'randomized' graphs induced by the permutations of node labels (to\npreserve the graph topology).\nSince I ll have many permutations to perform, I was thinking of using\nthe snow package and in particular \"parSapply\" to divide the work\nbetween my 4 CPUs.\nBut I get the following error message :\n\nError in clusterApply(cl, splitList(x, length(cl)), lapply, fun, ...) : \n        recursive default argument reference\n\nWhat am i doing wrong ?\n\nSome details about my platform and R version :\n-----------------------------------------------\n$platform\n[1] \"x86_64-redhat-linux-gnu\"\n$version.string\n[1] \"R version 2.4.1 (2006-12-18)\"\n\n\nBelow is the snippet of code generating the error message :\n-----------------------------------------------------------\n### libraries ###\nlibrary(graph)\nlibrary(snow)\n\n### functions ###\nnullDistribIntersection <- function(g1, g2, perm=1000)\n{\n  n1 <- nodes(g1)\n  sapply(1:perm,\n\t  function(i)\n\t  {\n            nodes(g1) <- sample(n1)\n\t    numEdges(intersection(g1,g2))\n\t  }\n\t )\n}\n\n\nparNullDistribIntersection <- function(g1, g2, perm=1000, cl=cl)\n{\n  n1 <- nodes(g1)\n  parSapply(cl, 1:perm,\n\t  function(i)\n\t  {\n            nodes(g1) <- sample(n1)\n\t    numEdges(intersection(g1,g2))\n\t  }\n\t )\n}\n\n\n## initialize the graph and the rand seed\nset.seed(123)\ng <- randomEGraph(LETTERS[1:15], edges = 100)\n\n## compute a distribution of the intersection of the graph \n## and a 'randomized' graph induced by the permutations of\n## node labels (to preserve the graph topology)\ncat(\"1CPU sys time:\",\n    system.time(\n                 dist <- nullDistribIntersection(g,g)\n               ),\n    \"\\n\"\n    )\n\ncl <- makeCluster(c(\"localhost\", \"localhost\"), type = \"SOCK\")\ncat(\"Cluster sys time:\",\n    system.time(\n                 dist <- parNullDistribIntersection(g,g)\n               ),\n    \"\\n\"\n    )\n----------------------------------------------------------------\n\nThanks in advance.\n\nNicolas Bertin \nGSC / RIKEN Yokohama\n\n______________________________________________\nR-help@stat.math.ethz.ch mailing list\nhttps://stat.ethz.ch/mailman/listinfo/r-help\nPLEASE do read the posting guide http://www.R-project.org/posting-guide.html\nand provide commented, minimal, self-contained, reproducible code.\n\n"}