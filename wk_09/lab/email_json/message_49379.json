{"category": "ham", "to_address": "samba-cvs@samba.org", "from_address": "tridge@samba.org", "subject": "Rev 597: too much haste causes bugs ..... (my bug,\n\tnot ronnies) in http://samba.org/~tridge/3_0-ctdb", "body": "------------------------------------------------------------\nrevno: 597\nrevision-id: tridge@samba.org-20070617012205-k626bylogn6ky4tr\nparent: tridge@samba.org-20070617005644-hzr9y3f2g28asx9y\ncommitter: Andrew Tridgell \nbranch nick: s3-ctdb-tridge\ntimestamp: Sun 2007-06-17 11:22:05 +1000\nmessage:\n  too much haste causes bugs ..... (my bug, not ronnies)\nmodified:\n  source/nsswitch/winbindd_util.c winbindd_util.c-20070210173807-1wjifrbwaz6xnmgl-754\n=== modified file 'source/nsswitch/winbindd_util.c'\n--- a/source/nsswitch/winbindd_util.c\t2007-06-17 00:56:44 +0000\n+++ b/source/nsswitch/winbindd_util.c\t2007-06-17 01:22:05 +0000\n@@ -104,9 +104,9 @@\n \tconst char **ignored_domains, **dom;\n \t\n \tignored_domains = lp_parm_string_list(-1, \"winbind\", \"ignore domains\", NULL);\n-\tfor (dom=ignored_domains; *dom; dom++) {\n-\t\tif (gen_fnmatch(*dom, domain_name) != 0) {\n-\t\t\tDEBUG(2,(\"Ignoring domain '%s'\\n\", *dom));\n+\tfor (dom=ignored_domains; dom && *dom; dom++) {\n+\t\tif (gen_fnmatch(*dom, domain_name) == 0) {\n+\t\t\tDEBUG(2,(\"Ignoring domain '%s'\\n\", domain_name));\n \t\t\treturn NULL;\n \t\t}\n \t}\n\n"}