{"category": "ham", "to_address": "beginners@perl.org", "from_address": "\"Vahid Moghaddasi\" <vahid.moghaddasi@gmail.com>", "subject": "grep from one file and write to another", "body": "Hi all,\nI am trying to read a colon delimited text file (filter.in) then\nsearch for each field in another file (/etc/passwd) and if it is found\nthen write that line in the third file (passwd.out). Here is what I\nhave written so far but it is not given me the correct result. Thanks\nfor any help.\n\n\n#!/bin/perl\n#\n# the format of filter.in is user1:user2:user3:user4:\n#\nuse File::Copy;\nuse strict;\nuse warnings;\n$|=1;           # flush output buffer\nopen (FILTERfh, \"< filter.in\") || die \"Can not open filter.in: $!\\n\";\nopen PASSWDfh, 'passwd.out\";\nwhile () {\nchomp;\nmy @input = split /:/, $_;\n    for (my $user = 1; $user <= $#input ; $user++) {\n        print \"$input[$user] is being added.\\n\";\n        while () {\n                my %seen;\n                next if (m/^#/);        # Skip comments\n                next if (m/^\\s*$/);     # Skip blank lines\n                my ($field1) = /([^:]+)/;\n#      print PASSWDFILfh $_ unless $seen{$field1} or warn\n#      \"WARNING: User $input[$user] does not exist!\\n\";\n      print PASSWDFILfh $_ unless $input[$user] or warn\n      \"WARNING: User $input[$user] does not exist!\\n\";\n# print PASSWDFILfh $_ if(\"$field1\" eq \"$input[$user]\");\n#        print PASSWDFILfh $_ if( grep(/$field1:/, $_ )) or warn\n\"WARNING: User $input[$user] does not exist!\\n\";\n     } # while\n} # for\n} # while\nclose FILTERfh;\nclose PASSWDFILfh;\nclose PASSWDfh;\n\n-- \nTo unsubscribe, e-mail: beginners-unsubscribe@perl.org\nFor additional commands, e-mail: beginners-help@perl.org\nhttp://learn.perl.org/\n\n\n"}