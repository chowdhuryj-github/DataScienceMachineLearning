{"category": "ham", "to_address": "Keith Alan Chamberlain <Keith.Chamberlain@Colorado.EDU>", "from_address": "(Ted Harding) <efh@nessie.mcc.ac.uk>", "subject": "Re: [R] A More efficient method?", "body": "On 04-Jul-07 13:44:44, Keith Alan Chamberlain wrote:\n> Dear Rhelpers,\n> \n> Is there a faster way than below to set a vector based on values\n> from another vector? I'd like to call a pre-existing function for\n> this, but one which can also handle an arbitrarily large number\n> of categories. Any ideas?\n> \n> Cat=c('a','a','a','b','b','b','a','a','b')    # Categorical variable\n> C1=vector(length=length(Cat)) # New vector for numeric values\n> \n># Cycle through each column and set C1 to corresponding value of Cat.\n> for(i in 1:length(C1)){\n>       if(Cat[i]=='a') C1[i]=-1 else C1[i]=1\n> }\n> \n> C1\n> [1] -1 -1 -1  1  1  1 -1 -1  1\n> Cat\n> [1] \"a\" \"a\" \"a\" \"b\" \"b\" \"b\" \"a\" \"a\" \"b\"\n\n> Cat=c('a','a','a','b','b','b','a','a','b')\n\n> Cat==\"b\" \n[1] FALSE FALSE FALSE  TRUE  TRUE  TRUE FALSE FALSE  TRUE\n\n> (Cat==\"b\") - 0.5\n[1] -0.5 -0.5 -0.5  0.5  0.5  0.5 -0.5 -0.5  0.5\n\n> 2*((Cat==\"b\") - 0.5)\n[1] -1 -1 -1  1  1  1 -1 -1  1\n\nto give one example of a way to do it. But you don't say why you\nreally want to do this. You may really want factors. And what do\nyou want to see if there is \"an arbitrarily large number of\ncategories\"?\n\nFor instance:\n\n> factor(Cat,labels=c(-1,1))\n[1] -1 -1 -1 1  1  1  -1 -1 1 \n\nbut this is not a vector, but a \"factor\" object. To get the vector,\nyou need to convert Cat to an integer:\n\n> as.integer(factor(Cat))\n[1] 1 1 1 2 2 2 1 1 2\n\nwhere (unless you've specified otherwise in factor()) the values\nwill correspond to the elements of Cat in \"natural\" order, in this\ncase first \"a\" (-> 1), then \"b\" (-> 2).\n\nE.g.\n\n> Cat2<-c(\"a\",\"a\",\"c\",\"b\",\"a\",\"b\")\n> as.integer(factor(Cat2))\n[1] 1 1 3 2 1 2\n\nso, with C2<-as.integer(factor(Cat2)), you get a vector of distinct\nintegers 91,2,3) for the distinct levels (\"a\",\"b\",\"c\") of Cat2.\nIf you want integer values for these levels, you can write a function\nto change them.\n\nHoping this helps to beark the ice!\nTed.\n\n\n--------------------------------------------------------------------\nE-Mail: (Ted Harding) \nFax-to-email: +44 (0)870 094 0861\nDate: 04-Jul-07                                       Time: 16:44:20\n------------------------------ XFMail ------------------------------\n\n______________________________________________\nR-help@stat.math.ethz.ch mailing list\nhttps://stat.ethz.ch/mailman/listinfo/r-help\nPLEASE do read the posting guide http://www.R-project.org/posting-guide.html\nand provide commented, minimal, self-contained, reproducible code.\n\n"}