{"category": "ham", "to_address": "perl6-internals@perl.org", "from_address": "Jonathan Worthington <jonathan@jnthn.net>", "subject": "Usage of PARROT_API", "body": "Hi,\n\nI built Parrot for the first time in a while today and got errors like:\n\nsrc\\extend.c(78) : error C2375: 'Parrot_PMC_get_string_intkey' : \nredefinition; different linkage .\\include\\parrot/extend.h(60) : see \ndeclaration of 'Parrot_PMC_get_string_intkey'\n\nIf you use PARROT_API in a C implementation file (.c), you must make \nsure you also use it in the header file (.h). You can put it just in the \nheader file and not in the implementation file and it's fine, but the \nother way round doesn't work. I have sprinkled PARROT_API in extend.h \nand io.h as required to get the Parrot executable to build - hopefully \nthis is an OK thing to have done; I'm still catching up on what's been \ngoing on while I've been away.\n\nSeems that nci_test.c has different, but related problems with \ninconsistent use of PARROT_API, though I've not time to look into this \nright now.\n\nThanks,\n\nJonathan\n\n"}